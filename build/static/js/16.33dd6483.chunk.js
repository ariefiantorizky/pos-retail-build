(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[16],{326:function(e,t,a){"use strict";a(69),a(327)},327:function(e,t,a){},354:function(e,t,a){"use strict";var n=a(1),l=a.n(n),s=a(16),i=a.n(s),o=a(468),r=a(304),c=a.n(r);class d extends l.a.Component{render(){return null}}d.propsTypes={label:i.a.string.isRequired,value:i.a.oneOfType([i.a.number,i.a.bool,i.a.string,i.a.func]).isRequired};class h extends l.a.Component{render(){return null}}h.propsTypes={name:i.a.string.isRequired,data:i.a.arrayOf(i.a.object),dataSet:i.a.arrayOf(i.a.object),value:i.a.oneOfType([i.a.array,i.a.func]).isRequired,children:i.a.arrayOf(((e,t)=>{if(e[t]!==d)throw new Error("<ExcelSheet> can only have <ExcelColumn> as children")})).isRequired};const u=e=>{const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let n=0;n!==e.length;n+=1)a[n]=255&e.charCodeAt(n);return t},p=(e,t)=>{t&&(e+=1462);return(Date.parse(e)-new Date(Date.UTC(1899,11,30)))/864e5};function m(e,t,a){const n={v:e};if(null===e)return;const l=e instanceof Date;l||"object"!==typeof e||(n.s=e.style,n.v=e.value,e=e.value),"number"===typeof e?n.t="n":"boolean"===typeof e?n.t="b":l?(n.t="n",n.z=c.a.SSF.table[14],n.v=p(n.v)):n.t="s",a[t]=n}function f(e,t,a,n,l){e.s.r>t+n&&(e.s.r=t+n),e.s.c>a+l&&(e.s.c=a+l),e.e.r<t+n&&(e.e.r=t+n),e.e.c<a+l&&(e.e.c=a+l)}var y=a(13);class b extends l.a.Component{constructor(e){super(e),this.fileExtensions=["xlsx","xls","csv","txt","html"],this.defaultFileExtension="xlsx";const{hideElement:t}=this.props;t?this.download():this.handleDownload=this.download.bind(this),this.createSheetData=this.createSheetData.bind(this)}createSheetData(e){const t=e.props.children,a=[l.a.Children.map(t,(e=>e.props.label))];return("function"===typeof e.props.data?e.props.data():e.props.data).forEach((e=>{const n=[];l.a.Children.forEach(t,(t=>{const a=("function"===typeof t.props.value?t.props.value:e=>e[t.props.value])(e);n.push(isNaN(a)?a||"":a)})),a.push(n)})),a}download(){const{children:e}=this.props,t={SheetNames:l.a.Children.map(e,(e=>e.props.name)),Sheets:{}};l.a.Children.forEach(e,(e=>{"undefined"===typeof e.props.dataSet||0===e.props.dataSet.length?t.Sheets[e.props.name]=(e=>{const t={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let n=0;n!==e.length;++n)for(let l=0;l!==e[n].length;++l){a.s.r>n&&(a.s.r=n),a.s.c>l&&(a.s.c=l),a.e.r<n&&(a.e.r=n),a.e.c<l&&(a.e.c=l);const s={v:e[n][l]};if(null===s.v)continue;const i=c.a.utils.encode_cell({c:l,r:n});"number"===typeof s.v?s.t="n":"boolean"===typeof s.v?s.t="b":s.v instanceof Date?(s.t="n",s.z=c.a.SSF.table[14],s.v=p(s.v)):s.t="s",t[i]=s}return a.s.c<1e7&&(t["!ref"]=c.a.utils.encode_range(a)),t})(this.createSheetData(e)):t.Sheets[e.props.name]=(e=>{if(void 0===e||0===e.length)return{};const t={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}};let n=0;return e.forEach((l=>{const{columns:s,data:i,xSteps:o,ySteps:r}=l,d="number"===typeof o?o:0,h="number"===typeof r?r:0;if(void 0===e||0===e.length)return;n+=h;const u=[];s.length>=0&&(s.forEach(((e,l)=>{const s=c.a.utils.encode_cell({c:d+l,r:n});f(a,0,0,n,d),"object"===typeof e&&u.push(e.width||{wpx:80}),function(e,t,a){const n={},l={font:{bold:!0}},s={...e.style,...l};n.v=e.title,n.t="s",n.s=s,a[t]=n}(e,s,t)})),n+=1),u.length>0&&(t["!cols"]=u);for(let e=0;e!==i.length;++e,n++)for(let l=0;l!==i[e].length;++l){const s=c.a.utils.encode_cell({c:l+d,r:n});f(a,e,l,n,d),m(i[e][l],s,t)}})),a.s.c<1e7&&(t["!ref"]=c.a.utils.encode_range(a)),t})(e.props.dataSet)}));const a=this.getFileExtension(),n=this.getFileName(),s=c.a.write(t,{bookType:a,bookSST:!0,type:"binary"});Object(o.saveAs)(new Blob([u(s)],{type:"application/octet-stream"}),n)}getFileName(){const{filename:e}=this.props;if(null===e||"string"!==typeof e)throw Error("Invalid file name provided");return this.getFileNameWithExtension(e,this.getFileExtension())}getFileExtension(){const{fileExtension:e,filename:t}=this.props;let a=e;if(0===a.length){const e=t.split(".");if(0===e.length)throw Error("Invalid file name provided");a=e[e.length-1]}return-1!==this.fileExtensions.indexOf(a)?a:this.defaultFileExtension}getFileNameWithExtension(e,t){return"".concat(e,".").concat(t)}render(){const{hideElement:e,element:t}=this.props;return e?null:Object(y.jsx)("span",{onClick:this.handleDownload,children:t})}}b.props={hideElement:i.a.bool,filename:i.a.string,fileExtension:i.a.string,element:i.a.any,children(e,t){l.a.Children.forEach(e[t],(e=>{if(e.type!==h)throw new Error("<ExcelFile> can only have <ExcelSheet> as children. ")}))}},b.defaultProps={hideElement:!1,filename:"excel",fileExtension:"xlsx",element:Object(y.jsx)("button",{children:"Excel"})};var x=b;x.ExcelSheet=h,x.ExcelColumn=d;const g={ExcelFile:x,ExcelSheet:h,ExcelColumn:d};t.a=g},355:function(e,t,a){"use strict";var n=a(2),l=a(3),s=a(6),i=a(90),o=a(8),r=a.n(o),c=a(49),d=a(1),h=a(66),u=a(160),p=a(163),m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a},f=function(e){var t=e.prefixCls,a=e.className,s=e.checked,i=e.onChange,o=e.onClick,c=m(e,["prefixCls","className","checked","onChange","onClick"]),u=(0,d.useContext(h.b).getPrefixCls)("tag",t),p=r()(u,Object(n.a)(Object(n.a)({},"".concat(u,"-checkable"),!0),"".concat(u,"-checkable-checked"),s),a);return d.createElement("span",Object(l.a)({},c,{className:p,onClick:function(e){null===i||void 0===i||i(!s),null===o||void 0===o||o(e)}}))},y=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a},b=new RegExp("^(".concat(u.a.join("|"),")(-inverse)?$")),x=new RegExp("^(".concat(u.b.join("|"),")$")),g=function(e,t){var a=e.prefixCls,o=e.className,u=e.style,m=e.children,f=e.icon,g=e.color,v=e.onClose,j=e.closeIcon,w=e.closable,C=void 0!==w&&w,O=y(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=d.useContext(h.b),E=S.getPrefixCls,T=S.direction,N=d.useState(!0),k=Object(s.a)(N,2),I=k[0],P=k[1];d.useEffect((function(){"visible"in O&&P(O.visible)}),[O.visible]);var R=function(){return!!g&&(b.test(g)||x.test(g))},A=Object(l.a)({backgroundColor:g&&!R()?g:void 0},u),_=R(),D=E("tag",a),L=r()(D,Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},"".concat(D,"-").concat(g),_),"".concat(D,"-has-color"),g&&!_),"".concat(D,"-hidden"),!I),"".concat(D,"-rtl"),"rtl"===T),o),Y=function(e){e.stopPropagation(),null===v||void 0===v||v(e),e.defaultPrevented||"visible"in O||P(!1)},F="onClick"in O||m&&"a"===m.type,K=Object(c.a)(O,["visible"]),B=f||null,U=B?d.createElement(d.Fragment,null,B,d.createElement("span",null,m)):m,M=d.createElement("span",Object(l.a)({},K,{ref:t,className:L,style:A}),U,C?j?d.createElement("span",{className:"".concat(D,"-close-icon"),onClick:Y},j):d.createElement(i.a,{className:"".concat(D,"-close-icon"),onClick:Y}):null);return F?d.createElement(p.a,null,M):M},v=d.forwardRef(g);v.CheckableTag=f;t.a=v},467:function(e,t,a){"use strict";a(388);var n=a(522),l=a(1),s=a(13);class i extends l.Component{constructor(){super(...arguments),this.handleChange=e=>{const{onChange:t}=this.props;t(e)}}render(){const{datas:e}=this.props,{Option:t}=n.a,a=[];return void 0!==e&&e.map((e=>a.push({title:e.title,value:e.value}))),Object(s.jsx)(n.a,{...this.props,showSearch:!0,onChange:this.handleChange,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,children:a.map((e=>Object(s.jsx)(t,{value:e.value,children:e.title},e.value)))})}}t.a=i},476:function(e,t){},477:function(e,t){},482:function(e,t){},483:function(e,t){},488:function(e,t){},489:function(e,t){},491:function(e,t){},494:function(e,t){},496:function(e,t){},499:function(e,t){},500:function(e,t){},502:function(e,t){},839:function(e,t,a){"use strict";a.r(t);a(353);var n=a(351),l=(a(197),a(86)),s=(a(196),a(140)),i=(a(110),a(64)),o=(a(326),a(355)),r=a(1),c=a.n(r),d=a(28),h=a(77),u=a(48),p=a(148),m=a(467),f=a(41),y=a(354),b=a(13);const{ExcelFile:x}=y.a,{ExcelSheet:g}=x,v={alignment:{horizontal:"right"}},j=[{title:"",width:{wch:10}}];class w extends c.a.Component{render(){const{dataitem:e=[],filename:t,date:a,isType:n}=this.props,l={numFmt:"#,##0.00;(#,##0.00)",...v},s=[[{value:t,style:{font:{bold:!0}}}],[{value:"DATE ".concat(a),style:{font:{bold:!0}}}]],o="TP"===n?[{title:"No_Transaksi",width:{wch:25}},{title:"Tanggal",width:{wch:15}},{title:"Status",width:{wch:15}},{title:"Kode_Anggota",width:{wch:15}},{title:"Nama_Anggota",width:{wch:30}},{title:"Nama_Produk",width:{wch:30}},{title:"Group_Produk",width:{wch:30}},{title:"Kategori_Produk",width:{wch:30}},{title:"Qty",width:{wch:10},style:v},{title:"Harga",width:{wch:15},style:v},{title:"Total",width:{wch:15},style:v},{title:"Pembayaran",width:{wch:15},style:v},{title:"Bayar_Kartu",width:{wch:15},style:v},{title:"Bayar_Cash",width:{wch:15},style:v},{title:"Kembalian_Cash",width:{wch:15},style:v},{title:"Remark_Batal",width:{wch:30}}]:[{title:"Kode_Anggota",width:{wch:15}},{title:"Nama_Anggota",width:{wch:15}},{title:"Total",width:{wch:15},style:v},{title:"Pembayaran",width:{wch:15},style:v},{title:"Bayar_Kartu",width:{wch:15},style:v},{title:"Bayar_Cash",width:{wch:15},style:v},{title:"Kembalian_Cash",width:{wch:15},style:v}],r=(e||[]).map((e=>[{value:e.RefNo},{value:p(e.RefDate).format("DD MMM YYYY")},{value:1===+e.VoidBill?"BATAL":"SUKSES"},{value:e.CustCode||""},{value:e.CustName||""},{value:e.ItemName||""},{value:e.GroupName||""},{value:e.CateName||""},{value:+e.QtySi||0,style:{...l}},{value:+e.UnitPrice||0,style:{...l}},{value:+e.Amount||0,style:{...l}},{value:e.TenderName||""},{value:+e.CreditCard||0,style:{...l}},{value:+e.CashPaid||0,style:{...l}},{value:+e.CashChange||0,style:{...l}},{value:e.SiRemark||""}])),c=(e||[]).map((e=>[{value:e.CustCode||""},{value:e.CustName||""},{value:+e.Amount||0,style:{...l}},{value:e.TenderName||""},{value:+e.CreditCard||0,style:{...l}},{value:+e.CashPaid||0,style:{...l}},{value:+e.CashChange||0,style:{...l}}])),d=[{columns:j,data:s},{columns:o,data:"TP"===n?r:c,ySteps:3}];return Object(b.jsx)("div",{children:Object(b.jsx)(x,{filename:"".concat(t,"_").concat(a),element:Object(b.jsx)(i.a,{...this.props,children:"Excel"}),children:Object(b.jsx)(g,{dataSet:d,name:t})})})}}var C,O,S=w,E=a(85);let T=(C=Object(u.c)((e=>{let{transaction:t,report:a}=e;return{transaction:t,report:a,contentStatus:t.contentStatus,customerList:t.customerList,reportSalesCustomerWeb:a.reportSalesCustomerWeb}})),Object(d.withRouter)(O=C(O=class extends r.Component{constructor(e){super(e),this.handleSearch=()=>{const{dispatch:e}=this.props,{from:t,to:a,custCode:n,isType:l}=this.state,s={from:t,to:a,c:n,l:"ALL",isType:l};e({type:f.a.REPORT_SALES_BY_CUSTOMER,payload:s})},this.handleChangeIsType=e=>{const{dispatch:t}=this.props;this.setState({isType:e}),t({type:f.a.SET_STATE,payload:{reportSalesCustomerWeb:[]}})},this.componentRef=c.a.createRef(),this.state={from:p().startOf("month").format("YYYY-MM-DD"),to:p().format("YYYY-MM-DD"),custCode:"",isType:"RK"}}componentWillUnmount(){const{dispatch:e}=this.props;e({type:f.a.SET_STATE,payload:{reportSalesCustomerWeb:[]}})}render(){const{from:e,to:t,custCode:a,isType:r}=this.state,{customerList:c,reportSalesCustomerWeb:d,report:{loadingReportCustomerWeb:u}}=this.props,f=[...(c||[]).map((e=>({title:e.custName||"",value:e.custCode||""}))),{title:"ALL",value:"all"}],y=[{title:"Kode",dataIndex:"CustCode",key:"CustCode",width:100},{title:"Nama Anggota",dataIndex:"CustName",key:"CustName",width:200},{title:"No. Transaksi",dataIndex:"RefNo",key:"RefNo",width:200,render:(e,t)=>"RK"===t.IsType?"ALL":e},{title:"Tanggal",dataIndex:"RefDate",key:"RefDate",width:150,render:(e,t)=>"RK"===t.IsType?"ALL":p(e).format("DD-MM-YYYY")},{title:"Status",dataIndex:"VoidBill",key:"VoidBill",width:100,render:e=>Object(b.jsxs)("div",{children:[1===+e&&Object(b.jsx)(o.a,{color:"red",children:"BATAL"}),0===+e&&Object(b.jsx)(o.a,{color:"green",children:"SUKSES"})]})},{title:"Pembayaran",dataIndex:"TenderName",key:"TenderName",width:100,render:(e,t)=>"C001"===t.CustCode?"TUNAI":"KREDIT"},"TP"===r?{title:"Nama Produk",dataIndex:"ItemName",key:"ItemName",width:250}:{dataIndex:"nullish",width:0},"TP"===r?{title:"Qty",dataIndex:"QtySi",key:"QtySi",align:"right",width:100,render:e=>Object(E.a)(e,0)}:{dataIndex:"nullishQty",width:0},"TP"===r?{title:"Harga",dataIndex:"UnitPrice",key:"UnitPrice",align:"right",width:150,render:e=>Object(E.a)(e,0)}:{dataIndex:"nullishUnitPrice",width:0},{title:"Sub Total",dataIndex:"Amount",key:"Amount",align:"right",width:150,render:e=>Object(E.a)(e,0)},{title:"Diskon",dataIndex:"DiscVal",key:"DiscVal",align:"right",width:150,render:e=>Object(E.a)(e,0)},{title:"Total",dataIndex:"Amount",key:"Amount",align:"right",width:150,render:e=>Object(E.a)(e,0)}];return Object(b.jsxs)("div",{className:"container mx-auto p-4 h-screen",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(h.b,{to:"/kasir",children:Object(b.jsx)(i.a,{className:"bg-green-500 text-white rounded leading-3",children:"ORDER BARU"})}),Object(b.jsx)(h.b,{to:"/pos/report",children:Object(b.jsx)(i.a,{className:"bg-green-500 text-white rounded leading-3 ml-4",children:"LAPORAN"})})]}),Object(b.jsx)("div",{className:"mt-4",children:Object(b.jsxs)(l.a,{layout:"inline",children:[Object(b.jsx)(l.a.Item,{label:"Tanggal ",children:Object(b.jsx)(s.a,{value:e,type:"date",onChange:e=>this.setState({from:e.target.value})})}),Object(b.jsx)(l.a.Item,{children:Object(b.jsx)(s.a,{value:t,type:"date",onChange:e=>this.setState({to:e.target.value})})}),Object(b.jsx)(l.a.Item,{label:"Anggota",children:Object(b.jsx)(m.a,{style:{width:"200px"},value:a,datas:f,onChange:e=>this.setState({custCode:e})})}),Object(b.jsx)(l.a.Item,{label:"Jenis",children:Object(b.jsx)(m.a,{style:{width:"200px"},value:r,datas:[{title:"REKAP",value:"RK"},{title:"TERPERINCI",value:"TP"}],onChange:this.handleChangeIsType})}),Object(b.jsx)(l.a.Item,{children:Object(b.jsx)(i.a,{type:"primary",onClick:this.handleSearch,children:"Cari"})}),Object(b.jsx)(l.a.Item,{children:Object(b.jsx)(S,{filename:"Laporan_Penjualan_By_Anggota_".concat("TP"===r?"Terperinci":"Rekap"),type:"primary",date:"".concat(e,"_").concat(t),dataitem:d,isType:r})})]})}),Object(b.jsx)("div",{className:"mt-4",children:Object(b.jsx)(n.a,{dataSource:d,columns:y,size:"small",loading:u,scroll:{y:400}})})]})}})||O)||O);t.default=T}}]);
//# sourceMappingURL=16.33dd6483.chunk.js.map