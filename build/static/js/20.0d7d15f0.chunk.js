(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[20],{1040:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return P}));a(135);var l=a(23),s=(a(319),a(102)),n=a(0),c=a.n(n),r=a(701),d=a(67),i=a(540),o=a(700),u=a(13),j=a(103),h=(a(725),a(214),a(85)),m=(a(187),a(79)),x=a(528),b=a(14);function p(e){const t=c.a.createRef(),{handlePaymentStore:a=(e=>{}),state:l={},handleCancel:s=(()=>{}),open:r=!1}=e,{getCashChange:d}=Object(x.a)(),i=()=>{t&&t.current&&null!==t.current&&t.current.focus()},o=e=>{if(e.preventDefault(),document.activeElement===t.current&&"tender-media"!==e.target.id)return a(e),void s()},u=e=>{const a=t&&t.current&&null!==t.current&&t.current;i(),"Enter"!==e.key||document.activeElement!==a||o(e)};return Object(n.useEffect)((()=>(i(),document.addEventListener("keydown",u),()=>{document.addEventListener("keydown",u)})),[t]),Object(b.jsx)(h.a,{centered:!0,width:450,footer:!1,onCancel:s,open:r,bodyStyle:{backgroundColor:"#f8f8f8"},children:Object(b.jsxs)("div",{className:"w-full h-48 flex items-center justify-center flex-col gap-3",children:[Object(b.jsx)("h1",{className:"text-lg font-medium text-gray-700",children:"KEMBALIAN PELANGGAN"}),Object(b.jsxs)("p",{className:"text-3xl font-bold",children:["Rp ",Object(j.a)(d(null===l||void 0===l?void 0:l.settles,null===l||void 0===l?void 0:l.cashPaid),0)]}),Object(b.jsx)(m.a,{autoFocus:!0,ref:t,className:"w-1/2 btn-page h-14 mt-7",onClick:o,children:"PRINT BILL"})]})})}function v(e){let{state:t}=e;const{getSubtotal:a,getDiscountTotal:l}=Object(x.a)();return Object(b.jsxs)("div",{className:"w-full h-full",children:[Object(b.jsx)("h1",{className:"text-base font-semibold",children:"Detail Transaksi"}),Object(b.jsx)("div",{className:"w-full bg-gray-400 mt-2 mb-2",style:{height:"1.5px"}}),Object(b.jsx)("table",{className:"w-full",children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{className:"w-full h-6",children:[Object(b.jsx)("td",{className:"w-1/2 text-sm uppercase font-semibold text-gray-800",children:"Subtotal"}),Object(b.jsx)("td",{className:"text-sm uppercase font-medium text-gray-800",children:":"}),Object(b.jsxs)("td",{className:"w-1/2 pl-2 text-sm uppercase font-medium text-gray-800",children:["idr ",Object(j.a)(a(),0)]})]}),Object(b.jsxs)("tr",{className:"w-full h-6",children:[Object(b.jsx)("td",{className:"w-1/2 text-sm uppercase font-semibold text-gray-800",children:"Diskon"}),Object(b.jsx)("td",{className:"text-sm uppercase font-medium text-gray-800",children:":"}),Object(b.jsxs)("td",{className:"w-1/2 pl-2 text-sm uppercase font-medium text-gray-800",children:["idr ",Object(j.a)(l(),0)]})]}),Object(b.jsxs)("tr",{className:"w-full h-6",children:[Object(b.jsx)("td",{className:"w-1/2 text-sm uppercase font-semibold text-gray-800",children:"PPN 11%"}),Object(b.jsx)("td",{className:"text-sm uppercase font-medium text-gray-800",children:":"}),Object(b.jsx)("td",{className:"w-1/2 pl-2 text-sm uppercase font-medium text-gray-800",children:"idr 0"})]})]})})]})}a(318);var O=a(188);function f(e){var t,a;let{state:l,setState:c,handlePaymentList:r}=e;const[d]=s.a.useForm(),i=Object(n.useRef)(null),o=Object(n.useRef)(null),u=Object(n.useRef)(null),j=()=>{c((e=>({...e,modalCard:!1,modalCash:!1}))),d.resetFields()},x=e=>{"ArrowUp"===e.key&&p(),"ArrowDown"===e.key&&o.current&&document.activeElement===o.current.input&&(o&&o.current.blur(),u&&u.current.focus()),"Enter"===e.key&&o.current&&document.activeElement===o.current.input&&(o&&o.current.blur(),u&&u.current.focus())},p=()=>o&&o.current&&o.current.focus();return Object(n.useEffect)((()=>{p();if(i&&null!==i.current)return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}}),[null===l||void 0===l?void 0:l.modalCard,i]),Object(b.jsx)(h.a,{open:null===l||void 0===l?void 0:l.modalCard,onCancel:j,centered:!0,width:650,footer:null,children:Object(b.jsxs)("div",{ref:i,autoFocus:!0,onKeyDown:x,className:"w-full h-full",children:[Object(b.jsx)("h1",{className:"text-lg font-semibold mb-5",children:"MASUKKAN KARTU"}),Object(b.jsxs)(s.a,{layout:"vertical",onFinish:()=>{r(null===l||void 0===l?void 0:l.tender),j()},form:d,name:"card-form",children:[Object(b.jsx)(s.a.Item,{name:"cardName",label:Object(b.jsxs)("p",{children:["Nama Kartu / Provider ",Object(b.jsx)("kbd",{className:"kbd",children:"\u2191"})]}),rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(b.jsx)(O.a,{autoFocus:!0,ref:o,placeholder:"Card Holder / Name",value:null===l||void 0===l||null===(t=l.card)||void 0===t?void 0:t.name,onChange:e=>{const t=e.target.value;c((e=>({...e,card:{...e.card,name:t}})))},className:"w-full h-14 rounded-md"})}),Object(b.jsx)(s.a.Item,{name:"cardNo",label:Object(b.jsxs)("p",{children:["Nomor Kartu ",Object(b.jsx)("kbd",{className:"kbd",children:"\u2193"})]}),rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(b.jsx)(O.a,{ref:u,placeholder:"Card Number",value:null===l||void 0===l||null===(a=l.card)||void 0===a?void 0:a.no,onChange:e=>{const t=e.target.value;c((e=>({...e,card:{...e.card,no:t}})))},className:"w-full h-14 rounded-md"})}),Object(b.jsxs)("div",{className:"w-full h-auto p-3 bg-gray-100 rounded-md mb-5",children:["Gunakan ",Object(b.jsx)("b",{children:"\u2191"})," untuk mengisi ",Object(b.jsx)("b",{children:"Nama Kartu"}),", dan ",Object(b.jsx)("b",{children:"\u2193"})," mengisi ",Object(b.jsx)("b",{children:"Nomor Kartu"})]}),Object(b.jsx)(s.a.Item,{children:Object(b.jsxs)("div",{className:"w-full flex items-center justify-end gap-3",children:[Object(b.jsx)(m.a,{htmlType:"button",className:"h-14 px-5 rounded-md uppercase",onClick:j,children:"Batalkan"}),Object(b.jsx)(m.a,{htmlType:"submit",className:"btn-page h-12 w-max px-7",children:"Bayar"})]})})]})]})})}a(1003);var g=a(1005);function N(e){let{state:t,handleState:a,handleCancel:s,handlePaymentList:c}=e;const r=Object(n.useRef)(null),{data:i=[]}=Object(d.e)((e=>null===e||void 0===e?void 0:e.transaction)),{tender:o={},modalCash:u=!1}=t,j=()=>0===i.length?l.a.error({message:"Perhatian!",description:"Tidak ada transaksi, silahkan lakukan transaksi terlebih dahulu."}):0===+(null===t||void 0===t?void 0:t.cashPaid)||+(null===t||void 0===t?void 0:t.cashPaid)<0?l.a.error({message:"Perhatian!",description:"Nominal pembayaran tidak boleh 0 atau minus"}):2===+(null===o||void 0===o?void 0:o.paidType)?(a("modalCard",!0),void a("modalCash",!1)):(c(null===t||void 0===t?void 0:t.tender),void s()),m=()=>{r&&null!==r.current&&(r.current.focus(),r.current.select())};return Object(n.useEffect)((()=>{m()}),[]),Object(n.useEffect)((()=>{m()}),[u,o]),Object(b.jsxs)(h.a,{open:u,onOk:j,onCancel:s,centered:!0,width:650,children:[Object(b.jsx)("h1",{className:"text-lg font-semibold text-center mb-5",children:"INPUT NOMINAL PEMBAYARAN"}),Object(b.jsx)(g.a,{name:"cashPaid",ref:r,autoFocus:!0,className:"w-full h-32 p-5 flex items-center bg-transparent text-4xl text-black font-bold border-none focus:outline-none",placeholder:"MASUKKAN NOMINAL PEMBAYARAN",value:null===t||void 0===t?void 0:t.cashPaid,formatter:e=>"IDR ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null===e||void 0===e?void 0:e.replace(/IDR\s?|(,*)/g,""),onChange:e=>{a("cashPaid",e)},onPressEnter:e=>{j()}})]})}var y=a(727);function w(e){let{state:t,setState:a,handleFocus:l}=e;const[s,c]=Object(n.useState)(0),r=Object(n.useRef)(null),d=(null===t||void 0===t?void 0:t.settles)||[],i=e=>{if("F4"===e.key)e.target.blur(),e.preventDefault(),r&&r.current.focus()},o=e=>{var t;switch(e.key){case"ArrowUp":c((e=>Math.max(e-1,0)));break;case"ArrowDown":c((e=>Math.min(e+1,d.length-1)));break;case"Enter":const a=null===(t=d[s])||void 0===t?void 0:t.settleCode;a&&u(a);break;case"Escape":e.target.blur(),l()}};Object(n.useEffect)((()=>(r.current&&r.current.focus(),document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)})),[]),Object(n.useEffect)((()=>{const e=r.current;if(e)return e.addEventListener("keydown",o),()=>{e.removeEventListener("keydown",o)}}),[d,s]);const u=e=>{const s=null===t||void 0===t?void 0:t.settles;a({settles:null===s||void 0===s?void 0:s.filter((t=>t.settleCode!==e))}),r.current.focus(),l()};return Object(b.jsxs)("div",{className:"w-full h-full relative",children:[Object(b.jsxs)("h1",{className:"mb-3 text-lg font-semibold",children:["Alokasi Pembayaran ",Object(b.jsx)("kbd",{className:"kbd",children:"F4"})]}),Object(b.jsxs)("table",{ref:r,tabIndex:0,className:"table-fixed w-full",border:!0,children:[Object(b.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"w-10 text-center",children:"#"}),Object(b.jsx)("th",{className:"w-1/2 text-left px-3 text-white",children:"Payment Type"}),Object(b.jsx)("th",{className:"w-1/2 text-right px-3 text-white",children:"Amount"})]})}),Object(b.jsx)("tbody",{children:d.map(((e,t)=>{let{cashPay:a=0,tenderName:l="",settleCode:n=""}=e;return Object(b.jsxs)("tr",{className:"w-full h-14 border border-gray-500 ".concat(t===s?"bg-yellow-200":""),children:[Object(b.jsx)("td",{className:"w-10 text-center",children:Object(b.jsx)(m.a,{icon:Object(b.jsx)(y.b,{className:"text-white"}),type:"primary",className:"flex items-center justify-center mx-auto",shape:"circle",danger:!0,onClick:()=>u(n)})}),Object(b.jsx)("td",{className:"w-1/2 text-left px-3 text-black",children:l.trim().toUpperCase()}),Object(b.jsxs)("td",{className:"w-1/2 text-right px-3 text-black",children:["Rp ",Object(j.a)(a)]})]},n)}))})]})]})}var k=a(30);function C(e){let{form:t,state:a,setState:l,handleClickTender:s,handleFocus:c}=e;const r=Object(k.useHistory)(),{tenderMedia:i=[],data:o=[]}=Object(d.e)((e=>null===e||void 0===e?void 0:e.transaction)),{getBalanceDue:u,getGrandTotal:j}=Object(x.a)(),h=Object(n.useRef)(),p=Object(n.useRef)([]),[v,O]=Object(n.useState)(-1),f=()=>r.push("/pos/kasir"),g=e=>{const t=e.key;"F3"===t&&(e.preventDefault(),O(0),h&&h.current.focus()),"Escape"===t&&(e.target.blur(),c()),"End"===t&&f()},N=e=>{const t=e.key;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(t)){e.preventDefault();let a=v;const l=3;"ArrowLeft"===t?v%l===0?a=v+(l+1):a-=1:"ArrowRight"===t?(v+1)%l===0?a=v-(l-1):a+=1:"ArrowUp"===t?v-l<0?a=(i.length-l+v%l)%i.length:a-=1:"ArrowDown"===t?v+l>=i.length?a=(i.length-l+v%l)%i.length:a+=1:"Enter"===t&&s(i[v]),O(a),p.current[a]&&p.current[a].scrollIntoView({behavior:"smooth",block:"center"})}};return Object(n.useEffect)((()=>(document.addEventListener("keydown",g),0===o.length&&f(),()=>{document.removeEventListener("keydown",g)})),[]),Object(n.useEffect)((()=>{const e=h&&null!==h.current?h.current:null;if(e)return e.addEventListener("keydown",N),()=>{e.removeEventListener("keydown",N)}}),[v,i]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{ref:h,tabIndex:-1,id:"tender-media",className:"w-full h-full overflow-y-scroll overflow-x-hidden ",children:[Object(b.jsxs)("h1",{className:"mb-3 text-lg font-semibold",children:["Metode Pembayaran ",Object(b.jsx)("kbd",{className:"kbd",children:"f3"})]}),Object(b.jsxs)("div",{className:"w-full h-auto grid grid-cols-3 gap-3",children:[Object(b.jsxs)(m.a,{className:"col-span-3 btn-page bg-transparent border-2 border-red-500 text-red-600",onClick:f,children:["batalkan ",Object(b.jsx)("kbd",{className:"kbd",children:"end"})]}),0!==(null===i||void 0===i?void 0:i.length)&&(null===i||void 0===i?void 0:i.map(((e,t)=>{const{settleCode:l,tenderName:n}=e,c=0!==(null===a||void 0===a?void 0:a.settles.length)?null===a||void 0===a?void 0:a.settles.filter((e=>(null===e||void 0===e?void 0:e.settleCode)===l)):[],r=0!==(null===c||void 0===c?void 0:c.length)&&c[0].settleCode===l||0===(null===o||void 0===o?void 0:o.length)||0===j();return Object(b.jsx)(m.a,{ref:e=>p.current[t]=e,className:"btn-page ".concat(t===v?"active":""),disabled:r,onClick:()=>{r||s(e)},children:n.trim().toUpperCase()},l)})))]})]})})}function P(){var e;const t=Object(i.useHistory)(),a=Object(d.d)();let c=Object(n.useRef)(null);const{billNo:h="",data:m=[]}=Object(d.e)((e=>null===e||void 0===e?void 0:e.transaction)),{getSubtotal:O,getGrandTotal:g,getCashPaid:y,getCashChange:k,getBalanceDue:P,paymentStore:E}=Object(x.a)(),{cashier:T={}}=JSON.parse(localStorage.getItem("app")||"{}"),[S]=s.a.useForm(),[R,A]=Object(n.useState)({cashPaid:0,cashChange:0,card:{name:"",no:""},settles:[],subtotal:O(),grandTotal:g(),modalCash:!1,modalCard:!1,modalCashChange:!1,tender:{}}),D=e=>{const{settleCode:t="",tenderName:a="",paidType:l=""}=e,s=(null===R||void 0===R?void 0:R.settles)||[],n=k(s,null===R||void 0===R?void 0:R.cashPaid),c={billNo:h,custCode:"",custName:"",paidType:l,settleCode:t,amount:g(),amountPaid:(null===R||void 0===R?void 0:R.cashPaid)||0,cashPay:(null===R||void 0===R?void 0:R.cashPaid)||0,cashChange:n||0,tenderName:a,cardName:2===+l?null===R||void 0===R?void 0:R.card.name:"",cardHolder:2===+l?null===R||void 0===R?void 0:R.card.name:"",cardNo:2===+l?null===R||void 0===R?void 0:R.card.no:""};A((e=>({...e,settles:[...e.settles,c],cashPaid:0}))),S.resetFields()},I=Object(o.useReactToPrint)({content:()=>c,onPrintError:e=>console.log("Error Print!",e),onAfterPrint:()=>{a({type:u.a.SET_STATE,payload:{contentStatus:"isMenu"}}),t.push("/pos/kasir")}}),L=()=>E(R,I(null,(()=>c))),M=e=>{e.key},F=()=>{a({type:"transaction/SET_STATE",payload:{contentStatus:"isMenu"}}),A((e=>({...e,cashPaid:0,modalCash:!1,modalCard:!1,modalCashChange:!1})))};return Object(n.useEffect)((()=>{a({type:"transaction/TENDER_MEDIA"}),null!==T&&void 0!==T&&T.isOpening||(t.push("/pos"),l.a.error({message:"Error!",description:"Mohon untuk melakukan Buka Kasir terlebih dahulu sebelum melanjutkan transaksi."}))}),[]),Object(n.useEffect)((()=>(document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)})),[]),Object(n.useEffect)((()=>{0===(null===m||void 0===m?void 0:m.length)||0===(null===R||void 0===R?void 0:R.settles.length)||(()=>{const e=(null===R||void 0===R?void 0:R.settles)||[];k(e,null===R||void 0===R?void 0:R.cashPaid)>0?A((e=>({...e,modalCashChange:!0}))):(()=>{return 0===e.length?0:1===e.length?null===(t=e[0])||void 0===t?void 0:t.cashPay:e.length>1?e.reduce(((e,t)=>e+t.cashPay),0):void 0;var t})()>=g()&&L()})()}),[null===R||void 0===R?void 0:R.settles]),Object(b.jsxs)("div",{className:"w-screen h-screen overflow-x-hidden overflow-y-scroll",children:[Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-12 grid-rows-6 gap-3 p-3",children:[Object(b.jsx)("div",{className:"col-span-3 row-span-5 bg-white overflow-scroll p-3 rounded-md border-2 border-gray-400",children:Object(b.jsx)("div",{className:"w-full h-full",children:Object(b.jsx)(r.a,{ref:e=>c=e,transactions:m,cash:{cashChange:k(null===R||void 0===R?void 0:R.settles,null===R||void 0===R?void 0:R.cashPaid),cashPaid:y(null===R||void 0===R?void 0:R.settles),total:null===R||void 0===R?void 0:R.grandTotal},billDate:new Date,payments:null===R||void 0===R?void 0:R.settles,paymentMethod:null===R||void 0===R||null===(e=R.settles[0])||void 0===e?void 0:e.tenderName})})}),Object(b.jsxs)("div",{className:"col-span-9 row-span-1 bg-primary rounded-md",children:[Object(b.jsxs)("div",{className:"w-full h-full p-5 flex flex-row items-center justify-between gap-3",children:[Object(b.jsx)("h1",{className:"text-lg text-white",children:"Total Belanja"}),Object(b.jsxs)("h1",{className:"text-4xl text-white font-semibold capitalize",children:["Rp ",Object(j.a)(null===R||void 0===R?void 0:R.grandTotal,0)]})]}),"."]}),Object(b.jsx)("div",{className:"col-span-9 row-span-1",children:Object(b.jsxs)("div",{className:"w-full h-full flex items-center gap-3",children:[Object(b.jsxs)("div",{className:"w-full h-full bg-white rounded-md p-3 flex flex-col items-center justify-center",children:[Object(b.jsx)("h1",{children:"Kembalian"}),Object(b.jsxs)("h1",{className:"text-2xl font-semibold capitalize",children:["IDR ",Object(j.a)(k(null===R||void 0===R?void 0:R.settles,null===R||void 0===R?void 0:R.cashPaid),0)]})]}),Object(b.jsxs)("div",{className:"w-full h-full bg-white rounded-md p-3 flex flex-col items-center justify-center",children:[Object(b.jsx)("h1",{children:"Sisa Bayar"}),Object(b.jsxs)("h1",{className:"text-2xl font-semibold capitalize",children:["IDR ",Object(j.a)(P(null===R||void 0===R?void 0:R.settles,null===R||void 0===R?void 0:R.cashPaid),0)]})]})]})}),Object(b.jsx)("div",{className:"col-span-9 row-span-6",children:Object(b.jsxs)("div",{className:"w-full h-full overflow-hidden grid grid-cols-2 gap-5",children:[Object(b.jsx)("div",{className:"w-full h-full overflow-scroll",children:Object(b.jsx)(C,{form:S,state:R,setState:A,handleClickTender:e=>{const{paidType:t=0}=e;if((null===m||void 0===m?void 0:m.length)<0)return l.a.warning({message:"Perhatian!",description:"Anda tidak dapat melakukan pembayaran jika tidak ada item yang dibeli."});A((t=>({...t,tender:e}))),1!==+t?2!==+t?+t>=6&&+t<8&&l.a.warning({message:"Perhatian!!!",description:"Fitur ini sedang dalam tahap pengembangan. Terima kasih"}):A((e=>({...e,modalCash:!0,cashPaid:P(null===R||void 0===R?void 0:R.settles,null===R||void 0===R?void 0:R.cashPaid)}))):A((e=>({...e,modalCash:!0})))},handleFocus:()=>{}})}),Object(b.jsx)("div",{className:"w-full h-full overflow-scroll",children:Object(b.jsx)(w,{state:R,setState:A,handleFocus:()=>{}})})]})}),Object(b.jsx)("div",{className:"col-span-3 row-span-4 bg-white border-2 border-gray-400 rounded-md overflow-scroll px-5 py-2",children:Object(b.jsx)(v,{state:R})})]}),Object(b.jsx)(N,{state:R,handleState:(e,t)=>{A((a=>({...a,[e]:t})))},handleCancel:F,handlePaymentList:D,handleFocus:()=>{}}),Object(b.jsx)(f,{state:R,setState:A,handlePaymentList:D,handleFocus:()=>{}}),Object(b.jsx)(p,{printRef:c,handlePaymentStore:()=>L(),open:null===R||void 0===R?void 0:R.modalCashChange,state:R,handleCancel:F})]})}},528:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a(67);function s(){const e=Object(l.d)(),{billNo:t="",billDate:a="",data:s=[]}=Object(l.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:n={},property:c={}}=JSON.parse(localStorage.getItem("app")||"{}"),r=()=>(null===s||void 0===s?void 0:s.reduce(((e,t)=>{let{total:a=0}=t;return+e+ +a}),0))||0,d=()=>0,i=()=>r()-0,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0!==(null===e||void 0===e?void 0:e.length)?e.reduce(((e,t)=>+e+ +t.cashPay),0):0},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=i(),l=o(e);return 0===a?0:t>a?t-a:l>a?l-a:0};return{getTotalQty:()=>(null===s||void 0===s?void 0:s.reduce(((e,t)=>{let{qty:a=0}=t;return+e+ +a}),0))||0,getDiscountTotal:d,getSubtotal:r,getGrandTotal:i,getCashPaid:o,getCashChange:u,getBalanceDue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=o(e),l=i();return a>=l?a-l-t:i()-+a},paymentStore:(l,d)=>{var o,j;const h={header:[{billNo:t,billDate:a,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:r(),grandTotal:i(),shiftID:(null===n||void 0===n?void 0:n.shiftId)||"0",outletCode:null===c||void 0===c?void 0:c.outletCode}],settle:0!==(null===(o=l.settles)||void 0===o?void 0:o.length)&&(null===(j=l.settles)||void 0===j?void 0:j.map((e=>({...e,cashChange:u(null===l||void 0===l?void 0:l.settles,null===e||void 0===e?void 0:e.cashPay)})))),details:null===s||void 0===s?void 0:s.map(((e,a)=>({...e,billNo:t,ItemNo:a+1})))};e({type:"transaction/STORE",payload:h,bill:{from:a,to:a},handlePrint:()=>{if("function"===typeof d)return d()}})}}}},701:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));a(416);var l=a(418),s=(a(417),a(419)),n=a(213),c=a.n(n),r=a(0),d=a.n(r),i=a(67),o=a(103),u=a(14);const j=d.a.forwardRef(((e,t)=>{const{transactions:a=[],cash:n={},billDate:d="",billNo:j=null,paymentMethod:h="",isReprintBill:m=!1,payments:x=[]}=e,[b,p]=Object(r.useState)({}),{billNo:v}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{loading:O=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.auth));Object(r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("app")||"{}"),{property:t={},user:a={}}=e;p({...t,cashier:(null===a||void 0===a?void 0:a.username)||""}||{})}),[t]);const f=null===a||void 0===a?void 0:a.reduce(((e,t)=>{let{total:a=0}=t;return+e+ +a}),0);return Object(u.jsx)("div",{className:"w-full h-full rounded-md mx-auto",children:Object(u.jsxs)("div",{className:"w-full h-auto bg-white p-3 py-7 mx-auto",style:{maxWidth:"350px"},ref:t,children:[O?Object(u.jsx)("p",{className:"text-left text-print-xsmall text-gray-500",children:"Memuat data..."}):Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"text-center text-print-medium font-bold",children:(null===b||void 0===b?void 0:b.header1)||""}),Object(u.jsx)("p",{className:"text-center text-print-small font-semibold",children:(null===b||void 0===b?void 0:b.header2)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall mt-2",children:(null===b||void 0===b?void 0:b.header3)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.header4)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.header5)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.header6)||""}),m&&Object(u.jsx)("p",{className:"text-center text-print-small mt-3 font-semibold",children:"THIS IS COPY / REPRINT"})]}),Object(u.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),Object(u.jsxs)(l.a,{children:[Object(u.jsx)(s.a,{span:7,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:"Tanggal/Waktu"})}),Object(u.jsx)(s.a,{span:2,children:Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:":"})}),Object(u.jsx)(s.a,{span:15,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:c()(d).format("ddd, DD MMMM YYYY LTS")})})]}),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:7,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:"No. Transaksi"})}),Object(u.jsx)(s.a,{span:2,children:Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:":"})}),Object(u.jsx)(s.a,{span:15,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:j||v||"-"})})]}),Object(u.jsxs)(l.a,{children:[Object(u.jsx)(s.a,{span:7,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:"Kasir"})}),Object(u.jsx)(s.a,{span:2,children:Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:":"})}),Object(u.jsx)(s.a,{span:15,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:(null===b||void 0===b?void 0:b.cashier)||""})})]}),Object(u.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),0===(null===a||void 0===a?void 0:a.length)&&Object(u.jsx)("p",{className:"text-left text-print-xsmall text-gray-500",children:"Tidak ada transaksi"}),null===a||void 0===a?void 0:a.map(((e,t)=>{let{ItemName:a="",qty:n=0,price:c=0,total:r=0}=e;return Object(u.jsxs)(l.a,{wrap:!0,gutter:[2,2],className:"mb-2",children:[Object(u.jsx)(s.a,{span:24,children:Object(u.jsx)("p",{className:"text-left text-print-xsmall",children:a||""})}),Object(u.jsx)(s.a,{span:8,children:Object(u.jsxs)("p",{className:"text-left text-print-xsmall",children:["Rp ",Object(o.a)(c||0,0)||""]})}),Object(u.jsx)(s.a,{span:8,children:Object(u.jsxs)("p",{className:"text-center text-print-xsmall",children:[n||"","x"]})}),Object(u.jsx)(s.a,{span:8,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall",children:["Rp ",Object(o.a)((r||0).toString(),0)||"0"]})})]},t)})),Object(u.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),0===(null===x||void 0===x?void 0:x.length)?Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Pembayaran"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall uppercase",children:(h||"-").trim().toUpperCase()})})]}):null===x||void 0===x?void 0:x.map(((e,t)=>{var a,n;let{cashPay:c,tenderName:r}=e;return Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall capitalize",children:null===(a=r||"")||void 0===a?void 0:a.trim()})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall uppercase",children:["Rp ",null===(n=Object(o.a)(c,0)||"")||void 0===n?void 0:n.trim()]})})]})})),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Subtotal"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall",children:["Rp ",Object(o.a)(f||"0",0)]})})]}),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Diskon"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Rp 0"})})]}),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Total"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall",children:["Rp ",Object(o.a)(f||"0",0)]})})]}),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Bayar"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall",children:["Rp ",Object(o.a)((null===n||void 0===n?void 0:n.cashPaid)||"0",0)]})})]}),Object(u.jsxs)(l.a,{className:"my-1",children:[Object(u.jsx)(s.a,{span:12,children:Object(u.jsx)("p",{className:"text-right text-print-xsmall",children:"Kembalian"})}),Object(u.jsx)(s.a,{span:12,children:Object(u.jsxs)("p",{className:"text-right text-print-xsmall",children:["Rp ",Object(o.a)((null===n||void 0===n?void 0:n.cashChange)||"0",0)]})})]}),O?Object(u.jsx)("p",{className:"text-left text-print-xsmall text-gray-500",children:"Memuat data..."}):Object(u.jsxs)("div",{className:"mt-7",children:[Object(u.jsx)("p",{className:"text-center text-print-xsmall font-semibold",children:(null===b||void 0===b?void 0:b.footer1)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.footer2)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.footer3)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.footer4)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.footer5)||""}),Object(u.jsx)("p",{className:"text-center text-print-xsmall",children:(null===b||void 0===b?void 0:b.footer6)||""})]})]})})}))},725:function(e,t,a){}}]);
//# sourceMappingURL=20.0d7d15f0.chunk.js.map