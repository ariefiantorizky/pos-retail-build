{"version":3,"sources":["pages/POS/PrintPage.js","pages/POS/hooks/usePayment.js","pages/POS/widget/OpeningShiftButton.js","pages/POS/widget/ChangeQtyItem.js","pages/POS/widget/CheckItemPrice.js","pages/POS/widget/DeleteItemButton.js","pages/POS/widget/ListItemButton.js","pages/POS/hooks/useCartOrder.js","pages/POS/widget/NewOrderButton.js","pages/POS/widget/OpenPendingButton.js","pages/POS/widget/OptionButton.js","pages/POS/widget/PaymentButton.js","pages/POS/widget/SavePendingButton.js","pages/POS/components/ButtonActionOrder.js","pages/POS/components/HeaderLayout.js","pages/POS/components/ModalConfirmChangeQty.js","pages/POS/components/ModalChangeQty.js","pages/POS/components/ModalConfirmDelete.js","pages/POS/components/ModalPendingPayment.js","pages/POS/components/TableSearchItem.js","pages/POS/components/ModalTableSearchItem.js","pages/POS/components/TableOrderItem.js","pages/POS/index.js"],"names":["PrintPage","React","forwardRef","props","ref","transactions","cash","billDate","billNo","paymentMethod","isReprintBill","payments","isPrintTest","isPendingBill","property","setProperty","useState","billNoTrx","useSelector","state","transaction","loading","auth","useEffect","app","JSON","parse","localStorage","getItem","user","cashier","username","total","reduce","acc","cashPaid","paidValue","cashPay","paidType","cashChange","className","style","maxWidth","header1","header2","header3","header4","header5","header6","span","moment","format","length","map","i","ItemName","qty","price","wrap","gutter","currencyFormat","toString","trim","toUpperCase","index","tenderName","footer1","footer2","footer3","footer4","footer5","footer6","usePayment","dispatch","useDispatch","history","useHistory","data","getSubtotal","getDiscountTotal","getGrandTotal","getCashPaid","settles","cur","amountPaid","getCashChange","grandTotal","totalCashPay","getTotalQty","getBalanceDue","paymentStore","handlePrint","payload","header","custCode","custName","discPrc","discValue","taxPrc","taxValue","subTotal","shiftID","shiftId","outletCode","settle","amount","details","el","ItemNo","type","bill","from","to","OpeningShiftButton","isOpeningShift","isOpening","isOpen","setIsOpen","openPage","e","push","onKeyDownGlobal","key","target","blur","preventDefault","document","addEventListener","removeEventListener","onkeydown","onClick","ModalOpeningShift","onClose","centered","width","footer","onCancel","open","bodyStyle","backgroundColor","borderRadius","ChangeQtyItem","hs","val","openModal","handleKeyDownGlobal","CheckItemPriceButton","DeleteItemButton","selectedRowTransaction","isSelected","Object","keys","handleOpenModal","activeElement","id","ctrlKey","ListItemButton","handleOpen","onKeyDown","useCartOrder","inputRef","useRef","form","useForm","searchResult","handleFocus","current","focus","handleResetForm","resetFields","actions","SET_STATE","handleAddItem","item","findData","find","itm","upcBarcode","undefined","anyData","filter","restData","contentStatus","itemCode","ItemCode","handleSearch","query","notification","warning","message","description","handleSelectItem","handleDeleteItem","filteredDataTrx","NewOrderButton","handleNewOrder","transactionList","TRANSACTION_BILL_NO","disabled","OpenPendingButton","getHoldTrx","TRANSACTION_HOLD_LIST","OptionsButton","PaymentButton","tenderMedia","handleOpenPayment","SavePendingButton","isDisabled","componentPrintRef","handlePendingPayment","a","useReactToPrint","onPrintError","location","error","console","log","onAfterPrint","success","Date","ButtonActionOrder","handleState","isSelectedRow","gridTemplateRows","HeaderLayout","setState","modalCashBox","currentTime","timerId","setInterval","prev","clearInterval","src","preview","role","ModalConfirmChangeQty","onHandleCancel","handleCancel","emailRef","passwordRef","isGrantedAccess","oldQty","handleKeyDown","isActiveEmail","input","isActivePassword","submit","title","name","layout","initialValues","remember","onFinish","values","email","password","window","btoa","funcId","onFinishFailed","autoComplete","Item","label","rules","required","autoFocus","placeholder","Password","disable","htmlType","ModalChangeQty","onHandleState","itemName","modalRef","inputChanged","modalConfirm","handleFocusSelect","select","handleEnter","handleChangeQty","info","includes","onOk","size","danger","tabIndex","value","defaultValue","onChange","event","handleChange","onPressEnter","onFocus","ModalConfirmDelete","ModalPendingPayment","visible","transactionHolds","searchItemRef","refTable","refInput","search","t","dataTable","selectedData","handleDetailHoldTrx","onState","onKeyPress","focusInput","table","tbody","lastChild","tr","children","isNotEmptyTrx","slice","LoadingOutlined","spin","filtered","toLowerCase","indexOf","defaultTrx","handleDataTable","billTime","selectedDataTrx","columns","dataIndex","render","_","align","TableSearchItem","handdleFocusInput","buttonRefs","activeIndex","setActiveIndex","handleSaveSelected","prevIndex","Math","max","min","scrollIntoView","behavior","block","border","ModalTableSearchItem","searchInputRef","suffix","TableOrderItem","selected","isModalActive","modalPendingPayment","modalSearchItem","modalConfirmDelete","modalQty","fixed","NewLayout","isLog","authorized","barcode","tableIndex","isDisabledInput","UPCbarcode","height","handleSearchItem","gridRow","handleSearchFocus"],"mappings":"6OAOO,MAAMA,EAAYC,IAAMC,YAAW,CAACC,EAAOC,KACjD,MAAM,aACLC,EAAe,GAAE,KACjBC,EAAO,CAAC,EAAC,SACTC,EAAW,GAAE,OACbC,EAAS,KAAI,cACbC,EAAgB,GAAE,cAClBC,GAAgB,EAAK,SACrBC,EAAW,GAAE,YACbC,GAAc,EAAK,cACnBC,GAAgB,GACbV,GAEGW,EAAUC,GAAeC,mBAAS,CAAC,IAClCR,OAAQS,GAAcC,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACtD,QAAEC,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOG,OAE1DC,qBAAU,KACT,MAAMC,EAAMC,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAChD,SAAEd,EAAW,CAAC,EAAC,KAAEe,EAAO,CAAC,GAAML,EAErCT,EAAY,IAAKD,EAAUgB,SAAa,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAME,WAAY,KAAQ,CAAC,EAAE,GAC/D,CAAC3B,IAEJ,MAAM4B,EAAoB,OAAZ3B,QAAY,IAAZA,OAAY,EAAZA,EAAc4B,QAAO,CAACC,EAAI,KAAD,IAAE,MAAEF,EAAQ,GAAG,SAAME,IAAOF,CAAK,GAAE,GACpEG,EAAmB,OAARxB,QAAQ,IAARA,OAAQ,EAARA,EAAUsB,QAAO,CAACC,EAAI,KAAD,IAAE,UAAEE,EAAY,EAAC,QAAEC,EAAU,EAAC,SAAEC,GAAU,SAAMJ,KAAsB,KAAbI,EAAiBD,EAAUD,EAAU,GAAE,GAChIG,EAAaJ,EAAWH,EAE9B,OACC,qBAAKQ,UAAU,mCAAkC,SAChD,sBAAKA,UAAU,qDAAqDC,MAAO,CAAEC,SAAU,SAAWtC,IAAKA,EAAI,UAEzGiB,EACA,mBAAGmB,UAAU,4CAA2C,SAAC,mBAEzD,gCACC,mBAAGA,UAAU,0CAAyC,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAU6B,UAAW,KAC7E,mBAAGH,UAAU,6CAA4C,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAU8B,UAAW,KAChF,mBAAGJ,UAAU,qCAAoC,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAU+B,UAAW,KACxE,mBAAGL,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUgC,UAAW,KACnE,mBAAGN,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUiC,UAAW,KACnE,mBAAGP,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUkC,UAAW,KACnE,qBAAKR,UAAU,uDACd9B,GAAiB,mBAAG8B,UAAU,kDAAiD,SAAC,2BAChF5B,GAAe,mBAAG4B,UAAU,kDAAiD,SAAC,uBAC9E3B,GAAiB,mBAAG2B,UAAU,kDAAiD,SAAC,4BAIlF5B,GAAeF,GAAiBG,EAAgB,qBAAK2B,UAAU,uDAA0D,KAE1H,8BACC,mBAAKS,KAAM,EAAE,SACZ,mBAAGT,UAAU,8BAA6B,SAAC,oBAE5C,mBAAKS,KAAM,EAAE,SACZ,mBAAGT,UAAU,gCAA+B,SAAC,QAE9C,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,8BAA6B,SAAEU,IAAO3C,GAAU4C,OAAO,gCAGtE,oBAAKX,UAAU,OAAM,UACpB,mBAAKS,KAAM,EAAE,SACZ,mBAAGT,UAAU,8BAA6B,SAAC,oBAE5C,mBAAKS,KAAM,EAAE,SACZ,mBAAGT,UAAU,gCAA+B,SAAC,QAE9C,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,8BAA6B,SAAEhC,GAAUS,GAAa,WAGrE,8BACC,mBAAKgC,KAAM,EAAE,SACZ,mBAAGT,UAAU,8BAA6B,SAAC,YAE5C,mBAAKS,KAAM,EAAE,SACZ,mBAAGT,UAAU,gCAA+B,SAAC,QAE9C,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,8BAA6B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUgB,UAAW,UAInE,qBAAKU,UAAU,uDAGW,KAAb,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAc+C,SAAgB,mBAAGZ,UAAU,4CAA2C,SAAC,wBAC3E,OAAZnC,QAAY,IAAZA,OAAY,EAAZA,EAAcgD,KAAI,CAAC,EAAkDC,KAAO,IAAzD,SAAEC,EAAW,GAAE,IAAEC,EAAM,EAAC,MAAEC,EAAQ,EAAC,MAAEzB,EAAQ,GAAG,EACnE,OACC,oBAAK0B,MAAI,EAACC,OAAQ,CAAC,EAAG,GAAYnB,UAAU,OAAM,UACjD,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,8BAA6B,SAAEe,GAAY,OAEzD,mBAAKN,KAAM,EAAE,SACZ,oBAAGT,UAAU,8BAA6B,UAAC,MAAIoB,YAAeH,GAAS,EAAG,IAAM,QAEjF,mBAAKR,KAAM,EAAE,SACZ,oBAAGT,UAAU,gCAA+B,UAAEgB,GAAO,GAAG,SAEzD,mBAAKP,KAAM,EAAE,SACZ,oBAAGT,UAAU,+BAA8B,UAAC,MAAIoB,aAAgB5B,GAAS,GAAG6B,WAAY,IAAM,WAXjEP,EAazB,IAIR,qBAAKd,UAAU,uDAGO,KAAb,OAAR7B,QAAQ,IAARA,OAAQ,EAARA,EAAUyC,QACV,oBAAKZ,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,iBAE7C,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,yCAAwC,UAAG/B,GAAiB,KAAKqD,OAAOC,qBAI/E,OAARpD,QAAQ,IAARA,OAAQ,EAARA,EAAU0C,KAAI,CAAC,EAA8CW,KAAW,IAAD,QAAxD,QAAE3B,EAAO,WAAE4B,EAAU,SAAE3B,EAAQ,UAAEF,GAAW,EAC1D,OACC,oBAAKI,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,0CAAyC,SAAmB,QAAnB,EAAGyB,GAAc,UAAE,aAAjB,EAAoBH,WAE7E,mBAAKb,KAAM,GAAG,SACb,oBAAGT,UAAU,yCAAwC,UAAC,MACc,QAAhE,EAAEoB,YAA6B,KAAbtB,EAAiBD,EAAUD,EAAW,IAAM,UAAE,aAA/D,EAAkE0B,cAGnE,IAIT,oBAAKtB,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,eAE7C,mBAAKS,KAAM,GAAG,SACb,oBAAGT,UAAU,+BAA8B,UAAC,MAAIoB,YAAe5B,GAAS,IAAK,WAG/E,oBAAKQ,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,aAE7C,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,cAG9C,oBAAKA,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,YAE7C,mBAAKS,KAAM,GAAG,SACb,oBAAGT,UAAU,+BAA8B,UAAC,MAAIoB,YAAe5B,GAAS,IAAK,WAG/E,oBAAKQ,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,YAE7C,mBAAKS,KAAM,GAAG,SACb,oBAAGT,UAAU,+BAA8B,UAAC,MAAIoB,YAAezB,GAAY,IAAK,WAGlF,oBAAKK,UAAU,OAAM,UACpB,mBAAKS,KAAM,GAAG,SACb,mBAAGT,UAAU,+BAA8B,SAAC,gBAE7C,mBAAKS,KAAM,GAAG,SACb,oBAAGT,UAAU,+BAA8B,UAAC,MAAID,GAAc,EAAI,EAAIqB,YAAerB,GAAc,IAAK,WAKzGlB,EACA,mBAAGmB,UAAU,4CAA2C,SAAC,mBAEzD,sBAAKA,UAAU,OAAM,UACpB,mBAAGA,UAAU,8CAA6C,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUoD,UAAW,KACjF,mBAAG1B,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUqD,UAAW,KACnE,mBAAG3B,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUsD,UAAW,KACnE,mBAAG5B,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUuD,UAAW,KACnE,mBAAG7B,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUwD,UAAW,KACnE,mBAAG9B,UAAU,gCAA+B,UAAU,OAAR1B,QAAQ,IAARA,OAAQ,EAARA,EAAUyD,UAAW,YAIjE,G,mCCtMR,sDAGe,SAASC,IACvB,MAAMC,EAAWC,cACXC,EAAUC,wBAEV,OAAEpE,EAAS,GAAE,SAAED,EAAW,GAAE,KAAEsE,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAC1E,QAAEU,EAAU,CAAC,EAAC,SAAEhB,EAAW,CAAC,GAAMW,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,MAI5EkD,EAAc,KAAU,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAM5C,QAAO,CAACC,EAAI,KAAD,IAAE,MAAEF,EAAQ,GAAG,SAAME,IAAOF,CAAK,GAAE,KAAM,EAE9E+C,EAAmB,IAAM,EAEzBC,EAAgB,IACdF,IAHuB,EAMzBG,EAAc,WAAmB,IAAlBC,EAAO,uDAAG,GAQ9B,OANqB,KAAb,OAAPA,QAAO,IAAPA,OAAO,EAAPA,EAAS9B,QACN8B,EAAQjD,QAAO,CAACC,EAAKiD,KACbjD,IAAOiD,EAAIC,YAChB,GACH,CAGL,EAEMC,EAAgB,WAAiC,IAAhCH,EAAO,uDAAG,GAAI/C,EAAQ,uDAAG,EAC/C,MAAMmD,EAAaN,IACbO,EAAeN,EAAYC,GAEjC,OAAmB,IAAfI,EACI,EAGJnD,EAAWmD,EACPnD,EAAWmD,EAGfC,EAAeD,EACXC,EAAeD,EAGhB,CACR,EAmEA,MAAO,CAAEE,YAzGW,KAAU,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAM5C,QAAO,CAACC,EAAI,KAAD,IAAE,IAAEsB,EAAM,GAAG,SAAMtB,IAAOsB,CAAG,GAAE,KAAM,EAyG1DuB,mBAAkBD,cAAaE,gBAAeC,cAAaI,gBAAeI,cAjE1E,WAAiC,IAAhCP,EAAO,uDAAG,GAChC,MAAM3C,EAAa8C,EAAcH,EADW,uDAAG,GAEzCK,EAAeN,EAAYC,GAC3BI,EAAaN,IAEnB,OAAIO,GAAgBD,EACZC,EAAeD,EAAa/C,EAG7ByC,KAAmBO,CAC3B,EAuD+GG,aArD1F,CAACvE,EAAOwE,KAAiB,IAAD,IAC5C,MA8BMC,EAAU,CACfC,OAAQ,CA/BM,CACdrF,SACAD,WACAuF,SAAU,GACVC,SAAU,GACVC,QAAS,IACTC,UAAW,IACXC,OAAQ,IACRC,SAAU,IACVC,SAAUtB,IACVQ,WAAYN,IACZqB,SAAgB,OAAPvE,QAAO,IAAPA,OAAO,EAAPA,EAASwE,UAAW,IAC7BC,WAAoB,OAARzF,QAAQ,IAARA,OAAQ,EAARA,EAAUyF,aAoBtBC,OAhB0B,KAAb,QAAb,EAAArF,EAAM+D,eAAO,aAAb,EAAe9B,UACF,QADc,EAC3BjC,EAAM+D,eAAO,aAAb,EAAe7B,KAAKmD,IACnB,MAAMrE,EAAWqE,EAAOnE,QAClBE,EAAa8C,EAAmB,OAALlE,QAAK,IAALA,OAAK,EAALA,EAAO+D,QAAe,OAANsB,QAAM,IAANA,OAAM,EAANA,EAAQnE,SACnDC,IAAkB,OAANkE,QAAM,IAANA,OAAM,EAANA,EAAQlE,UAE1B,MAAO,IACHkE,EACHjE,WAAyB,IAAbD,EAAiBC,EAAa,EAC1CkE,OAAqB,IAAbnE,EAAiBH,EAAWI,EAAmB,OAANiE,QAAM,IAANA,OAAM,EAANA,EAAQC,OACzDrB,WAAyB,IAAb9C,EAAiBH,EAAWI,EAAmB,OAANiE,QAAM,IAANA,OAAM,EAANA,EAAQpB,WAC7D,KAMFsB,QAAa,OAAJ7B,QAAI,IAAJA,OAAI,EAAJA,EAAMxB,KAAI,CAACsD,EAAIrD,KAAC,IAAWqD,EAAInG,SAAQoG,OAAQtD,EAAI,OAG7DmB,EAAS,CACRoC,KAAM,oBACNjB,UACAkB,KAAM,CACLC,KAAMxG,EACNyG,GAAIzG,GAELoF,YAAa,KACZ,GAA2B,oBAAhBA,EACV,OAAOA,GACR,EAEDhB,WACC,EAIJ,C,sJChHe,SAASsC,IACvB,MAAMzF,EAAMC,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAChD,QAAEE,EAAU,CAAC,GAAMN,EACnB0F,GAAwB,OAAPpF,QAAO,IAAPA,OAAO,EAAPA,EAASqF,aAAa,EAEvCxC,EAAUC,wBACTwC,EAAQC,GAAarG,oBAAUkG,GAEhCI,EAAYC,IACjB5C,EAAQ6C,KAAK,qBAAqB,EAG7BC,EAAmBF,IACV,OAAVA,EAAEG,MACLH,EAAEI,OAAOC,OACTL,EAAEM,iBAEFP,IACD,EAWD,OARA/F,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GAE9B,KACNK,SAASE,oBAAoB,UAAWC,UAAU,IAEjD,IAGF,qCACC,oBAAQC,QAASZ,EAAU9E,UAAU,WAAU,UAAC,gBAE/C,qBAAKA,UAAU,MAAK,SAAC,UAGtB,cAAC2F,EAAiB,CAACf,OAAQA,EAAQgB,QAAS,IAAMf,GAAU,OAG/D,CAEA,SAASc,EAAkB,GAAsB,IAAtB,OAAEf,EAAM,QAAEgB,GAAS,EAC7C,OACC,oBAAOC,UAAQ,EAACC,MAAO,IAAKC,QAAQ,EAAOC,SAAUJ,EAASK,KAAMrB,EAAQsB,UAAW,CAAEC,gBAAiB,UAAWC,aAAc,QAAS,UAC3I,oBAAIpG,UAAU,iDAAgD,SAAC,kBAC/D,oBAAGA,UAAU,0CAAyC,UAAC,2KAEpB,qBAAKA,UAAU,MAAK,SAAC,OAAQ,6CAInE,C,kOCpDe,SAASqG,EAAc,GAA8B,IAA9B,GAAEC,EAAK,CAAC3H,EAAO4H,KAAR,GAAoB,EAChE,MAAMC,EAAY,KACjBF,EAAG,YAAY,EAAK,EAGfG,EAAuB1B,IACd,OAAVA,EAAEG,MACLH,EAAEM,iBAEFmB,IACD,EAWD,OARAzH,qBAAU,KACTuG,SAASC,iBAAiB,UAAWkB,GAE9B,KACNnB,SAASE,oBAAoB,UAAWiB,EAAoB,KAK7D,oBAAQzG,UAAU,sBAAsB0F,QAASc,EAAU,UAC1D,qBAAKxG,UAAU,MAAK,SAAC,OACrB,4BAAG,oBAGN,C,YC1Be,SAAS0G,IACvB,MAAMvE,EAAUC,uBAEV0C,EAAW,IAAM3C,EAAQ6C,KAAK,oBAE9BC,EAAmBF,IACV,OAAVA,EAAEG,MACLH,EAAEI,OAAOC,OACTL,EAAEM,iBACFP,IACD,EAWD,OARA/F,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GAE9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,IAGF,oBAAQjF,UAAU,sBAAsB0F,QAASZ,EAAS,UACzD,qBAAK9E,UAAU,MAAK,SAAC,OACrB,4BAAG,gBAGN,CC3Be,SAAS2G,EAAiB,GAA8B,IAA9B,GAAEL,EAAK,CAAC3H,EAAO4H,KAAR,GAAoB,EACnE,MAAM,uBAAEK,EAAyB,CAAC,GAAMlI,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,cAChEiI,EAA4D,IAA/CC,OAAOC,KAAKH,GAAwBhG,OAEjDoG,EAAkB,KACvBV,EAAG,sBAAsB,EAAK,EAGzBG,EAAuB1B,IAC5B,GAAkC,cAA9BO,SAAS2B,cAAcC,IAAsBL,EAQhD,OAPI9B,EAAEoC,SAAqB,UAAVpC,EAAEG,MAClBH,EAAEM,iBACFN,EAAEI,OAAOC,OAET4B,KAGM,IACR,EAWD,OARAjI,qBAAU,KACTuG,SAASC,iBAAiB,UAAWkB,GAE9B,KACNnB,SAASE,oBAAoB,UAAWiB,EAAoB,IAE3D,IAGF,oBAAQzG,UAAU,sBAAsB0F,QAASsB,EAAgB,UAChE,qBAAKhH,UAAU,MAAK,SAAC,eACrB,4BAAG,iBAGN,CCpCe,SAASoH,EAAe,GAAoB,IAApB,GAAEd,EAAK,QAAU,EACvD,MAAMe,EAAa,KAClBf,EAAG,mBAAmB,EAAK,EAGtBgB,EAAavC,IACJ,OAAVA,EAAEG,KACLmC,GACD,EAUD,OAPAtI,qBAAU,KACTuG,SAASC,iBAAiB,UAAW+B,GAC9B,KACNhC,SAASE,oBAAoB,UAAW8B,EAAU,IAEjD,IAGF,mCACC,oBAAQtH,UAAU,sBAAsB0F,QAAS2B,EAAW,UAC3D,qBAAKrH,UAAU,MAAK,SAAC,OACrB,4BAAG,sBAIP,CCxBe,SAASuH,IACvB,MAAMtF,EAAWC,cACXsF,EAAWC,iBAAO,OACjBC,GAAQ,IAAKC,WAEd,aAAEC,EAAe,GAAE,KAAEvF,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,cAEjEiJ,EAAc,KACfL,GAAiC,OAArBA,EAASM,SACxBN,EAASM,QAAQC,OAElB,EAGKC,EAAkB,KACvBN,EAAKO,cACLJ,IAEA5F,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRwE,aAAc,KAEd,EA0BGQ,EAAgB,WAAgC,IAA/BC,EAAI,uDAAG,CAAC,EAAG9D,EAAI,uDAAG,QACxCyD,IAEA,MAAMM,EAAWV,EAAaW,MAAMC,IAASA,EAAIC,cAAgBJ,EAAKI,aAEtE,GAAa,UAATlE,QAAiCmE,IAAbJ,QACEI,KAAjB,OAAJL,QAAI,IAAJA,OAAI,EAAJA,EAAMI,aAA4BJ,EAAKI,YAAkC,KAApBJ,EAAKI,WAAmB,CAChF,MAAMH,EAAWV,EAAaW,MAAMC,IAASA,EAAIC,cAAgBJ,EAAKI,aAChEE,EAAUtG,EAAKuG,QAAQzE,IAAQA,EAAGsE,cAAgBJ,EAAKI,aAG7D,GAAIH,IAAmB,OAAPK,QAAO,IAAPA,OAAO,EAAPA,EAAS/H,QAAS,EAAG,CACpC,MAAMiI,EAAW,GAEjBxG,EAAKxB,KAAKsD,IACJA,EAAGsE,cAAgBJ,EAAKI,WAQrBI,EAAS7D,KAAKb,IAPrB0E,EAAS7D,KAAK,IACVb,EACHnD,IAAKmD,EAAGnD,IAAM,EACdxB,QAAS2E,EAAGnD,IAAM,GAAKmD,EAAGlD,MAC1BgD,SAAUE,EAAGnD,IAAM,GAAKmD,EAAGlD,SAKtB,KAGRgB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IAAIwG,GACVC,cAAe,WAGlB,CAGIR,GAA+B,IAAnBK,EAAQ/H,QACvBqB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACR0F,cAAe,SACfzG,KAAM,IACFA,EACH,IACIiG,EACHS,SAAU1G,EAAKzB,OAAS,EACxBI,IAAK,EACLxB,MAAO8I,EAASrH,MAChBgD,OAAQqE,EAASrH,UAMvB,CAGD,GAAa,WAATsD,GACC8D,EAAKW,UAAqB,WAATzE,EAAmB,CACvC,MAAM+D,EAAWV,EAAaW,MAAMC,GAAQA,EAAIQ,WAAaX,EAAKW,WAC5DL,EAAUtG,EAAKuG,QAAQzE,GAAOA,EAAG6E,WAAaX,EAAKW,WAGzD,GAAIV,GAAYK,EAAQ/H,OAAS,EAAG,CACnC,MAAMiI,EAAW,GAEjBxG,EAAKxB,KAAKsD,GACLA,EAAG6E,WAAaX,EAAKW,SAQjBH,EAAS7D,KAAKb,IAPrB0E,EAAS7D,KAAK,IACVb,EACHnD,IAAKmD,EAAGnD,IAAM,EACdxB,QAAS2E,EAAGnD,IAAM,GAAKmD,EAAGlD,MAC1BgD,SAAUE,EAAGnD,IAAM,GAAKmD,EAAGlD,SAKtB,KAGRgB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IAAIwG,KAGb,CAEIP,GAA+B,IAAnBK,EAAQ/H,QACvBqB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IACFA,EACH,IACIiG,EACHS,SAAU1G,EAAKzB,OAAS,EACxBI,IAAK,EACLxB,MAAO8I,EAASrH,MAChBgD,OAAQqE,EAASrH,UAMvB,CAGD,GAAa,UAATsD,EAAkB,CACrB,MAAM+D,EAAWV,EAAaW,MAAMC,GAAQA,EAAIQ,WAAaX,EAAKW,WAC5DL,EAAUtG,EAAKuG,QAAQzE,GAAOA,EAAG6E,WAAaX,EAAKW,WAEzD,GAAIV,GAAYK,EAAQ/H,OAAS,EAAG,CACnC,MAAMiI,EAAW,GAEb,OAAJxG,QAAI,IAAJA,KAAMxB,KAAKsD,GACNA,EAAG6E,WAAaX,EAAKW,SAQjBH,EAAS7D,KAAKb,IAPrB0E,EAAS7D,KAAK,IACVb,EACHnD,IAAKmD,EAAGnD,IAAM,EACdxB,QAAS2E,EAAGnD,IAAM,GAAKmD,EAAGlD,MAC1BgD,SAAUE,EAAGnD,IAAM,GAAKmD,EAAGlD,SAMtB,KAGRgB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IAAIwG,KAGb,CAEIP,GAA+B,IAAnBK,EAAQ/H,QACvBqB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IACFA,EACH,IACIiG,EACHS,SAAU1G,EAAKzB,OAAS,EACxBI,IAAK,EACLxB,MAAO8I,EAASrH,MAChBgD,OAAQqE,EAASrH,UAMvB,CAEA4G,GACD,EAgBA,MAAO,CAAEL,WAAUE,OAAMG,cAAaG,kBAAiBiB,aAvMlC,WAAiB,IAAhBC,EAAK,uDAAG,GAC7B,GAAc,KAAVA,EASH,OARAjH,EAAS,CACRoC,KAAM,4BACNjB,QAAS,CACR8F,gBAIFlB,IAIDmB,EAAA,EAAaC,QAAQ,CACpBC,QAAS,aACTC,YAAa,sDAEf,EAsLqEC,iBApL5C,WACxBnB,EAAc,CAAEY,SADiB,uDAAG,CAAC,EACDP,WAAY,IAAM,SACvD,EAkLuFL,gBAAeoB,iBAd7E,WAAoB,IAAnBT,EAAQ,uDAAG,GACpC,MAAMU,EAAoC,KAAb,OAAJpH,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,UAAoB,OAAJyB,QAAI,IAAJA,OAAI,EAAJA,EAAMuG,QAAO,QAAC,SAAEI,GAAU,SAAKA,IAAaD,CAAQ,MAAM,GAEzG9G,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAMoH,EACN7C,uBAAwB6C,EAAgB,MAI1C5B,GACD,EAGD,CCjOe,SAAS6B,EAAe/L,GACtC,MAAMsE,EAAWC,cACXlD,EAAMC,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAChD,QAAEE,EAAU,CAAC,GAAMN,EACnB0F,GAAwB,OAAPpF,QAAO,IAAPA,OAAO,EAAPA,EAASqF,aAAa,GAEvC,GAAE2B,EAAK,MAAS3I,GAChB,QAAEkB,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACpD,YAAEiJ,GAAgBN,IAElBoC,EAAiB,KACtB1H,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRwG,gBAAiB,GACjBvH,KAAM,MAIRJ,EAAS,CACRoC,KAAM6D,IAAQ2B,sBAGfvD,EAAG,OAAQ,IACXA,EAAG,IAAK,GACRA,EAAG,QAAS,GACZA,EAAG,eAAgB,IACnBA,EAAG,aAAc,IAEjBuB,GAAa,EAGR5C,EAAmBF,IACxB,GAAIL,GACW,OAAVK,EAAEG,IAEL,OADAH,EAAEI,OAAOC,OACyB,YAA9BE,SAAS2B,cAAcC,QAC1ByC,IAIM5E,CAET,EAUD,OAPAhG,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GAC9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,IAGF,oBAAQpG,QAASA,EAASiL,SAAUjL,IAAY6F,EAAgB1E,UAAU,WAAW0F,QAASiE,EAAe,UAC5G,qBAAK3J,UAAU,MAAK,SAAC,OACrB,4BAAG,iBAGN,C,aC3De,SAAS+J,EAAkB,GAAgB,IAAhB,GAAEzD,EAAK,MAAM,EACtD,MAAMrE,EAAWC,cACXC,EAAUC,wBAEV,QAAE9C,EAAU,CAAC,GAAML,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,MAC7DsF,GAAwB,OAAPpF,QAAO,IAAPA,OAAO,EAAPA,EAASqF,aAAa,EAEvCqF,EAAa,KAClB/H,EAAS,CACRoC,KAAM6D,IAAQ+B,sBACd9H,WACC,EAGGqE,EAAY,KACjBF,EAAG,uBAAuB,GAC1B0D,GAAY,EAGP/E,EAAmBF,IACpBL,GACW,OAAVK,EAAEG,MACLH,EAAEM,iBACFmB,IAGF,EAYD,OATAzH,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GACrC+E,IAEO,KACN1E,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,IAGF,mCACC,oBAAQ6E,UAAWpF,EAAgB1E,UAAU,WAAW0F,QAASc,EAAU,UAC1E,qBAAKxG,UAAU,MAAK,SAAC,OACrB,4BAAG,uBAIP,CChDe,SAASkK,IACvB,MAAM/H,EAAUC,uBAEV0C,EAAW,KAChB3C,EAAQ6C,KAAK,eAAe,EAGvBC,EAAmBF,IACxB,GAAc,OAAVA,EAAEG,IAGL,OAFAH,EAAEI,OAAOC,YACTN,GAED,EAUD,OAPA/F,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GAC9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,IAGF,oBAAQS,QAASZ,EAAU9E,UAAU,WAAU,UAC9C,qBAAKA,UAAU,MAAK,SAAC,OAAQ,YAIhC,CC1Be,SAASmK,IACvB,MAAMlI,EAAWC,cACXC,EAAUC,wBAEV,YAAEgI,EAAc,GAAE,QAAEvL,GAAU,EAAK,KAAEwD,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,cAEjFyL,EAAoB,KACzBpI,EAAS,CACRoC,KAAM,kBAGPpC,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACR0F,cAAe,eAIjB3G,EAAQ6C,KAAK,eAAe,EASvBC,EAAmBF,IACV,QAAVA,EAAEG,MACLH,EAAEM,kBAEM,OAAJhD,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,QAAS,GAClByJ,IAEF,EAYD,OATAtL,qBAAU,KAfTkD,EAAS,CACRoC,KAAM,6BAiBPiB,SAASC,iBAAiB,UAAWN,GAC9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,IAGF,mCACC,oBAAQ6E,SAA2B,KAAb,OAAJzH,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,QAAcZ,UAAU,aAAa0F,QAAS2E,EAAkB,UACvF,qBAAKrK,UAAU,MAAK,SAAC,QACrB,4BAAG,mBAIP,C,sBCpDe,SAASsK,EAAkB,GAAyB,IAAzB,WAAEC,GAAa,GAAO,EAC/D,MAAMtI,EAAWC,cACXC,EAAUC,uBAChB,IAAIoI,EAAoB/C,iBAAO,MAE/B,MAAM,KAAEpF,EAAO,GAAE,QAAExD,GAAU,EAAK,OAAEb,EAAS,GAAE,SAAED,EAAW,IAAOW,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAC3F,SAAEN,EAAW,CAAC,EAAC,QAAEgB,EAAU,CAAC,GAAML,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,MAC5EsF,GAAwB,OAAPpF,QAAO,IAAPA,OAAO,EAAPA,EAASqF,aAAa,EAEvCmF,EAAWS,GAA+B,KAAb,OAAJlI,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,SAAgB/B,IAAY6F,EAE3D+F,EAAuB,KAC5B,MAAM7G,EAAWvB,EAAK5C,QAAO,CAACiL,EAAE,KAAD,IAAE,MAAElL,GAAO,SAAMkL,IAAKlL,CAAK,GAAE,GAmBtD4D,EAAU,CACfC,OAlBc,CACd,CACCrF,SACAD,WACAuF,SAAU,GACVC,SAAU,GACVC,QAAS,IACTC,UAAW,IACXC,OAAQ,IACRC,SAAU,IACVC,SAAUA,EACVd,WAAYc,EACZC,QAAgB,OAAPvE,QAAO,IAAPA,OAAO,EAAPA,EAASwE,QAClBC,WAAoB,OAARzF,QAAQ,IAARA,OAAQ,EAARA,EAAUyF,aAMvBG,QAAa,OAAJ7B,QAAI,IAAJA,OAAI,EAAJA,EAAMxB,KAAI,CAACsD,EAAIrD,KAAC,IAAWqD,EAAInG,SAAQoG,OAAQtD,EAAI,OAG7DmB,EAAS,CACRoC,KAAM,mBACNjB,UACAjB,UACAgB,YAAaA,EAAY,MAAM,IAAMqH,KACpC,EAGGvF,EAAmBF,IACV,OAAVA,EAAEG,MACLH,EAAEM,iBAEGyE,GACJW,IAEF,EAGKtH,EAAcwH,0BAAgB,CACnCC,aAAc,CAACC,EAAUC,KACxBC,QAAQC,IAAI,eAAgBF,GAE5B3B,EAAA,EAAa2B,MAAM,CAClBzB,QAAS,eACTC,YAAY,yBAAD,OAA2BuB,EAAQ,cAAMC,KAGrD7I,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRvE,SAAS,IAET,EAEHoM,aAAc,KACb9B,EAAA,EAAa+B,QAAQ,CACpB7B,QAAS,SACTC,YAAa,yBACZ,IAYJ,OARAvK,qBAAU,KACTuG,SAASC,iBAAiB,UAAWN,GAE9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,IAEvD,CAAC5C,IAGH,qCACC,oBAAQxD,QAASA,EAASiL,SAAUA,EAAU9J,UAAU,WAAW0F,QAAS+E,EAAqB,UAChG,qBAAKzK,UAAU,MAAK,SAAC,OACrB,4BAAG,sBAGJ,qBAAKA,UAAU,uBAAsB,SACpC,cAACxC,EAAA,EAAS,CACTI,IAAMuG,GAAQqG,EAAoBrG,EAClCtG,aAAcwE,EACdvE,KAAM,CACLiC,WAAY,EACZJ,SAAU,EACVH,MAAO,GAERzB,SAAU,IAAIoN,KACdhN,SAAU,GACVF,cAAe,GACfI,eAAe,QAKpB,CCzGe,SAAS+M,EAAkB,GAA0E,IAAD,MAAzE,YAAEC,EAAc,CAAC1M,EAAO4H,KAAR,EAAkB,MAAE5H,EAAQ,CAAC,EAAC,YAAEkJ,KAAgBlK,GAAO,EAChH,MAAM,uBAAEiJ,EAAyB,CAAC,GAAMlI,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAChE,QAAEU,EAAU,CAAC,GAAML,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAC7D,UAAEuF,GAAY,GAAUrF,EAExBgM,EAAgE,KAAb,QAAnC,EAAAxE,OAAOC,KAAKH,UAAuB,aAAnC,EAAqChG,QAE3D,OACC,qBAAKZ,UAAU,gBAAe,SAC5B2E,EACA2G,EACC,sBAAKtL,UAAU,uCAAuCC,MAAO,CAAEsL,iBAAkB,6BAA8B,UAC9G,qBAAKvL,UAAU,GAAE,SAChB,cAAC2G,EAAgB,CAACL,GAAI+E,MAEvB,qBAAKrL,UAAU,GAAE,SAChB,cAACqG,EAAa,CAACC,GAAI+E,MAKpB,qBAAKrL,UAAU,OAAM,SACpB,qBAAIA,UAAU,sCAAqC,UAAC,SAC7C,qBAAKA,UAAU,MAAK,SAAC,cAAe,oCAK7C,sBAAKA,UAAU,uCAAuCC,MAAO,CAAEsL,iBAAkB,6BAA8B,UAC9G,qBAAKvL,UAAU,GAAE,SAChB,cAAC0J,EAAc,CAACpD,GAAI+E,MAErB,qBAAKrL,UAAU,GAAE,SAChB,cAACoH,EAAc,CAACd,GAAI+E,MAKrB,qBAAKrL,UAAU,GAAE,SAChB,cAACsK,EAAiB,MAEnB,qBAAKtK,UAAU,GAAE,SAChB,cAAC+J,EAAiB,CAACzD,GAAI+E,MAExB,qBAAKrL,UAAU,GAAE,SAChB,cAAC0G,EAAoB,MAEtB,qBAAK1G,UAAU,GAAE,SAChB,cAACkK,EAAa,MAEf,qBAAKlK,UAAU,GAAE,SAChB,cAACmK,EAAa,SAKjB,sBAAKnK,UAAU,uCAAuCC,MAAO,CAAEsL,iBAAkB,6BAA8B,UAC9G,qBAAKvL,UAAU,GAAE,SAChB,cAACyE,EAAA,EAAkB,MAEpB,qBAAKzE,UAAU,GAAE,SAChB,cAACkK,EAAa,UAMpB,C,sCC3Ee,SAASsB,IACvB,MAAM,KAAEnM,EAAO,CAAC,EAAC,QAAEC,EAAU,CAAC,GAAML,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAExE,SAAErB,EAAW,GAAE,OAAEC,EAAS,GAAE,QAAEa,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAE/ED,EAAO8M,GAAYjN,mBAAS,CAClCkN,cAAc,EACdC,YAAajL,QAgBd,OAbA3B,qBAAU,KACT,MAAM6M,EAAUC,aAAY,KAC3BJ,GAAUK,IAAI,IACVA,EACHH,YAAajL,SACX,GACD,KAEH,MAAO,KACNqL,cAAcH,EAAQ,CACtB,GACC,IAGF,qBAAK5L,UAAU,iDAAgD,SAC9D,sBAAKA,UAAU,gDAA+C,UAC7D,sBAAKA,UAAU,gCAA+B,UAC7C,mBAAOgM,IAAI,cAAchM,UAAU,oBAAoBiM,SAAS,IAChE,oBAAIjM,UAAU,gDAA+C,SAAC,6BAE/D,qBAAKA,UAAU,eAAc,SAC5B,sBAAKA,UAAU,6CAA4C,UAC1D,sBAAKA,UAAU,kCAAiC,UAC/C,mBAAGA,UAAU,2DAA0D,SAAC,mBACxE,oBAAIA,UAAU,oDAAmD,SAAEU,IAAO3C,GAAU4C,OAAO,2BAE5F,sBAAKX,UAAU,kCAAiC,UAC/C,mBAAGA,UAAU,2DAA0D,SAAC,UACxE,oBAAIA,UAAU,oDAAmD,SAAEU,MAASC,OAAO,qBAEpF,sBAAKX,UAAU,kCAAiC,UAC/C,mBAAGA,UAAU,2DAA0D,SAAC,SACxE,oBAAIA,UAAU,oDAAmD,SAAErB,EAAMgN,YAAYhL,OAAO,iBAE7F,sBAAKX,UAAU,kCAAiC,UAC/C,mBAAGA,UAAU,2DAA0D,SAAC,kBACxE,oBAAIA,UAAU,oDAAmD,SAAEnB,EAAU,MAAQb,GAAU,SAEhG,sBAAKgC,UAAU,GAAE,UAChB,oBAAGA,UAAU,2DAA0D,WACjE,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAM6M,OAAQ,aAAa,WAAe,OAAP5M,QAAO,IAAPA,OAAO,EAAPA,EAASwE,UAAW,OAEzD,oBAAI9D,UAAU,oDAAmD,UAAM,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAME,WAAY,sBAO5F,C,uDC1De,SAAS4M,EAAsB,GAAgD,IAAhD,KAAElG,EAAI,MAAEtH,EAAK,eAAEyN,EAAc,aAAEC,GAAc,EAC1F,MAAMpK,EAAWC,cACXC,EAAUC,wBAETsF,GAAQ,IAAKC,UACd2E,EAAW7E,iBAAO,MAClB8E,EAAc9E,iBAAO,OAErB,gBAAE+E,GAAkB,EAAK,QAAE3N,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOG,QAC7E,uBAAE8H,EAAyB,CAAC,EAAC,KAAEvE,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACzEoC,IAAKyL,EAAM,MAAExL,EAAQ,EAAC,SAAE+H,EAAW,IAAOpC,GAC5C,IAAE5F,EAAM,GAAMrC,EAcd+N,EAAiB3H,IACtB,MAAM4H,EAAgBrH,SAAS2B,iBAAmBqF,EAASxE,SAAWwE,EAASxE,QAAQ8E,SAAU,EAC3FC,EAAmBvH,SAAS2B,iBAAmBsF,EAAYzE,SAAWyE,EAAYzE,QAAQ8E,SAAU,EAE1G,MAAc,UAAV7H,EAAEG,KAAmByH,GACxBL,EAASxE,SAAWwE,EAASxE,QAAQ1C,YACrCmH,EAAYzE,SAAWyE,EAAYzE,QAAQC,UAI9B,UAAVhD,EAAEG,KAAmB2H,GACxBP,EAASxE,SAAWwE,EAASxE,QAAQ1C,OACrCmH,EAAYzE,SAAWyE,EAAYzE,QAAQC,aAE3CL,EAAKoF,WAKQ,UAAV/H,EAAEG,KACLwC,EAAKoF,SAGQ,WAAV/H,EAAEG,MACLmH,IACA3E,EAAKO,eAGQ,YAAVlD,EAAEG,KACLoH,EAASxE,SAAWwE,EAASxE,QAAQC,aAGxB,cAAVhD,EAAEG,MACLqH,EAAYzE,SAAWyE,EAAYzE,QAAQC,QAEvC8E,IACHN,EAAYzE,SAAWyE,EAAYzE,QAAQ1C,OAC3CkH,EAASxE,SAAWwE,EAASxE,QAAQ1C,UAEvC,EA4DD,OAzDArG,qBAAU,KACTkD,EAAS,CACRoC,KAAM,iBACNjB,QAAS,CACRoJ,iBAAiB,KAInB9E,EAAKO,aAAa,GAChB,CAAChC,IAEJlH,qBAAU,KACTuG,SAASC,iBAAiB,UAAWmH,GAE9B,KACNpH,SAASE,oBAAoB,UAAWkH,EAAc,IAErD,CAAChF,IAEJ3I,qBAAU,KACT,GAAIkH,GACCuG,EAAiB,CACpB,MAAM3D,EAAW,GA8BjB,OA5BI,OAAJxG,QAAI,IAAJA,KAAMxB,KAAKsD,GACNA,EAAG6E,WAAaA,EAQZH,EAAS7D,KAAKb,IAPrB0E,EAAS7D,KAAK,IACVb,EACHnD,KAAMA,EACNxB,OAAQwB,GAAOC,EACfgD,QAASjD,GAAOC,KAMX,KAGRgB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IAAIwG,MAIZuD,SAEAjD,EAAA,EAAa+B,QAAQ,CACpB7B,QAAS,YACTC,YAAY,oCAAD,OAAsCtI,EAAG,MAGtD,CACD,GACE,CAACwL,EAAiBvG,IAGpB,mBAAOJ,UAAQ,EAACI,KAAMA,EAAMD,SAAUqG,EAAcU,MAAO,oBAAI/M,UAAU,UAAS,SAAC,kBAAoB+F,QAAQ,EAAM,SACpH,mBAEC2B,KAAMA,EACNsF,KAAK,QACLC,OAAO,WACPC,cAAe,CACdC,UAAU,GAEXC,SAzHeC,IACjBpL,EAAS,CACRoC,KAAM,mBACNjB,QAAS,CACRkK,MAAa,OAAND,QAAM,IAANA,OAAM,EAANA,EAAQC,MACfC,SAAUC,OAAOC,KAAW,OAANJ,QAAM,IAANA,OAAM,EAANA,EAAQE,UAC9BG,OAAQ,QAETvL,WACC,EAiHAwL,eAAgB5C,QAAQC,IACxB4C,aAAa,MACb3N,MAAO,CAAEC,SAAU,OAAQ4F,MAAO,QAAS,SAC3C,oBAAK5E,MAAI,EAACC,OAAQ,CAAC,GAAI,IAAI,UAC1B,mBAAKV,KAAM,EAAE,SACZ,sBAAKT,UAAU,kCAAiC,UAAC,cACrC,4BAAIyM,GAAU,SAG3B,mBAAKhM,KAAM,EAAE,SACZ,sBAAKT,UAAU,kCAAiC,UAAC,eACpC,4BAAIgB,GAAO,SAGzB,mBAAKP,KAAM,EAAE,SACZ,sBAAKT,UAAU,kCAAiC,UAAC,cACrC,6BAAKyM,GAAUzL,GAAO,SAGnC,mBAAKP,KAAM,GAAG,SACb,kBAAMoN,KAAI,CACTC,MAAM,QACNd,KAAK,QACLe,MAAO,CACN,CACCC,UAAU,EACV3E,QAAS,iBAET,SACF,mBACC4E,WAAS,EACTrQ,IAAK0O,EACLjI,KAAK,QACLuJ,aAAa,QACbM,YAAY,sBACZlO,UAAU,+BAIb,mBAAKS,KAAM,GAAG,SACb,kBAAMoN,KAAI,CACTC,MAAM,WACNd,KAAK,WACLe,MAAO,CACN,CACCC,UAAU,EACV3E,QAAS,iBAET,SACF,kBAAO8E,SAAQ,CACdvQ,IAAK2O,EACLlI,KAAK,WACLuJ,aAAa,QACbM,YAAY,WACZlO,UAAU,+BAIb,mBAAKS,KAAM,GAAG,SACb,sBAAKT,UAAU,gDAA+C,UAAC,WACtD,4BAAG,WAAU,kBAAe,4BAAG,mBAAmB,SAAK,4BAAG,WAAU,YAAS,4BAAG,kBAG1F,mBAAKS,KAAM,GAAG,SACb,sBAAKT,UAAU,oDAAmD,UACjE,kBAAM6N,KAAI,UACT,mBAAQO,QAASvP,EAASA,QAASA,EAASwF,KAAK,UAAUgK,SAAS,SAASrO,UAAU,4BAA2B,SAAC,iBAIpH,kBAAM6N,KAAI,UACT,mBACCxJ,KAAK,UACLgK,SAAS,SACTrO,UAAU,qEACV0F,QAAS2G,EAAa,SAAC,yBAUhC,CC3Ne,SAASiC,EAAe,GAAwC,IAAxC,KAAErI,EAAI,aAAEoG,EAAY,cAAEkC,GAAe,EAC3E,MAAMtM,EAAWC,eAEX,uBAAE0E,EAAyB,CAAC,EAAC,KAAEvE,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACzEoC,IAAKyL,EAAM,SAAEzD,EAAW,GAAE,MAAE/H,EAAQ,EAAC,WAAEwH,EAAa,GAAE,SAAE+F,EAAW,IAAO5H,EAE5EY,EAAWC,iBAAO,MAClBgH,EAAWhH,iBAAO,OAEjB9I,EAAO8M,GAAYjN,mBAAS,CAClCwC,IAAKyL,EACLiC,cAAc,EACdC,cAAc,IAGTvC,EAAiB,KACtBC,IACAZ,EAAS,CACRzK,IAAKyL,EACLiC,cAAc,EACdC,cAAc,GACb,EAGG9G,EAAc,KACLL,GAAiC,OAArBA,EAASM,SAGlCN,EAASM,QAAQC,OAClB,EAGK6G,EAAoB,KACXpH,GAAiC,OAArBA,EAASM,UAGlCN,EAASM,QAAQC,QACjBP,EAASM,QAAQ+G,SAClB,EAYKC,EAAc,KACnB,MAAM,IAAE9N,EAAM,GAAMrC,EAGpB,GAFAkJ,IAEa,KAAR7G,IAAcA,GAAO,EAOzB,OANAmI,EAAA,EAAa2B,MAAM,CAClBzB,QAAS,aACTC,YAAa,sCAGdzB,IASDkH,EALY,KAAR/N,GAAcA,IAAQyL,EAKVzL,GAJEyL,EAIE,EAGfsC,EAAkB,WAAmB,IAAlB/N,EAAG,uDAAGyL,EAC9B,MAAM9D,EAA2B,KAAb,OAAJtG,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,UAAoB,OAAJyB,QAAI,IAAJA,OAAI,EAAJA,EAAMuG,QAAQ7D,GAAMA,EAAEiE,WAAaA,KAEzE,GAAIL,GAAW3H,GAAO,EAOrB,OANAmI,EAAA,EAAa6F,KAAK,CACjB3F,QAAS,aACTC,YAAa,iCAGdsF,IAID,GAAIjG,GAAW3H,EAAMyL,EACpBpB,EAAY,gBAAgB,QAI7B,GAAI1C,GAAW3H,GAAO,EAAG,CACxB,MAAM6H,EAAW,GA8BjB,OA5BI,OAAJxG,QAAI,IAAJA,KAAMxB,KAAKsD,GACNA,EAAG6E,WAAaA,EAQZH,EAAS7D,KAAKb,IAPrB0E,EAAS7D,KAAK,IACVb,EACHnD,KAAMA,EACNxB,OAAQwB,GAAOC,EACfgD,QAASjD,GAAOC,KAMX,KAGRgB,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRf,KAAM,IAAIwG,MAIZ4C,GAAUK,IAAI,IACVA,EACH9K,eAGDoL,GAED,CACD,EAEM3F,EAAuB1B,IAC5B,MACMG,EAAMH,EAAEG,IAEd,GAHoB,CAAC,UAAW,aAAc,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAG3E+J,SAAS/J,GAAM,CAC9B,GAAY,YAARA,EAEH,YADA0J,IAID/G,GACD,GAGKwD,EAAc,CAAC1M,EAAO4H,KAC3BkF,GAAUK,IAAI,IACVA,EACH,CAACnN,GAAQ4H,KACP,EAyBJ,OAtBAxH,qBAAU,MACLkH,GAAc,OAALtH,QAAK,IAALA,KAAOgQ,eACnB9G,IACAvC,SAASC,iBAAiB,UAAWkB,IAG/B,KACNnB,SAASE,oBAAoB,UAAWiB,EAAoB,IAE3D,CAACR,EAAMtH,IAEVI,qBAAU,KACT6P,GAAmB,GACjB,CAAC3I,IAEJlH,qBAAU,KACT0M,GAAUK,IAAI,IACVA,EACH9K,IAAKyL,KACH,GACD,CAAC7F,IAGH,qCACC,mBACCf,UAAQ,EACRI,KAAMA,EACNiJ,KAAMJ,EACN9I,SAAUoG,EACVW,MAAO,mBAAG/M,UAAU,UAAS,SAAC,kBAC9B+F,OACC,sBAAK/F,UAAU,oDAAmD,UACjE,mBACCqE,KAAK,SACL8K,KAAK,QACLnP,UAAU,qBACVoP,QAAM,EACN1J,QAAS,KACR6I,EAAc,sBAAsB,GACpCA,EAAc,YAAY,EAAM,EAC/B,SAAC,iBAGJ,mBACC7I,QAAS,KACRqJ,EAAqB,OAALpQ,QAAK,IAALA,OAAK,EAALA,EAAOqC,IAAI,EAE5BqD,KAAK,UACL8K,KAAK,QACLnP,UAAU,mCAAkC,SAAC,qBAI/C,SACD,oBAAKpC,IAAK6Q,EAAUY,SAAU,EAAG/H,UAAWb,EAAqBvF,MAAI,EAACC,OAAQ,CAAC,EAAG,GAAG,UACpF,mBAAKV,KAAM,GAAG,SACb,8BACC,mBAAKA,KAAM,GAAG,SAAC,kBACf,mBAAKA,KAAM,EAAE,SAAC,MACd,mBAAKA,KAAM,GAAG,mBAAKgI,EAAU,cAAMO,UAGrC,mBAAKvI,KAAM,GAAG,SACb,8BACC,mBAAKA,KAAM,GAAG,SAAC,gBACf,mBAAKA,KAAM,EAAE,SAAC,MACd,mBAAKA,KAAM,GAAG,SAAE+N,SAGlB,mBAAK/N,KAAM,GAAG,SACb,8BACC,mBAAKA,KAAM,GAAG,SAAC,iBACf,mBAAKA,KAAM,EAAE,SAAC,MACd,mBAAKA,KAAM,GAAG,SAAEW,YAAeH,EAAO,UAGxC,mBAAKR,KAAM,GAAG,SACb,8BACC,mBAAKA,KAAM,GAAG,SAAC,QACf,mBAAKA,KAAM,EAAE,SAAC,MACd,mBAAKA,KAAM,GAAG,SAAEgM,SAGlB,oBAAKhM,KAAM,GAAG,UACb,mBACCwN,WAAS,EACT5J,KAAK,SACLzG,IAAK4J,EACLN,GAAG,YACHoI,MAAY,OAAL3Q,QAAK,IAALA,OAAK,EAALA,EAAOqC,IACduO,aAAc9C,EACd3C,SAAUnL,EAAM+P,aAChBc,SAAWC,IAAUC,OArMLJ,EAqMkBG,EAAMtK,OAAOmK,MApMpD7D,GAAUK,IAAI,IACVA,EACH9K,KAAMsO,WAGPzH,IANqByH,KAqMsC,EACtDK,aAAc,KACbb,GAAa,EAEd9O,UAAU,0CACVkO,YAAY,sBACZ0B,QAAU7K,IACT6J,GAAmB,EAEpBlJ,QAAS,KACRkJ,GAAmB,IAIrB,oBAAG5O,UAAU,4BAA2B,UAAC,WAChC,4BAAG,WAAU,0CAAuC,4BAAG,UAAS,+BAK5E,cAACmM,EAAqB,CACrBlG,KAAW,OAALtH,QAAK,IAALA,OAAK,EAALA,EAAOgQ,aACbhQ,MAAOA,EACP0N,aAAc,IAAMhB,EAAY,gBAAgB,GAChDA,YAAaA,EACbe,eAAgBA,MAIpB,CC5Qe,SAASyD,EAAmB,GAA+E,IAA/E,KAAE5J,EAAI,MAAEtH,EAAK,aAAE0N,EAAY,YAAEhB,EAAc,CAAC1M,EAAO4H,KAAR,EAAkB,YAAEsB,GAAa,EACtH,MAAM5F,EAAWC,cACXC,EAAUC,wBAEV,iBAAEoH,GAAqBjC,KACvB,uBAAEX,EAAyB,CAAC,GAAMlI,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAChE,gBAAE4N,GAAkB,EAAK,QAAE3N,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOG,OAE7E+H,EAA4D,IAA/CC,OAAOC,KAAKH,GAAwBhG,OACjD6N,EAAWhH,iBAAO,MAClB6E,EAAW7E,iBAAO,MAClB8E,EAAc9E,oBAEbC,GAAQ,IAAKC,UAcd+E,EAAiB3H,IACtB,MAAM4H,EAAgBrH,SAAS2B,iBAAmBqF,EAASxE,SAAWwE,EAASxE,QAAQ8E,SAAU,EAC3FC,EAAmBvH,SAAS2B,iBAAmBsF,EAAYzE,SAAWyE,EAAYzE,QAAQ8E,SAAU,EAE1G,MAAc,UAAV7H,EAAEG,KAAmByH,GACxBL,EAASxE,SAAWwE,EAASxE,QAAQ1C,YACrCmH,EAAYzE,SAAWyE,EAAYzE,QAAQC,UAI9B,UAAVhD,EAAEG,KAAmB2H,GACxBP,EAASxE,SAAWwE,EAASxE,QAAQ1C,OACrCmH,EAAYzE,SAAWyE,EAAYzE,QAAQC,aAE3CL,EAAKoF,WAKQ,UAAV/H,EAAEG,KACLwC,EAAKoF,SAGQ,WAAV/H,EAAEG,MACLmH,IACA3E,EAAKO,eAGQ,YAAVlD,EAAEG,KACLoH,EAASxE,SAAWwE,EAASxE,QAAQC,aAGxB,cAAVhD,EAAEG,MACLqH,EAAYzE,SAAWyE,EAAYzE,QAAQC,QAEvC8E,IACHN,EAAYzE,SAAWyE,EAAYzE,QAAQ1C,OAC3CkH,EAASxE,SAAWwE,EAASxE,QAAQ1C,UAEvC,EA6BD,OA1BArG,qBAAU,KACTkD,EAAS,CACRoC,KAAM,iBACNjB,QAAS,CACRoJ,iBAAiB,IAEjB,GACA,CAACvG,IAEJlH,qBAAU,KACTuG,SAASC,iBAAiB,UAAWmH,GAE9B,KACNpH,SAASE,oBAAoB,UAAWkH,EAAc,IAErD,CAAChF,IAEJ3I,qBAAU,KACLkH,GACCuG,GAAmB3F,IACtB2C,EAAuC,OAAtB5C,QAAsB,IAAtBA,OAAsB,EAAtBA,EAAwBoC,UACzCqD,IAEF,GACE,CAACG,EAAiBvG,IAGpB,mBAAOJ,UAAQ,EAACI,KAAMA,EAAMD,SAAUqG,EAAcU,MAAO,oBAAI/M,UAAU,UAAS,SAAC,iBAAmB+F,QAAQ,EAAM,SACnH,qBAAKnI,IAAK6Q,EAAUY,SAAU,EAAE,SAC/B,sBAAKrP,UAAU,SAAQ,UACtB,qBAAKA,UAAU,OAAM,SACpB,oBAAGA,UAAU,0BAAyB,UAAC,gDACO,4BAA0B,OAAtB4G,QAAsB,IAAtBA,OAAsB,EAAtBA,EAAwB7F,WAAa,2CAIxF,mBACC2G,KAAMA,EACNsF,KAAK,QACLC,OAAO,WACPC,cAAe,CACdC,UAAU,GAEXC,SAjGaC,IACjBpL,EAAS,CACRoC,KAAM,mBACNjB,QAAS,CACRkK,MAAa,OAAND,QAAM,IAANA,OAAM,EAANA,EAAQC,MACfC,SAAUC,OAAOC,KAAW,OAANJ,QAAM,IAANA,OAAM,EAANA,EAAQE,UAC9BG,OAAQ,QAETvL,WACC,EAyFEwL,eAAgB5C,QAAQC,IACxB4C,aAAa,MACb3N,MAAO,CAAEC,SAAU,OAAQ4F,MAAO,QAAS,SAC3C,oBAAK5E,MAAI,EAACC,OAAQ,CAAC,EAAG,GAAG,UACxB,mBAAKV,KAAM,GAAG,SACb,kBAAMoN,KAAI,CACTC,MAAM,QACNd,KAAK,QACLe,MAAO,CACN,CACCC,UAAU,EACV3E,QAAS,iBAET,SACF,mBACCzL,IAAK0O,EACLjI,KAAK,QACL4J,WAAS,EACTL,aAAa,QACbM,YAAY,sBACZlO,UAAU,+BAIb,mBAAKS,KAAM,GAAG,SACb,kBAAMoN,KAAI,CACTC,MAAM,WACNd,KAAK,WACLe,MAAO,CACN,CACCC,UAAU,EACV3E,QAAS,iBAET,SACF,kBAAO8E,SAAQ,CACdvQ,IAAK2O,EACLlI,KAAK,WACLuJ,aAAa,QACbM,YAAY,WACZlO,UAAU,+BAIb,mBAAKS,KAAM,GAAG,SACb,sBAAKT,UAAU,gDAA+C,UAAC,WACtD,4BAAG,WAAU,kBAAe,4BAAG,mBAAmB,SAAK,4BAAG,WAAU,YAAS,4BAAG,kBAG1F,mBAAKS,KAAM,GAAG,SACb,sBAAKT,UAAU,oDAAmD,UACjE,kBAAM6N,KAAI,UACT,mBAAQO,QAASvP,EAASA,QAASA,EAASwF,KAAK,UAAUgK,SAAS,SAASrO,UAAU,uBAAsB,SAAC,eAI/G,kBAAM6N,KAAI,UACT,mBACCxJ,KAAK,UACLgK,SAAS,SACTrO,UAAU,qEACV0F,QAAS2G,EAAa,SAAC,8BAYlC,C,YCtLe,SAASyD,EAAoBnS,GAAQ,IAAD,EAClD,MAAMsE,EAAWC,cACXC,EAAUC,wBAEV,QAAE2N,EAAO,SAAE/J,GAAarI,GACxB,iBAAEqS,EAAmB,GAAE,QAAEnR,GAAU,GAAUH,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACzE4I,SAAUyI,GAAkB1I,IAE9B2I,EAAWzI,iBAAO,MAClB0I,EAAW1I,iBAAO,MAClBgH,EAAWhH,iBAAO,OACjB9I,EAAO8M,GAAYjN,mBAAS,CAClC4R,OAAQ,GACRC,GAAI,EACJxJ,YAAY,EACZyJ,UAAW,GACXC,aAAc,CAAC,IAGVC,EAAuBxS,IAC5BiE,EAAS,CACRoC,KAAM,0BACNjB,QAAS,CACRpF,UAEDmE,UACAyD,QAASyG,EACToE,QAAc,OAAL9S,QAAK,IAALA,OAAK,EAALA,EAAO0N,aACf,EAGGqF,EAAc3L,IACnB,MACM,EAAEsL,EAAC,UAAEC,GAAc3R,EAYzB,GAVAsR,GAA2C,OAA1BA,EAAcnI,SAAoBmI,EAAcnI,QAAQ1C,OAC3D,OAAVL,EAAEG,MACLH,EAAEM,iBACFsL,KAGa,eAAV5L,EAAEG,KAAkC,cAAVH,EAAEG,KAC/ByL,IAVmB,CAAC,UAAW,YAAa,QAAS,UAatC1B,SAASlK,EAAEG,MAAQ6K,EAAS,CAC3ChL,EAAEM,iBAEF8K,GAAYA,EAASrI,QAAQ1C,OAC7B6K,GAA2C,OAA1BA,EAAcnI,SAAoBmI,EAAcnI,QAAQ1C,OAEzE,MAAMwL,EAAQV,GAAYA,EAASpI,QAEnC,GAAc,cAAV/C,EAAEG,KAAuBoL,EAAU1P,QAAU0P,EAAU1P,OAAS,GAAe,OAAVgQ,EAAgB,CACxFT,EAASrI,QAAQ1C,OAEjB,MAAMyL,EAAQD,EAAME,WAAa,KAC3BC,EAAMF,GAAmB,OAAVA,GAAkBA,EAAMG,UAAa,GAW1D,IATIX,GAAK,GAAKC,EAAU1P,OAAOA,OAAS,IACvC6K,EAAS,IACL9M,EACH0R,EAAG,EACHxJ,YAAY,EACZ0J,aAAcD,EAAU,KAItBD,IAAMC,EAAU1P,SACnB6K,EAAS,IACL9M,EACH0R,EAAGC,EAAU1P,OACbiG,YAAY,EACZ0J,aAAcD,EAAUA,EAAU1P,UAG/BmQ,EAAGV,IACN,OAAOU,EAAGV,GAAGtI,QAIf,GAAIsI,EAAIC,EAAU1P,SACjB6K,EAAS,IACL9M,EACH0R,EAAGA,EAAI,EACPxJ,YAAY,EACZ0J,aAAcD,EAAUD,EAAI,KAGzBU,EAAGV,EAAI,IACV,OAAOU,EAAGV,EAAI,GAAGtI,OAGpB,CAEA,GAAc,YAAVhD,EAAEG,KAAqBoL,EAAU1P,QAAU0P,EAAU1P,OAAS,GAAe,OAAVgQ,EAAgB,CACtFT,EAASrI,QAAQ1C,OAEbiL,GAAK,GACR5E,EAAS,IACL9M,EACH0R,EAAGA,EAAI,EACPxJ,YAAY,EACZ0J,aAAcD,EAAUD,EAAI,KAI1BA,GAAK,GACR5E,EAAS,IACL9M,EACH0R,EAAG,EACHxJ,YAAY,EACZ0J,aAAcD,EAAU,KAI1B,MAAMO,EAAQD,EAAME,WAAa,KAC3BC,EAAMF,GAAmB,OAAVA,GAAkBA,EAAMG,UAAa,GAE1D,GAAID,EAAGV,EAAI,GACV,OAAOU,EAAGV,EAAI,GAAGtI,OAEnB,CAEA,GAAc,UAAVhD,EAAEG,KAAwB,OAALvG,QAAK,IAALA,KAAOkI,WAAY,CAC3C,MAAMoK,EAAkE,IAAlDnK,OAAOC,MAAU,OAALpI,QAAK,IAALA,OAAK,EAALA,EAAO4R,eAAgB,CAAC,GAAG3P,OAGzC,IAAD,EAAnB,OADA+P,IACIM,OACHT,EAAyB,OAAL7R,QAAK,IAALA,GAAmB,QAAd,EAALA,EAAO4R,oBAAY,WAAd,EAAL,EAAqBvS,QAInC,IACR,CAEc,WAAV+G,EAAEG,KACLmH,GAEF,GAoCKA,EAAe,KACpBZ,EAAS,IACL9M,EACHkI,YAAY,EACZ0J,aAAc,CAAC,IAGhBvK,GAAU,EAGL2K,EAAa,KACdR,GAAiC,OAArBA,EAASrI,SACxBqI,EAASrI,QAAQC,OAClB,EAwCD,OArCAhJ,qBAAU,KACT4R,IACAlF,EAAS,IACL9M,EACH0R,EAAG,IAGG,KACN5E,GAAS,KACF,GACL,IAED,IAEH1M,qBAAU,KACT,MAAMsD,EAAO2N,EAAiBnP,KAAI,CAAC0F,EAAKzF,KAAC,IAAWyF,EAAKrB,IAAKpE,EAAI,MAClE2K,EAAS,IACL9M,EACH2R,UAAe,OAAJjO,QAAI,IAAJA,OAAI,EAAJA,EAAM6O,MAAM,EAAG,MAG3BP,GAAY,GACV,CAACX,IAEJjR,qBAAU,KACKmR,GAAiC,OAArBA,EAASpI,SAAoBoI,EAASpI,SAI/DxC,SAASC,iBAAiB,UAAWmL,GAG/B,KACNpL,SAASE,oBAAoB,UAAWkL,EAAW,IAElD,CAACR,EAAUvR,IAGb,mBAAOsH,KAAM8J,EAAS/J,SAAUqG,EAAcxG,UAAQ,EAACC,MAAO,IAAKC,OAAQ,KAAK,SAC/E,sBAAKnI,IAAK6Q,EAAUnH,UAAWoJ,EAAY1Q,UAAU,gBAAe,UACnE,sBAAKA,UAAU,2EAA0E,UACxF,oBAAIA,UAAU,oCAAmC,SAAC,sBACjDnB,GAAW,cAACsS,EAAA,EAAe,CAACC,MAAI,EAACpR,UAAU,eAE7C,qBAAKA,UAAU,SAAQ,SACtB,mBAAMA,UAAU,SAAQ,SACvB,kBAAM6N,KAAI,CAAC7N,UAAU,SAAQ,SAC5B,mBACCpC,IAAKuS,EACLlC,WAAS,EACTC,YAAY,4BACZlO,UAAU,wGACVwP,SAAWzK,GArGM,WAAiB,IAAD,MAAfmE,EAAK,uDAAG,GAChC,GAAIA,GAAmB,KAAVA,EAAc,CAC1B,MAAMmI,EAAWrB,EACfpH,QACCzE,GAAOA,EAAGnG,OAAOsT,cAAcC,QAAQrI,EAAMoI,gBAAkB,GAAKnN,EAAGnG,OAAOsT,cAAcC,QAAQrI,EAAMoI,gBAAkB,IAE7HzQ,KAAI,CAAC0F,EAAKzF,KAAC,IAAWyF,EAAKrB,IAAKpE,EAAI,MAEtC,OAAwB,IAApBuQ,EAASzQ,YACZ6K,EAAS,IACL9M,EACH2R,UAAWe,EACXhB,EAAG,EACHE,aAAc,CAAC,EACf1J,YAAY,SAMd,CACD,CAEA,MAAM2K,EAA6B,OAAhBxB,QAAgB,IAAhBA,GAA2D,QAA3C,EAAhBA,EAAkBnP,KAAI,CAAC0F,EAAKzF,KAAC,IAAWyF,EAAKrB,IAAKpE,EAAI,aAAK,WAA3C,EAAhB,EAA6DoQ,MAAM,EAAG,IACzFzF,EAAS,IACL9M,EACH2R,UAAWkB,EACXnB,EAAG,EACHE,aAAc,CAAC,EACf1J,YAAY,GAEd,CAsEwB4K,CAAgB1M,EAAEI,OAAOmK,eAK9C,qBAAKtP,UAAU,SAAQ,SACtB,wBAAOpC,IAAKsS,EAAUhJ,GAAG,QAAQlH,UAAU,iCAAgC,UAC1E,uBAAOA,UAAU,SAAQ,SACxB,qBAAkBA,UAAU,2CAA0C,UACrE,oBAAIA,UAAU,8CAA6C,SAAC,OAC5D,oBAAIA,UAAU,4CAA2C,SAAC,sBAC1D,oBAAIA,UAAU,4CAA2C,SAAC,YAC1D,oBAAIA,UAAU,4CAA2C,SAAC,eAJnD,aAOT,gCACO,OAALrB,QAAK,IAALA,GAAgB,QAAX,EAALA,EAAO2R,iBAAS,WAAX,EAAL,EAAkBzP,KAAI,CAACwH,EAAM7G,KAAW,IAAD,EACvC,MAAM,OAAExD,EAAS,GAAE,SAAE0T,EAAW,GAAE,SAAE9N,EAAW,GAAE,IAAEsB,EAAM,IAAOmD,GAAQ,CAAC,EACzE,OACC,qBACCnB,GAAI1F,EACJ6N,SAAU7N,EACVxB,UAAS,uBAAkBwB,EAAQ,IAAM,EAAI,WAAa,cAAa,aACjE,OAAL7C,QAAK,IAALA,GAAsB,QAAjB,EAALA,EAAOgT,uBAAe,WAAjB,EAAL,EAAwB3T,WAAe,OAAJqK,QAAI,IAAJA,OAAI,EAAJA,EAAMrK,QAAS,gBAAkB,WAAU,sGAG/E0H,QAAS,KACR+F,EAAS,IACL9M,EACHkI,YAAY,EACZ8K,gBAAiBtJ,IAGlBmI,EAAoBxS,EAAO,EAC1B,UACF,oBAAIgC,UAAU,mBAAkB,SAAEwB,EAAQ,IAC1C,oBAAIxB,UAAU,iBAAgB,SAAEU,IAAOgR,GAAU/Q,OAAO,0BACxD,qBAAIX,UAAU,sEAAqE,UACjFhC,EACAa,GAAW,cAACsS,EAAA,EAAe,CAACC,MAAI,EAACpR,UAAU,eAE7C,qBAAIA,UAAU,iBAAgB,UAAC,MAAIoB,YAAewC,EAAU,QAhBvDsB,EAiBD,WAMV,qBAAKlF,UAAU,gDAA+C,SAC7D,qBAAIA,UAAU,YAAW,UAAC,oBACR,4BAAG,OAAM,uBAAoB,4BAAG,eAAe,2BAAuB,4BAAG,WAAU,QAAK,4BAAG,WAAU,yDACvE,4BAAG,UAAS,+CAMjE,C,aC9SA,MAAM4R,EAAU,CACf,CACC1M,IAAK,KACL2M,UAAW,KACX9E,MAAO,mBAAG/M,UAAU,eAAc,SAAC,SACnC8R,OAAQ,CAACC,EAAGvQ,IAAU,mBAAGxB,UAAU,cAAa,SAAEwB,EAAQ,IAC1DsE,MAAO,GACPkM,MAAO,UAER,CACC9M,IAAK,WACL2M,UAAW,WACX9E,MAAO,mBAAG/M,UAAU,sBAAqB,SAAC,QAC1C8R,OAASvL,GAAQ,mBAAGvG,UAAU,YAAW,SAAEuG,IAC3CT,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,aACL2M,UAAW,aACX9E,MAAO,mBAAG/M,UAAU,sBAAqB,SAAC,mBAC1C8R,OAASvL,GAAQ,mBAAGvG,UAAU,YAAW,SAAEuG,IAC3CT,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,WACL2M,UAAW,WACX9E,MAAO,mBAAG/M,UAAU,sBAAqB,SAAC,gBAC1C8R,OAASvL,GAAQ,mBAAGvG,UAAU,YAAW,SAAEuG,IAC3CT,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,MACL2M,UAAW,WACX9E,MAAO,mBAAG/M,UAAU,eAAc,SAAC,WACnC8R,OAASvL,GAAQ,mBAAGvG,UAAU,wBAAuB,SAAEuG,EAAIjF,OAAOC,gBAClEuE,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,aACL2M,UAAW,aACX9E,MAAO,mBAAG/M,UAAU,eAAc,SAAC,UACnC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEoB,YAAemF,EAAK,KACjET,MAAO,IACPkM,MAAO,WAIM,SAASC,EAAgB,GAAgD,IAAhD,SAAExD,EAAQ,aAAEpC,EAAY,kBAAE6F,GAAmB,EACpF,MAAMjQ,EAAWC,cACXtE,EAAM6J,iBAAO,MACb0K,EAAa1K,iBAAO,KAEnB2K,EAAaC,GAAkB7T,oBAAU,IAExCoJ,aAAcvF,EAAO,IAAO3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAC5D,cAAEwJ,GAAkBb,IAEpB+K,EAAqB,WAC1B,MAAMjK,EAAOhG,EADmB,uDAAG,GAGnC+F,EAAcC,EAAM,SAEpBgK,GAAgB,GAChBH,GAED,EAEMzL,EAAuB1B,IAC5B,GACM,OADEA,EAAEG,IAERmN,EAAe,GACfzU,GAAuB,OAAhBA,EAAIkK,SAAoBlK,EAAIkK,QAAQC,OAKrC,EAIH2E,EAAiB3H,IACtB,OAAQA,EAAEG,KACT,IAAK,UACJmN,GAAgBE,GAAcC,KAAKC,IAAIF,EAAY,EAAG,KAEtD,MACD,IAAK,YACJF,GAAgBE,GAAcC,KAAKE,IAAIH,EAAY,EAAGlQ,EAAKzB,OAAS,KAEpE,MACD,IAAK,QACJ0R,EAAmBF,GAEnB,MACD,IAAK,SACJrN,EAAEI,OAAOC,OACTiN,GAAgB,GAEhBhG,IACApK,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRwD,uBAAwB,CAAC,KAMrB,EAqCT,OAjCA7H,qBAAU,KACTsT,GAAgB,GAOhB,OALc5D,GAAiC,OAArBA,EAAS3G,SAAoB2G,EAAS3G,SAE/DxC,SAASC,iBAAiB,UAAWkB,GAG/B,KACNnB,SAASE,oBAAoB,UAAWiB,EAAoB,CAC5D,GACC,CAACgI,IAEJ1P,qBAAU,KACT,MAAM6R,EAAQhT,GAAuB,OAAhBA,EAAIkK,SAAoBlK,EAAIkK,QAEjD,GAAI8I,EAGH,OAFAA,EAAMrL,iBAAiB,UAAWmH,GAE3B,KACNkE,EAAMpL,oBAAoB,UAAWkH,EAAc,CAErD,GACE,CAAC+B,EAAU7Q,EAAKwU,EAAa/P,IAEhCtD,qBAAU,KACToT,EAAWrK,QAAQsK,IAAgBD,EAAWrK,QAAQsK,GAAaO,eAAe,CAAEC,SAAU,SAAUC,MAAO,UAAW,GACxH,CAACT,IAEJrT,qBAAU,KACTmT,GAAmB,GACjB,CAAC7P,IAGH,sBAAKrC,UAAU,8BAA6B,UAC3C,wBAAOpC,IAAKA,EAAKyR,SAAU,EAAGrP,UAAU,4CAA4C8S,QAAM,YACzF,uBAAO9S,UAAU,sCAAqC,SACrD,6BACS,OAAP4R,QAAO,IAAPA,OAAO,EAAPA,EAAS/Q,KAAI,IAAuD,IAAtD,MAAEkM,EAAQ,GAAE,MAAEjH,EAAQ,EAAC,UAAE+L,EAAY,GAAE,MAAEG,GAAO,EAC9D,OACC,oBAAoBhS,UAAS,eAAUgS,EAAK,oBAAoB/R,MAAO,CAAE6F,SAAQ,SAC/EiH,GADO8E,EAEJ,QAKT,gCACExP,EAAKxB,KAAI,CAACwB,EAAMb,IAChB,oBAEC5D,IAAMuG,GAAQgO,EAAWrK,QAAQtG,GAAS2C,EAC1CnE,UAAS,6CACRwB,IAAU4Q,EAAc,wBAA0B,GAAE,qEAErD1M,QAAS,KACR4M,EAAmB9Q,GACnB0Q,GAAmB,EAClB,SACM,OAAPN,QAAO,IAAPA,OAAO,EAAPA,EAAS/Q,KAAI,IAAmC,IAAlC,UAAEgR,EAAS,MAAEG,EAAK,OAAEF,GAAQ,EAC1C,OACC,oBAAoB9R,UAAS,eAAUgS,EAAK,SAAQ,SAClDF,EAAOzP,EAAKwP,GAAYrQ,IAAU,IAD3BqQ,EAEJ,KAbFrQ,UAqBS,KAAb,OAAJa,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,SACN,qBAAKZ,UAAU,wDAAuD,SACrE,sBAAKA,UAAU,wDAAuD,UACrE,cAAC,IAAa,CAACA,UAAU,2BACzB,oBAAGA,UAAU,oCAAmC,UAAC,8BACrB,4BAAG,OAAM,gDAA6C,4BAAG,OAAM,iCAA+B,IACzH,4BAAG,WAAU,MAAG,4BAAG,WAAU,yCAAsC,4BAAG,UAAS,kDAOtF,CCvMe,SAAS+S,EAAqB,GAA8C,IAA9C,KAAE9M,GAAO,EAAK,YAAE4B,EAAW,aAAEwE,GAAc,EACvF,MAAMpK,EAAWC,cACXsF,EAAWC,iBAAO,MAClBgH,EAAWhH,iBAAO,OAElB,QAAE5I,GAAU,EAAK,aAAE+I,EAAe,IAAOlJ,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eACrE4I,SAAUwL,EAAc,KAAEtL,GAASH,IAuBrCoJ,EAAa,KAClBqC,GAA6C,OAA3BA,EAAelL,SAAoBkL,EAAelL,QAAQ1C,OACxEoC,GAAiC,OAArBA,EAASM,SACxBN,EAASM,QAAQC,OAClB,EAGKT,EAAavC,IAClBiO,GAA6C,OAA3BA,EAAelL,SAAoBkL,EAAelL,QAAQ1C,OAE9D,OAAVL,EAAEG,MACLH,EAAEM,iBACFsL,KAGa,WAAV5L,EAAEG,KAA8B,QAAVH,EAAEG,KAC3BmH,GACD,EAyBD,OAtBAtN,qBAAU,KACLkH,IACH0K,IACAjJ,EAAKO,eAGN3C,SAASC,iBAAiB,WAAYR,IACrCuC,EAAUvC,EAAE,IAEN,KACNO,SAASE,oBAAoB,UAAW8B,EAAU,IAEjD,CAACrB,IAEJlH,qBAAU,KACT4R,GAAY,GACV,CAAC/I,IAEJ7I,qBAAU,KACT4R,GAAY,GACV,CAAC9R,IAGH,mBAAOoH,KAAMA,EAAMD,SAAUqG,EAActG,QAAQ,EAAOF,UAAQ,EAACC,MAAO,IAAMiH,MAAM,mBAAkB,SACvG,sBAAKnP,IAAK6Q,EAAUnH,UAAWA,EAAWtH,UAAU,gBAAgBkH,GAAG,kBAAiB,UACvF,8BACC,mBAAMQ,KAAMA,EAAK,SAChB,kBAAMmG,KAAI,CAACb,KAAK,SAAQ,SACvB,mBACCiB,WAAS,EACTrQ,IAAK4J,EAELnD,KAAK,OACLrE,UAAU,kDACVkO,YAAY,+CAIZyB,aAAeF,KA/ED,WAAiB,IAAhBvG,EAAK,uDAAG,GAC7B,GAAc,KAAVA,EAUH,OATAjH,EAAS,CACRoC,KAAM,4BACNjB,QAAS,CACR8F,WAIFxB,EAAKO,mBACL0I,IAIDA,IACAxH,EAAA,EAAaC,QAAQ,CACpBC,QAAS,aACTC,YAAa,sDAEf,CA6DQL,CAAawG,EAAMtK,OAAOmK,OAC1B5H,EAAKO,aAAa,EAEnBgL,OACCpU,EACC,cAAC,IAAS,CAACmB,UAAU,uCAErB,cAAC,IAAQ,CAACA,UAAU,kCAO1B,qBAAKA,UAAU,cAAa,SAC3B,cAACiS,EAAe,CAACxD,SAAUA,EAAUyD,kBAAmBvB,EAAYtE,aAAcA,MAEnF,qBAAKrM,UAAU,yCAAwC,SACtD,qBAAIA,UAAU,YAAW,UAAC,SACnB,4BAAG,OAAM,gDAA6C,4BAAG,OAAM,kCAA+B,4BAAG,oBAAS,yCACvF,4BAAG,UAAS,iDAM3C,CCnHA,MAAM4R,EAAU,CACf,CACC1M,IAAK,KACL2M,UAAW,KACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,SAClC8R,OAAQ,CAACC,EAAGvQ,IAAU,mBAAGxB,UAAU,cAAa,SAAEwB,EAAQ,IAC1DsE,MAAO,GACPkM,MAAO,UAUR,CACC9M,IAAK,aACL2M,UAAW,aACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,YAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEuG,IAC7CT,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,WACL2M,UAAW,WACX9E,MAAO,mBAAG/M,UAAU,YAAW,SAAC,gBAChC8R,OAASvL,GAAQ,mBAAGvG,UAAU,YAAW,SAAEuG,IAC3CT,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,MACL2M,UAAW,MACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,QAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEuG,IAC7CT,MAAO,GACPkM,MAAO,UAER,CACC9M,IAAK,WACL2M,UAAW,WACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,WAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,wBAAuB,SAAEuG,EAAIjF,OAAOC,gBAClEuE,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,aACL2M,UAAW,aACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,UAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEoB,YAAemF,EAAK,KACjET,MAAO,IACPkM,MAAO,UAER,CACC9M,IAAK,UACL2M,UAAW,UACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,WAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEuG,GAAO,IACpDT,MAAO,IACPkM,MAAO,UAUR,CACC9M,IAAK,QACL2M,UAAW,QACX9E,MAAO,mBAAG/M,UAAU,cAAa,SAAC,UAClC8R,OAASvL,GAAQ,mBAAGvG,UAAU,cAAa,SAAEoB,YAAemF,EAAK,KACjET,MAAO,IACPkM,MAAO,WAIM,SAASkB,EAAe,GAA2E,IAA3E,MAAEvU,EAAQ,CAAC,EAAC,aAAE0N,EAAY,YAAEhB,EAAc,CAAC1M,EAAO4H,KAAR,KAAuB5I,GAAO,EAC9G,MAAMsE,EAAWC,cACXtE,EAAM6J,iBAAO,OAEZ2K,EAAaC,GAAkB7T,oBAAU,IAE1C,KAAE6D,EAAO,GAAE,uBAAEuE,EAAyB,CAAC,GAAMlI,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAC3E,YAAEiJ,GAAgBN,IAElB+K,EAAqB,WAC1B,MAAMa,EAAW9Q,EADe,uDAAG,GAGnCJ,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRwD,uBAAwBuM,IAG3B,EAEM1M,EAAuB1B,IAC5B,MAAMqO,GAA2H,MAArG,OAALzU,QAAK,IAALA,OAAK,EAALA,EAAO0U,uBAA4B,OAAL1U,QAAK,IAALA,OAAK,EAALA,EAAO2U,mBAAwB,OAAL3U,QAAK,IAALA,OAAK,EAALA,EAAO4U,sBAA2B,OAAL5U,QAAK,IAALA,OAAK,EAALA,EAAO6U,WAEnH,GAAc,eAAVzO,EAAEG,MAAyBkO,EAO9B,OANArO,EAAEI,OAAOC,OACTL,EAAEM,iBACFgN,EAAe,GACfC,EAAmB,QAEnB1U,GAAuB,OAAhBA,EAAIkK,SAAoBlK,EAAIkK,QAAQC,QAE5C,EAGK2E,EAAiB3H,IACtB,OAAQA,EAAEG,KACT,IAAK,UACJmN,GAAgBE,GAAcC,KAAKC,IAAIF,EAAY,EAAG,KAEtD,MACD,IAAK,YACJF,GAAgBE,GAAcC,KAAKE,IAAIH,EAAY,EAAGlQ,EAAKzB,OAAS,KAEpE,MACD,IAAK,QACAmE,EAAEoC,SACLkE,EAAY,sBAAsB,GAGnC,MACD,IAAK,MAgBL,IAAK,SACJtG,EAAEI,OAAOC,OACTiN,GAAgB,GAEhBxK,IACAwE,IAEApK,EAAS,CACRoC,KAAM6D,IAAQC,UACd/E,QAAS,CACRwD,uBAAwB,CAAC,KAMrB,EA6BT,OAzBA7H,qBAAU,KACLnB,GAAOA,EAAIkK,SACdlK,EAAIkK,QAAQC,QAGbzC,SAASC,iBAAiB,UAAWkB,GAC9B,KACNnB,SAASE,oBAAoB,UAAWiB,EAAoB,IAE3D,CAACpE,EAAM1D,IAEVI,qBAAU,KACT,MAAM6R,EAAQhT,EAAIkK,QAClB,GAAI8I,EAEH,OADAA,EAAMrL,iBAAiB,UAAWmH,GAC3B,KACNkE,EAAMpL,oBAAoB,UAAWkH,EAAc,CAErD,GACE,CAAC9O,EAAKwU,IAETrT,qBAAU,KACTuT,EAAmBF,EAAY,GAC7B,CAACA,IAGH,sBAAKpS,UAAU,gCAA+B,UAC7C,wBAAOpC,IAAKA,EAAKyR,SAAU,EAAGrP,UAAU,qDAAqD8S,QAAM,YAClG,uBAAO9S,UAAU,2CAA0C,SAC1D,6BACS,OAAP4R,QAAO,IAAPA,OAAO,EAAPA,EAAS/Q,KAAI,IAA2E,IAA1E,MAAEkM,EAAQ,GAAE,MAAEjH,EAAQ,EAAC,UAAE+L,EAAY,GAAE,MAAEG,EAAQ,GAAE,MAAEyB,GAAQ,GAAO,EAClF,OACC,oBAECzT,UAAS,eAAUgS,EAAK,qDACvByB,EAAQ,uDAAyD,YAElExT,MAAO,CAAE6F,SAAQ,SAChBiH,GALI8E,EAAY9E,EAMb,QAKT,gCACE1K,EAAKxB,KAAI,CAACwB,EAAMb,IAChB,oBAECxB,UAAS,oDACc,OAAtB4G,QAAsB,IAAtBA,OAAsB,EAAtBA,EAAwBoC,aAAiB,OAAJ3G,QAAI,IAAJA,OAAI,EAAJA,EAAM2G,UAAW,wBAA0B,GAAE,sDAEnFtD,QAAS,KACR4M,EAAmB9Q,GACnB6Q,EAAe7Q,GAEf6J,EAAY,YAAY,EAAK,EAE9BuE,QAAS,KACRyC,EAAe7Q,EAAM,EACpB,SACM,OAAPoQ,QAAO,IAAPA,OAAO,EAAPA,EAAS/Q,KAAI,IAAkD,IAAjD,UAAEgR,EAAS,MAAEG,EAAK,OAAEF,EAAM,MAAE2B,GAAQ,GAAO,EACzD,OACC,oBAECzT,UAAS,eAAUgS,EAAK,0CACvByB,EAAK,0CAEoB,OAAtB7M,QAAsB,IAAtBA,KAAwBoC,SAAiB,OAAJ3G,QAAI,IAAJA,KAAM2G,SACxC,yBACuB,sFAE1B,YACD,SACF8I,EAAOzP,EAAKwP,GAAYrQ,IAAU,IAV9BqQ,EAWD,KA3BFrQ,UAmCS,KAAb,OAAJa,QAAI,IAAJA,OAAI,EAAJA,EAAMzB,SACN,qBAAKZ,UAAU,wDAAuD,SACrE,sBAAKA,UAAU,wDAAuD,UACrE,cAAC,IAAa,CAACA,UAAU,2BACzB,oBAAGA,UAAU,oCAAmC,UAAC,8BACrB,4BAAG,WAAU,SAAM,4BAAG,WAAU,MAAG,4BAAG,WAAU,oCAAiC,4BAAG,QAAQ,IAAI,8BAQlI,C,aC5Pe,SAAS0T,IACvB,MAAMzR,EAAWC,cACXC,EAAUC,wBAEV,YAAEY,EAAW,cAAER,GAAkBR,eACjC,YAAE6F,EAAW,SAAEL,EAAQ,KAAEE,EAAI,aAAEuB,EAAY,cAAEb,EAAa,gBAAEJ,GAAoBT,KAChF,cACLuB,EAAgB,SAAQ,aACxBlB,EAAe,GAAE,QACjB/I,GAAU,EAAK,OACfb,EAAS,GAAE,SACXD,EAAW,GAAE,KACbsE,EAAO,IACJ3D,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,eAC5B,MAAE+U,GAAQ,EAAK,WAAEC,GAAa,GAAU3U,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAEjFT,EAAO8M,GAAYjN,mBAAS,CAClC6U,qBAAqB,EACrBC,iBAAiB,EACjBC,oBAAoB,EACpBC,UAAU,EACVK,QAAS,GACTC,YAAa,EACbC,iBAAiB,IAGZ1H,EAAe,KACpBxE,IAEA5F,EAAS,CACRoC,KAAM,wBACNjB,QAAS,CACR0F,cAAe,SACflC,uBAAwB,CAAC,EACzBgB,aAAc,MAIhB6D,GAAUK,IAAI,CACbuH,qBAAqB,EACrBC,iBAAiB,EACjBC,oBAAoB,EACpBC,UAAU,EACVK,QAAS,GACTC,YAAa,KACX,EAGE7O,EAAmBwK,IACN,WAAdA,EAAMvK,MACTuK,EAAMpK,iBACNoK,EAAMtK,OAAOC,OACbyC,KAGiB,QAAd4H,EAAMvK,MACT2C,IACAwE,IACAoD,EAAMpK,iBACP,EA4BKgG,EAAc,CAAC1M,EAAO2Q,IACpB7D,GAAUK,IAAI,IACjBA,EACH,CAACnN,GAAQ2Q,MAIXvQ,qBAAU,KAIT,GAHAsN,IACAxE,IAEI8L,GAASC,EASZ,OARA3R,EAAS,CACRoC,KAAM,+BAGPpC,EAAS,CACRoC,KAAM6D,IAAQ2B,qBAIhB,GACE,CAAC8J,EAAOC,IAEX7U,qBAAU,KACT,GAAK4U,GAAUC,EAYf,OAJA/L,IACAwE,IAEA/G,SAASC,iBAAiB,UAAWN,GAC9B,KACNK,SAASE,oBAAoB,UAAWP,EAAgB,EAZxDhD,EAAS,CACRoC,KAAM,kBACNlC,WAWD,GACC,IAEHpD,qBAAU,KACa,WAAlB+J,GACHjB,GACD,GACE,CAACiB,IAEJ/J,qBAAU,KAEqD,IAAD,EAD3B,cAA9BuG,SAAS2B,cAAcC,KACE,IAAxBU,EAAahH,QAAwC,IAAxBgH,EAAahH,QAC7CwH,EAAc,CAAEK,WAA2B,QAAjB,EAAEb,EAAa,UAAE,aAAf,EAAiBoM,WAAYhL,SAAU,IAAM,UAI3EnB,GAAa,GACX,CAACD,EAAcJ,IAElBzI,qBAAU,KACTyI,GAAiC,OAArBA,EAASM,SAAoBN,EAASM,QAAQC,OAAO,GAC/D,CAAC/J,EAAQD,EAAUyJ,EAAUnF,EAAM1D,IAEtCI,qBAAU,KACJF,GACJ2I,GAAiC,OAArBA,EAASM,SAAoBN,EAASM,QAAQC,OAC3D,GACE,CAAClJ,EAAS2I,IAEb,MAAMsC,GAAgB,OAALnL,QAAK,IAALA,OAAK,EAALA,EAAO4U,sBAA2B,OAAL5U,QAAK,IAALA,OAAK,EAALA,EAAO0U,uBAA4B,OAAL1U,QAAK,IAALA,OAAK,EAALA,EAAO6U,YAAiB,OAAL7U,QAAK,IAALA,OAAK,EAALA,EAAO2U,iBAEtG,OACC,sBAAKtT,UAAU,oDAAmD,UACjE,sBAAKA,UAAU,wCAAwCC,MAAO,CAAEsL,iBAAkB,8BAA+B,UAChH,qBAAKvL,UAAU,oCAAmC,SACjD,cAACwL,EAAY,MAEd,qBAAKxL,UAAU,gCAA+B,SAC7C,sBAAKA,UAAU,yDAAwD,UACtE,qBAAKA,UAAU,yEAAwE,SACtF,qBAAKA,UAAU,8CAA6C,SAC3D,oBAAIA,UAAU,+CAA8C,SAAC,sBAG/D,qBAAKA,UAAU,kCAAiC,SAC/C,oBAAM0H,KAAMA,EAAMuF,OAAO,WAAU,UAClC,qBAAKjN,UAAU,6DACf,sBAAKA,UAAU,qDAAoD,UAClE,qBAAKA,UAAU,aAAY,SAC1B,qBAAKA,UAAU,oCAAmC,SACjD,sBAAKA,UAAU,gEAA+D,UAC7E,mBAAGA,UAAU,oCAAmC,SAAC,cACjD,mBAAGA,UAAU,2CAA0C,SAAEgD,aAI5D,qBAAKhD,UAAU,aAAY,SAC1B,qBAAKA,UAAU,6CAA6CC,MAAO,CAAEgU,OAAQ,QAAS,SACrF,kBAAMpG,KAAI,CAACb,KAAK,cAAa,SAC5B,mBACC9F,GAAG,YACH4C,SAAUA,EACVwF,MAAY,OAAL3Q,QAAK,IAALA,OAAK,EAALA,EAAOkV,QACdjW,IAAK4J,EACLyG,WAAS,EACTjO,UAAS,gHACR8J,EAAW,cAAgB,IAE5BoE,YAAY,mCACZ+E,OACCpU,EACC,cAAC,IAAS,CAACmB,UAAU,uCAErB,cAAC,IAAQ,CAACA,UAAU,0BAGtBC,MAAO,CAAEgU,OAAQ,QACjBtE,aAAeF,KA7IF,WAAiB,IAAhBvG,EAAK,uDAAG,GAC7BA,GAA0B,IAAjBA,EAAMtI,OACdsI,EAAMtI,QAAU,EACnBqI,EAAaC,IAEblB,IAEAmB,EAAA,EAAaC,QAAQ,CACpBC,QAAS,aACTC,YAAa,uDAGdzB,MAMFG,IACAmB,EAAA,EAAaC,QAAQ,CACpBC,QAAS,aACTC,YAAa,wCAEf,CAuHa4K,CAAiBzE,EAAMtK,OAAOmK,MAAM,EAErCE,SAAWC,IACVhE,GAAUK,IAAI,IACVA,EACH+H,QAASpE,EAAMtK,OAAOmK,SACpB,kBASX,qBAAKtP,UAAU,0FAAyF,SACvG,qBAAKA,UAAU,kDAAiD,SAC/D,oBAAIA,UAAU,+CAA8C,SAAEoB,YAAeoB,IAAiB,cAKlG,qBAAKxC,UAAU,oBAAoBC,MAAO,CAAEkU,QAAS,qBAAsB,SAC1E,cAAC/I,EAAiB,CAACzM,MAAOA,EAAO0M,YAAaA,EAAaxD,YAAaA,MAEzE,qBAAK7H,UAAU,qBAAqBC,MAAO,CAAEkU,QAAS,qBAAsB,SAC3E,cAACjB,EAAc,CAACrL,YAAaA,EAAawD,YAAaA,EAAa1M,MAAOA,EAAO0N,aAAcA,SAIlG,cAACyD,EAAmB,CACnBC,QAAc,OAALpR,QAAK,IAALA,OAAK,EAALA,EAAO0U,oBAChBrN,SAAUqG,EACV+H,kBAAmBvM,EACnBwD,YAAaA,IAEd,cAAC0H,EAAoB,CAAC9M,KAAW,OAALtH,QAAK,IAALA,OAAK,EAALA,EAAO2U,gBAAiBjH,aAAcA,EAAcxE,YAAaA,IAC7F,cAACgI,EAAkB,CAClB5J,KAAW,OAALtH,QAAK,IAALA,OAAK,EAALA,EAAO4U,mBACblH,aAAcA,EACd1N,MAAOA,EACP0M,YAAaA,EACbxD,YAAaA,IAEd,cAACyG,EAAc,CAACrI,KAAW,OAALtH,QAAK,IAALA,OAAK,EAALA,EAAO6U,SAAUnH,aAAcA,EAAc1N,MAAOA,EAAO4P,cAAelD,MAGnG,C","file":"static/js/22.034876fe.chunk.js","sourcesContent":["/* eslint-disable no-unused-vars */\nimport { Col, Row } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { currencyFormat } from '../../utils/helper/utilities';\n\nexport const PrintPage = React.forwardRef((props, ref) => {\n\tconst {\n\t\ttransactions = [],\n\t\tcash = {},\n\t\tbillDate = '',\n\t\tbillNo = null,\n\t\tpaymentMethod = '',\n\t\tisReprintBill = false,\n\t\tpayments = [],\n\t\tisPrintTest = false,\n\t\tisPendingBill = false\n\t} = props;\n\n\tconst [property, setProperty] = useState({});\n\tconst { billNo: billNoTrx } = useSelector((state) => state?.transaction);\n\tconst { loading = false } = useSelector((state) => state?.auth);\n\n\tuseEffect(() => {\n\t\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\t\tconst { property = {}, user = {} } = app;\n\n\t\tsetProperty({ ...property, cashier: user?.username || '' } || {});\n\t}, [ref]);\n\n\tconst total = transactions?.reduce((acc, { total = 0 }) => +acc + +total, 0);\n\tconst cashPaid = payments?.reduce((acc, { paidValue = 0, cashPay = 0, paidType }) => +acc + +(+paidType === 1 ? cashPay : paidValue), 0);\n\tconst cashChange = cashPaid - total;\n\n\treturn (\n\t\t<div className=\"w-full h-full rounded-md mx-auto\">\n\t\t\t<div className=\"w-full h-auto bg-white p-3 py-7 mx-auto rounded-md\" style={{ maxWidth: '305px' }} ref={ref}>\n\t\t\t\t{/* HEADER */}\n\t\t\t\t{loading ? (\n\t\t\t\t\t<p className=\"text-left text-print-xsmall text-gray-500\">Memuat data...</p>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"text-center text-print-medium font-bold\">{property?.header1 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-small font-semibold\">{property?.header2 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall mt-2\">{property?.header3 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header4 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header5 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header6 || ''}</p>\n\t\t\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t\t\t\t{isReprintBill && <p className=\"text-center text-print-small mt-3 font-semibold\">THIS IS COPY / REPRINT</p>}\n\t\t\t\t\t\t{isPrintTest && <p className=\"text-center text-print-small mt-3 font-semibold\">THIS IS PRINT TEST</p>}\n\t\t\t\t\t\t{isPendingBill && <p className=\"text-center text-print-small mt-3 font-semibold\">THIS IS PENDING BILL</p>}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{isPrintTest || isReprintBill || isPendingBill ? <div className=\"my-3 w-full border border-separate border-gray-400\" /> : null}\n\n\t\t\t\t<Row>\n\t\t\t\t\t<Col span={7}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">Tanggal/Waktu</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={2}>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">:</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={15}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">{moment(billDate).format('ddd, DD MMMM YYYY LTS')}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={7}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">No. Transaksi</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={2}>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">:</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={15}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">{billNo || billNoTrx || '-'}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col span={7}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">Kasir</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={2}>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">:</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={15}>\n\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">{property?.cashier || ''}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\n\t\t\t\t{/* BODY / TRANSACTION */}\n\t\t\t\t{transactions?.length === 0 && <p className=\"text-left text-print-xsmall text-gray-500\">Tidak ada transaksi</p>}\n\t\t\t\t{transactions?.map(({ ItemName = '', qty = 0, price = 0, total = 0 }, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Row wrap gutter={[2, 2]} key={i} className=\"mb-2\">\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">{ItemName || ''}</p>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t\t\t<p className=\"text-left text-print-xsmall\">Rp {currencyFormat(price || 0, 0) || ''}</p>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{qty || ''}x</p>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp {currencyFormat((total || 0).toString(), 0) || '0'}</p>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\n\t\t\t\t{/* PAYMENT */}\n\t\t\t\t{payments?.length === 0 ? (\n\t\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Pembayaran</p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t\t<p className=\"text-right text-print-xsmall uppercase\">{(paymentMethod || '-').trim().toUpperCase()}</p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t) : (\n\t\t\t\t\tpayments?.map(({ cashPay, tenderName, paidType, paidValue }, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t\t\t\t<p className=\"text-right text-print-xsmall capitalize\">{(tenderName || '')?.trim()}</p>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t\t\t\t<p className=\"text-right text-print-xsmall uppercase\">\n\t\t\t\t\t\t\t\t\t\tRp {(currencyFormat(+paidType === 1 ? cashPay : paidValue, 0) || '')?.trim()}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t)}\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Subtotal</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp {currencyFormat(total || '0', 0)}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Diskon</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp 0</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Total</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp {currencyFormat(total || '0', 0)}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Bayar</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp {currencyFormat(cashPaid || '0', 0)}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"my-1\">\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Kembalian</p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t<p className=\"text-right text-print-xsmall\">Rp {cashChange <= 0 ? 0 : currencyFormat(cashChange || '0', 0)}</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\n\t\t\t\t{/* FOOTER */}\n\t\t\t\t{loading ? (\n\t\t\t\t\t<p className=\"text-left text-print-xsmall text-gray-500\">Memuat data...</p>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"mt-7\">\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall font-semibold\">{property?.footer1 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.footer2 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.footer3 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.footer4 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.footer5 || ''}</p>\n\t\t\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.footer6 || ''}</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n","import { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nexport default function usePayment() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { billNo = '', billDate = '', data = [] } = useSelector((state) => state?.transaction);\n\tconst { cashier = {}, property = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst getTotalQty = () => data?.reduce((acc, { qty = 0 }) => +acc + +qty, 0) || 0;\n\n\tconst getSubtotal = () => data?.reduce((acc, { total = 0 }) => +acc + +total, 0) || 0;\n\n\tconst getDiscountTotal = () => 0;\n\n\tconst getGrandTotal = () => {\n\t\treturn getSubtotal() - getDiscountTotal();\n\t};\n\n\tconst getCashPaid = (settles = []) => {\n\t\tconst totalCashPay =\n\t\t\tsettles?.length !== 0\n\t\t\t\t? settles.reduce((acc, cur) => {\n\t\t\t\t\t\treturn +acc + +cur.amountPaid;\n\t\t\t\t  }, 0)\n\t\t\t\t: 0;\n\n\t\treturn totalCashPay;\n\t};\n\n\tconst getCashChange = (settles = [], cashPaid = 0) => {\n\t\tconst grandTotal = getGrandTotal();\n\t\tconst totalCashPay = getCashPaid(settles);\n\n\t\tif (grandTotal === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (cashPaid > grandTotal) {\n\t\t\treturn cashPaid - grandTotal;\n\t\t}\n\n\t\tif (totalCashPay > grandTotal) {\n\t\t\treturn totalCashPay - grandTotal;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\tconst getBalanceDue = (settles = [], cashPaid = 0) => {\n\t\tconst cashChange = getCashChange(settles, cashPaid);\n\t\tconst totalCashPay = getCashPaid(settles);\n\t\tconst grandTotal = getGrandTotal();\n\n\t\tif (totalCashPay >= grandTotal) {\n\t\t\treturn totalCashPay - grandTotal - cashChange;\n\t\t}\n\n\t\treturn getGrandTotal() - +totalCashPay;\n\t};\n\n\tconst paymentStore = (state, handlePrint) => {\n\t\tconst header = {\n\t\t\tbillNo,\n\t\t\tbillDate,\n\t\t\tcustCode: '',\n\t\t\tcustName: '',\n\t\t\tdiscPrc: '0',\n\t\t\tdiscValue: '0',\n\t\t\ttaxPrc: '0',\n\t\t\ttaxValue: '0',\n\t\t\tsubTotal: getSubtotal(),\n\t\t\tgrandTotal: getGrandTotal(),\n\t\t\tshiftID: cashier?.shiftId || '0',\n\t\t\toutletCode: property?.outletCode\n\t\t};\n\n\t\tconst settle =\n\t\t\tstate.settles?.length !== 0 &&\n\t\t\tstate.settles?.map((settle) => {\n\t\t\t\tconst cashPaid = settle.cashPay;\n\t\t\t\tconst cashChange = getCashChange(state?.settles, settle?.cashPay);\n\t\t\t\tconst paidType = +settle?.paidType;\n\n\t\t\t\treturn {\n\t\t\t\t\t...settle,\n\t\t\t\t\tcashChange: paidType === 1 ? cashChange : 0,\n\t\t\t\t\tamount: paidType === 1 ? cashPaid - cashChange : settle?.amount,\n\t\t\t\t\tamountPaid: paidType === 1 ? cashPaid - cashChange : settle?.amountPaid\n\t\t\t\t};\n\t\t\t});\n\n\t\tconst payload = {\n\t\t\theader: [header],\n\t\t\tsettle,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/STORE',\n\t\t\tpayload,\n\t\t\tbill: {\n\t\t\t\tfrom: billDate,\n\t\t\t\tto: billDate\n\t\t\t},\n\t\t\thandlePrint: () => {\n\t\t\t\tif (typeof handlePrint === 'function') {\n\t\t\t\t\treturn handlePrint();\n\t\t\t\t}\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\treturn { getTotalQty, getDiscountTotal, getSubtotal, getGrandTotal, getCashPaid, getCashChange, getBalanceDue, paymentStore };\n}\n","import { Button, Modal } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OpeningShiftButton() {\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst history = useHistory();\n\tconst [isOpen, setIsOpen] = useState(!isOpeningShift);\n\n\tconst openPage = (e) => {\n\t\thistory.push('/pos/opening-shift');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F7') {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\n\t\t\topenPage();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onkeydown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t\tOpening shift\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t</Button>\n\n\t\t\t<ModalOpeningShift isOpen={isOpen} onClose={() => setIsOpen(false)} />\n\t\t</>\n\t);\n}\n\nfunction ModalOpeningShift({ isOpen, onClose }) {\n\treturn (\n\t\t<Modal centered width={500} footer={false} onCancel={onClose} open={isOpen} bodyStyle={{ backgroundColor: '#f8f8f8', borderRadius: '12px' }}>\n\t\t\t<h1 className=\"text-center font-semibold text-xl text-red-500\">PERHATIAN !!!</h1>\n\t\t\t<p className=\"text-center text-base leading-snug mt-5\">\n\t\t\t\tAnda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih\n\t\t\t\tdahulu dengan cara menekan tombol <kbd className=\"kbd\">f7</kbd> atau menutup popup ini. Terima kasih\n\t\t\t</p>\n\t\t</Modal>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ChangeQtyItem({ hs = (state, val) => {} }) {\n\tconst openModal = () => {\n\t\ths('modalQty', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\n\t\t\topenModal();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t});\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={openModal}>\n\t\t\t<kbd className=\"kbd\">f3</kbd>\n\t\t\t<p>Ubah Quantity</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function CheckItemPriceButton() {\n\tconst history = useHistory();\n\n\tconst openPage = () => history.push('/pos/check-price');\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F8') {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\t\t\topenPage();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={openPage}>\n\t\t\t<kbd className=\"kbd\">f8</kbd>\n\t\t\t<p>cek harga</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function DeleteItemButton({ hs = (state, val) => {} }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\n\tconst handleOpenModal = () => {\n\t\ths('modalConfirmDelete', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (document.activeElement.id !== 'input-qty' && isSelected) {\n\t\t\tif (e.ctrlKey && e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t\te.target.blur();\n\n\t\t\t\thandleOpenModal();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpenModal}>\n\t\t\t<kbd className=\"kbd\">ctrl+enter</kbd>\n\t\t\t<p>hapus item</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ListItemButton({ hs = () => {} }) {\n\tconst handleOpen = () => {\n\t\ths('modalSearchItem', true);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 'F2') {\n\t\t\thandleOpen();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDown);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpen}>\n\t\t\t\t<kbd className=\"kbd\">f2</kbd>\n\t\t\t\t<p>Daftar Barang</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Form, notification } from 'antd';\nimport { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function useCartOrder() {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst [form] = Form.useForm();\n\n\tconst { searchResult = [], data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleFocus = () => {\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleResetForm = () => {\n\t\tform.resetFields();\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tsearchResult: []\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thandleResetForm();\n\t\t\treturn;\n\t\t}\n\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleSelectItem = (selected = {}) => {\n\t\thandleAddItem({ ItemCode: selected, upcBarcode: '' }, 'select');\n\t};\n\n\tconst handleAddItem = (item = {}, from = 'input') => {\n\t\thandleResetForm();\n\n\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\n\t\tif (from === 'input' && findData !== undefined) {\n\t\t\tif (item?.upcBarcode !== undefined && item.upcBarcode && item.upcBarcode !== '') {\n\t\t\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\t\t\t\tconst anyData = data.filter((el) => +el.upcBarcode === +item.upcBarcode);\n\n\t\t\t\t//* JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData?.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (+el.upcBarcode === +item.upcBarcode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData],\n\t\t\t\t\t\t\tcontentStatus: 'isMenu'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// * DITEMUKAN BANRANG NAMUN TIDAK ADA DI LIST TRANSAKSI\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tcontentStatus: 'isMenu',\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'select') {\n\t\t\tif (item.ItemCode && from === 'select') {\n\t\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\t\t// * JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'table') {\n\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\tconst restData = [];\n\n\t\t\t\tdata?.map((el) => {\n\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t};\n\n\tconst handleDeleteItem = (itemCode = '') => {\n\t\tconst filteredDataTrx = (data?.length !== 0 && data?.filter(({ ItemCode }) => ItemCode !== itemCode)) || [];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tdata: filteredDataTrx,\n\t\t\t\tselectedRowTransaction: filteredDataTrx[0]\n\t\t\t}\n\t\t});\n\n\t\thandleFocus();\n\t};\n\n\treturn { inputRef, form, handleFocus, handleResetForm, handleSearch, handleSelectItem, handleAddItem, handleDeleteItem };\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function NewOrderButton(props) {\n\tconst dispatch = useDispatch();\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst { hs = null } = props;\n\tconst { loading = false } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleNewOrder = () => {\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\ttransactionList: [],\n\t\t\t\tdata: []\n\t\t\t}\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t});\n\n\t\ths('data', []);\n\t\ths('t', 0);\n\t\ths('total', 0);\n\t\ths('selectedData', []);\n\t\ths('isSelected', []);\n\n\t\thandleFocus();\n\t}; \n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F1') {\n\t\t\t\te.target.blur();\n\t\t\t\tif (document.activeElement.id !== 'barcode') {\n\t\t\t\t\thandleNewOrder();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn e;\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button loading={loading} disabled={loading || !isOpeningShift} className=\"btn-page\" onClick={handleNewOrder}>\n\t\t\t<kbd className=\"kbd\">f1</kbd>\n\t\t\t<p>order baru</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function OpenPendingButton({ hs = null }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst getHoldTrx = () => {\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_HOLD_LIST,\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst openModal = () => {\n\t\ths('modalPendingPayment', true);\n\t\tgetHoldTrx();\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F7') {\n\t\t\t\te.preventDefault();\n\t\t\t\topenModal();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\tgetHoldTrx();\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button disabled={!isOpeningShift} className=\"btn-page\" onClick={openModal}>\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t\t<p>daftar pending</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button } from 'antd';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OptionsButton() {\n\tconst history = useHistory();\n\n\tconst openPage = () => {\n\t\thistory.push('/pos/options');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F9') {\n\t\t\te.target.blur();\n\t\t\topenPage();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t<kbd className=\"kbd\">f9</kbd>\n\t\t\toptions\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function PaymentButton() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { tenderMedia = [], loading = false, data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleOpenPayment = () => {\n\t\tdispatch({\n\t\t\ttype: 'auth/property'\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isPayment'\n\t\t\t}\n\t\t});\n\n\t\thistory.push('/pos/payment');\n\t};\n\n\tconst getTenderMedia = () => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/TENDER_MEDIA'\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F10') {\n\t\t\te.preventDefault();\n\n\t\t\tif (data?.length > 0) {\n\t\t\t\thandleOpenPayment();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tgetTenderMedia();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button disabled={data?.length === 0} className=\"btn-page-2\" onClick={handleOpenPayment}>\n\t\t\t\t<kbd className=\"kbd\">f10</kbd>\n\t\t\t\t<p>pembayaran</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button, notification } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { useReactToPrint } from 'react-to-print';\nimport actions from '../../../redux/transaction/actions';\nimport { PrintPage } from '../PrintPage';\n\nexport default function SavePendingButton({ isDisabled = false }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tlet componentPrintRef = useRef(null);\n\n\tconst { data = [], loading = false, billNo = '', billDate = '' } = useSelector((state) => state?.transaction);\n\tconst { property = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst disabled = isDisabled || data?.length === 0 || loading || !isOpeningShift;\n\n\tconst handlePendingPayment = () => {\n\t\tconst subTotal = data.reduce((a, { total }) => +a + +total, 0);\n\n\t\tconst header = [\n\t\t\t{\n\t\t\t\tbillNo,\n\t\t\t\tbillDate,\n\t\t\t\tcustCode: '',\n\t\t\t\tcustName: '',\n\t\t\t\tdiscPrc: '0',\n\t\t\t\tdiscValue: '0',\n\t\t\t\ttaxPrc: '0',\n\t\t\t\ttaxValue: '0',\n\t\t\t\tsubTotal: subTotal,\n\t\t\t\tgrandTotal: subTotal,\n\t\t\t\tshiftID: cashier?.shiftId,\n\t\t\t\toutletCode: property?.outletCode\n\t\t\t}\n\t\t];\n\n\t\tconst payload = {\n\t\t\theader,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD',\n\t\t\tpayload,\n\t\t\thistory,\n\t\t\thandlePrint: handlePrint(null, () => componentPrintRef)\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F6') {\n\t\t\te.preventDefault();\n\n\t\t\tif (!disabled) {\n\t\t\t\thandlePendingPayment();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handlePrint = useReactToPrint({\n\t\tonPrintError: (location, error) => {\n\t\t\tconsole.log('Error Print!', error);\n\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Print Struk!',\n\t\t\t\tdescription: `Gagal mencetak struk. ${location} - ${error}`\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\tpayload: {\n\t\t\t\t\tloading: false\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonAfterPrint: () => {\n\t\t\tnotification.success({\n\t\t\t\tmessage: 'Print!',\n\t\t\t\tdescription: 'Cetak struk berhasil.'\n\t\t\t});\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button loading={loading} disabled={disabled} className=\"btn-page\" onClick={handlePendingPayment}>\n\t\t\t\t<kbd className=\"kbd\">f6</kbd>\n\t\t\t\t<p>simpan pending</p>\n\t\t\t</Button>\n\n\t\t\t<div className=\"w-full h-full hidden\">\n\t\t\t\t<PrintPage\n\t\t\t\t\tref={(el) => (componentPrintRef = el)}\n\t\t\t\t\ttransactions={data}\n\t\t\t\t\tcash={{\n\t\t\t\t\t\tcashChange: 0,\n\t\t\t\t\t\tcashPaid: 0,\n\t\t\t\t\t\ttotal: 0\n\t\t\t\t\t}}\n\t\t\t\t\tbillDate={new Date()}\n\t\t\t\t\tpayments={[]}\n\t\t\t\t\tpaymentMethod={''}\n\t\t\t\t\tisPendingBill={true}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ChangeQtyItem from '../widget/ChangeQtyItem';\nimport CheckItemPriceButton from '../widget/CheckItemPrice';\nimport DeleteItemButton from '../widget/DeleteItemButton';\nimport ListItemButton from '../widget/ListItemButton';\nimport NewOrderButton from '../widget/NewOrderButton';\nimport OpeningShiftButton from '../widget/OpeningShiftButton';\nimport OpenPendingButton from '../widget/OpenPendingButton';\nimport OptionsButton from '../widget/OptionButton';\nimport PaymentButton from '../widget/PaymentButton';\nimport SavePendingButton from '../widget/SavePendingButton';\n\nexport default function ButtonActionOrder({ handleState = (state, val) => {}, state = {}, handleFocus, ...props }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { isOpening = false } = cashier;\n\n\tconst isSelectedRow = Object.keys(selectedRowTransaction)?.length !== 0;\n\n\treturn (\n\t\t<div className=\"w-full h-full\">\n\t\t\t{isOpening ? (\n\t\t\t\tisSelectedRow ? (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<DeleteItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ChangeQtyItem hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div className=\"\">\n\t\t\t\t\t\t\t<DiscountButton />\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t<div className=\"py-3\">\n\t\t\t\t\t\t\t<h1 className=\"text-base text-gray-700 text-center\">\n\t\t\t\t\t\t\t\tTekan <kbd className=\"kbd\">tab / esc</kbd> untuk kembali ke scanner\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<NewOrderButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ListItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div className=\"\">\n\t\t\t\t\t\t<SelectItemBtn />\n\t\t\t\t\t</div> */}\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<SavePendingButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OpenPendingButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<CheckItemPriceButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<PaymentButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t) : (\n\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OpeningShiftButton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Image } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function HeaderLayout() {\n\tconst { user = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst { billDate = '', billNo = '', loading = false } = useSelector((state) => state?.transaction);\n\n\tconst [state, setState] = useState({\n\t\tmodalCashBox: false,\n\t\tcurrentTime: moment()\n\t});\n\n\tuseEffect(() => {\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tcurrentTime: moment()\n\t\t\t}));\n\t\t}, 1000);\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className=\"w-full h-full flex items-center justify-center\">\n\t\t\t<div className=\"w-full flex items-center justify-between px-5\">\n\t\t\t\t<div className=\"w-2/5 flex items-center gap-2\">\n\t\t\t\t\t<Image src=\"/logo-2.png\" className=\"w-16 object-cover\" preview={false} />\n\t\t\t\t\t<h1 className=\"text-xl text-white font-semibold leading-none\">Retail Point of Sales</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-max\">\n\t\t\t\t\t<div className=\"w-full flex items-center justify-end gap-5\">\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">bussiness date</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{moment(billDate).format('dddd, DD MMMM YYYY')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">today</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{moment().format('DD MMMM YYYY')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">time</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{state.currentTime.format('HH:mm:ss')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">NO. TRANSAKSI</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{loading ? '...' : billNo || '-'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">\n\t\t\t\t\t\t\t\t{user?.role || 'nama kasir'} | ID 0{cashier?.shiftId || '0'}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{user?.username || 'guest'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { Button, Col, Form, Input, Modal, notification, Row } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function ModalConfirmChangeQty({ open, state, onHandleCancel, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst [form] = Form.useForm();\n\tconst emailRef = useRef(null);\n\tconst passwordRef = useRef(null);\n\n\tconst { isGrantedAccess = false, loading = false } = useSelector((state) => state?.auth);\n\tconst { selectedRowTransaction = {}, data = [] } = useSelector((state) => state?.transaction);\n\tconst { qty: oldQty, price = 0, ItemCode = '' } = selectedRowTransaction;\n\tconst { qty = 0 } = state;\n\n\tconst onFinish = (values) => {\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1031'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tconst isActiveEmail = document.activeElement === (emailRef.current && emailRef.current.input) || false;\n\t\tconst isActivePassword = document.activeElement === (passwordRef.current && passwordRef.current.input) || false;\n\n\t\tif (e.key === 'Enter' && isActiveEmail) {\n\t\t\temailRef.current && emailRef.current.blur();\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Enter' && isActivePassword) {\n\t\t\temailRef.current && emailRef.current.blur();\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\n\t\t\tform.submit();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Enter') {\n\t\t\tform.submit();\n\t\t}\n\n\t\tif (e.key === 'Escape') {\n\t\t\thandleCancel();\n\t\t\tform.resetFields();\n\t\t}\n\n\t\tif (e.key === 'ArrowUp') {\n\t\t\temailRef.current && emailRef.current.focus();\n\t\t}\n\n\t\tif (e.key === 'ArrowDown') {\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\n\t\t\tif (isActivePassword) {\n\t\t\t\tpasswordRef.current && passwordRef.current.blur();\n\t\t\t\temailRef.current && emailRef.current.blur();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\n\t\tform.resetFields();\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDown);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown);\n\t\t};\n\t}, [form]);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tif (isGrantedAccess) {\n\t\t\t\tconst restData = [];\n\n\t\t\t\tdata?.map((el) => {\n\t\t\t\t\tif (el.ItemCode === ItemCode) {\n\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\tqty: +qty,\n\t\t\t\t\t\t\ttotal: +qty * +price,\n\t\t\t\t\t\t\tamount: +qty * +price\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tonHandleCancel();\n\n\t\t\t\tnotification.success({\n\t\t\t\t\tmessage: 'Berhasil!',\n\t\t\t\t\tdescription: `Quantity berhasil diubah menjadi ${qty}.`\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}, [isGrantedAccess, open]);\n\n\treturn (\n\t\t<Modal centered open={open} onCancel={handleCancel} title={<h1 className=\"text-lg\">Void Quantity</h1>} footer={false}>\n\t\t\t<Form\n\t\t\n\t\t\t\tform={form}\n\t\t\t\tname=\"login\"\n\t\t\t\tlayout=\"vertical\"\n\t\t\t\tinitialValues={{\n\t\t\t\t\tremember: true\n\t\t\t\t}}\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tonFinishFailed={console.log}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t<Row wrap gutter={[15, 10]}>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Awal : <b>{oldQty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Akhir : <b>{qty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Void : <b>{+oldQty - +qty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<div className=\"w-full h-auto p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tGunakan <b>&uarr;</b> untuk mengisi <b>Email/Username</b>, dan <b>&darr;</b> mengisi <b>Password</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-5\">\n\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t<Button disable={loading} loading={loading} type=\"primary\" htmlType=\"submit\" className=\"w-full btn-page px-7 h-12\">\n\t\t\t\t\t\t\t\t\tKonfirmasi\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7\"\n\t\t\t\t\t\t\t\t\tonClick={handleCancel}>\n\t\t\t\t\t\t\t\t\tKembali\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Form>\n\t\t</Modal>\n\t);\n}\n","import { Button, Col, Input, Modal, notification, Row } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport ModalConfirmChangeQty from './ModalConfirmChangeQty';\n\nexport default function ModalChangeQty({ open, handleCancel, onHandleState }) {\n\tconst dispatch = useDispatch();\n\n\tconst { selectedRowTransaction = {}, data = [] } = useSelector((state) => state?.transaction);\n\tconst { qty: oldQty, ItemCode = '', price = 0, upcBarcode = '', itemName = '' } = selectedRowTransaction;\n\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst [state, setState] = useState({\n\t\tqty: oldQty,\n\t\tinputChanged: false,\n\t\tmodalConfirm: false\n\t});\n\n\tconst onHandleCancel = () => {\n\t\thandleCancel();\n\t\tsetState({\n\t\t\tqty: oldQty,\n\t\t\tinputChanged: false,\n\t\t\tmodalConfirm: false\n\t\t});\n\t};\n\n\tconst handleFocus = () => {\n\t\tconst input = inputRef && inputRef.current !== null;\n\n\t\tif (input) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst handleFocusSelect = () => {\n\t\tconst input = inputRef && inputRef.current !== null;\n\n\t\tif (input) {\n\t\t\tinputRef.current.focus();\n\t\t\tinputRef.current.select();\n\t\t}\n\t};\n\n\tconst handleChange = (value) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tqty: +value\n\t\t}));\n\n\t\thandleFocus();\n\t};\n\n\tconst handleEnter = () => {\n\t\tconst { qty = 0 } = state;\n\t\thandleFocus();\n\n\t\tif (+qty === 0 || +qty <= 0) {\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'Kuantitas tidak boleh kosong'\n\t\t\t});\n\n\t\t\thandleFocus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (qty === '' || qty === oldQty) {\n\t\t\thandleChangeQty(+oldQty);\n\t\t\treturn;\n\t\t}\n\n\t\thandleChangeQty(qty);\n\t};\n\n\tconst handleChangeQty = (qty = oldQty) => {\n\t\tconst anyData = data?.length !== 0 && data?.filter((e) => e.ItemCode === ItemCode);\n\n\t\tif (anyData && qty <= 0) {\n\t\t\tnotification.info({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'QTY Tidak boleh Nol (0)'\n\t\t\t});\n\n\t\t\thandleFocusSelect();\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty < oldQty) {\n\t\t\thandleState('modalConfirm', true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty >= 1) {\n\t\t\tconst restData = [];\n\n\t\t\tdata?.map((el) => {\n\t\t\t\tif (el.ItemCode === ItemCode) {\n\t\t\t\t\trestData.push({\n\t\t\t\t\t\t...el,\n\t\t\t\t\t\tqty: +qty,\n\t\t\t\t\t\ttotal: +qty * +price,\n\t\t\t\t\t\tamount: +qty * +price\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn restData.push(el);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\tpayload: {\n\t\t\t\t\tdata: [...restData]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tqty\n\t\t\t}));\n\n\t\t\tonHandleCancel();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowRight', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];\n\t\tconst key = e.key;\n\n\t\tif (allowedKeys.includes(key)) {\n\t\t\tif (key === 'ArrowUp') {\n\t\t\t\thandleFocusSelect();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandleFocus();\n\t\t}\n\t};\n\n\tconst handleState = (state, val) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\t[state]: val\n\t\t}));\n\t};\n\n\tuseEffect(() => {\n\t\tif (open && !state?.modalConfirm) {\n\t\t\thandleFocus();\n\t\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [open, state]);\n\n\tuseEffect(() => {\n\t\thandleFocusSelect();\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tqty: oldQty\n\t\t}));\n\t}, [selectedRowTransaction]);\n\n\treturn (\n\t\t<>\n\t\t\t<Modal\n\t\t\t\tcentered\n\t\t\t\topen={open}\n\t\t\t\tonOk={handleEnter}\n\t\t\t\tonCancel={onHandleCancel}\n\t\t\t\ttitle={<p className=\"text-lg\">Ubah Quantity</p>}\n\t\t\t\tfooter={\n\t\t\t\t\t<div className=\"w-full h-auto flex items-center justify-end gap-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"dashed\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tclassName=\"rounded-md text-sm\"\n\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tonHandleState('modalConfirmDelete', true);\n\t\t\t\t\t\t\t\tonHandleState('modalQty', false);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tHapus Barang\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleChangeQty(state?.qty);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tclassName=\"rounded-md text-sm font-semibold\">\n\t\t\t\t\t\t\tUbah Quantity\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t}>\n\t\t\t\t<Row ref={modalRef} tabIndex={1} onKeyDown={handleKeyDownGlobal} wrap gutter={[8, 8]}>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Barcode / PLU</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{`${upcBarcode} / ${ItemCode}`}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Nama Barang</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{itemName}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Harga Satuan</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{currencyFormat(price, 0)}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Qty</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{oldQty}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\tid=\"input-qty\"\n\t\t\t\t\t\t\tvalue={state?.qty}\n\t\t\t\t\t\t\tdefaultValue={oldQty}\n\t\t\t\t\t\t\tdisabled={state.inputChanged}\n\t\t\t\t\t\t\tonChange={(event) => handleChange(event.target.value)}\n\t\t\t\t\t\t\tonPressEnter={() => {\n\t\t\t\t\t\t\t\thandleEnter();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg mt-5 bg-gray-200\"\n\t\t\t\t\t\t\tplaceholder=\"MASUKKAN JUMLAH QTY\"\n\t\t\t\t\t\t\tonFocus={(e) => {\n\t\t\t\t\t\t\t\thandleFocusSelect();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleFocusSelect();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<p className=\"text-sm text-red-600 mt-2\">\n\t\t\t\t\t\t\tGunakan <b>&uarr;</b> untuk memasukkan jumlah qty dan tekan <b>ENTER</b> untuk konfirmasi\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t\t<ModalConfirmChangeQty\n\t\t\t\topen={state?.modalConfirm}\n\t\t\t\tstate={state}\n\t\t\t\thandleCancel={() => handleState('modalConfirm', false)}\n\t\t\t\thandleState={handleState}\n\t\t\t\tonHandleCancel={onHandleCancel}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import { Button, Col, Form, Input, Modal, Row } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalConfirmDelete({ open, state, handleCancel, handleState = (state, val) => {}, handleFocus }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { handleDeleteItem } = useCartOrder();\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { isGrantedAccess = false, loading = false } = useSelector((state) => state?.auth);\n\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\tconst modalRef = useRef(null);\n\tconst emailRef = useRef(null);\n\tconst passwordRef = useRef();\n\n\tconst [form] = Form.useForm();\n\n\tconst onFinish = (values) => {\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1031'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tconst isActiveEmail = document.activeElement === (emailRef.current && emailRef.current.input) || false;\n\t\tconst isActivePassword = document.activeElement === (passwordRef.current && passwordRef.current.input) || false;\n\n\t\tif (e.key === 'Enter' && isActiveEmail) {\n\t\t\temailRef.current && emailRef.current.blur();\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Enter' && isActivePassword) {\n\t\t\temailRef.current && emailRef.current.blur();\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\n\t\t\tform.submit();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Enter') {\n\t\t\tform.submit();\n\t\t}\n\n\t\tif (e.key === 'Escape') {\n\t\t\thandleCancel();\n\t\t\tform.resetFields();\n\t\t}\n\n\t\tif (e.key === 'ArrowUp') {\n\t\t\temailRef.current && emailRef.current.focus();\n\t\t}\n\n\t\tif (e.key === 'ArrowDown') {\n\t\t\tpasswordRef.current && passwordRef.current.focus();\n\n\t\t\tif (isActivePassword) {\n\t\t\t\tpasswordRef.current && passwordRef.current.blur();\n\t\t\t\temailRef.current && emailRef.current.blur();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDown);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown);\n\t\t};\n\t}, [form]);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tif (isGrantedAccess && isSelected) {\n\t\t\t\thandleDeleteItem(selectedRowTransaction?.ItemCode);\n\t\t\t\thandleCancel();\n\t\t\t}\n\t\t}\n\t}, [isGrantedAccess, open]);\n\n\treturn (\n\t\t<Modal centered open={open} onCancel={handleCancel} title={<h1 className=\"text-lg\">Hapus Barang</h1>} footer={false}>\n\t\t\t<div ref={modalRef} tabIndex={1}>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<div className=\"mb-5\">\n\t\t\t\t\t\t<p className=\"text-base text-gray-800\">\n\t\t\t\t\t\t\tApakah anda yakin akan menghapus item/barang <b>{selectedRowTransaction?.ItemName}</b>. Mohon konfirmasi terlebih dahulu.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Form\n\t\t\t\t\t\tform={form}\n\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\tonFinishFailed={console.log}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t<Row wrap gutter={[8, 0]}>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<div className=\"w-full h-auto p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\t\t\tGunakan <b>&uarr;</b> untuk mengisi <b>Email/Username</b>, dan <b>&darr;</b> mengisi <b>Password</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Button disable={loading} loading={loading} type=\"primary\" htmlType=\"submit\" className=\"w-full btn-page px-7\">\n\t\t\t\t\t\t\t\t\t\t\tValidasi\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancel}>\n\t\t\t\t\t\t\t\t\t\t\tKembali\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Form, Input, Modal } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalPendingPayment(props) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { visible, onCancel } = props;\n\tconst { transactionHolds = [], loading = false } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchItemRef } = useCartOrder();\n\n\tconst refTable = useRef(null);\n\tconst refInput = useRef(null);\n\tconst modalRef = useRef(null);\n\tconst [state, setState] = useState({\n\t\tsearch: '',\n\t\tt: -1,\n\t\tisSelected: false,\n\t\tdataTable: [],\n\t\tselectedData: {}\n\t});\n\n\tconst handleDetailHoldTrx = (billNo) => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD_DETAIL',\n\t\t\tpayload: {\n\t\t\t\tbillNo\n\t\t\t},\n\t\t\thistory,\n\t\t\tonClose: handleCancel,\n\t\t\tonState: props?.handleState\n\t\t});\n\t};\n\n\tconst onKeyPress = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowDown', 'Enter', 'Escape'];\n\t\tconst { t, dataTable } = state;\n\n\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (allowedKeys.includes(e.key) && visible) {\n\t\t\te.preventDefault();\n\n\t\t\trefInput && refInput.current.blur();\n\t\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\n\t\t\tconst table = refTable && refTable.current;\n\n\t\t\tif (e.key === 'ArrowDown' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (t <= 1 || dataTable.length.length < 2) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: 0,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (t === dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: dataTable.length,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[dataTable.length]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t]) {\n\t\t\t\t\t\treturn tr[t].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (t < dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t + 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t + 1]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t + 1]) {\n\t\t\t\t\t\treturn tr[t + 1].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowUp' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tif (t >= 2) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t - 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t - 1]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (t <= 1) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: 0,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (tr[t - 1]) {\n\t\t\t\t\treturn tr[t - 1].focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' && state?.isSelected) {\n\t\t\t\tconst isNotEmptyTrx = Object.keys(state?.selectedData || {}).length !== 0;\n\n\t\t\t\tfocusInput();\n\t\t\t\tif (isNotEmptyTrx) {\n\t\t\t\t\thandleDetailHoldTrx(state?.selectedData?.billNo);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\thandleCancel();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleDataTable = (query = '') => {\n\t\tif (query && query !== '') {\n\t\t\tconst filtered = transactionHolds\n\t\t\t\t.filter(\n\t\t\t\t\t(el) => el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0 || el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0\n\t\t\t\t)\n\t\t\t\t.map((val, i) => ({ ...val, key: i + 1 }));\n\n\t\t\tif (filtered.length !== 0) {\n\t\t\t\tsetState({\n\t\t\t\t\t...state,\n\t\t\t\t\tdataTable: filtered,\n\t\t\t\t\tt: 0,\n\t\t\t\t\tselectedData: {},\n\t\t\t\t\tisSelected: false\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultTrx = transactionHolds?.map((val, i) => ({ ...val, key: i + 1 }))?.slice(0, 30);\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: defaultTrx,\n\t\t\tt: 0,\n\t\t\tselectedData: {},\n\t\t\tisSelected: false\n\t\t});\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tisSelected: false,\n\t\t\tselectedData: {}\n\t\t});\n\n\t\tonCancel();\n\t};\n\n\tconst focusInput = () => {\n\t\tif (refInput && refInput.current !== null) {\n\t\t\trefInput.current.focus();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t\tsetState({\n\t\t\t...state,\n\t\t\tt: 0\n\t\t});\n\n\t\treturn () => {\n\t\t\tsetState(() => {\n\t\t\t\treturn;\n\t\t\t});\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst data = transactionHolds.map((val, i) => ({ ...val, key: i + 1 }));\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: data?.slice(0, 30)\n\t\t});\n\n\t\tfocusInput();\n\t}, [transactionHolds]);\n\n\tuseEffect(() => {\n\t\tconst table = refTable && refTable.current !== null && refTable.current;\n\n\t\tif (table) {\n\t\t\t// focusInput();\n\t\t\tdocument.addEventListener('keydown', onKeyPress);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyPress);\n\t\t};\n\t}, [refTable, state]);\n\n\treturn (\n\t\t<Modal open={visible} onCancel={handleCancel} centered width={850} footer={null}>\n\t\t\t<div ref={modalRef} onKeyDown={onKeyPress} className=\"w-full h-auto\">\n\t\t\t\t<div className=\"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4\">\n\t\t\t\t\t<h1 className=\"text-xl font-semibold text-center\">Transaksi Pending</h1>\n\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Form className=\"w-full\">\n\t\t\t\t\t\t<Form.Item className=\"w-full\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tref={refInput}\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tplaceholder=\"Masukkan Nomor Bill( F3 )\"\n\t\t\t\t\t\t\t\tclassName=\"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleDataTable(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<table ref={refTable} id=\"table\" className=\"table-customer w-full relative\">\n\t\t\t\t\t\t<thead className=\"w-full\">\n\t\t\t\t\t\t\t<tr key=\"id-head\" className=\"w-full bg-primary focus:bg-gray-700 h-14\">\n\t\t\t\t\t\t\t\t<th className=\"w-max text-center text-white px-5 uppercase\">No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Tanggal Transaksi</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Bill No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Subtotal</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{state?.dataTable?.map((item, index) => {\n\t\t\t\t\t\t\t\tconst { billNo = '', billTime = '', subTotal = '', key = '' } = item || {};\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\t\t\t\ttabIndex={index}\n\t\t\t\t\t\t\t\t\t\tclassName={`tr-data h-14 ${index % 2 === 0 ? 'bg-white' : 'bg-gray-100'} ${\n\t\t\t\t\t\t\t\t\t\t\tstate?.selectedDataTrx?.billNo === item?.billNo ? 'bg-yellow-200' : 'bg-white'\n\t\t\t\t\t\t\t\t\t\t} focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer`}\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\t\t\t\t\t\t\tselectedDataTrx: item\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\thandleDetailHoldTrx(billNo);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-center\">{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">{moment(billTime).format('DD MMM YYYY hh:mm:ss')}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 h-14 text-left flex items-center flex-row gap-2 content-center\">\n\t\t\t\t\t\t\t\t\t\t\t{billNo}\n\t\t\t\t\t\t\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">Rp {currencyFormat(subTotal, 0)}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-auto bg-gray-300 p-3 mt-5 rounded-md\">\n\t\t\t\t\t<h1 className=\"text-base\">\n\t\t\t\t\t\tGunakan keyboard <b>F3</b> untuk menginputkan <b>Nomor Bill</b>, lalu gunakan keyboard <b>&uarr;</b> dan <b>&darr;</b> untuk\n\t\t\t\t\t\tmemilih transaksi yang akan dilanjutkan. Tekan <b>Enter</b> untuk mengkonfirmasi pilihan anda.\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center \">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemCode',\n\t\tdataIndex: 'ItemCode',\n\t\ttitle: <p className=\"text-left uppercase\">PLU</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'upcBarcode',\n\t\tdataIndex: 'upcBarcode',\n\t\ttitle: <p className=\"text-left uppercase\">Barcode Satuan</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left uppercase\">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'uom',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center \">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center \">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t}\n];\n\nexport default function TableSearchItem({ modalRef, handleCancel, handdleFocusInput }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\tconst buttonRefs = useRef([]);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { searchResult: data = [] } = useSelector((state) => state?.transaction);\n\tconst { handleAddItem } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst item = data[index];\n\n\t\thandleAddItem(item, 'table');\n\t\t// handleCancel();\n\t\tsetActiveIndex(-1);\n\t\thanddleFocusInput();\n\t\t// handleFocus();\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'F4' || 'ArrowRight':\n\t\t\t\tsetActiveIndex(0);\n\t\t\t\tref && ref.current !== null && ref.current.focus();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\thandleSaveSelected(activeIndex);\n\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleCancel();\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetActiveIndex(-1);\n\n\t\tconst modal = modalRef && modalRef.current !== null && modalRef.current;\n\t\tif (modal) {\n\t\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [modalRef]);\n\n\tuseEffect(() => {\n\t\tconst table = ref && ref.current !== null && ref.current;\n\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [modalRef, ref, activeIndex, data]);\n\n\tuseEffect(() => {\n\t\tbuttonRefs.current[activeIndex] && buttonRefs.current[activeIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });\n\t}, [activeIndex]);\n\n\tuseEffect(() => {\n\t\thanddleFocusInput();\n\t}, [data]);\n\n\treturn (\n\t\t<div className=\"w-full h-96 overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th key={dataIndex} className={`text-${align} px-3 text-white`} style={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tref={(el) => (buttonRefs.current[index] = el)}\n\t\t\t\t\t\t\tclassName={`w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tindex === activeIndex ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer transition-all`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t\thanddleFocusInput();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td key={dataIndex} className={`text-${align} px-3`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/3 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>F3</b> untuk mencari barang by plu/barcode barang. <b>F4</b> untuk memilih tabel, kemudian{' '}\n\t\t\t\t\t\t\t<b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel, tekan <b>Enter</b> untuk konfirmasi item/barang pilihan\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, Modal, notification } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useCartOrder from '../hooks/useCartOrder';\nimport TableSearchItem from './TableSearchItem';\n\nexport default function ModalTableSearchItem({ open = false, handleFocus, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst { loading = false, searchResult = [] } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchInputRef, form } = useCartOrder();\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.resetFields();\n\t\t\tfocusInput();\n\t\t\treturn;\n\t\t}\n\n\t\tfocusInput();\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst focusInput = () => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (e.key === 'Escape' || e.key === 'Tab') {\n\t\t\thandleCancel();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tfocusInput();\n\t\t\tform.resetFields();\n\t\t}\n\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tonKeyDown(e);\n\t\t});\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t}, [searchResult]);\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t}, [loading]);\n\n\treturn (\n\t\t<Modal open={open} onCancel={handleCancel} footer={false} centered width={1000} title=\"Pencarian Barang\">\n\t\t\t<div ref={modalRef} onKeyDown={onKeyDown} className=\"w-full h-auto\" id=\"modal-container\">\n\t\t\t\t<div>\n\t\t\t\t\t<Form form={form}>\n\t\t\t\t\t\t<Form.Item name=\"search\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t// value={state?.barcode}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg border-2 border-gray-400\"\n\t\t\t\t\t\t\t\tplaceholder=\"MASUKKAN PLU / BARCODE ITEM / NAMA ITEM (F3)\"\n\t\t\t\t\t\t\t\t// onChange={(event) => {\n\t\t\t\t\t\t\t\t// \thandleState('barcode', event.target.value);\n\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\thandleSearch(event.target.value);\n\t\t\t\t\t\t\t\t\tform.resetFields();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full mt-4\">\n\t\t\t\t\t<TableSearchItem modalRef={modalRef} handdleFocusInput={focusInput} handleCancel={handleCancel} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full mt-4 rounded-md bg-gray-300 p-3\">\n\t\t\t\t\t<h1 className=\"text-base\">\n\t\t\t\t\t\tTekan <b>F3</b> untuk mencari barang by plu/barcode barang. <b>F4</b> untuk memilih tabel, kemudian <b>↑ / ↓</b> untuk pilih\n\t\t\t\t\t\tbarang dari tabel, tekan <b>Enter</b> untuk konfirmasi item/barang pilihan\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center\">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t// {\n\t// \tkey: 'ItemCode',\n\t// \tdataIndex: 'ItemCode',\n\t// \ttitle: <p className=\"text-center\">PLU</p>,\n\t// \trender: (val) => <p className=\"text-center\">{val}</p>,\n\t// \twidth: 100,\n\t// \talign: 'center'\n\t// },\n\t{\n\t\tkey: 'upcBarcode',\n\t\tdataIndex: 'upcBarcode',\n\t\ttitle: <p className=\"text-center\">BARCODE</p>,\n\t\trender: (val) => <p className=\"text-center\">{val}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left\">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 300,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'qty',\n\t\tdataIndex: 'qty',\n\t\ttitle: <p className=\"text-center\">QTY</p>,\n\t\trender: (val) => <p className=\"text-center\">{val}</p>,\n\t\twidth: 75,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'UomStock',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center\">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center\">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'discVal',\n\t\tdataIndex: 'discVal',\n\t\ttitle: <p className=\"text-center\">DISKON</p>,\n\t\trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t},\n\t// {\n\t// \tkey: 'discValuex',\n\t// \tdataIndex: 'discValuex',\n\t// \ttitle: <p className=\"text-center\">DISKON @</p>,\n\t// \trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t// \twidth: 125,\n\t// \talign: 'center'\n\t// },\n\t{\n\t\tkey: 'total',\n\t\tdataIndex: 'total',\n\t\ttitle: <p className=\"text-center\">TOTAL</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t}\n];\n\nexport default function TableOrderItem({ state = {}, handleCancel, handleState = (state, val) => {}, ...props }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { data = [], selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst selected = data[index];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tselectedRowTransaction: selected\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tconst isModalActive = (state?.modalPendingPayment || state?.modalSearchItem || state?.modalConfirmDelete || state?.modalQty) === true;\n\n\t\tif (e.key === 'ArrowRight' && !isModalActive) {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\t\t\tsetActiveIndex(0);\n\t\t\thandleSaveSelected(0);\n\n\t\t\tref && ref.current !== null && ref.current.focus();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\thandleState('modalConfirmDelete', true);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleFocus();\n\t\t\t\thandleCancel();\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleFocus();\n\t\t\t\thandleCancel();\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (ref && ref.current) {\n\t\t\tref.current.focus();\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [data, state]);\n\n\tuseEffect(() => {\n\t\tconst table = ref.current;\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [ref, activeIndex]);\n\n\tuseEffect(() => {\n\t\thandleSaveSelected(activeIndex);\n\t}, [activeIndex]);\n\n\treturn (\n\t\t<div className=\"w-full h-full overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400 relative\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0 z-50\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align = '', fixed = false }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\tkey={dataIndex + title}\n\t\t\t\t\t\t\t\t\tclassName={`text-${align} px-3 text-white border-r border-gray-200 ${\n\t\t\t\t\t\t\t\t\t\tfixed ? 'shadow-xl sticky right-0 top-0 bg-primary text-white' : 'relative'\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tstyle={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={`group w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tselectedRowTransaction?.ItemCode === data?.ItemCode ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\n\t\t\t\t\t\t\t\thandleState('modalQty', true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render, fixed = false }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tkey={dataIndex}\n\t\t\t\t\t\t\t\t\t\tclassName={`text-${align} px-3 border-r border-gray-400 ${\n\t\t\t\t\t\t\t\t\t\t\tfixed\n\t\t\t\t\t\t\t\t\t\t\t\t? `shadow-xl sticky right-0 top-0 ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedRowTransaction?.ItemCode === data?.ItemCode\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-primary text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-primary text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t  } border-r border-gray-400 group-hover:bg-blue-500 group-hover:text-white shadow-sm`\n\t\t\t\t\t\t\t\t\t\t\t\t: 'relative'\n\t\t\t\t\t\t\t\t\t\t}`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/5 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>&rarr;</b> lalu <b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel & <b>ESC</b>{' '}\n\t\t\t\t\t\t\tuntuk scan barang\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, notification } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport actions from '../../redux/transaction/actions';\nimport { currencyFormat } from '../../utils/helper/utilities';\nimport './app.css';\nimport ButtonActionOrder from './components/ButtonActionOrder';\nimport HeaderLayout from './components/HeaderLayout';\nimport ModalChangeQty from './components/ModalChangeQty';\nimport ModalConfirmDelete from './components/ModalConfirmDelete';\nimport ModalPendingPayment from './components/ModalPendingPayment';\nimport ModalTableSearchItem from './components/ModalTableSearchItem';\nimport TableOrderItem from './components/TableOrderItem';\nimport useCartOrder from './hooks/useCartOrder';\nimport usePayment from './hooks/usePayment';\n\nexport default function NewLayout() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { getTotalQty, getGrandTotal } = usePayment();\n\tconst { handleFocus, inputRef, form, handleSearch, handleAddItem, handleResetForm } = useCartOrder();\n\tconst {\n\t\tcontentStatus = 'isMenu',\n\t\tsearchResult = [],\n\t\tloading = false,\n\t\tbillNo = '',\n\t\tbillDate = '',\n\t\tdata = []\n\t} = useSelector((state) => state?.transaction);\n\tconst { isLog = false, authorized = false } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst [state, setState] = useState({\n\t\tmodalPendingPayment: false,\n\t\tmodalSearchItem: false,\n\t\tmodalConfirmDelete: false,\n\t\tmodalQty: false,\n\t\tbarcode: '',\n\t\ttableIndex: -1,\n\t\tisDisabledInput: false\n\t});\n\n\tconst handleCancel = () => {\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isMenu',\n\t\t\t\tselectedRowTransaction: {},\n\t\t\t\tsearchResult: []\n\t\t\t}\n\t\t});\n\n\t\tsetState((prev) => ({\n\t\t\tmodalPendingPayment: false,\n\t\t\tmodalSearchItem: false,\n\t\t\tmodalConfirmDelete: false,\n\t\t\tmodalQty: false,\n\t\t\tbarcode: '',\n\t\t\ttableIndex: -1\n\t\t}));\n\t};\n\n\tconst onKeyDownGlobal = (event) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.target.blur();\n\t\t\thandleFocus();\n\t\t}\n\n\t\tif (event.key === 'Tab') {\n\t\t\thandleFocus();\n\t\t\thandleCancel();\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\tconst handleSearchItem = (query = '') => {\n\t\tif (query && query.length !== 0) {\n\t\t\tif (query.length >= 6) {\n\t\t\t\thandleSearch(query);\n\t\t\t} else {\n\t\t\t\thandleResetForm();\n\n\t\t\t\tnotification.warning({\n\t\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\t\tdescription: 'Masukkan kode yang benar! Min. kode adalah 6 digit'\n\t\t\t\t});\n\n\t\t\t\thandleFocus();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\thandleResetForm();\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan kode yang terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleState = (state, value) => {\n\t\treturn setState((prev) => ({\n\t\t\t...prev,\n\t\t\t[state]: value\n\t\t}));\n\t};\n\n\tuseEffect(() => {\n\t\thandleCancel();\n\t\thandleFocus();\n\n\t\tif (isLog && authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'sync/SYNC_DATA_MASTER'\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t}, [isLog, authorized]);\n\n\tuseEffect(() => {\n\t\tif (!isLog || !authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'auth/LOGOUT_POS',\n\t\t\t\thistory\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\thandleFocus();\n\t\thandleCancel();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (contentStatus === 'isMenu') {\n\t\t\thandleFocus();\n\t\t}\n\t}, [contentStatus]);\n\n\tuseEffect(() => {\n\t\tif (document.activeElement.id === 'scan-item') {\n\t\t\tif (searchResult.length !== 0 && searchResult.length === 1) {\n\t\t\t\thandleAddItem({ upcBarcode: searchResult[0]?.UPCbarcode, ItemCode: '' }, 'input');\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t}, [searchResult, inputRef]);\n\n\tuseEffect(() => {\n\t\tinputRef && inputRef.current !== null && inputRef.current.focus();\n\t}, [billNo, billDate, inputRef, data, state]);\n\n\tuseEffect(() => {\n\t\tif (!loading) {\n\t\t\tinputRef && inputRef.current !== null && inputRef.current.focus();\n\t\t}\n\t}, [loading, inputRef]);\n\n\tconst disabled = state?.modalConfirmDelete || state?.modalPendingPayment || state?.modalQty || state?.modalSearchItem;\n\n\treturn (\n\t\t<div className=\"w-screen h-screen overflow-hidden relative pb-2.5\">\n\t\t\t<div className=\"w-full h-full grid grid-cols-12 gap-3\" style={{ gridTemplateRows: 'repeat(24, minmax(0, 1fr))' }}>\n\t\t\t\t<div className=\"col-span-12 row-span-3 bg-primary\">\n\t\t\t\t\t<HeaderLayout />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 row-span-5 pl-2.5\">\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg\">\n\t\t\t\t\t\t<div className=\"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-3xl text-white font-semibold text-right\">TOTAL BELANJA</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-2 col-span-6 relative\">\n\t\t\t\t\t\t\t<Form form={form} layout=\"vertical\">\n\t\t\t\t\t\t\t\t<div className=\"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full\" />\n\t\t\t\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5\">\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-16 bg-primary rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-center flex-col gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-gray-200 text-xs\">TOTAL QTY</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-white text-lg font-bold\">{getTotalQty()}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-5\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full bg-white rounded-lg overflow-hidden\" style={{ height: '68px' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item name=\"search-item\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"scan-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={state?.barcode}\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'bg-gray-200' : ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Barcode / PLU Barang (ESC / TAB)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '68px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSearchItem(event.target.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbarcode: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end p-3\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-7xl text-white font-semibold text-right\">{currencyFormat(getGrandTotal(), 0)}</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-2 pr-2.5\" style={{ gridRow: 'span 21 / span 21' }}>\n\t\t\t\t\t<ButtonActionOrder state={state} handleState={handleState} handleFocus={handleFocus} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 pl-2.5\" style={{ gridRow: 'span 16 / span 16' }}>\n\t\t\t\t\t<TableOrderItem handleFocus={handleFocus} handleState={handleState} state={state} handleCancel={handleCancel} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ModalPendingPayment\n\t\t\t\tvisible={state?.modalPendingPayment}\n\t\t\t\tonCancel={handleCancel}\n\t\t\t\thandleSearchFocus={handleFocus}\n\t\t\t\thandleState={handleState}\n\t\t\t/>\n\t\t\t<ModalTableSearchItem open={state?.modalSearchItem} handleCancel={handleCancel} handleFocus={handleFocus} />\n\t\t\t<ModalConfirmDelete\n\t\t\t\topen={state?.modalConfirmDelete}\n\t\t\t\thandleCancel={handleCancel}\n\t\t\t\tstate={state}\n\t\t\t\thandleState={handleState}\n\t\t\t\thandleFocus={handleFocus}\n\t\t\t/>\n\t\t\t<ModalChangeQty open={state?.modalQty} handleCancel={handleCancel} state={state} onHandleState={handleState} />\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}