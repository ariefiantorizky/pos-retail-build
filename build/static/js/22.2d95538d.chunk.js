(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[22],{290:function(e,t,s){"use strict";s(67),s(195)},291:function(e,t,s){"use strict";s(67),s(195)},292:function(e,t,s){"use strict";var a=s(274);t.a=a.a},293:function(e,t,s){"use strict";var a=s(126);t.a=a.a},702:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return m}));s(290);var a=s(292),l=(s(291),s(293)),i=(s(138),s(68)),n=(s(193),s(139)),r=(s(194),s(85)),c=s(0),u=s(59),o=s(27),d=s(13);function m(){const e=Object(u.d)(),t=Object(o.useHistory)(),s=Object(c.useRef)(null),m=Object(c.useRef)(null),j=Object(c.useRef)(null),[h]=r.a.useForm(),{loading:b=!1,isGrantedAccess:p=!1}=Object(u.e)((e=>null===e||void 0===e?void 0:e.auth)),{loading:f=!1}=Object(u.e)((e=>null===e||void 0===e?void 0:e.transaction)),x=s=>{p?y(s):e({type:"auth/USER_ACCESS",payload:{email:null===s||void 0===s?void 0:s.email,password:window.btoa(null===s||void 0===s?void 0:s.password),funcId:"1038"},history:t})},O=e=>console.log("Error! ",e),v=e=>{if(p)"Escape"===e.key&&(j.current.blur(),j.current.value=""),j&&j.current&&j.current.focus();else{const a=document.activeElement===(null!==s.current&&s.current.input)||!1,l=document.activeElement===(null!==m.current&&m.current.input)||!1;if("Enter"===e.key&&a)return s.current.blur(),void m.current.focus();if("Enter"===e.key&&l)return s.current.blur(),void m.current.focus();if("Escape"===e.key)return a||l?(h.resetFields(),void s.current.focus()):t.push("/pos/options");"ArrowUp"===e.key&&s.current.focus(),"ArrowDown"===e.key&&(m.current.focus(),l&&(m.current.blur(),s.current.blur()))}},y=s=>{const a=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:l={},property:i={}}=a,n={refDate:(null===l||void 0===l?void 0:l.shiftDate)||(null===i||void 0===i?void 0:i.refDate)||"",closeCash:(null===s||void 0===s?void 0:s.closingCash)||0,shiftId:(null===l||void 0===l?void 0:l.shiftId)||(null===i||void 0===i?void 0:i.shiftId)||0};e({type:"transaction/CLOSING_SHIFT",payload:n,history:t})};return Object(c.useEffect)((()=>(document.addEventListener("keydown",v),e({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),()=>{document.removeEventListener("keydown",v)})),[h]),Object(d.jsx)("div",{className:"w-full h-screen",children:Object(d.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:Object(d.jsxs)("div",{className:"max-w-xl",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-2xl font-medium",children:"Closing Shift"}),Object(d.jsx)("p",{className:"text-base leading-snug mt-3",children:"Jangan lupa untuk menutup kasir jika waktu kasir anda sudah selesai. Setelah itu, mohon untuk melakukan pengecekan pada histori transaksi dan upload sales."})]}),p?Object(d.jsx)("div",{className:"w-full h-auto mt-12",children:Object(d.jsxs)(r.a,{form:h,name:"opening",layout:"vertical",initialValues:{remember:!0},onFinish:x,onFinishFailed:O,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:[Object(d.jsx)(r.a.Item,{children:Object(d.jsx)(r.a.Item,{label:"Saldo Akhir",name:"closingCash",rules:[{required:!0,message:"Wajid Diisi!"}],children:Object(d.jsx)(n.a,{defaultValue:0,ref:j,type:"number",autoFocus:!0,autoComplete:"false",placeholder:"0",prefix:"IDR ",className:"w-full h-14 rounded-md"})})}),Object(d.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(d.jsx)(r.a.Item,{children:Object(d.jsx)(i.a,{disabled:f,loading:f,htmlType:"submit",className:"btn-page",children:"Tutup Kasir"})}),Object(d.jsx)(r.a.Item,{children:Object(d.jsx)(i.a,{disabled:f,htmlType:"button",className:"btn-page bg-transparent text-gray-700",onClick:()=>t.push("/pos/options"),children:"Batalkan"})})]})]})}):Object(d.jsx)("div",{className:"w-3/4 my-7",children:Object(d.jsx)(r.a,{form:h,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:x,onFinishFailed:O,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(d.jsxs)(a.a,{wrap:!0,gutter:[8,0],children:[Object(d.jsx)(l.a,{span:24,children:Object(d.jsx)(r.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(d.jsx)(n.a,{ref:s,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(d.jsx)(l.a,{span:24,children:Object(d.jsx)(r.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(d.jsx)(n.a.Password,{ref:m,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(d.jsx)(l.a,{span:18,children:Object(d.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(d.jsx)(r.a.Item,{children:Object(d.jsx)(i.a,{disabled:b,loading:b,type:"primary",htmlType:"submit",className:"w-full bg-primary h-12 rounded-md hover:bg-blue-900",children:"Validasi Kasir"})}),Object(d.jsx)(r.a.Item,{children:Object(d.jsxs)(i.a,{disabled:b,type:"default",htmlType:"button",className:"w-full h-12 flex items-center justify-center gap-2 rounded-md",onClick:()=>t.push("/pos/options"),children:["Kembali ",Object(d.jsx)("kbd",{className:"kbd",children:"esc"})]})})]})})]})})})]})})})}}}]);
//# sourceMappingURL=22.2d95538d.chunk.js.map