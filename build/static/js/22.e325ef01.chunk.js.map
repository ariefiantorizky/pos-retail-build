{"version":3,"sources":["pages/POS/close-day/index.js","../node_modules/antd/es/row/style/css.js","../node_modules/antd/es/col/style/css.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js"],"names":["CloseDayPage","dispatch","useDispatch","history","useHistory","emailRef","useRef","passwordRef","form","useForm","loading","isGrantedAccess","useSelector","state","auth","loadingTrx","transaction","cashier","property","JSON","parse","localStorage","getItem","onFinish","values","type","payload","email","password","window","btoa","funcId","onKeyDown","e","isActiveEmail","document","activeElement","current","input","isActivePassword","key","blur","focus","getFieldsValue","submit","resetFields","push","useEffect","addEventListener","removeEventListener","className","moment","shiftDate","refDate","format","disabled","onClick","name","layout","initialValues","remember","onFinishFailed","console","log","autoComplete","style","maxWidth","width","wrap","gutter","span","Item","label","rules","required","message","ref","autoFocus","placeholder","Password","htmlType","global","self","n","Error","stack","_sentryDebugIds","Row","Col"],"mappings":"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","file":"static/js/22.e325ef01.chunk.js","sourcesContent":["import { Button, Col, Form, Input, Row } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nexport default function CloseDayPage() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst emailRef = useRef(null);\n\tconst passwordRef = useRef(null);\n\tconst [form] = Form.useForm();\n\n\tconst { loading = false, isGrantedAccess = false } = useSelector((state) => state?.auth);\n\tconst { loading: loadingTrx = false } = useSelector((state) => state?.transaction);\n\tconst { cashier = {}, property = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst onFinish = (values) => {\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1038'\n\t\t\t}\n\t\t});\n\t};\n\n\tconst onFinishFailed = (e) => console.log('Error! ', e);\n\n\tconst onKeyDown = (e) => {\n\t\tif (isGrantedAccess) {\n\t\t\tconst isActiveEmail = document.activeElement === (emailRef.current !== null && emailRef.current.input) || false;\n\t\t\tconst isActivePassword = document.activeElement === (passwordRef.current !== null && passwordRef.current.input) || false;\n\n\t\t\tif (e.key === 'Enter' && isActiveEmail) {\n\t\t\t\temailRef.current.blur();\n\t\t\t\tpasswordRef.current.focus();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' && isActivePassword) {\n\t\t\t\temailRef.current.blur();\n\t\t\t\tpasswordRef.current.focus();\n\n\t\t\t\tonFinish(form.getFieldsValue());\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\tform.submit();\n\t\t\t}\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tif (isActiveEmail || isActivePassword) {\n\t\t\t\t\tform.resetFields();\n\t\t\t\t\temailRef.current.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn history.push('/pos/options');\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowUp') {\n\t\t\t\temailRef.current.focus();\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowDown') {\n\t\t\t\tpasswordRef.current.focus();\n\n\t\t\t\tif (isActivePassword) {\n\t\t\t\t\tpasswordRef.current.blur();\n\t\t\t\t\temailRef.current.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleCloseDay = () => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/CLOSING_DAY',\n\t\t\thistory\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDown);\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, [form]);\n\n\treturn (\n\t\t<div className=\"w-full h-screen\">\n\t\t\t<div className=\"w-full h-full flex flex-col items-center justify-center\">\n\t\t\t\t<div className=\"max-w-xl\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-2xl font-medium\">Closing Day</h1>\n\t\t\t\t\t\t<p className=\"text-base leading-snug mt-3\">\n\t\t\t\t\t\t\tAnda sudah membuka kasir pada{' '}\n\t\t\t\t\t\t\t<span className=\"font-semibold uppercase text-red-600\">\n\t\t\t\t\t\t\t\t{moment(cashier?.shiftDate || property?.refDate).format('DD MMMM YYYY')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t. Apakah anda yakin ingin melakukan Closing Day? Pastikan semua data transaksi sudah terupload, dan mohon untuk validasi\n\t\t\t\t\t\t\tdata terlebih dahulu.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{isGrantedAccess ? (\n\t\t\t\t\t\t<div className=\"w-full flex items-center gap-3 h-auto mt-12\">\n\t\t\t\t\t\t\t<Button className=\"btn-page\" disabled={loadingTrx} loading={loadingTrx} onClick={handleCloseDay}>\n\t\t\t\t\t\t\t\tClosing Day\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button className=\"btn-page bg-transparent text-gray-800\" onClick={() => history.push('/pos/options')}>\n\t\t\t\t\t\t\t\tBatalkan\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"w-3/4 my-7\">\n\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\tform={form}\n\t\t\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t\t\t<Row wrap gutter={[8, 0]}>\n\t\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col span={18}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button disabled={loading} loading={loading} type=\"primary\" htmlType=\"submit\" className=\"btn-page\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tValidasi Kasir\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-page bg-transparent text-gray-800\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => history.push('/pos/options')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\tKembali <kbd className=\"kbd\">esc</kbd>\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import '../../style/default.css';\n// style dependencies\n// deps-lint-skip: grid\nimport '../../grid/style/css';\n!function(){try{var e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]=\"082d6509-9a19-5370-97cf-31541dd548e4\")}catch(e){}}();\n//# debugId=082d6509-9a19-5370-97cf-31541dd548e4\n","import '../../style/default.css';\n// style dependencies\n// deps-lint-skip: grid\nimport '../../grid/style/css';\n!function(){try{var e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]=\"082d6509-9a19-5370-97cf-31541dd548e4\")}catch(e){}}();\n//# debugId=082d6509-9a19-5370-97cf-31541dd548e4\n","import { Row } from '../grid';\nexport default Row;\n!function(){try{var e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]=\"5bc74ea2-ef98-5de6-884d-a1fa3a9169e4\")}catch(e){}}();\n//# debugId=5bc74ea2-ef98-5de6-884d-a1fa3a9169e4\n","import { Col } from '../grid';\nexport default Col;\n!function(){try{var e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]=\"8f2b32da-c713-513b-91e5-639704ce3158\")}catch(e){}}();\n//# debugId=8f2b32da-c713-513b-91e5-639704ce3158\n"],"sourceRoot":""}