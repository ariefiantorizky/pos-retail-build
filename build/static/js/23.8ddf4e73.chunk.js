(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[23],{396:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(59);function l(){const e=Object(n.d)(),{billNo:t="",billDate:a="",data:l=[]}=Object(n.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:c={},property:s={}}=JSON.parse(localStorage.getItem("app")||"{}"),r=()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{total:a=0}=t;return+e+ +a}),0))||0,d=()=>0,i=()=>r()-0,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0!==(null===e||void 0===e?void 0:e.length)?e.reduce(((e,t)=>+e+ +t.cashPay),0):0},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=i(),n=o(e);return 0===a?0:t>a?t-a:n>a?n-a:0};return{getTotalQty:()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{qty:a=0}=t;return+e+ +a}),0))||0,getDiscountTotal:d,getSubtotal:r,getGrandTotal:i,getCashPaid:o,getCashChange:u,getBalanceDue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=o(e),n=i();return a>=n?a-n-t:i()-+a},paymentStore:(n,d)=>{var o,j;const b={header:[{billNo:t,billDate:a,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:r(),grandTotal:i(),shiftID:(null===c||void 0===c?void 0:c.shiftId)||"0",outletCode:null===s||void 0===s?void 0:s.outletCode}],settle:0!==(null===(o=n.settles)||void 0===o?void 0:o.length)&&(null===(j=n.settles)||void 0===j?void 0:j.map((e=>({...e,cashChange:u(null===n||void 0===n?void 0:n.settles,null===e||void 0===e?void 0:e.cashPay)})))),details:null===l||void 0===l?void 0:l.map(((e,a)=>({...e,billNo:t,ItemNo:a+1})))};e({type:"transaction/STORE",payload:b,bill:{from:a,to:a},handlePrint:d})}}}},559:function(e,t,a){},560:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(150);var n=a(71),l=(a(138),a(68)),c=a(0),s=a(27),r=a(13);function d(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:t={}}=e,a=(null===t||void 0===t?void 0:t.isOpening)||!1,n=Object(s.useHistory)(),[d,o]=Object(c.useState)(!a),u=e=>{n.push("/pos/opening-shift")},j=e=>{"F7"===e.key&&(e.target.blur(),e.preventDefault(),u())};return Object(c.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",onkeydown)})),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(l.a,{onClick:u,className:"btn-page",children:["Opening shift",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})]}),Object(r.jsx)(i,{isOpen:d,onClose:()=>o(!1)})]})}function i(e){let{isOpen:t,onClose:a}=e;return Object(r.jsxs)(n.a,{centered:!0,width:500,footer:!1,onCancel:a,open:t,bodyStyle:{backgroundColor:"#f8f8f8",borderRadius:"12px"},children:[Object(r.jsx)("h1",{className:"text-center font-semibold text-xl text-red-500",children:"PERHATIAN !!!"}),Object(r.jsxs)("p",{className:"text-center text-base leading-snug mt-5",children:["Anda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih dahulu dengan cara menekan tombol ",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})," atau menutup popup ini. Terima kasih"]})]})}},705:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return G}));a(194);var n=a(85),l=(a(193),a(139)),c=(a(108),a(20)),s=a(0),r=a(590),d=a(589),i=a(59),o=a(402),u=a(12),j=a(86),b=(a(559),a(138),a(68)),h=a(13);function m(e){let{hs:t=((e,t)=>{})}=e;const a=()=>{t("modalQty",!0)},n=e=>{"F3"===e.key&&(e.preventDefault(),a())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}))),Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f3"}),Object(h.jsx)("p",{children:"Ubah Quantity"})]})}function x(){return Object(h.jsxs)(b.a,{disabled:!0,className:"btn-page rounded-lg",children:[Object(h.jsx)("kbd",{className:"kbd",children:"f8"}),Object(h.jsx)("p",{children:"cek harga"})]})}function p(e){let{hs:t=((e,t)=>{})}=e;const{selectedRowTransaction:a={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),n=0!==Object.keys(a).length,l=()=>{t("modalConfirmDelete",!0)},c=e=>{if("input-qty"!==document.activeElement.id&&n)return e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),e.target.blur(),l()),null};return Object(s.useEffect)((()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)})),[]),Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:l,children:[Object(h.jsx)("kbd",{className:"kbd",children:"ctrl+enter"}),Object(h.jsx)("p",{children:"hapus item"})]})}function f(){return Object(h.jsxs)(b.a,{disabled:!0,className:"btn-page-2",children:[Object(h.jsx)("kbd",{className:"kbd",children:"f4"}),Object(h.jsx)("p",{children:"Diskon"})]})}function O(e){let{hs:t=(()=>{})}=e;const a=()=>{t("modalSearchItem",!0)},n=e=>{"F2"===e.key&&a()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f2"}),Object(h.jsx)("p",{children:"Daftar Barang"})]})})}function g(){const e=Object(i.d)(),t=Object(s.useRef)(null),[a]=n.a.useForm(),{searchResult:l=[],data:r=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),d=()=>{t&&null!==t.current&&t.current.focus()},o=()=>{a.resetFields(),d(),e({type:u.a.SET_STATE,payload:{searchResult:[]}})},j=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";o();const n=l.find((e=>+e.upcBarcode===+t.upcBarcode));if("input"===a&&void 0!==n&&void 0!==(null===t||void 0===t?void 0:t.upcBarcode)&&t.upcBarcode&&""!==t.upcBarcode){const a=l.find((e=>+e.upcBarcode===+t.upcBarcode)),n=r.filter((e=>+e.upcBarcode===+t.upcBarcode));if(a&&(null===n||void 0===n?void 0:n.length)>0){const a=[];r.map((e=>+e.upcBarcode!==+t.upcBarcode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a],contentStatus:"isMenu"}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{contentStatus:"isMenu",data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("select"===a&&t.ItemCode&&"select"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("table"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];null===r||void 0===r||r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}d()};return{inputRef:t,form:a,handleFocus:d,handleResetForm:o,handleSearch:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==t)return e({type:"transaction/SEARCH_MASTER",payload:{query:t}}),void o();c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})},handleSelectItem:function(){j({ItemCode:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},upcBarcode:""},"select")},handleAddItem:j,handleDeleteItem:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const a=0!==(null===r||void 0===r?void 0:r.length)&&(null===r||void 0===r?void 0:r.filter((e=>{let{ItemCode:a}=e;return a!==t})))||[];e({type:u.a.SET_STATE,payload:{data:a,selectedRowTransaction:a[0]}}),d()}}}function v(e){const t=Object(i.d)(),a=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:n={}}=a,l=(null===n||void 0===n?void 0:n.isOpening)||!1,{hs:c=null}=e,{loading:r=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:d}=g(),o=()=>{t({type:u.a.SET_STATE,payload:{transactionList:[],data:[]}}),t({type:u.a.TRANSACTION_BILL_NO}),c("data",[]),c("t",0),c("total",0),c("selectedData",[]),c("isSelected",[]),d()},j=e=>{if(l&&"F1"===e.key)return e.target.blur(),"barcode"!==document.activeElement.id?void o():e};return Object(s.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)})),[]),Object(h.jsxs)(b.a,{loading:r,disabled:r||!l,className:"btn-page",onClick:o,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f1"}),Object(h.jsx)("p",{children:"order baru"})]})}var y=a(560),N=a(27);function w(e){let{hs:t=null}=e;const a=Object(i.d)(),n=Object(N.useHistory)(),l=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:c={}}=l,r=(null===c||void 0===c?void 0:c.isOpening)||!1,d=()=>{a({type:u.a.TRANSACTION_HOLD_LIST,history:n})},o=()=>{t("modalPendingPayment",!0),d()},j=e=>{r&&"F7"===e.key&&o()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",j),d(),()=>{document.removeEventListener("keydown",j)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{disabled:!r,className:"btn-page",onClick:o,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f7"}),Object(h.jsx)("p",{children:"daftar pending"})]})})}function k(){const e=Object(N.useHistory)(),t=()=>{e.push("/pos/options")},a=e=>{if("F9"===e.key)return e.target.blur(),void t()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(h.jsxs)(b.a,{onClick:t,className:"btn-page",children:[Object(h.jsx)("kbd",{className:"kbd",children:"f9"}),"options"]})}function E(){const e=Object(i.d)(),t=Object(N.useHistory)(),{tenderMedia:a=[],loading:n=!1,data:l=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),c=()=>{e({type:"auth/property"}),e({type:u.a.SET_STATE,payload:{contentStatus:"isPayment"}}),t.push("/pos/payment")},r=e=>{"F10"===e.key&&(e.preventDefault(),c())};return Object(s.useEffect)((()=>(e({type:"transaction/TENDER_MEDIA"}),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{disabled:n||0===a.length||0===(null===l||void 0===l?void 0:l.length),loading:n,className:"btn-page-2",onClick:c,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f10"}),Object(h.jsx)("p",{children:"pembayaran"})]})})}function S(e){let{isDisabled:t=!1}=e;const a=Object(i.d)(),n=Object(N.useHistory)(),{data:l=[],loading:c=!1,billNo:r="",billDate:d=""}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{property:o={},cashier:u={}}=JSON.parse(localStorage.getItem("app")||"{}"),j=t||0===(null===l||void 0===l?void 0:l.length)||c||t,m=()=>{const e=l.reduce(((e,t)=>{let{total:a}=t;return+e+ +a}),0),t={header:[{billNo:r,billDate:d,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:e,grandTotal:e,shiftID:null===u||void 0===u?void 0:u.shiftId,outletCode:null===o||void 0===o?void 0:o.outletCode}],details:null===l||void 0===l?void 0:l.map(((e,t)=>({...e,billNo:r,ItemNo:t+1})))};a({type:"transaction/HOLD",payload:t,history:n})},x=e=>{j||"F6"===e.key&&(e.preventDefault(),m())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)})),[l]),Object(h.jsxs)(b.a,{loading:c,disabled:j,className:"btn-page",onClick:m,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f6"}),Object(h.jsx)("p",{children:"simpan pending"})]})}function T(e){var t;let{handleState:a=((e,t)=>{}),...n}=e;const{selectedRowTransaction:l={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:c={}}=JSON.parse(localStorage.getItem("app")||"{}"),{isOpening:s=!1}=c,r=0!==(null===(t=Object.keys(l))||void 0===t?void 0:t.length);return Object(h.jsx)("div",{className:"w-full h-full",children:s?r?Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(p,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(m,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(f,{})})]}):Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(v,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(O,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(S,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(w,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(x,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(k,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(E,{})})]}):Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(y.a,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(k,{})})]})})}a(204);var I=a(179),C=a(149),A=a.n(C);function D(){const{user:e={},cashier:t={}}=JSON.parse(localStorage.getItem("app")||"{}"),{billDate:a="",billNo:n="",loading:l=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),[c,r]=Object(s.useState)({modalCashBox:!1,currentTime:A()()});return Object(s.useEffect)((()=>{const e=setInterval((()=>{r((e=>({...e,currentTime:A()()})))}),1e3);return()=>{clearInterval(e)}}),[]),Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-between px-5",children:[Object(h.jsxs)("div",{className:"w-2/5 flex items-center gap-2",children:[Object(h.jsx)(I.a,{src:"/logo-3.png",className:"w-28 object-cover",preview:!1}),Object(h.jsx)("h1",{className:"text-xl text-white font-semibold leading-none",children:"Scap Point of Sales"})]}),Object(h.jsx)("div",{className:"w-full h-max",children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-end gap-5",children:[Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"buka"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:l?"...":A()(a).format("DD MMMM YYYY")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"TANGGAL"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:A()().format("DD MMMM YYYY")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"WAKTU"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:c.currentTime.format("HH:mm:ss")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"NO. TRANSAKSI"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:l?"...":n||"-"})]}),Object(h.jsxs)("div",{className:"",children:[Object(h.jsxs)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:[(null===e||void 0===e?void 0:e.role)||"nama kasir"," | ID 0",(null===t||void 0===t?void 0:t.shiftId)||"0"]}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:(null===e||void 0===e?void 0:e.username)||"guest"})]})]})})]})})}a(150);var L=a(71),R=(a(290),a(292)),P=(a(291),a(293));function F(e){let{open:t,handleState:a,handleCancel:n}=e;const r=Object(i.d)(),{selectedRowTransaction:d={},data:o=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{qty:b,ItemCode:m="",price:x=0,upcBarcode:p="",itemName:f=""}=d,O=Object(s.useRef)(null),g=Object(s.useRef)(null),[v,y]=Object(s.useState)({qty:b,inputChanged:!1}),N=()=>{O&&null!==O.current&&(O.current.focus(),O.current.select())},w=()=>{const{qty:e=0}=v;if(N(),0===+e||+e<=0)return c.a.error({message:"Perhatian!",description:"Kuantitas tidak boleh kosong"}),void N();k(""!==e&&e!==b?e:+b)},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;const t=0!==(null===o||void 0===o?void 0:o.length)&&(null===o||void 0===o?void 0:o.filter((e=>e.ItemCode===m)));if(t&&e<=0)c.a.info({message:"Perhatian!",description:"QTY Tidak boleh Nol (0)"});else{if(t&&e<b)return n(),c.a.error({message:"Perhatian!",description:"Anda tidak dapat mengubah quantity kurang dari quantity awal!."}),void c.a.error({message:"Perhatian!",description:"Fitur ini sedang dalam tahap pengembangan."});if(t&&e>=1){const t=[];null===o||void 0===o||o.map((a=>a.ItemCode!==m?t.push(a):(t.push({...a,qty:+e,total:+e*+x,amount:+e*+x}),!0))),r({type:u.a.SET_STATE,payload:{data:[...t]}})}n(),y((e=>({...e,qty:1})))}},E=e=>{const t=e.key;["ArrowUp","ArrowDown"].includes(t)&&(e.preventDefault(),"ArrowUp"===t?(console.log(O),N()):"ArrowDown"===t&&console.log(document.activeElement))};return Object(s.useEffect)((()=>{N()}),[]),Object(s.useEffect)((()=>{N()}),[d]),Object(s.useEffect)((()=>{t&&N()}),[t]),Object(s.useEffect)((()=>{N()}),[O]),Object(s.useEffect)((()=>(O&&null!==O.current&&O.current&&(N(),document.addEventListener("keydown",E)),()=>{document.removeEventListener("keydown",E)})),[g,O,t]),Object(h.jsx)(L.a,{centered:!0,open:t,onOk:w,onCancel:n,title:Object(h.jsx)("p",{className:"text-lg",children:"Ubah Quantity"}),children:Object(h.jsxs)(R.a,{ref:g,tabIndex:1,onKeyDown:E,wrap:!0,gutter:[8,8],children:[Object(h.jsx)(P.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(P.a,{span:10,children:"Barcode / PLU"}),Object(h.jsx)(P.a,{span:1,children:":"}),Object(h.jsx)(P.a,{span:11,children:"".concat(p," / ").concat(m)})]})}),Object(h.jsx)(P.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(P.a,{span:10,children:"Nama Barang"}),Object(h.jsx)(P.a,{span:1,children:":"}),Object(h.jsx)(P.a,{span:11,children:f})]})}),Object(h.jsx)(P.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(P.a,{span:10,children:"Harga Satuan"}),Object(h.jsx)(P.a,{span:1,children:":"}),Object(h.jsx)(P.a,{span:11,children:Object(j.a)(x,0)})]})}),Object(h.jsx)(P.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(P.a,{span:10,children:"Qty"}),Object(h.jsx)(P.a,{span:1,children:":"}),Object(h.jsx)(P.a,{span:11,children:b})]})}),Object(h.jsxs)(P.a,{span:24,children:[Object(h.jsx)(l.a,{autoFocus:!0,id:"input-qty",value:null===v||void 0===v?void 0:v.qty,defaultValue:b,disabled:v.inputChanged,ref:O,onChange:e=>{return t=e.target.value,void y((e=>({...e,qty:+t})));var t},onPressEnter:()=>{w()},className:"w-full h-14 rounded-lg mt-5 bg-gray-200",placeholder:"MASUKKAN JUMLAH QTY",onKeyDown:E}),Object(h.jsxs)("p",{className:"text-base text-red-600 mt-2",children:["*Gunakan ",Object(h.jsx)("b",{children:"\u21e7"})," untuk memasukkan jumlah qty"]})]})]})})}function M(e){let{open:t,state:a,handleCancel:c,handleState:r=((e,t)=>{})}=e;const d=Object(i.d)(),u=Object(o.useHistory)(),{handleDeleteItem:j}=g(),{selectedRowTransaction:m={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isGrantedAccess:x=!1,loading:p=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.auth)),f=0!==Object.keys(m).length,O=Object(s.useRef)(null),v=Object(s.useRef)(),y=Object(s.useRef)(),N=Object(s.useRef)(null),[w]=n.a.useForm(),k=e=>{if(x)return j(null===m||void 0===m?void 0:m.ItemCode),void c();d({type:"auth/USER_ACCESS",payload:{email:null===e||void 0===e?void 0:e.email,password:window.btoa(null===e||void 0===e?void 0:e.password),funcId:"1031"},history:u})};return Object(s.useEffect)((()=>{d({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}})}),[t]),Object(h.jsx)(L.a,{centered:!0,open:t,onCancel:c,title:Object(h.jsx)("h1",{className:"text-lg",children:"Hapus Barang"}),footer:!1,children:Object(h.jsx)("div",{ref:O,tabIndex:1,children:x?Object(h.jsx)("div",{className:"w-full",children:Object(h.jsxs)("div",{className:"w-full h-auto p-5 py-7 bg-gray-100 rounded-lg",children:[Object(h.jsxs)("h1",{className:"text-base text-center ",children:[Object(h.jsx)("b",{children:"Konfirmasi Berhasil."})," Anda dapat menghapus item/barang yang terpilih."]}),Object(h.jsx)(b.a,{danger:!0,autoFocus:!0,ref:N,className:"btn-page w-max px-7 mx-auto mt-5",onClick:()=>k(w.getFieldsValue()),onKeyDown:e=>{"input-qty"!==document.activeElement.id&&f&&e.ctrlKey&&"Enter"===e.key&&k(w.getFieldsValue())},children:"Hapus Item"})]})}):Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)("div",{className:"mb-5",children:Object(h.jsxs)("p",{className:"text-base text-gray-800",children:["Apakah anda yakin akan menghapus item/barang ",Object(h.jsx)("b",{children:null===m||void 0===m?void 0:m.ItemName}),". Mohon konfirmasi terlebih dahulu."]})}),Object(h.jsx)(n.a,{form:w,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:k,onFinishFailed:console.log,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(h.jsxs)(R.a,{wrap:!0,gutter:[8,0],children:[Object(h.jsx)(P.a,{span:24,children:Object(h.jsx)(n.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(h.jsx)(l.a,{ref:v,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(h.jsx)(P.a,{span:24,children:Object(h.jsx)(n.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(h.jsx)(l.a.Password,{ref:y,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(h.jsx)(P.a,{span:24,children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(h.jsx)(n.a.Item,{children:Object(h.jsx)(b.a,{disable:p,loading:p,type:"primary",htmlType:"submit",className:"w-full btn-page px-7",children:"Validasi"})}),Object(h.jsx)(n.a.Item,{children:Object(h.jsx)(b.a,{type:"default",htmlType:"button",className:"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7",onClick:c,children:"Kembali"})})]})})]})})]})})})}var B=a(77);function q(e){var t;const a=Object(i.d)(),c=Object(N.useHistory)(),{visible:r,onCancel:d}=e,{transactionHolds:o=[],loading:u=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:b}=g(),m=Object(s.useRef)(null),x=Object(s.useRef)(null),p=Object(s.useRef)(null),[f,O]=Object(s.useState)({search:"",t:0,isSelected:!1,dataTable:[],selectedData:{}}),v=t=>{a({type:"transaction/HOLD_DETAIL",payload:{billNo:t},history:c,onClose:w,onState:null===e||void 0===e?void 0:e.handleState})},y=e=>{const{t:t,dataTable:a}=f;if(b&&null!==b.current&&b.current.blur(),"f"===e.key&&k(),["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)&&r){x&&x.current.blur(),b&&null!==b.current&&b.current.blur();const l=m&&m.current;if("ArrowUp"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur(),t>=2&&O({...f,t:t-1,isSelected:!0,selectedData:a[t-1]}),1===t&&O({...f,t:0,isSelected:!0,selectedData:a[0]});const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if(n[t-1])return n[t-1].focus()}if("ArrowDown"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur();const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if(t===a.length&&(O({...f,t:a.length,isSelected:!0,selectedData:a[a.length]}),n[t]))return n[t].focus();if(t<a.length&&(O({...f,t:t+1,isSelected:!0,selectedData:a[t+1]}),n[t+1]))return n[t+1].focus()}if("Enter"===e.key&&null!==f&&void 0!==f&&f.isSelected){const e=0!==Object.keys((null===f||void 0===f?void 0:f.selectedData)||{}).length;var n;return k(),e?void v(null===f||void 0===f||null===(n=f.selectedData)||void 0===n?void 0:n.billNo):null}"Escape"===e.key&&w()}},w=()=>{O({...f,isSelected:!1,selectedData:{}}),d()},k=()=>{x&&null!==x.current&&x.current.focus()};return Object(s.useEffect)((()=>(k(),O({...f,t:0}),()=>{O((()=>{}))})),[]),Object(s.useEffect)((()=>{const e=o.map(((e,t)=>({...e,key:t+1})));O({...f,dataTable:null===e||void 0===e?void 0:e.slice(0,30)}),k()}),[o]),Object(s.useEffect)((()=>(m&&null!==m.current&&m.current&&(k(),document.addEventListener("keydown",y)),()=>{document.removeEventListener("keydown",y)})),[m,f]),Object(h.jsx)(L.a,{open:r,onCancel:w,centered:!0,width:850,footer:null,children:Object(h.jsxs)("div",{ref:p,onKeyDown:y,className:"w-full h-auto",children:[Object(h.jsxs)("div",{className:"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4",children:[Object(h.jsx)("h1",{className:"text-xl font-semibold text-center",children:"Transaksi Pending"}),u&&Object(h.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(h.jsx)("div",{className:"w-full",children:Object(h.jsx)(n.a,{className:"w-full",children:Object(h.jsx)(n.a.Item,{className:"w-full",children:Object(h.jsx)(l.a,{ref:x,autoFocus:!0,placeholder:"Masukkan Nomor Bill( F )",className:"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800",onChange:e=>function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&""!==t){const e=o.filter((e=>e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0||e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0)).map(((e,t)=>({...e,key:t+1})));return 0!==e.length?void O({...f,dataTable:e,t:0,selectedData:{},isSelected:!1}):void 0}const a=null===o||void 0===o||null===(e=o.map(((e,t)=>({...e,key:t+1}))))||void 0===e?void 0:e.slice(0,30);O({...f,dataTable:a,t:0,selectedData:{},isSelected:!1})}(e.target.value)})})})}),Object(h.jsx)("div",{className:"w-full",children:Object(h.jsxs)("table",{ref:m,id:"table",className:"table-customer w-full relative",children:[Object(h.jsx)("thead",{className:"w-full",children:Object(h.jsxs)("tr",{className:"w-full bg-primary focus:bg-gray-700 h-14",children:[Object(h.jsx)("th",{className:"w-max text-center text-white px-5",children:"No"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Tanggal Transaksi"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Bill No"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Subtotal"})]},"id-head")}),Object(h.jsx)("tbody",{children:null===f||void 0===f||null===(t=f.dataTable)||void 0===t?void 0:t.map(((e,t)=>{var a;const{billNo:n="",billTime:l="",subTotal:c="",key:s=""}=e||{};return Object(h.jsxs)("tr",{id:t,tabIndex:t,className:"tr-data h-14 ".concat(t%2===0?"bg-white":"bg-gray-100"," ").concat((null===f||void 0===f||null===(a=f.selectedDataTrx)||void 0===a?void 0:a.billNo)===(null===e||void 0===e?void 0:e.billNo)?"bg-yellow-200":"bg-white"," focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer"),onClick:()=>{O({...f,isSelected:!0,selectedDataTrx:e}),v(n)},children:[Object(h.jsx)("td",{className:"px-5 text-center",children:t+1}),Object(h.jsx)("td",{className:"px-5 text-left",children:A()(l).format("DD MMM YYYY hh:mm:ss")}),Object(h.jsxs)("td",{className:"px-5 h-14 text-left flex items-center flex-row gap-2 content-center",children:[n,u&&Object(h.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(h.jsxs)("td",{className:"px-5 text-left",children:["Rp ",Object(j.a)(c,0)]})]},s)}))})]})})]})})}var _=a(561);const U=[{key:"no",dataIndex:"no",title:Object(h.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(h.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"PLU"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"upcBarcode",dataIndex:"upcBarcode",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"Barcode Satuan"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"NAMA BARANG"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"uom",dataIndex:"UomStock",title:Object(h.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(h.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(h.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:200,align:"center"}];function K(e){let{modalRef:t,handleCancel:a}=e;const n=Object(i.d)(),l=Object(s.useRef)(null),[c,r]=Object(s.useState)(-1),{searchResult:d=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleAddItem:o,handleFocus:j}=g(),b=function(){const e=d[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];o(e,"table"),a(),r(-1),j()},m=e=>{if("F4"===e.key)r(0),l&&null!==l.current&&l.current.focus()},x=e=>{switch(e.key){case"ArrowUp":r((e=>Math.max(e-1,0)));break;case"ArrowDown":r((e=>Math.min(e+1,d.length-1)));break;case"Enter":b(c);break;case"Escape":e.target.blur(),r(-1),a(),n({type:u.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>{r(-1);return t&&null!==t.current&&t.current&&(l&&l.current&&l.current.focus(),document.addEventListener("keydown",m)),()=>{document.removeEventListener("keydown",m)}}),[t]),Object(s.useEffect)((()=>{const e=l&&null!==l.current&&l.current;if(e)return e.addEventListener("keydown",x),()=>{e.removeEventListener("keydown",x)}}),[t,l,c,d]),Object(h.jsxs)("div",{className:"w-full h-96 overflow-scroll",children:[Object(h.jsxs)("table",{ref:l,tabIndex:0,className:"table-fixed w-full border border-gray-400",border:!0,children:[Object(h.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(h.jsx)("tr",{children:null===U||void 0===U?void 0:U.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l}=e;return Object(h.jsx)("th",{className:"text-".concat(l," px-3 text-white"),style:{width:a},children:t},n)}))})}),Object(h.jsx)("tbody",{children:d.map(((e,t)=>Object(h.jsx)("tr",{className:"w-full h-14 border border-gray-500 ".concat(t===c?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer transition-all"),onClick:()=>{b(t)},children:null===U||void 0===U?void 0:U.map((a=>{let{dataIndex:n,align:l,render:c}=a;return Object(h.jsx)("td",{className:"text-".concat(l," px-3"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===d||void 0===d?void 0:d.length)&&Object(h.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(h.jsxs)("div",{className:"w-1/2 flex items-center justify-center flex-col gap-3",children:[Object(h.jsx)(_.a,{className:"text-6xl text-gray-500"}),Object(h.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(h.jsx)("b",{children:"F3"})," untuk input plu/barcode barang & ",Object(h.jsx)("b",{children:"ESC"})," untuk keluar dari pencarian"]})]})})]})}function H(e){let{open:t=!1,state:a,handleState:o,handleCancel:u}=e;const j=Object(i.d)(),b=Object(s.useRef)(null),m=Object(s.useRef)(null),{loading:x=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:p,form:f}=g(),O=()=>{p&&null!==p.current&&p.current.blur(),b&&null!==b.current&&(b.current.focus(),b.current.select())},v=e=>{p&&null!==p.current&&p.current.blur(),"F3"===e.key&&(e.preventDefault(),O())};return Object(s.useEffect)((()=>{O(),f.resetFields()}),[]),Object(s.useEffect)((()=>(m&&null!==m.current&&m.current&&(O(),document.addEventListener("keydown",v)),()=>{document.removeEventListener("keydown",v)})),[m,t]),Object(h.jsx)(L.a,{open:t,onCancel:u,centered:!0,width:1e3,title:"Pencarian Barang",children:Object(h.jsxs)("div",{ref:m,onKeyDown:v,className:"w-full h-auto",id:"modal-container",children:[Object(h.jsx)("div",{children:Object(h.jsx)(n.a,{form:f,children:Object(h.jsx)(n.a.Item,{name:"search",children:Object(h.jsx)(l.a,{autoFocus:!0,ref:b,type:"text",className:"w-full h-14 rounded-lg border-2 border-gray-400",placeholder:"MASUKKAN UPL / BARCODE ITEM (F3)",onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e)return j({type:"transaction/SEARCH_MASTER",payload:{query:e}}),f.resetFields(),void O();c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})}(e.target.value),f.resetFields()},suffix:x?Object(h.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(h.jsx)(r.a,{className:"text-xl text-gray-500"})})})})}),Object(h.jsx)("div",{className:"w-full mt-4",children:Object(h.jsx)(K,{modalRef:m,handleCancel:u})})]})})}const Y=[{key:"no",dataIndex:"no",title:Object(h.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(h.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(h.jsx)("p",{className:"text-left ",children:"PLU"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(h.jsx)("p",{className:"text-left ",children:"NAMA BARANG"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"qty",dataIndex:"qty",title:Object(h.jsx)("p",{className:"text-center ",children:"QTY"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e}),width:75,align:"center"},{key:"uom",dataIndex:"UomStock",title:Object(h.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(h.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(h.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:200,align:"center"},{key:"discVal",dataIndex:"discVal",title:Object(h.jsx)("p",{className:"text-center ",children:"DISKON %"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"discVa",dataIndex:"discVal",title:Object(h.jsx)("p",{className:"text-center ",children:"DISKON @"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"total",dataIndex:"total",title:Object(h.jsx)("p",{className:"text-center ",children:"TOTAL"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:250,align:"center",fixed:"right"}];function Q(e){let{state:t={},handleState:a=((e,t)=>{}),...n}=e;const l=Object(i.d)(),c=Object(s.useRef)(null),[r,d]=Object(s.useState)(-1),{data:o=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:j}=g(),b=function(){const e=o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];l({type:u.a.SET_STATE,payload:{selectedRowTransaction:e}})},m=e=>{if("ArrowRight"===e.key)0!==o.length&&(e.target.blur(),e.preventDefault(),d(0),c&&null!==c.current&&c.current.focus())},x=e=>{switch(e.key){case"ArrowUp":d((e=>Math.max(e-1,0)));break;case"ArrowDown":d((e=>Math.min(e+1,o.length-1)));break;case"Enter":e.ctrlKey&&a("modalConfirmDelete",!0);break;case"Tab":e.target.blur(),d(-1),j(),l({type:u.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>(c&&c.current&&c.current.focus(),document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)})),[o]),Object(s.useEffect)((()=>{const e=c.current;if(e)return e.addEventListener("keydown",x),()=>{e.removeEventListener("keydown",x)}}),[c,r]),Object(s.useEffect)((()=>{b(r)}),[r]),Object(h.jsxs)("div",{className:"w-full h-full overflow-scroll",children:[Object(h.jsxs)("table",{ref:c,tabIndex:0,className:"table-fixed w-full border border-gray-400",border:!0,children:[Object(h.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(h.jsx)("tr",{children:null===Y||void 0===Y?void 0:Y.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l}=e;return Object(h.jsx)("th",{className:"text-".concat(l," px-3 text-white"),style:{width:a},children:t},n)}))})}),Object(h.jsx)("tbody",{children:o.map(((e,t)=>Object(h.jsx)("tr",{className:"w-full h-14 border border-gray-500 ".concat(t===r?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer"),onClick:()=>{b(t),d(t),a("modalQty",!0)},children:null===Y||void 0===Y?void 0:Y.map((a=>{let{dataIndex:n,align:l,render:c}=a;return Object(h.jsx)("td",{className:"text-".concat(l," px-3"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===o||void 0===o?void 0:o.length)&&Object(h.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(h.jsxs)("div",{className:"w-2/5 flex items-center justify-center flex-col gap-3",children:[Object(h.jsx)(_.a,{className:"text-6xl text-gray-500"}),Object(h.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(h.jsx)("b",{children:"\u27a1"})," untuk pilih barang dari tabel & ",Object(h.jsx)("b",{children:"ESC"})," untuk scan barang"]})]})})]})}var V=a(396);function G(){const e=Object(i.d)(),t=Object(o.useHistory)(),{getTotalQty:a,getGrandTotal:b}=Object(V.a)(),{handleFocus:m,inputRef:x,form:p,handleSearch:f,handleAddItem:O,handleResetForm:v}=g(),{contentStatus:y="isMenu",searchResult:N=[],loading:w=!1,billNo:k="",billDate:E=""}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isLog:S=!1,authorized:I=!1}=JSON.parse(localStorage.getItem("app")||"{}"),[C,A]=Object(s.useState)({modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:""}),L=()=>{m(),e({type:"transaction/SET_STATE",payload:{contentStatus:"isMenu"}}),A((e=>({...e,modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:""})))},R=e=>{"Escape"===e.key&&(e.preventDefault(),e.target.blur(),m())},P=(e,t)=>{A((a=>({...a,[e]:t})))};return Object(s.useEffect)((()=>{if(L(),m(),S&&I)return e({type:"transaction/BACK_MENU"}),e({type:u.a.TRANSACTION_BILL_NO}),e({type:"auth/property"}),void e({type:u.a.SET_STATE,payload:{contentStatus:"isMenu"}});S&&I||e({type:"auth/LOGOUT_POS",history:t})}),[S,I]),Object(s.useEffect)((()=>(m(),L(),document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)})),[]),Object(s.useEffect)((()=>{"isMenu"===y&&m()}),[y]),Object(s.useEffect)((()=>{var e;"scan-item"===document.activeElement.id&&(0!==N.length&&1===N.length&&O({upcBarcode:null===(e=N[0])||void 0===e?void 0:e.UPCbarcode,ItemCode:""},"input"));m()}),[N,x]),Object(s.useEffect)((()=>{x&&null!==x.current&&x.current.focus()}),[k,E,x,C]),Object(h.jsxs)("div",{className:"w-screen h-screen overflow-hidden relative pb-2.5",children:[Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-12 gap-3",style:{gridTemplateRows:"repeat(24, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"col-span-12 row-span-3 bg-primary",children:Object(h.jsx)(D,{})}),Object(h.jsx)("div",{className:"col-span-10 row-span-5 pl-2.5",children:Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg",children:[Object(h.jsx)("div",{className:"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none",children:Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-end",children:Object(h.jsx)("h1",{className:"text-3xl text-white font-semibold text-right",children:"TOTAL BELANJA"})})}),Object(h.jsx)("div",{className:"row-start-2 col-span-6 relative",children:Object(h.jsxs)(n.a,{form:p,layout:"vertical",children:[Object(h.jsx)("div",{className:"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full"}),Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5",children:[Object(h.jsx)("div",{className:"col-span-2",children:Object(h.jsx)("div",{className:"w-full h-16 bg-primary rounded-lg",children:Object(h.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-1",children:[Object(h.jsx)("p",{className:"text-center text-gray-200 text-xs",children:"TOTAL QTY"}),Object(h.jsx)("p",{className:"text-center text-white text-lg font-bold",children:a()})]})})}),Object(h.jsx)("div",{className:"col-span-5",children:Object(h.jsx)("div",{className:"w-full bg-white rounded-lg overflow-hidden",style:{height:"68px"},children:Object(h.jsx)(n.a.Item,{name:"search-item",children:Object(h.jsx)(l.a,{id:"scan-item",value:null===C||void 0===C?void 0:C.barcode,ref:x,autoFocus:!0,className:"w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input",placeholder:"Barcode / PLU Barang (ESC)",suffix:w?Object(h.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(h.jsx)(r.a,{className:"text-xl text-gray-500"}),style:{height:"68px"},onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&0!==e.length?e.length>=6?f(e):(v(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang benar! Min. kode adalah 6 digit"}),m()):(v(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang terlebih dahulu."}))}(e.target.value)},onChange:e=>{A((t=>({...t,barcode:e.target.value})))}})})})})]})]})}),Object(h.jsx)("div",{className:"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none",children:Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-end p-3",children:Object(h.jsx)("h1",{className:"text-7xl text-white font-semibold text-right",children:Object(j.a)(b(),0)})})})]})}),Object(h.jsx)("div",{className:"col-span-2 pr-2.5",style:{gridRow:"span 21 / span 21"},children:Object(h.jsx)(T,{state:C,handleState:P})}),Object(h.jsx)("div",{className:"col-span-10 pl-2.5",style:{gridRow:"span 16 / span 16"},children:Object(h.jsx)(Q,{handleFocus:m,handleState:P,state:C})})]}),Object(h.jsx)(q,{visible:null===C||void 0===C?void 0:C.modalPendingPayment,onCancel:L,handleSearchFocus:m,handleState:P}),Object(h.jsx)(H,{open:null===C||void 0===C?void 0:C.modalSearchItem,handleCancel:L,state:C,handleState:P}),Object(h.jsx)(M,{open:null===C||void 0===C?void 0:C.modalConfirmDelete,handleCancel:L,state:C,handleState:P}),Object(h.jsx)(F,{open:null===C||void 0===C?void 0:C.modalQty,handleCancel:L,state:C,handleState:P})]})}}}]);
//# sourceMappingURL=23.8ddf4e73.chunk.js.map