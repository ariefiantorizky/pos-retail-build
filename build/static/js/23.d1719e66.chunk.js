(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[23],{751:function(e,t,n){"use strict";e.exports=n(752)},752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(753);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=["className","ref","length","validate","format","debug","onResolveKey","onRejectKey","onChange","onComplete"];function o(){}var u={ref:{current:new r.PinField},length:5,validate:/^[a-zA-Z0-9]$/,format:function(e){return e},debug:!1,onResolveKey:o,onRejectKey:o,onChange:o,onComplete:o},c=i.forwardRef((function(e,t){var n=i.useRef(new r.PinField),o=a({},u,e),c=o.className,l=o.length,d=o.validate,h=o.format,f=o.debug,p=o.onResolveKey,y=o.onRejectKey,v=o.onChange,b=o.onComplete,g=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(r[n]=e[n]);return r}(o,s);function m(e){e instanceof CustomEvent&&v(e.detail.value)}function k(e){e instanceof CustomEvent&&p(e.detail.key)}function x(e){e instanceof CustomEvent&&y(e.detail.key)}function E(e){e instanceof CustomEvent&&b(e.detail.value)}return i.useImperativeHandle(t,(function(){return n.current}),[n]),i.useEffect((function(){if(n.current)return n.current.validate=d,n.current.format=h,n.current.addEventListener("change",m),n.current.addEventListener("resolve-key",k),n.current.addEventListener("reject-key",x),n.current.addEventListener("complete",E),function(){n.current&&(n.current.removeEventListener("change",m),n.current.removeEventListener("resolve-key",k),n.current.removeEventListener("reject-key",x),n.current.removeEventListener("complete",E))}}),[]),i.createElement("swd-pin-field",a({ref:n,class:c,length:l,debug:f?"":void 0},g))}));Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})),t.ReactPinField=c,t.default=c},753:function(e,t,n){"use strict";e.exports=n(754)},754:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&a(r,n.prototype),r}).apply(null,arguments)}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,r(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=["Alt","Control","Enter","Meta","Shift","Tab"];function c(e,t){return Array.from({length:t},(function(t,n){return n+e}))}function l(e){return Math.max(0,e-1)}function d(e,t){return 0===t?0:Math.min(e+1,t-1)}var h=function(e){var t,n;function r(){var t;return(t=e.apply(this,arguments)||this).cursor=0,t.actions=[],t.effects=[],t.fallback=null,t.inputs=[],t.length=5,t.validate=/^[a-zA-Z0-9]$/,t.format=function(e){return e},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var s,o,h,f=r.prototype;return f.isKeyAllowed=function(e){return!!e&&!(e.length>1)&&("string"==typeof this.validate?this.validate.split("").includes(e):this.validate instanceof Array?this.validate.includes(e):this.validate instanceof RegExp?this.validate.test(e):this.validate(e))},f.log=function(e,t,n){this.debug&&console.debug("[PIN Field] ("+e+") "+t+(n?": "+n:""))},f.attributeChangedCallback=function(e,t,n){var i=this;if(t!==n)switch(e){case"debug":this.debug=null!==n;break;case"disabled":this.inputs.forEach((function(e){return e.disabled=i.disabled}))}},f.connectedCallback=function(){var e=this;if(this.hasAttribute("length")&&(this.length=Number(this.getAttribute("length"))||5,this.length<1))throw new RangeError("The PIN Field length should be greater than 0 (got "+this.length+")");var t=this.getAttribute("validate");"string"==typeof t&&(this.validate=t);var n=document.createElement("input");n.autocapitalize="off",n.autocomplete="off",n.inputMode="text";for(var i=[],r=function(t){var r=e.attributes[t];["id","autofocus","debug"].includes(r.name)||(n.setAttribute(r.name,r.value),i.push((function(){return r&&e.removeAttribute(r.name)})))},a=0;a<this.attributes.length;a++)r(a);this.append.apply(this,c(0,this.length).map((function(t){var i=n.cloneNode(!0);return 0===t&&e.hasAttribute("autofocus")&&(i.setAttribute("autofocus",""),e.removeAttribute("autofocus")),e.inputs.push(i),i})));var s=document.createElement("slot"),o=document.createElement("style");o.innerText=":host{display:flex;}",this.attachShadow({mode:"open"}).append(o,s),i.forEach((function(e){return e()})),this.inputs.forEach((function(t,n){t.addEventListener("keydown",e.handleKeyDown(n)),t.addEventListener("keyup",e.handleKeyUp(n)),t.addEventListener("paste",e.handlePaste(n))}))},f.disconnectedCallback=function(){var e=this;this.inputs.forEach((function(t,n){t.removeEventListener("keydown",e.handleKeyDown(n)),t.removeEventListener("keyup",e.handleKeyUp(n)),t.removeEventListener("paste",e.handlePaste(n))}))},f.applySetValAt=function(e,t){if(t.split("").slice(0,this.length).every(this.isKeyAllowed.bind(this))){var n,i=Math.min(t.length,this.length-e),r=d(i+e-1,this.length);(n=this.effects).push.apply(n,[{type:"handle-code-change"},{type:"focus-input",idx:r}].concat(c(0,i).flatMap((function(n){return[{type:"set-input-val",idx:e+n,val:t[n]},{type:"resolve-key",idx:e+n,key:t[n]}]}))))}else this.effects.push({type:"handle-code-change"},{type:"reject-key",idx:e,key:t},{type:"set-input-val",idx:e,val:""})},f.executeAll=function(){for(;this.actions.length>0;){var e=this.actions.pop();switch(e.type){case"handle-key-down":switch(this.log("action","handle-key-down","key="+e.key),e.key){case"Unidentified":this.fallback={idx:e.idx,val:e.val};break;case"Dead":this.effects=[{type:"handle-code-change"},{type:"reject-key",idx:e.idx,key:e.key},{type:"set-input-val",idx:e.idx,val:""}];break;case"ArrowLeft":this.cursor=l(e.idx),this.effects=[{type:"focus-input",idx:this.cursor}];break;case"ArrowRight":this.cursor=d(e.idx,this.length),this.effects=[{type:"focus-input",idx:this.cursor}];break;case"Delete":case"Backspace":this.effects=[{type:"handle-code-change"},{type:"handle-delete",idx:e.idx}];break;default:this.isKeyAllowed(e.key)?(this.cursor=d(e.idx,this.length),this.effects=[{type:"handle-code-change"},{type:"focus-input",idx:this.cursor},{type:"resolve-key",idx:e.idx,key:e.key},{type:"set-input-val",idx:e.idx,val:e.key}]):this.effects=[{type:"reject-key",idx:e.idx,key:e.key}]}break;case"handle-key-up":if(!this.fallback){this.log("action","handle-key-up","ignored");break}this.log("action","handle-key-up");var t=this.fallback,n=t.idx,i=t.val,r=e.val;""===i&&""===r?this.effects.push({type:"handle-delete",idx:n},{type:"handle-code-change"}):""!==i&&""!==r?(r=i===r[0]?r.substring(1):r.substring(0,r.length-1),this.applySetValAt(n,r)):""!==r&&this.applySetValAt(n,r),this.fallback=null;break;case"handle-paste":this.applySetValAt(e.idx,e.val)}}},f.applyAll=function(){for(;this.effects.length>0;){var e=this.effects.pop();switch(e.type){case"focus-input":this.log("effect","focus-input","idx="+e.idx),this.inputs[e.idx].focus();break;case"set-input-val":this.log("effect","set-input-val","idx="+e.idx+",val="+e.val);var t=this.format(e.val);this.inputs[e.idx].value=t;break;case"resolve-key":this.log("effect","resolve-key","idx="+e.idx+",key="+e.key),this.inputs[e.idx].setCustomValidity(""),this.dispatchEvent(new CustomEvent("resolve",{detail:{key:e.key}}));break;case"reject-key":this.log("effect","reject-key","idx="+e.idx+",key="+e.key),this.inputs[e.idx].setCustomValidity("Invalid key"),this.dispatchEvent(new CustomEvent("reject",{detail:{key:e.key}}));break;case"handle-delete":this.log("effect","handle-delete","idx="+e.idx);var n=this.inputs[e.idx].value;if(this.inputs[e.idx].setCustomValidity(""),this.inputs[e.idx].value="",!n){var i=l(e.idx);this.inputs[i].focus(),this.inputs[i].setCustomValidity(""),this.inputs[i].value=""}break;case"handle-code-change":var r=(document.documentElement.getAttribute("dir")||"ltr").toLowerCase(),a=this.inputs.map((function(e){return e.value.trim()})),s=("rtl"===r?a.reverse():a).join("");this.log("effect","handle-code-change","val={"+s+"}"),this.dispatchEvent(new CustomEvent("change",{detail:{value:s}})),s.length===this.length?(this.setAttribute("completed",""),this.dispatchEvent(new CustomEvent("complete",{detail:{value:s}}))):this.removeAttribute("completed")}}},f.render=function(){this.executeAll(),this.applyAll()},f.handleKeyDown=function(e){var t=this;return function(n){if(u.includes(n.key)||n.ctrlKey||n.altKey||n.metaKey)t.log("handleKeyDown","ignored","idx="+e+",key="+n.key);else if(n.target instanceof HTMLInputElement){n.preventDefault();var i=n.target.value;t.log("handleKeyDown","triggered","idx="+e+",key="+n.key+",val="+i),t.actions.push({type:"handle-key-down",idx:e,key:n.key,val:i}),t.render()}}},f.handleKeyUp=function(e){var t=this;return function(n){if(n.target instanceof HTMLInputElement){var i=n.target.value;t.log("handleKeyUp","triggered","idx="+e+",val="+i),t.actions.push({type:"handle-key-up",idx:e,val:i}),t.render()}}},f.handlePaste=function(e){var t=this;return function(n){n.preventDefault();var i=n.clipboardData?n.clipboardData.getData("Text"):"";t.log("handlePaste","triggered","idx="+e+",val="+i),t.actions.push({type:"handle-paste",idx:e,val:i}),t.render()}},s=r,h=[{key:"observedAttributes",get:function(){return["debug","disabled"]}}],(o=[{key:"debug",get:function(){return this.hasAttribute("debug")},set:function(e){e?this.setAttribute("debug",""):this.removeAttribute("debug")}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}])&&i(s.prototype,o),h&&i(s,h),r}(o(HTMLElement));customElements.define("swd-pin-field",h),t.PinField=h,t.default=h},842:function(e,t,n){"use strict";n.r(t);n(110);var i=n(64),r=n(1),a=n(751),s=n.n(a),o=(n(100),n(17)),u=n(48),c=n(28);var l=n(13);t.default=()=>{const{ref:e,code:t,setCode:n,keys:a,handleSubmit:d,handleSetCode:h,loading:f}=function(){const e=Object(u.d)(),t=Object(c.useHistory)(),{loading:n,isLog:i,authorized:a}=Object(u.e)((e=>e.auth)),[s,l]=Object(r.useState)(""),d=Object(r.useRef)([]),h=e=>{s.length<d.current.inputs.length?l((t=>"".concat(t).concat(e))):l((t=>"".concat(t.slice(0,-1)).concat(e)))},f=n=>{try{if(""!==n)return void e({type:"auth/LOGIN_PIN",payload:{pinCode:n},history:t});o.a.error({message:"Perhatian!",description:"Silahkan masukkan PIN terlebih dahulu"})}catch(i){console.log(i)}finally{l(""),d.current.inputs[0].focus(),d.current.inputs.forEach((e=>{e.value=""}))}},p=e=>{const t=((null===e||void 0===e?void 0:e.key)||"").toLowerCase();(+t>=0||+t<=9)&&h(t),"backspace"!==t&&"delete"!==t||(d.current.inputs.forEach((e=>{e.value=""})),l(""),d.current.inputs[0].focus()),"enter"===t&&f(s)};return Object(r.useEffect)((()=>{d&&0!==d.current.inputs.length&&d.current.inputs[0].focus();const e=localStorage.getItem("app");if(e&&null!==e){const n=JSON.parse(e),{isLog:r=!1,authorized:s=!1}=n;if(r&&s||i&&a)return void t.push("/pos/kasir");if(!r&&s||!i&&a)return void t.push("/pos/auth");t.push("/auth/login")}}),[]),Object(r.useEffect)((()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[s]),Object(r.useEffect)((()=>{if(d.current.inputs){const e=d.current.inputs[0];e&&e.focus()}}),[d]),Object(r.useEffect)((()=>{""!==s&&d.current.inputs.forEach(((e,t)=>{s.length<=d.current.inputs.length?e.value=s[t]||"":d.current.inputs[d.current.length-1].value=s[s.length-1]}))}),[d,s]),{ref:d,code:s,setCode:l,handleSubmit:f,handleSetCode:h,handleKeyboard:p,keys:[{key:"1",type:"number"},{key:"2",type:"number"},{key:"3",type:"number"},{key:"4",type:"number"},{key:"5",type:"number"},{key:"6",type:"number"},{key:"7",type:"number"},{key:"8",type:"number"},{key:"9",type:"number"},{key:"Delete",type:"function"},{key:"0",type:"number"},{key:"Enter",type:"function"}],loading:n}}();return Object(l.jsx)("div",{className:"w-full h-screen bg-white flex items-center justify-center",children:Object(l.jsxs)("div",{className:"w-full md:w-max h-full md:h-max bg-white md:p-5 py-12 md:rounded-xl flex flex-col items-center justify-center gap-5",children:[Object(l.jsx)("div",{className:"flex",children:Object(l.jsxs)("div",{className:"m-auto text-center",children:[Object(l.jsx)("h1",{className:"text-xl font-light my-5 text-gray-600",children:"Enter the PIN code"}),Object(l.jsx)(s.a,{ref:e,"data-cy":"pin-field",className:"pin-field",validate:"0123456789",autoFocus:!0,autoCapitalize:"off",autoCorrect:"on",autoComplete:"on",inputMode:"numeric",length:"6",onChange:n})]})}),Object(l.jsx)("div",{className:"mt-5",children:Object(l.jsx)("div",{className:"w-full text-center",children:Object(l.jsx)("div",{className:"w-full grid grid-cols-3 gap-3",children:null===a||void 0===a?void 0:a.map((r=>{let{key:a,type:s}=r;return Object(l.jsx)(i.a,{loading:"Enter"===a&&f,className:" ".concat("Enter"===a?"bg-blue-600":"bg-gray-100"," ").concat("Enter"===a&&"text-white"," rounded-lg hover:bg-blue-500 hover:text-white transition-all ease-in-out"),style:{width:"75px",height:"75px"},onClick:()=>{"number"===s&&h(a),"function"===s&&("Delete"===a?(n(""),e.current.forEach((e=>e.value="")),e.current[0].focus()):"Enter"===a&&d(t))},children:a},a)}))})})})]})})}}}]);
//# sourceMappingURL=23.d1719e66.chunk.js.map