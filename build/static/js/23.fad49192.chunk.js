(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[23],{464:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(68);function l(){const e=Object(n.d)(),{billNo:t="",billDate:a="",data:l=[]}=Object(n.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:c={},property:s={}}=JSON.parse(localStorage.getItem("app")||"{}"),r=()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{total:a=0}=t;return+e+ +a}),0))||0,d=()=>0,i=()=>r()-0,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0!==(null===e||void 0===e?void 0:e.length)?e.reduce(((e,t)=>+e+ +t.cashPay),0):0},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=i(),n=o(e);return 0===a?0:t>a?t-a:n>a?n-a:0};return{getTotalQty:()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{qty:a=0}=t;return+e+ +a}),0))||0,getDiscountTotal:d,getSubtotal:r,getGrandTotal:i,getCashPaid:o,getCashChange:u,getBalanceDue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=o(e),n=i();return a>=n?a-n-t:i()-+a},paymentStore:(n,d)=>{var o,j;const b={header:[{billNo:t,billDate:a,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:r(),grandTotal:i(),shiftID:(null===c||void 0===c?void 0:c.shiftId)||"0",outletCode:null===s||void 0===s?void 0:s.outletCode}],settle:0!==(null===(o=n.settles)||void 0===o?void 0:o.length)&&(null===(j=n.settles)||void 0===j?void 0:j.map((e=>({...e,cashChange:u(null===n||void 0===n?void 0:n.settles,null===e||void 0===e?void 0:e.cashPay)})))),details:null===l||void 0===l?void 0:l.map(((e,a)=>({...e,billNo:t,ItemNo:a+1})))};e({type:"transaction/STORE",payload:b,bill:{from:a,to:a},handlePrint:()=>{if("function"===typeof d)return d()}})}}}},627:function(e,t,a){},628:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(193);var n=a(101),l=(a(145),a(87)),c=a(1),s=a(39),r=a(14);function d(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:t={}}=e,a=(null===t||void 0===t?void 0:t.isOpening)||!1,n=Object(s.useHistory)(),[d,o]=Object(c.useState)(!a),u=e=>{n.push("/pos/opening-shift")},j=e=>{"F7"===e.key&&(e.target.blur(),e.preventDefault(),u())};return Object(c.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",onkeydown)})),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(l.a,{onClick:u,className:"btn-page",children:["Opening shift",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})]}),Object(r.jsx)(i,{isOpen:d,onClose:()=>o(!1)})]})}function i(e){let{isOpen:t,onClose:a}=e;return Object(r.jsxs)(n.a,{centered:!0,width:500,footer:!1,onCancel:a,open:t,bodyStyle:{backgroundColor:"#f8f8f8",borderRadius:"12px"},children:[Object(r.jsx)("h1",{className:"text-center font-semibold text-xl text-red-500",children:"PERHATIAN !!!"}),Object(r.jsxs)("p",{className:"text-center text-base leading-snug mt-5",children:["Anda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih dahulu dengan cara menekan tombol ",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})," atau menutup popup ini. Terima kasih"]})]})}},775:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));a(245);var n=a(117),l=(a(244),a(182)),c=(a(133),a(24)),s=a(1),r=a(659),d=a(658),i=a(68),o=a(471),u=a(13),j=a(109),b=(a(627),a(145),a(87)),h=a(14);function m(e){let{hs:t=(e,t)=>{}}=e;const a=()=>{t("modalQty",!0)},n=e=>{"F3"===e.key&&(e.preventDefault(),a())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}))),Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f3"}),Object(h.jsx)("p",{children:"Ubah Quantity"})]})}function x(){return Object(h.jsxs)(b.a,{disabled:!0,className:"btn-page rounded-lg",children:[Object(h.jsx)("kbd",{className:"kbd",children:"f8"}),Object(h.jsx)("p",{children:"cek harga"})]})}function p(e){let{hs:t=(e,t)=>{}}=e;const{selectedRowTransaction:a={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),n=0!==Object.keys(a).length,l=()=>{t("modalConfirmDelete",!0)},c=e=>{if("input-qty"!==document.activeElement.id&&n)return e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),e.target.blur(),l()),null};return Object(s.useEffect)((()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)})),[]),Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:l,children:[Object(h.jsx)("kbd",{className:"kbd",children:"ctrl+enter"}),Object(h.jsx)("p",{children:"hapus item"})]})}function O(e){let{hs:t=()=>{}}=e;const a=()=>{t("modalSearchItem",!0)},n=e=>{"F2"===e.key&&a()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f2"}),Object(h.jsx)("p",{children:"Daftar Barang"})]})})}function f(){const e=Object(i.d)(),t=Object(s.useRef)(null),[a]=n.a.useForm(),{searchResult:l=[],data:r=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),d=()=>{t&&null!==t.current&&t.current.focus()},o=()=>{a.resetFields(),d(),e({type:u.a.SET_STATE,payload:{searchResult:[]}})},j=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";o();const n=l.find((e=>+e.upcBarcode===+t.upcBarcode));if("input"===a&&void 0!==n&&void 0!==(null===t||void 0===t?void 0:t.upcBarcode)&&t.upcBarcode&&""!==t.upcBarcode){const a=l.find((e=>+e.upcBarcode===+t.upcBarcode)),n=r.filter((e=>+e.upcBarcode===+t.upcBarcode));if(a&&(null===n||void 0===n?void 0:n.length)>0){const a=[];r.map((e=>+e.upcBarcode!==+t.upcBarcode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a],contentStatus:"isMenu"}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{contentStatus:"isMenu",data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("select"===a&&t.ItemCode&&"select"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("table"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];null===r||void 0===r||r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:u.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:u.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}d()};return{inputRef:t,form:a,handleFocus:d,handleResetForm:o,handleSearch:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==t)return e({type:"transaction/SEARCH_MASTER",payload:{query:t}}),void o();c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})},handleSelectItem:function(){j({ItemCode:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},upcBarcode:""},"select")},handleAddItem:j,handleDeleteItem:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const a=0!==(null===r||void 0===r?void 0:r.length)&&(null===r||void 0===r?void 0:r.filter((e=>{let{ItemCode:a}=e;return a!==t})))||[];e({type:u.a.SET_STATE,payload:{data:a,selectedRowTransaction:a[0]}}),d()}}}function v(e){const t=Object(i.d)(),a=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:n={}}=a,l=(null===n||void 0===n?void 0:n.isOpening)||!1,{hs:c=null}=e,{loading:r=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:d}=f(),o=()=>{t({type:u.a.SET_STATE,payload:{transactionList:[],data:[]}}),t({type:u.a.TRANSACTION_BILL_NO}),c("data",[]),c("t",0),c("total",0),c("selectedData",[]),c("isSelected",[]),d()},j=e=>{if(l&&"F1"===e.key)return e.target.blur(),"barcode"!==document.activeElement.id?void o():e};return Object(s.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)})),[]),Object(h.jsxs)(b.a,{loading:r,disabled:r||!l,className:"btn-page",onClick:o,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f1"}),Object(h.jsx)("p",{children:"order baru"})]})}var g=a(628),y=a(39);function N(e){let{hs:t=null}=e;const a=Object(i.d)(),n=Object(y.useHistory)(),{cashier:l={}}=JSON.parse(localStorage.getItem("app")||"{}"),c=(null===l||void 0===l?void 0:l.isOpening)||!1,r=()=>{a({type:u.a.TRANSACTION_HOLD_LIST,history:n})},d=()=>{t("modalPendingPayment",!0),r()},o=e=>{c&&"F7"===e.key&&(e.preventDefault(),d())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",o),r(),()=>{document.removeEventListener("keydown",o)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{disabled:!c,className:"btn-page",onClick:d,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f7"}),Object(h.jsx)("p",{children:"daftar pending"})]})})}function k(){const e=Object(y.useHistory)(),t=()=>{e.push("/pos/options")},a=e=>{if("F9"===e.key)return e.target.blur(),void t()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(h.jsxs)(b.a,{onClick:t,className:"btn-page",children:[Object(h.jsx)("kbd",{className:"kbd",children:"f9"}),"options"]})}function w(){const e=Object(i.d)(),t=Object(y.useHistory)(),{tenderMedia:a=[],loading:n=!1,data:l=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),c=()=>{e({type:"auth/property"}),e({type:u.a.SET_STATE,payload:{contentStatus:"isPayment"}}),t.push("/pos/payment")},r=e=>{"F10"===e.key&&(e.preventDefault(),c())};return Object(s.useEffect)((()=>(e({type:"transaction/TENDER_MEDIA"}),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)})),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(b.a,{disabled:0===a.length||0===(null===l||void 0===l?void 0:l.length),className:"btn-page-2",onClick:c,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f10"}),Object(h.jsx)("p",{children:"pembayaran"})]})})}function E(e){let{isDisabled:t=!1}=e;const a=Object(i.d)(),n=Object(y.useHistory)(),{data:l=[],loading:c=!1,billNo:r="",billDate:d=""}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{property:o={},cashier:u={}}=JSON.parse(localStorage.getItem("app")||"{}"),j=(null===u||void 0===u?void 0:u.isOpening)||!1,m=t||0===(null===l||void 0===l?void 0:l.length)||c||!j,x=()=>{const e=l.reduce(((e,t)=>{let{total:a}=t;return+e+ +a}),0),t={header:[{billNo:r,billDate:d,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:e,grandTotal:e,shiftID:null===u||void 0===u?void 0:u.shiftId,outletCode:null===o||void 0===o?void 0:o.outletCode}],details:null===l||void 0===l?void 0:l.map(((e,t)=>({...e,billNo:r,ItemNo:t+1})))};a({type:"transaction/HOLD",payload:t,history:n})},p=e=>{m||"F6"===e.key&&(e.preventDefault(),x())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[l]),Object(h.jsxs)(b.a,{loading:c,disabled:m,className:"btn-page",onClick:x,children:[Object(h.jsx)("kbd",{className:"kbd",children:"f6"}),Object(h.jsx)("p",{children:"simpan pending"})]})}function S(e){var t;let{handleState:a=(e,t)=>{},state:n={},handleFocus:l,...c}=e;const{selectedRowTransaction:s={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:r={}}=JSON.parse(localStorage.getItem("app")||"{}"),{isOpening:d=!1}=r,o=0!==(null===(t=Object.keys(s))||void 0===t?void 0:t.length);return Object(h.jsx)("div",{className:"w-full h-full",children:d?o?Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(p,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(m,{hs:a})}),Object(h.jsx)("div",{className:"py-3",children:Object(h.jsxs)("h1",{className:"text-base text-gray-700 text-center",children:["Tekan ",Object(h.jsx)("kbd",{className:"kbd",children:"tab / esc"})," untuk kembali ke scanner"]})})]}):Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(v,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(O,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(E,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(N,{hs:a})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(x,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(k,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(w,{})})]}):Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(g.a,{})}),Object(h.jsx)("div",{className:"",children:Object(h.jsx)(k,{})})]})})}a(255);var T=a(223),I=a(192),C=a.n(I);function A(){const{user:e={},cashier:t={}}=JSON.parse(localStorage.getItem("app")||"{}"),{billDate:a="",billNo:n="",loading:l=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),[c,r]=Object(s.useState)({modalCashBox:!1,currentTime:C()()});return Object(s.useEffect)((()=>{const e=setInterval((()=>{r((e=>({...e,currentTime:C()()})))}),1e3);return()=>{clearInterval(e)}}),[]),Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-between px-5",children:[Object(h.jsxs)("div",{className:"w-2/5 flex items-center gap-2",children:[Object(h.jsx)(T.a,{src:"/logo-2.png",className:"w-16 object-cover",preview:!1}),Object(h.jsx)("h1",{className:"text-xl text-white font-semibold leading-none",children:"Retail Point of Sales"})]}),Object(h.jsx)("div",{className:"w-full h-max",children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-end gap-5",children:[Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"bussiness date"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:C()(a).format("dddd, DD MMMM YYYY")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"today"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:C()().format("DD MMMM YYYY")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"time"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:c.currentTime.format("HH:mm:ss")})]}),Object(h.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(h.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"NO. TRANSAKSI"}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:l?"...":n||"-"})]}),Object(h.jsxs)("div",{className:"",children:[Object(h.jsxs)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:[(null===e||void 0===e?void 0:e.role)||"nama kasir"," | ID 0",(null===t||void 0===t?void 0:t.shiftId)||"0"]}),Object(h.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:(null===e||void 0===e?void 0:e.username)||"guest"})]})]})})]})})}a(193);var D=a(101),R=(a(355),a(357)),L=(a(356),a(358));function F(e){let{open:t,handleState:a,handleCancel:n}=e;const r=Object(i.d)(),{selectedRowTransaction:d={},data:o=[],loading:b=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{qty:m,ItemCode:x="",price:p=0,upcBarcode:O="",itemName:f=""}=d,v=Object(s.useRef)(null),g=Object(s.useRef)(null),[y,N]=Object(s.useState)({qty:m,inputChanged:!1}),k=()=>{n(),v.current.blur(),g.current.blur()},w=()=>{v&&null!==v.current&&v.current.focus()},E=()=>{v&&null!==v.current&&(v.current.focus(),v.current.select())},S=()=>{const{qty:e=0}=y;if(w(),0===+e||+e<=0)return c.a.error({message:"Perhatian!",description:"Kuantitas tidak boleh kosong"}),void w();T(""!==e&&e!==m?e:+m)},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=0!==(null===o||void 0===o?void 0:o.length)&&(null===o||void 0===o?void 0:o.filter((e=>e.ItemCode===x)));if(t&&e<=0)c.a.info({message:"Perhatian!",description:"QTY Tidak boleh Nol (0)"});else{if(t&&e<m)return k(),c.a.error({message:"Perhatian!",description:"Anda tidak dapat mengubah quantity kurang dari quantity awal!."}),void N((e=>({...e,qty:m})));if(t&&e>=1){const t=[];null===o||void 0===o||o.map((a=>a.ItemCode!==x?t.push(a):(t.push({...a,qty:+e,total:+e*+p,amount:+e*+p}),!0))),r({type:u.a.SET_STATE,payload:{data:[...t]}}),N((t=>({...t,qty:e})))}k()}},I=e=>{const t=e.key;["ArrowUp","ArrowRight","Backspace","Delete","1","2","3","4","5","6","7","8","9","0"].includes(t)&&(w(),"ArrowUp"===t&&E(),"Backspace"!==t&&"Delete"!==t||(N({...y,qty:0}),v&&null!==v.current&&(v.current.select(),v.current.input.value="0")))};return Object(s.useEffect)((()=>(t&&(E(),document.addEventListener("keydown",I)),()=>{document.removeEventListener("keydown",I)})),[t]),Object(s.useEffect)((()=>{N((e=>({...e,qty:m})))}),[d]),Object(h.jsx)(D.a,{centered:!0,open:t,onOk:S,onCancel:k,title:Object(h.jsx)("p",{className:"text-lg",children:"Ubah Quantity"}),footer:null,children:Object(h.jsxs)(R.a,{ref:g,tabIndex:1,onKeyDown:I,wrap:!0,gutter:[8,8],children:[Object(h.jsx)(L.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(L.a,{span:10,children:"Barcode / PLU"}),Object(h.jsx)(L.a,{span:1,children:":"}),Object(h.jsx)(L.a,{span:11,children:"".concat(O," / ").concat(x)})]})}),Object(h.jsx)(L.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(L.a,{span:10,children:"Nama Barang"}),Object(h.jsx)(L.a,{span:1,children:":"}),Object(h.jsx)(L.a,{span:11,children:f})]})}),Object(h.jsx)(L.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(L.a,{span:10,children:"Harga Satuan"}),Object(h.jsx)(L.a,{span:1,children:":"}),Object(h.jsx)(L.a,{span:11,children:Object(j.a)(p,0)})]})}),Object(h.jsx)(L.a,{span:24,children:Object(h.jsxs)(R.a,{children:[Object(h.jsx)(L.a,{span:10,children:"Qty"}),Object(h.jsx)(L.a,{span:1,children:":"}),Object(h.jsx)(L.a,{span:11,children:m})]})}),Object(h.jsxs)(L.a,{span:24,children:[Object(h.jsx)(l.a,{autoFocus:!0,ref:v,id:"input-qty",value:null===y||void 0===y?void 0:y.qty,defaultValue:m,disabled:y.inputChanged,onChange:e=>{return t=e.target.value,N((e=>({...e,qty:+t}))),void w();var t},onPressEnter:()=>{S()},className:"w-full h-14 rounded-lg mt-5 bg-gray-200",placeholder:"MASUKKAN JUMLAH QTY",onFocus:e=>{E()},onClick:()=>{E()}}),Object(h.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Gunakan ",Object(h.jsx)("b",{children:"\u2191"})," untuk memasukkan jumlah qty dan tekan ",Object(h.jsx)("b",{children:"ENTER"})," untuk konfirmasi"]})]})]})})}function P(e){let{open:t,state:a,handleCancel:c,handleState:r=(e,t)=>{},handleFocus:d}=e;const u=Object(i.d)(),j=Object(o.useHistory)(),{handleDeleteItem:m}=f(),{selectedRowTransaction:x={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isGrantedAccess:p=!1,loading:O=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.auth)),v=0!==Object.keys(x).length,g=Object(s.useRef)(null),y=Object(s.useRef)(),N=Object(s.useRef)(),k=Object(s.useRef)(null),[w]=n.a.useForm(),E=e=>{if(p)return m(null===x||void 0===x?void 0:x.ItemCode),c(),void d();u({type:"auth/USER_ACCESS",payload:{email:null===e||void 0===e?void 0:e.email,password:window.btoa(null===e||void 0===e?void 0:e.password),funcId:"1031"},history:j})};return Object(s.useEffect)((()=>{u({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}})}),[t]),Object(h.jsx)(D.a,{centered:!0,open:t,onCancel:()=>{c(),d()},title:Object(h.jsx)("h1",{className:"text-lg",children:"Hapus Barang"}),footer:!1,children:Object(h.jsx)("div",{ref:g,tabIndex:1,children:p?Object(h.jsx)("div",{className:"w-full",children:Object(h.jsxs)("div",{className:"w-full h-auto p-5 py-7 bg-gray-100 rounded-lg",children:[Object(h.jsxs)("h1",{className:"text-base text-center ",children:[Object(h.jsx)("b",{children:"Konfirmasi Berhasil."})," Anda dapat menghapus item/barang yang terpilih."]}),Object(h.jsx)(b.a,{danger:!0,autoFocus:!0,ref:k,className:"btn-page w-max px-7 mx-auto mt-5",onClick:()=>E(w.getFieldsValue()),onKeyDown:e=>{"input-qty"!==document.activeElement.id&&v&&e.ctrlKey&&"Enter"===e.key&&E(w.getFieldsValue())},children:"Hapus Item"})]})}):Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)("div",{className:"mb-5",children:Object(h.jsxs)("p",{className:"text-base text-gray-800",children:["Apakah anda yakin akan menghapus item/barang ",Object(h.jsx)("b",{children:null===x||void 0===x?void 0:x.ItemName}),". Mohon konfirmasi terlebih dahulu."]})}),Object(h.jsx)(n.a,{form:w,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:E,onFinishFailed:console.log,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(h.jsxs)(R.a,{wrap:!0,gutter:[8,0],children:[Object(h.jsx)(L.a,{span:24,children:Object(h.jsx)(n.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(h.jsx)(l.a,{ref:y,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(h.jsx)(L.a,{span:24,children:Object(h.jsx)(n.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(h.jsx)(l.a.Password,{ref:N,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(h.jsx)(L.a,{span:24,children:Object(h.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(h.jsx)(n.a.Item,{children:Object(h.jsx)(b.a,{disable:O,loading:O,type:"primary",htmlType:"submit",className:"w-full btn-page px-7",children:"Validasi"})}),Object(h.jsx)(n.a.Item,{children:Object(h.jsx)(b.a,{type:"default",htmlType:"button",className:"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7",onClick:c,children:"Kembali"})})]})})]})})]})})})}var B=a(110);function M(e){var t;const a=Object(i.d)(),c=Object(y.useHistory)(),{visible:r,onCancel:d}=e,{transactionHolds:o=[],loading:u=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:b}=f(),m=Object(s.useRef)(null),x=Object(s.useRef)(null),p=Object(s.useRef)(null),[O,v]=Object(s.useState)({search:"",t:-1,isSelected:!1,dataTable:[],selectedData:{}}),g=t=>{a({type:"transaction/HOLD_DETAIL",payload:{billNo:t},history:c,onClose:k,onState:null===e||void 0===e?void 0:e.handleState})},N=e=>{const{t:t,dataTable:a}=O;if(b&&null!==b.current&&b.current.blur(),"F3"===e.key&&(e.preventDefault(),w()),"ArrowRight"!==e.key&&"ArrowLeft"!==e.key||w(),["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)&&r){e.preventDefault(),x&&x.current.blur(),b&&null!==b.current&&b.current.blur();const l=m&&m.current;if("ArrowDown"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur();const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if((t<=1||a.length.length<2)&&v({...O,t:0,isSelected:!0,selectedData:a[0]}),t===a.length&&(v({...O,t:a.length,isSelected:!0,selectedData:a[a.length]}),n[t]))return n[t].focus();if(t<a.length&&(v({...O,t:t+1,isSelected:!0,selectedData:a[t+1]}),n[t+1]))return n[t+1].focus()}if("ArrowUp"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur(),t>=2&&v({...O,t:t-1,isSelected:!0,selectedData:a[t-1]}),t<=1&&v({...O,t:0,isSelected:!0,selectedData:a[0]});const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if(n[t-1])return n[t-1].focus()}if("Enter"===e.key&&null!==O&&void 0!==O&&O.isSelected){const e=0!==Object.keys((null===O||void 0===O?void 0:O.selectedData)||{}).length;var n;return w(),e?void g(null===O||void 0===O||null===(n=O.selectedData)||void 0===n?void 0:n.billNo):null}"Escape"===e.key&&k()}},k=()=>{v({...O,isSelected:!1,selectedData:{}}),d()},w=()=>{x&&null!==x.current&&x.current.focus()};return Object(s.useEffect)((()=>(w(),v({...O,t:0}),()=>{v((()=>{}))})),[]),Object(s.useEffect)((()=>{const e=o.map(((e,t)=>({...e,key:t+1})));v({...O,dataTable:null===e||void 0===e?void 0:e.slice(0,30)}),w()}),[o]),Object(s.useEffect)((()=>(m&&null!==m.current&&m.current&&document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)})),[m,O]),Object(h.jsx)(D.a,{open:r,onCancel:k,centered:!0,width:850,footer:null,children:Object(h.jsxs)("div",{ref:p,onKeyDown:N,className:"w-full h-auto",children:[Object(h.jsxs)("div",{className:"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4",children:[Object(h.jsx)("h1",{className:"text-xl font-semibold text-center",children:"Transaksi Pending"}),u&&Object(h.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(h.jsx)("div",{className:"w-full",children:Object(h.jsx)(n.a,{className:"w-full",children:Object(h.jsx)(n.a.Item,{className:"w-full",children:Object(h.jsx)(l.a,{ref:x,autoFocus:!0,placeholder:"Masukkan Nomor Bill( F3 )",className:"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800",onChange:e=>function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&""!==t){const e=o.filter((e=>e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0||e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0)).map(((e,t)=>({...e,key:t+1})));return 0!==e.length?void v({...O,dataTable:e,t:0,selectedData:{},isSelected:!1}):void 0}const a=null===o||void 0===o||null===(e=o.map(((e,t)=>({...e,key:t+1}))))||void 0===e?void 0:e.slice(0,30);v({...O,dataTable:a,t:0,selectedData:{},isSelected:!1})}(e.target.value)})})})}),Object(h.jsx)("div",{className:"w-full",children:Object(h.jsxs)("table",{ref:m,id:"table",className:"table-customer w-full relative",children:[Object(h.jsx)("thead",{className:"w-full",children:Object(h.jsxs)("tr",{className:"w-full bg-primary focus:bg-gray-700 h-14",children:[Object(h.jsx)("th",{className:"w-max text-center text-white px-5",children:"No"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Tanggal Transaksi"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Bill No"}),Object(h.jsx)("th",{className:"w-max text-left text-white px-5",children:"Subtotal"})]},"id-head")}),Object(h.jsx)("tbody",{children:null===O||void 0===O||null===(t=O.dataTable)||void 0===t?void 0:t.map(((e,t)=>{var a;const{billNo:n="",billTime:l="",subTotal:c="",key:s=""}=e||{};return Object(h.jsxs)("tr",{id:t,tabIndex:t,className:"tr-data h-14 ".concat(t%2===0?"bg-white":"bg-gray-100"," ").concat((null===O||void 0===O||null===(a=O.selectedDataTrx)||void 0===a?void 0:a.billNo)===(null===e||void 0===e?void 0:e.billNo)?"bg-yellow-200":"bg-white"," focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer"),onClick:()=>{v({...O,isSelected:!0,selectedDataTrx:e}),g(n)},children:[Object(h.jsx)("td",{className:"px-5 text-center",children:t+1}),Object(h.jsx)("td",{className:"px-5 text-left",children:C()(l).format("DD MMM YYYY hh:mm:ss")}),Object(h.jsxs)("td",{className:"px-5 h-14 text-left flex items-center flex-row gap-2 content-center",children:[n,u&&Object(h.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(h.jsxs)("td",{className:"px-5 text-left",children:["Rp ",Object(j.a)(c,0)]})]},s)}))})]})}),Object(h.jsx)("div",{className:"w-full h-auto bg-gray-300 p-3 mt-5 rounded-md",children:Object(h.jsxs)("h1",{className:"text-base",children:["Gunakan keyboard ",Object(h.jsx)("b",{children:"F3"})," untuk menginputkan ",Object(h.jsx)("b",{children:"Nomor Bill"}),", lalu gunakan keyboard ",Object(h.jsx)("b",{children:"\u2191"})," dan ",Object(h.jsx)("b",{children:"\u2193"})," untuk memilih transaksi yang akan dilanjutkan. Tekan ",Object(h.jsx)("b",{children:"Enter"})," untuk mengkonfirmasi pilihan anda."]})})]})})}var q=a(629);const _=[{key:"no",dataIndex:"no",title:Object(h.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(h.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"PLU"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"upcBarcode",dataIndex:"upcBarcode",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"Barcode Satuan"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(h.jsx)("p",{className:"text-left uppercase",children:"NAMA BARANG"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"uom",dataIndex:"UomStock",title:Object(h.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(h.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(h.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:200,align:"center"}];function U(e){let{modalRef:t,handleCancel:a,handdleFocusInput:n}=e;const l=Object(i.d)(),c=Object(s.useRef)(null),r=Object(s.useRef)([]),[d,o]=Object(s.useState)(-1),{searchResult:j=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleAddItem:b}=f(),m=function(){const e=j[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];b(e,"table"),o(-1),n()},x=e=>{if("F4"===e.key)o(0),c&&null!==c.current&&c.current.focus()},p=e=>{switch(e.key){case"ArrowUp":o((e=>Math.max(e-1,0)));break;case"ArrowDown":o((e=>Math.min(e+1,j.length-1)));break;case"Enter":m(d);break;case"Escape":e.target.blur(),o(-1),a(),l({type:u.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>{o(-1);return t&&null!==t.current&&t.current&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}}),[t]),Object(s.useEffect)((()=>{const e=c&&null!==c.current&&c.current;if(e)return e.addEventListener("keydown",p),()=>{e.removeEventListener("keydown",p)}}),[t,c,d,j]),Object(s.useEffect)((()=>{r.current[d]&&r.current[d].scrollIntoView({behavior:"smooth",block:"center"})}),[d]),Object(s.useEffect)((()=>{n()}),[j]),Object(h.jsxs)("div",{className:"w-full h-96 overflow-scroll",children:[Object(h.jsxs)("table",{ref:c,tabIndex:0,className:"table-fixed w-full border border-gray-400",border:!0,children:[Object(h.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(h.jsx)("tr",{children:null===_||void 0===_?void 0:_.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l}=e;return Object(h.jsx)("th",{className:"text-".concat(l," px-3 text-white"),style:{width:a},children:t},n)}))})}),Object(h.jsx)("tbody",{children:j.map(((e,t)=>Object(h.jsx)("tr",{ref:e=>r.current[t]=e,className:"w-full h-14 border border-gray-500 ".concat(t===d?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer transition-all"),onClick:()=>{m(t),n()},children:null===_||void 0===_?void 0:_.map((a=>{let{dataIndex:n,align:l,render:c}=a;return Object(h.jsx)("td",{className:"text-".concat(l," px-3"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===j||void 0===j?void 0:j.length)&&Object(h.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(h.jsxs)("div",{className:"w-2/3 flex items-center justify-center flex-col gap-3",children:[Object(h.jsx)(q.a,{className:"text-6xl text-gray-500"}),Object(h.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(h.jsx)("b",{children:"F3"})," untuk mencari barang by plu/barcode barang. ",Object(h.jsx)("b",{children:"F4"})," untuk memilih tabel, kemudian"," ",Object(h.jsx)("b",{children:"\u2191"})," / ",Object(h.jsx)("b",{children:"\u2193"})," untuk pilih barang dari tabel, tekan ",Object(h.jsx)("b",{children:"Enter"})," untuk konfirmasi item/barang pilihan"]})]})})]})}function H(e){let{open:t=!1,state:a,handleState:o,handleCancel:u}=e;const j=Object(i.d)(),b=Object(s.useRef)(null),m=Object(s.useRef)(null),{loading:x=!1,searchResult:p=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:O,form:v}=f(),g=()=>{O&&null!==O.current&&O.current.blur(),b&&null!==b.current&&(b.current.focus(),b.current.select())},y=e=>{O&&null!==O.current&&O.current.blur(),"F3"===e.key&&(e.preventDefault(),g()),"Escape"===e.key&&u()};return Object(s.useEffect)((()=>(g(),v.resetFields(),document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)})),[t]),Object(s.useEffect)((()=>{g()}),[p]),Object(s.useEffect)((()=>{g()}),[x]),Object(h.jsx)(D.a,{open:t,onCancel:u,footer:!1,centered:!0,width:1e3,title:"Pencarian Barang",children:Object(h.jsxs)("div",{ref:m,onKeyDown:y,className:"w-full h-auto",id:"modal-container",children:[Object(h.jsx)("div",{children:Object(h.jsx)(n.a,{form:v,children:Object(h.jsx)(n.a.Item,{name:"search",children:Object(h.jsx)(l.a,{autoFocus:!0,ref:b,type:"text",className:"w-full h-14 rounded-lg border-2 border-gray-400",placeholder:"MASUKKAN PLU / BARCODE ITEM / NAMA ITEM (F3)",onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e)return j({type:"transaction/SEARCH_MASTER",payload:{query:e}}),v.resetFields(),void g();g(),c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})}(e.target.value),v.resetFields()},suffix:x?Object(h.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(h.jsx)(r.a,{className:"text-xl text-gray-500"})})})})}),Object(h.jsx)("div",{className:"w-full mt-4",children:Object(h.jsx)(U,{modalRef:m,handdleFocusInput:g,handleCancel:u})}),Object(h.jsx)("div",{className:"w-full mt-4 rounded-md bg-gray-300 p-3",children:Object(h.jsxs)("h1",{className:"text-base",children:["Tekan ",Object(h.jsx)("b",{children:"F3"})," untuk mencari barang by plu/barcode barang. ",Object(h.jsx)("b",{children:"F4"})," untuk memilih tabel, kemudian ",Object(h.jsx)("b",{children:"\u2191 / \u2193"})," untuk pilih barang dari tabel, tekan ",Object(h.jsx)("b",{children:"Enter"})," untuk konfirmasi item/barang pilihan"]})})]})})}const K=[{key:"no",dataIndex:"no",title:Object(h.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(h.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(h.jsx)("p",{className:"text-center ",children:"PLU"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e}),width:100,align:"center"},{key:"upcBarcode",dataIndex:"upcBarcode",title:Object(h.jsx)("p",{className:"text-center ",children:"BARCODE"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e}),width:150,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(h.jsx)("p",{className:"text-left ",children:"NAMA BARANG"}),render:e=>Object(h.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"qty",dataIndex:"qty",title:Object(h.jsx)("p",{className:"text-center ",children:"QTY"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e}),width:75,align:"center"},{key:"UomStock",dataIndex:"UomStock",title:Object(h.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(h.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(h.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:200,align:"center"},{key:"discVal",dataIndex:"discVal",title:Object(h.jsx)("p",{className:"text-center ",children:"DISKON %"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"discValuex",dataIndex:"discValuex",title:Object(h.jsx)("p",{className:"text-center ",children:"DISKON @"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"total",dataIndex:"total",title:Object(h.jsx)("p",{className:"text-center ",children:"TOTAL"}),render:e=>Object(h.jsx)("p",{className:"text-center",children:Object(j.a)(e,0)}),width:250,align:"center"}];function Y(e){let{state:t={},handleCancel:a,handleState:n=(e,t)=>{},...l}=e;const c=Object(i.d)(),r=Object(s.useRef)(null),[d,o]=Object(s.useState)(-1),{data:j=[],selectedRowTransaction:b={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:m}=f(),x=function(){const e=j[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];c({type:u.a.SET_STATE,payload:{selectedRowTransaction:e}})},p=e=>{const a=!0===((null===t||void 0===t?void 0:t.modalPendingPayment)||(null===t||void 0===t?void 0:t.modalSearchItem)||(null===t||void 0===t?void 0:t.modalConfirmDelete)||(null===t||void 0===t?void 0:t.modalQty));if("ArrowRight"===e.key&&!a)return e.target.blur(),e.preventDefault(),o(0),x(0),void(r&&null!==r.current&&r.current.focus())},O=e=>{switch(e.key){case"ArrowUp":o((e=>Math.max(e-1,0)));break;case"ArrowDown":o((e=>Math.min(e+1,j.length-1)));break;case"Enter":e.ctrlKey&&n("modalConfirmDelete",!0);break;case"Tab":case"Escape":e.target.blur(),o(-1),m(),a(),c({type:u.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>(r&&r.current&&r.current.focus(),document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[j,t]),Object(s.useEffect)((()=>{const e=r.current;if(e)return e.addEventListener("keydown",O),()=>{e.removeEventListener("keydown",O)}}),[r,d]),Object(s.useEffect)((()=>{x(d)}),[d]),Object(h.jsxs)("div",{className:"w-full h-full overflow-scroll",children:[Object(h.jsxs)("table",{ref:r,tabIndex:0,className:"table-fixed w-full border border-gray-400 relative",border:!0,children:[Object(h.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(h.jsx)("tr",{children:null===K||void 0===K?void 0:K.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l="",fixed:c=!1}=e;return Object(h.jsx)("th",{className:"text-".concat(l," px-3 text-white border-r border-gray-200 ").concat(c?"shadow-xl sticky right-0 top-0 bg-primary text-white":"relative"),style:{width:a},children:t},n+t)}))})}),Object(h.jsx)("tbody",{children:j.map(((e,t)=>Object(h.jsx)("tr",{className:"group w-full h-14 border border-gray-500 ".concat((null===b||void 0===b?void 0:b.ItemCode)===(null===e||void 0===e?void 0:e.ItemCode)?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer"),onClick:()=>{x(t),o(t),n("modalQty",!0)},onFocus:()=>{o(t)},children:null===K||void 0===K?void 0:K.map((a=>{let{dataIndex:n,align:l,render:c,fixed:s=!1}=a;return Object(h.jsx)("td",{className:"text-".concat(l," px-3 border-r border-gray-400 ").concat(s?"shadow-xl sticky right-0 top-0 ".concat((null===b||void 0===b||b.ItemCode,null===e||void 0===e||e.ItemCode,"bg-primary text-white")," border-r border-gray-400 group-hover:bg-blue-500 group-hover:text-white shadow-sm"):"relative"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===j||void 0===j?void 0:j.length)&&Object(h.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(h.jsxs)("div",{className:"w-2/5 flex items-center justify-center flex-col gap-3",children:[Object(h.jsx)(q.a,{className:"text-6xl text-gray-500"}),Object(h.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(h.jsx)("b",{children:"\u2192"})," lalu ",Object(h.jsx)("b",{children:"\u2191"})," / ",Object(h.jsx)("b",{children:"\u2193"})," untuk pilih barang dari tabel & ",Object(h.jsx)("b",{children:"ESC"})," ","untuk scan barang"]})]})})]})}var Q=a(464);function V(){const e=Object(i.d)(),t=Object(o.useHistory)(),{getTotalQty:a,getGrandTotal:b}=Object(Q.a)(),{handleFocus:m,inputRef:x,form:p,handleSearch:O,handleAddItem:v,handleResetForm:g}=f(),{contentStatus:y="isMenu",searchResult:N=[],loading:k=!1,billNo:w="",billDate:E="",data:T=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isLog:I=!1,authorized:C=!1}=JSON.parse(localStorage.getItem("app")||"{}"),[D,R]=Object(s.useState)({modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:"",tableIndex:-1}),L=()=>{m(),e({type:"transaction/SET_STATE",payload:{contentStatus:"isMenu",selectedRowTransaction:{},searchResult:[]}}),R((e=>({modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:"",tableIndex:-1})))},B=e=>{"Escape"===e.key&&(e.preventDefault(),e.target.blur(),m()),"Tab"===e.key&&(m(),e.preventDefault())},q=(e,t)=>R((a=>({...a,[e]:t})));return Object(s.useEffect)((()=>{if(L(),m(),I&&C)return e({type:"sync/SYNC_DATA_MASTER"}),void e({type:u.a.TRANSACTION_BILL_NO})}),[I,C]),Object(s.useEffect)((()=>{if(I&&C)return m(),L(),document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)};e({type:"auth/LOGOUT_POS",history:t})}),[]),Object(s.useEffect)((()=>{"isMenu"===y&&m()}),[y]),Object(s.useEffect)((()=>{var e;"scan-item"===document.activeElement.id&&(0!==N.length&&1===N.length&&v({upcBarcode:null===(e=N[0])||void 0===e?void 0:e.UPCbarcode,ItemCode:""},"input"));m()}),[N,x]),Object(s.useEffect)((()=>{x&&null!==x.current&&x.current.focus()}),[w,E,x,D,T]),Object(s.useEffect)((()=>{k||x&&null!==x.current&&x.current.focus()}),[k,x]),Object(h.jsxs)("div",{className:"w-screen h-screen overflow-hidden relative pb-2.5",children:[Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-12 gap-3",style:{gridTemplateRows:"repeat(24, minmax(0, 1fr))"},children:[Object(h.jsx)("div",{className:"col-span-12 row-span-3 bg-primary",children:Object(h.jsx)(A,{})}),Object(h.jsx)("div",{className:"col-span-10 row-span-5 pl-2.5",children:Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg",children:[Object(h.jsx)("div",{className:"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none",children:Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-end",children:Object(h.jsx)("h1",{className:"text-3xl text-white font-semibold text-right",children:"TOTAL BELANJA"})})}),Object(h.jsx)("div",{className:"row-start-2 col-span-6 relative",children:Object(h.jsxs)(n.a,{form:p,layout:"vertical",children:[Object(h.jsx)("div",{className:"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full"}),Object(h.jsxs)("div",{className:"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5",children:[Object(h.jsx)("div",{className:"col-span-2",children:Object(h.jsx)("div",{className:"w-full h-16 bg-primary rounded-lg",children:Object(h.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-1",children:[Object(h.jsx)("p",{className:"text-center text-gray-200 text-xs",children:"TOTAL QTY"}),Object(h.jsx)("p",{className:"text-center text-white text-lg font-bold",children:a()})]})})}),Object(h.jsx)("div",{className:"col-span-5",children:Object(h.jsx)("div",{className:"w-full bg-white rounded-lg overflow-hidden",style:{height:"68px"},children:Object(h.jsx)(n.a.Item,{name:"search-item",children:Object(h.jsx)(l.a,{id:"scan-item",value:null===D||void 0===D?void 0:D.barcode,ref:x,autoFocus:!0,className:"w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input",placeholder:"Barcode / PLU Barang (ESC / TAB)",suffix:k?Object(h.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(h.jsx)(r.a,{className:"text-xl text-gray-500"}),style:{height:"68px"},onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&0!==e.length?e.length>=6?O(e):(g(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang benar! Min. kode adalah 6 digit"}),m()):(g(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang terlebih dahulu."}))}(e.target.value)},onChange:e=>{R((t=>({...t,barcode:e.target.value})))}})})})})]})]})}),Object(h.jsx)("div",{className:"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none",children:Object(h.jsx)("div",{className:"w-full h-full flex items-center justify-end p-3",children:Object(h.jsx)("h1",{className:"text-7xl text-white font-semibold text-right",children:Object(j.a)(b(),0)})})})]})}),Object(h.jsx)("div",{className:"col-span-2 pr-2.5",style:{gridRow:"span 21 / span 21"},children:Object(h.jsx)(S,{state:D,handleState:q,handleFocus:m})}),Object(h.jsx)("div",{className:"col-span-10 pl-2.5",style:{gridRow:"span 16 / span 16"},children:Object(h.jsx)(Y,{handleFocus:m,handleState:q,state:D,handleCancel:L})})]}),Object(h.jsx)(M,{visible:null===D||void 0===D?void 0:D.modalPendingPayment,onCancel:L,handleSearchFocus:m,handleState:q}),Object(h.jsx)(H,{open:null===D||void 0===D?void 0:D.modalSearchItem,handleCancel:L,state:D,handleState:q}),Object(h.jsx)(P,{open:null===D||void 0===D?void 0:D.modalConfirmDelete,handleCancel:L,state:D,handleState:q,handleFocus:m}),Object(h.jsx)(F,{open:null===D||void 0===D?void 0:D.modalQty,handleCancel:L,state:D,handleState:q})]})}}}]);
//# sourceMappingURL=23.fad49192.chunk.js.map