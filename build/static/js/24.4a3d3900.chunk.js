(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[24],{1338:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));a(501);var n=a(159),l=(a(500),a(274)),c=(a(206),a(31)),s=a(1),r=a(1022),d=a(1021),i=a(99),o=a(732),u=a(145),j=(a(934),a(205),a(109)),b=a(17);function h(e){let{hs:t=((e,t)=>{})}=e;const a=()=>{t("modalQty",!0)},n=e=>{"F3"===e.key&&(e.preventDefault(),a())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}))),Object(b.jsxs)(j.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f3"}),Object(b.jsx)("p",{children:"Ubah Quantity"})]})}function m(){return Object(b.jsxs)(j.a,{disabled:!0,className:"btn-page rounded-lg",children:[Object(b.jsx)("kbd",{className:"kbd",children:"f8"}),Object(b.jsx)("p",{children:"cek harga"})]})}function x(e){let{hs:t=((e,t)=>{})}=e;const{selectedRowTransaction:a={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),n=0!==Object.keys(a).length,l=()=>{t("modalConfirmDelete",!0)},c=e=>{if("input-qty"!==document.activeElement.id&&n)return e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),e.target.blur(),l()),null};return Object(s.useEffect)((()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)})),[]),Object(b.jsxs)(j.a,{className:"btn-page rounded-lg",onClick:l,children:[Object(b.jsx)("kbd",{className:"kbd",children:"ctrl+enter"}),Object(b.jsx)("p",{children:"hapus item"})]})}function p(e){let{hs:t=(()=>{})}=e;const a=()=>{t("modalSearchItem",!0)},n=e=>{"F2"===e.key&&a()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.a,{className:"btn-page rounded-lg",onClick:a,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f2"}),Object(b.jsx)("p",{children:"Daftar Barang"})]})})}var f=a(15);function O(){const e=Object(i.d)(),t=Object(s.useRef)(null),[a]=n.a.useForm(),{searchResult:l=[],data:r=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),d=()=>{t&&null!==t.current&&t.current.focus()},o=()=>{a.resetFields(),d(),e({type:f.a.SET_STATE,payload:{searchResult:[]}})},u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";o();const n=l.find((e=>+e.upcBarcode===+t.upcBarcode));if("input"===a&&void 0!==n&&void 0!==(null===t||void 0===t?void 0:t.upcBarcode)&&t.upcBarcode&&""!==t.upcBarcode){const a=l.find((e=>+e.upcBarcode===+t.upcBarcode)),n=r.filter((e=>+e.upcBarcode===+t.upcBarcode));if(a&&(null===n||void 0===n?void 0:n.length)>0){const a=[];r.map((e=>+e.upcBarcode!==+t.upcBarcode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:f.a.SET_STATE,payload:{data:[...a],contentStatus:"isMenu"}})}a&&0===n.length&&e({type:f.a.SET_STATE,payload:{contentStatus:"isMenu",data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("select"===a&&t.ItemCode&&"select"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:f.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:f.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}if("table"===a){const a=l.find((e=>e.ItemCode===t.ItemCode)),n=r.filter((e=>e.ItemCode===t.ItemCode));if(a&&n.length>0){const a=[];null===r||void 0===r||r.map((e=>e.ItemCode!==t.ItemCode?a.push(e):(a.push({...e,qty:e.qty+1,total:(+e.qty+1)*e.price,amount:(+e.qty+1)*e.price}),!0))),e({type:f.a.SET_STATE,payload:{data:[...a]}})}a&&0===n.length&&e({type:f.a.SET_STATE,payload:{data:[...r,{...a,itemCode:r.length+1,qty:1,total:a.price,amount:a.price}]}})}d()};return{inputRef:t,form:a,handleFocus:d,handleResetForm:o,handleSearch:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==t)return e({type:"transaction/SEARCH_MASTER",payload:{query:t}}),void o();c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})},handleSelectItem:function(){u({ItemCode:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},upcBarcode:""},"select")},handleAddItem:u,handleDeleteItem:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const a=0!==(null===r||void 0===r?void 0:r.length)&&(null===r||void 0===r?void 0:r.filter((e=>{let{ItemCode:a}=e;return a!==t})))||[];e({type:f.a.SET_STATE,payload:{data:a,selectedRowTransaction:a[0]}}),d()}}}function g(e){const t=Object(i.d)(),a=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:n={}}=a,l=(null===n||void 0===n?void 0:n.isOpening)||!1,{hs:c=null}=e,{loading:r=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:d}=O(),o=()=>{t({type:f.a.SET_STATE,payload:{transactionList:[],data:[]}}),t({type:f.a.TRANSACTION_BILL_NO}),c("data",[]),c("t",0),c("total",0),c("selectedData",[]),c("isSelected",[]),d()},u=e=>{if(l&&"F1"===e.key)return e.target.blur(),"barcode"!==document.activeElement.id?void o():e};return Object(s.useEffect)((()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)})),[]),Object(b.jsxs)(j.a,{loading:r,disabled:r||!l,className:"btn-page",onClick:o,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f1"}),Object(b.jsx)("p",{children:"order baru"})]})}var v=a(935),y=a(46);function N(e){let{hs:t=null}=e;const a=Object(i.d)(),n=Object(y.useHistory)(),{cashier:l={}}=JSON.parse(localStorage.getItem("app")||"{}"),c=(null===l||void 0===l?void 0:l.isOpening)||!1,r=()=>{a({type:f.a.TRANSACTION_HOLD_LIST,history:n})},d=()=>{t("modalPendingPayment",!0),r()},o=e=>{c&&"F7"===e.key&&(e.preventDefault(),d())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",o),r(),()=>{document.removeEventListener("keydown",o)})),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.a,{disabled:!c,className:"btn-page",onClick:d,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f7"}),Object(b.jsx)("p",{children:"daftar pending"})]})})}function w(){const e=Object(y.useHistory)(),t=()=>{e.push("/pos/options")},a=e=>{if("F9"===e.key)return e.target.blur(),void t()};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(b.jsxs)(j.a,{onClick:t,className:"btn-page",children:[Object(b.jsx)("kbd",{className:"kbd",children:"f9"}),"options"]})}function k(){const e=Object(i.d)(),t=Object(y.useHistory)(),{tenderMedia:a=[],loading:n=!1,data:l=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),c=()=>{e({type:"auth/property"}),e({type:f.a.SET_STATE,payload:{contentStatus:"isPayment"}}),t.push("/pos/payment")},r=e=>{"F10"===e.key&&(e.preventDefault(),c())};return Object(s.useEffect)((()=>(e({type:"transaction/TENDER_MEDIA"}),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)})),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j.a,{disabled:n||0===a.length||0===(null===l||void 0===l?void 0:l.length),loading:n,className:"btn-page-2",onClick:c,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f10"}),Object(b.jsx)("p",{children:"pembayaran"})]})})}function E(e){let{isDisabled:t=!1}=e;const a=Object(i.d)(),n=Object(y.useHistory)(),{data:l=[],loading:c=!1,billNo:r="",billDate:d=""}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{property:o={},cashier:u={}}=JSON.parse(localStorage.getItem("app")||"{}"),h=(null===u||void 0===u?void 0:u.isOpening)||!1,m=t||0===(null===l||void 0===l?void 0:l.length)||c||!h,x=()=>{const e=l.reduce(((e,t)=>{let{total:a}=t;return+e+ +a}),0),t={header:[{billNo:r,billDate:d,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:e,grandTotal:e,shiftID:null===u||void 0===u?void 0:u.shiftId,outletCode:null===o||void 0===o?void 0:o.outletCode}],details:null===l||void 0===l?void 0:l.map(((e,t)=>({...e,billNo:r,ItemNo:t+1})))};a({type:"transaction/HOLD",payload:t,history:n})},p=e=>{m||"F6"===e.key&&(e.preventDefault(),x())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[l]),Object(b.jsxs)(j.a,{loading:c,disabled:m,className:"btn-page",onClick:x,children:[Object(b.jsx)("kbd",{className:"kbd",children:"f6"}),Object(b.jsx)("p",{children:"simpan pending"})]})}function S(e){var t;let{handleState:a=((e,t)=>{}),state:n={},handleFocus:l,...c}=e;const{selectedRowTransaction:s={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:r={}}=JSON.parse(localStorage.getItem("app")||"{}"),{isOpening:d=!1}=r,o=0!==(null===(t=Object.keys(s))||void 0===t?void 0:t.length);return Object(b.jsx)("div",{className:"w-full h-full",children:d?o?Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(x,{hs:a})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(h,{hs:a})}),Object(b.jsx)("div",{className:"py-3",children:Object(b.jsxs)("h1",{className:"text-base text-gray-700 text-center",children:["Tekan ",Object(b.jsx)("kbd",{className:"kbd",children:"tab / esc"})," untuk kembali ke scanner"]})})]}):Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(g,{hs:a})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(p,{hs:a})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(E,{})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(N,{hs:a})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(m,{})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(w,{})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(k,{})})]}):Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-1 gap-1",style:{gridTemplateRows:"repeat(9, minmax(0, 1fr))"},children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(v.a,{})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(w,{})})]})})}a(511);var T=a(335),I=a(308),C=a.n(I);function A(){const{user:e={},cashier:t={}}=JSON.parse(localStorage.getItem("app")||"{}"),{billDate:a="",billNo:n="",loading:l=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),[c,r]=Object(s.useState)({modalCashBox:!1,currentTime:C()()});return Object(s.useEffect)((()=>{const e=setInterval((()=>{r((e=>({...e,currentTime:C()()})))}),1e3);return()=>{clearInterval(e)}}),[]),Object(b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:Object(b.jsxs)("div",{className:"w-full flex items-center justify-between px-5",children:[Object(b.jsxs)("div",{className:"w-2/5 flex items-center gap-2",children:[Object(b.jsx)(T.a,{src:"/logo-3.png",className:"w-28 object-cover",preview:!1}),Object(b.jsx)("h1",{className:"text-xl text-white font-semibold leading-none",children:"Scap Point of Sales"})]}),Object(b.jsx)("div",{className:"w-full h-max",children:Object(b.jsxs)("div",{className:"w-full flex items-center justify-end gap-5",children:[Object(b.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(b.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"bussiness date"}),Object(b.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:l?"...":C()(a).format("dddd, DD MMMM YYYY")})]}),Object(b.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(b.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"today"}),Object(b.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:C()().format("DD MMMM YYYY")})]}),Object(b.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(b.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"time"}),Object(b.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:c.currentTime.format("HH:mm:ss")})]}),Object(b.jsxs)("div",{className:"border-r-2 border-gray-300 pr-5",children:[Object(b.jsx)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:"NO. TRANSAKSI"}),Object(b.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:l?"...":n||"-"})]}),Object(b.jsxs)("div",{className:"",children:[Object(b.jsxs)("p",{className:"text-right text-gray-200 text-xs font-semibold uppercase",children:[(null===e||void 0===e?void 0:e.role)||"nama kasir"," | ID 0",(null===t||void 0===t?void 0:t.shiftId)||"0"]}),Object(b.jsx)("h1",{className:"text-right text-white text-md uppercase font-bold",children:(null===e||void 0===e?void 0:e.username)||"guest"})]})]})})]})})}a(309);var D=a(131),R=(a(616),a(618)),L=(a(617),a(619));function F(e){let{open:t,handleState:a,handleCancel:n}=e;const r=Object(i.d)(),{selectedRowTransaction:d={},data:o=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{qty:h,ItemCode:m="",price:x=0,upcBarcode:p="",itemName:O=""}=d,g=Object(s.useRef)(null),v=Object(s.useRef)(null),[y,N]=Object(s.useState)({qty:h,inputChanged:!1}),w=()=>{g&&null!==g.current&&(g.current.focus(),g.current.select())},k=()=>{const{qty:e=0}=y;if(w(),0===+e||+e<=0)return c.a.error({message:"Perhatian!",description:"Kuantitas tidak boleh kosong"}),void w();E(""!==e&&e!==h?e:+h)},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;const t=0!==(null===o||void 0===o?void 0:o.length)&&(null===o||void 0===o?void 0:o.filter((e=>e.ItemCode===m)));if(t&&e<=0)c.a.info({message:"Perhatian!",description:"QTY Tidak boleh Nol (0)"});else{if(t&&e<h)return n(),c.a.error({message:"Perhatian!",description:"Anda tidak dapat mengubah quantity kurang dari quantity awal!."}),c.a.error({message:"Perhatian!",description:"Fitur ini sedang dalam tahap pengembangan."}),void N((e=>({...e,qty:h})));if(t&&e>=1){const t=[];null===o||void 0===o||o.map((a=>a.ItemCode!==m?t.push(a):(t.push({...a,qty:+e,total:+e*+x,amount:+e*+x}),!0))),r({type:f.a.SET_STATE,payload:{data:[...t]}}),N((t=>({...t,qty:e})))}n()}},S=e=>{const t=e.key;["ArrowUp","ArrowDown"].includes(t)&&(e.preventDefault(),"ArrowUp"===t&&w())};return Object(s.useEffect)((()=>{w()}),[]),Object(s.useEffect)((()=>{t&&(w(),N((e=>({...e,qty:h}))))}),[t]),Object(s.useEffect)((()=>{w()}),[g]),Object(s.useEffect)((()=>(w(),document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)})),[v]),Object(b.jsx)(D.a,{centered:!0,open:t,onOk:k,onCancel:n,title:Object(b.jsx)("p",{className:"text-lg",children:"Ubah Quantity"}),footer:Object(b.jsx)("div",{className:"w-full h-auto flex items-center justify-end",children:Object(b.jsx)("div",{className:"",children:Object(b.jsx)(j.a,{className:"btn-page bg-red-500 px-8 py-4",onClick:()=>{a("modalConfirmDelete",!0),a("modalQty",!1)},children:"Hapus"})})}),children:Object(b.jsxs)(R.a,{ref:v,tabIndex:1,onKeyDown:S,wrap:!0,gutter:[8,8],children:[Object(b.jsx)(L.a,{span:24,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(L.a,{span:10,children:"Barcode / PLU"}),Object(b.jsx)(L.a,{span:1,children:":"}),Object(b.jsx)(L.a,{span:11,children:"".concat(p," / ").concat(m)})]})}),Object(b.jsx)(L.a,{span:24,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(L.a,{span:10,children:"Nama Barang"}),Object(b.jsx)(L.a,{span:1,children:":"}),Object(b.jsx)(L.a,{span:11,children:O})]})}),Object(b.jsx)(L.a,{span:24,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(L.a,{span:10,children:"Harga Satuan"}),Object(b.jsx)(L.a,{span:1,children:":"}),Object(b.jsx)(L.a,{span:11,children:Object(u.a)(x,0)})]})}),Object(b.jsx)(L.a,{span:24,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(L.a,{span:10,children:"Qty"}),Object(b.jsx)(L.a,{span:1,children:":"}),Object(b.jsx)(L.a,{span:11,children:h})]})}),Object(b.jsxs)(L.a,{span:24,children:[Object(b.jsx)(l.a,{autoFocus:!0,id:"input-qty",value:null===y||void 0===y?void 0:y.qty,defaultValue:h,disabled:y.inputChanged,ref:g,onChange:e=>{return t=e.target.value,void N((e=>({...e,qty:+t})));var t},onPressEnter:()=>{k()},className:"w-full h-14 rounded-lg mt-5 bg-gray-200",placeholder:"MASUKKAN JUMLAH QTY",onKeyDown:S}),Object(b.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Gunakan ",Object(b.jsx)("b",{children:"\u2191"})," untuk memasukkan jumlah qty dan tekan ",Object(b.jsx)("b",{children:"ENTER"})," untuk konfirmasi"]})]})]})})}function P(e){let{open:t,state:a,handleCancel:c,handleState:r=((e,t)=>{}),handleFocus:d}=e;const u=Object(i.d)(),h=Object(o.useHistory)(),{handleDeleteItem:m}=O(),{selectedRowTransaction:x={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isGrantedAccess:p=!1,loading:f=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.auth)),g=0!==Object.keys(x).length,v=Object(s.useRef)(null),y=Object(s.useRef)(),N=Object(s.useRef)(),w=Object(s.useRef)(null),[k]=n.a.useForm(),E=e=>{if(p)return m(null===x||void 0===x?void 0:x.ItemCode),c(),void d();u({type:"auth/USER_ACCESS",payload:{email:null===e||void 0===e?void 0:e.email,password:window.btoa(null===e||void 0===e?void 0:e.password),funcId:"1031"},history:h})};return Object(s.useEffect)((()=>{u({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}})}),[t]),Object(b.jsx)(D.a,{centered:!0,open:t,onCancel:()=>{c(),d()},title:Object(b.jsx)("h1",{className:"text-lg",children:"Hapus Barang"}),footer:!1,children:Object(b.jsx)("div",{ref:v,tabIndex:1,children:p?Object(b.jsx)("div",{className:"w-full",children:Object(b.jsxs)("div",{className:"w-full h-auto p-5 py-7 bg-gray-100 rounded-lg",children:[Object(b.jsxs)("h1",{className:"text-base text-center ",children:[Object(b.jsx)("b",{children:"Konfirmasi Berhasil."})," Anda dapat menghapus item/barang yang terpilih."]}),Object(b.jsx)(j.a,{danger:!0,autoFocus:!0,ref:w,className:"btn-page w-max px-7 mx-auto mt-5",onClick:()=>E(k.getFieldsValue()),onKeyDown:e=>{"input-qty"!==document.activeElement.id&&g&&e.ctrlKey&&"Enter"===e.key&&E(k.getFieldsValue())},children:"Hapus Item"})]})}):Object(b.jsxs)("div",{className:"w-full",children:[Object(b.jsx)("div",{className:"mb-5",children:Object(b.jsxs)("p",{className:"text-base text-gray-800",children:["Apakah anda yakin akan menghapus item/barang ",Object(b.jsx)("b",{children:null===x||void 0===x?void 0:x.ItemName}),". Mohon konfirmasi terlebih dahulu."]})}),Object(b.jsx)(n.a,{form:k,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:E,onFinishFailed:console.log,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(b.jsxs)(R.a,{wrap:!0,gutter:[8,0],children:[Object(b.jsx)(L.a,{span:24,children:Object(b.jsx)(n.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(b.jsx)(l.a,{ref:y,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(b.jsx)(L.a,{span:24,children:Object(b.jsx)(n.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(b.jsx)(l.a.Password,{ref:N,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(b.jsx)(L.a,{span:24,children:Object(b.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(b.jsx)(n.a.Item,{children:Object(b.jsx)(j.a,{disable:f,loading:f,type:"primary",htmlType:"submit",className:"w-full btn-page px-7",children:"Validasi"})}),Object(b.jsx)(n.a.Item,{children:Object(b.jsx)(j.a,{type:"default",htmlType:"button",className:"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7",onClick:c,children:"Kembali"})})]})})]})})]})})})}var B=a(146);function M(e){var t;const a=Object(i.d)(),c=Object(y.useHistory)(),{visible:r,onCancel:d}=e,{transactionHolds:o=[],loading:j=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:h}=O(),m=Object(s.useRef)(null),x=Object(s.useRef)(null),p=Object(s.useRef)(null),[f,g]=Object(s.useState)({search:"",t:-1,isSelected:!1,dataTable:[],selectedData:{}}),v=t=>{a({type:"transaction/HOLD_DETAIL",payload:{billNo:t},history:c,onClose:w,onState:null===e||void 0===e?void 0:e.handleState})},N=e=>{const{t:t,dataTable:a}=f;if(h&&null!==h.current&&h.current.blur(),"F3"===e.key&&(e.preventDefault(),k()),"ArrowRight"!==e.key&&"ArrowLeft"!==e.key||k(),["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)&&r){e.preventDefault(),x&&x.current.blur(),h&&null!==h.current&&h.current.blur();const l=m&&m.current;if("ArrowDown"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur();const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if((t<=1||a.length.length<2)&&g({...f,t:0,isSelected:!0,selectedData:a[0]}),t===a.length&&(g({...f,t:a.length,isSelected:!0,selectedData:a[a.length]}),n[t]))return n[t].focus();if(t<a.length&&(g({...f,t:t+1,isSelected:!0,selectedData:a[t+1]}),n[t+1]))return n[t+1].focus()}if("ArrowUp"===e.key&&a.length&&a.length>0&&null!==l){x.current.blur(),t>=2&&g({...f,t:t-1,isSelected:!0,selectedData:a[t-1]}),t<=1&&g({...f,t:0,isSelected:!0,selectedData:a[0]});const e=l.lastChild||null,n=e&&null!==e&&e.children||[];if(n[t-1])return n[t-1].focus()}if("Enter"===e.key&&null!==f&&void 0!==f&&f.isSelected){const e=0!==Object.keys((null===f||void 0===f?void 0:f.selectedData)||{}).length;var n;return k(),e?void v(null===f||void 0===f||null===(n=f.selectedData)||void 0===n?void 0:n.billNo):null}"Escape"===e.key&&w()}},w=()=>{g({...f,isSelected:!1,selectedData:{}}),d()},k=()=>{x&&null!==x.current&&x.current.focus()};return Object(s.useEffect)((()=>(k(),g({...f,t:0}),()=>{g((()=>{}))})),[]),Object(s.useEffect)((()=>{const e=o.map(((e,t)=>({...e,key:t+1})));g({...f,dataTable:null===e||void 0===e?void 0:e.slice(0,30)}),k()}),[o]),Object(s.useEffect)((()=>(m&&null!==m.current&&m.current&&document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)})),[m,f]),Object(b.jsx)(D.a,{open:r,onCancel:w,centered:!0,width:850,footer:null,children:Object(b.jsxs)("div",{ref:p,onKeyDown:N,className:"w-full h-auto",children:[Object(b.jsxs)("div",{className:"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4",children:[Object(b.jsx)("h1",{className:"text-xl font-semibold text-center",children:"Transaksi Pending"}),j&&Object(b.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(b.jsx)("div",{className:"w-full",children:Object(b.jsx)(n.a,{className:"w-full",children:Object(b.jsx)(n.a.Item,{className:"w-full",children:Object(b.jsx)(l.a,{ref:x,autoFocus:!0,placeholder:"Masukkan Nomor Bill( F3 )",className:"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800",onChange:e=>function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&""!==t){const e=o.filter((e=>e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0||e.billNo.toLowerCase().indexOf(t.toLowerCase())>=0)).map(((e,t)=>({...e,key:t+1})));return 0!==e.length?void g({...f,dataTable:e,t:0,selectedData:{},isSelected:!1}):void 0}const a=null===o||void 0===o||null===(e=o.map(((e,t)=>({...e,key:t+1}))))||void 0===e?void 0:e.slice(0,30);g({...f,dataTable:a,t:0,selectedData:{},isSelected:!1})}(e.target.value)})})})}),Object(b.jsx)("div",{className:"w-full",children:Object(b.jsxs)("table",{ref:m,id:"table",className:"table-customer w-full relative",children:[Object(b.jsx)("thead",{className:"w-full",children:Object(b.jsxs)("tr",{className:"w-full bg-primary focus:bg-gray-700 h-14",children:[Object(b.jsx)("th",{className:"w-max text-center text-white px-5",children:"No"}),Object(b.jsx)("th",{className:"w-max text-left text-white px-5",children:"Tanggal Transaksi"}),Object(b.jsx)("th",{className:"w-max text-left text-white px-5",children:"Bill No"}),Object(b.jsx)("th",{className:"w-max text-left text-white px-5",children:"Subtotal"})]},"id-head")}),Object(b.jsx)("tbody",{children:null===f||void 0===f||null===(t=f.dataTable)||void 0===t?void 0:t.map(((e,t)=>{var a;const{billNo:n="",billTime:l="",subTotal:c="",key:s=""}=e||{};return Object(b.jsxs)("tr",{id:t,tabIndex:t,className:"tr-data h-14 ".concat(t%2===0?"bg-white":"bg-gray-100"," ").concat((null===f||void 0===f||null===(a=f.selectedDataTrx)||void 0===a?void 0:a.billNo)===(null===e||void 0===e?void 0:e.billNo)?"bg-yellow-200":"bg-white"," focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer"),onClick:()=>{g({...f,isSelected:!0,selectedDataTrx:e}),v(n)},children:[Object(b.jsx)("td",{className:"px-5 text-center",children:t+1}),Object(b.jsx)("td",{className:"px-5 text-left",children:C()(l).format("DD MMM YYYY hh:mm:ss")}),Object(b.jsxs)("td",{className:"px-5 h-14 text-left flex items-center flex-row gap-2 content-center",children:[n,j&&Object(b.jsx)(B.a,{spin:!0,className:"text-lg"})]}),Object(b.jsxs)("td",{className:"px-5 text-left",children:["Rp ",Object(u.a)(c,0)]})]},s)}))})]})}),Object(b.jsx)("div",{className:"w-full h-auto bg-gray-300 p-3 mt-5 rounded-md",children:Object(b.jsxs)("h1",{className:"text-base",children:["Gunakan keyboard ",Object(b.jsx)("b",{children:"F3"})," untuk menginputkan ",Object(b.jsx)("b",{children:"Nomor Bill"}),", lalu gunakan keyboard ",Object(b.jsx)("b",{children:"\u2191"})," dan ",Object(b.jsx)("b",{children:"\u2193"})," untuk memilih transaksi yang akan dilanjutkan. Tekan ",Object(b.jsx)("b",{children:"Enter"})," untuk mengkonfirmasi pilihan anda."]})})]})})}var q=a(317);const _=[{key:"no",dataIndex:"no",title:Object(b.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(b.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(b.jsx)("p",{className:"text-left uppercase",children:"PLU"}),render:e=>Object(b.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"upcBarcode",dataIndex:"upcBarcode",title:Object(b.jsx)("p",{className:"text-left uppercase",children:"Barcode Satuan"}),render:e=>Object(b.jsx)("p",{className:"text-left",children:e}),width:200,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(b.jsx)("p",{className:"text-left uppercase",children:"NAMA BARANG"}),render:e=>Object(b.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"uom",dataIndex:"UomStock",title:Object(b.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(b.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(b.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:Object(u.a)(e,0)}),width:200,align:"center"}];function U(e){let{modalRef:t,handleCancel:a}=e;const n=Object(i.d)(),l=Object(s.useRef)(null),c=Object(s.useRef)([]),[r,d]=Object(s.useState)(-1),{searchResult:o=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleAddItem:u,handleFocus:j}=O(),h=function(){const e=o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];u(e,"table"),a(),d(-1),j()},m=e=>{if("F4"===e.key)d(0),l&&null!==l.current&&l.current.focus()},x=e=>{switch(e.key){case"ArrowUp":d((e=>Math.max(e-1,0)));break;case"ArrowDown":d((e=>Math.min(e+1,o.length-1)));break;case"Enter":h(r);break;case"Escape":e.target.blur(),d(-1),a(),n({type:f.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>{d(-1);return t&&null!==t.current&&t.current&&(l&&l.current&&l.current.focus(),document.addEventListener("keydown",m)),()=>{document.removeEventListener("keydown",m)}}),[t]),Object(s.useEffect)((()=>{const e=l&&null!==l.current&&l.current;if(e)return e.addEventListener("keydown",x),()=>{e.removeEventListener("keydown",x)}}),[t,l,r,o]),Object(s.useEffect)((()=>{c.current[r]&&c.current[r].scrollIntoView({behavior:"smooth",block:"center"})}),[r]),Object(b.jsxs)("div",{className:"w-full h-96 overflow-scroll",children:[Object(b.jsxs)("table",{ref:l,tabIndex:0,className:"table-fixed w-full border border-gray-400",border:!0,children:[Object(b.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(b.jsx)("tr",{children:null===_||void 0===_?void 0:_.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l}=e;return Object(b.jsx)("th",{className:"text-".concat(l," px-3 text-white"),style:{width:a},children:t},n)}))})}),Object(b.jsx)("tbody",{children:o.map(((e,t)=>Object(b.jsx)("tr",{ref:e=>c.current[t]=e,className:"w-full h-14 border border-gray-500 ".concat(t===r?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer transition-all"),onClick:()=>{h(t)},children:null===_||void 0===_?void 0:_.map((a=>{let{dataIndex:n,align:l,render:c}=a;return Object(b.jsx)("td",{className:"text-".concat(l," px-3"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===o||void 0===o?void 0:o.length)&&Object(b.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(b.jsxs)("div",{className:"w-2/3 flex items-center justify-center flex-col gap-3",children:[Object(b.jsx)(q.b,{className:"text-6xl text-gray-500"}),Object(b.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(b.jsx)("b",{children:"F3"})," untuk mencari barang by plu/barcode barang. ",Object(b.jsx)("b",{children:"F4"})," untuk memilih tabel, kemudian"," ",Object(b.jsx)("b",{children:"\u2191"})," / ",Object(b.jsx)("b",{children:"\u2193"})," untuk pilih barang dari tabel, tekan ",Object(b.jsx)("b",{children:"Enter"})," untuk konfirmasi item/barang pilihan"]})]})})]})}function H(e){let{open:t=!1,state:a,handleState:o,handleCancel:u}=e;const j=Object(i.d)(),h=Object(s.useRef)(null),m=Object(s.useRef)(null),{loading:x=!1}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{inputRef:p,form:f}=O(),g=()=>{p&&null!==p.current&&p.current.blur(),h&&null!==h.current&&(h.current.focus(),h.current.select())},v=e=>{p&&null!==p.current&&p.current.blur(),"F3"===e.key&&(e.preventDefault(),g()),"Escape"===e.key&&u()};return Object(s.useEffect)((()=>{g(),f.resetFields()}),[]),Object(s.useEffect)((()=>(m&&null!==m.current&&m.current&&(g(),document.addEventListener("keydown",v)),()=>{document.removeEventListener("keydown",v)})),[m,t]),Object(b.jsx)(D.a,{open:t,onCancel:u,footer:!1,centered:!0,width:1e3,title:"Pencarian Barang",children:Object(b.jsxs)("div",{ref:m,onKeyDown:v,className:"w-full h-auto",id:"modal-container",children:[Object(b.jsx)("div",{children:Object(b.jsx)(n.a,{form:f,children:Object(b.jsx)(n.a.Item,{name:"search",children:Object(b.jsx)(l.a,{autoFocus:!0,ref:h,type:"text",className:"w-full h-14 rounded-lg border-2 border-gray-400",placeholder:"MASUKKAN PLU / BARCODE ITEM / NAMA ITEM (F3)",onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!==e)return j({type:"transaction/SEARCH_MASTER",payload:{query:e}}),f.resetFields(),void g();c.a.warning({message:"Perhatian!",description:"Masukkan Kode Item / Kode Barcode terlebih dahulu."})}(e.target.value),f.resetFields()},suffix:x?Object(b.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(b.jsx)(r.a,{className:"text-xl text-gray-500"})})})})}),Object(b.jsx)("div",{className:"w-full mt-4",children:Object(b.jsx)(U,{modalRef:m,handleCancel:u})})]})})}const K=[{key:"no",dataIndex:"no",title:Object(b.jsx)("p",{className:"text-center ",children:"NO. "}),render:(e,t)=>Object(b.jsx)("p",{className:"text-center",children:t+1}),width:50,align:"center"},{key:"ItemCode",dataIndex:"ItemCode",title:Object(b.jsx)("p",{className:"text-center ",children:"PLU"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:e}),width:100,align:"center"},{key:"upcBarcode",dataIndex:"upcBarcode",title:Object(b.jsx)("p",{className:"text-center ",children:"Barcode"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:e}),width:150,align:"center"},{key:"ItemName",dataIndex:"ItemName",title:Object(b.jsx)("p",{className:"text-left ",children:"NAMA BARANG"}),render:e=>Object(b.jsx)("p",{className:"text-left",children:e}),width:300,align:"center"},{key:"qty",dataIndex:"qty",title:Object(b.jsx)("p",{className:"text-center ",children:"QTY"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:e}),width:75,align:"center"},{key:"uom",dataIndex:"UomStock",title:Object(b.jsx)("p",{className:"text-center ",children:"SATUAN"}),render:e=>Object(b.jsx)("p",{className:"text-center uppercase",children:e.trim().toUpperCase()}),width:100,align:"center"},{key:"SalesPrice",dataIndex:"SalesPrice",title:Object(b.jsx)("p",{className:"text-center ",children:"HARGA"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:Object(u.a)(e,0)}),width:200,align:"center"},{key:"discVal",dataIndex:"discVal",title:Object(b.jsx)("p",{className:"text-center ",children:"DISKON %"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"discValuex",dataIndex:"discValuex",title:Object(b.jsx)("p",{className:"text-center ",children:"DISKON @"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:e||0}),width:200,align:"center"},{key:"total",dataIndex:"total",title:Object(b.jsx)("p",{className:"text-center ",children:"TOTAL"}),render:e=>Object(b.jsx)("p",{className:"text-center",children:Object(u.a)(e,0)}),width:250,align:"center",fixed:!0}];function Y(e){let{state:t={},handleState:a=((e,t)=>{}),...n}=e;const l=Object(i.d)(),c=Object(s.useRef)(null),[r,d]=Object(s.useState)(-1),{data:o=[],selectedRowTransaction:u={}}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{handleFocus:j}=O(),h=function(){const e=o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0];l({type:f.a.SET_STATE,payload:{selectedRowTransaction:e}})},m=e=>{if("ArrowRight"===e.key)return e.target.blur(),e.preventDefault(),d(0),h(0),void(c&&null!==c.current&&c.current.focus())},x=e=>{switch(e.key){case"ArrowUp":d((e=>Math.max(e-1,0)));break;case"ArrowDown":d((e=>Math.min(e+1,o.length-1)));break;case"Enter":e.ctrlKey&&a("modalConfirmDelete",!0);break;case"Tab":case"Escape":e.target.blur(),d(-1),j(),l({type:f.a.SET_STATE,payload:{selectedRowTransaction:{}}})}};return Object(s.useEffect)((()=>(c&&c.current&&c.current.focus(),document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)})),[o]),Object(s.useEffect)((()=>{const e=c.current;if(e)return e.addEventListener("keydown",x),()=>{e.removeEventListener("keydown",x)}}),[c,r]),Object(s.useEffect)((()=>{h(r)}),[r]),Object(b.jsxs)("div",{className:"w-full h-full overflow-scroll",children:[Object(b.jsxs)("table",{ref:c,tabIndex:0,className:"table-fixed w-full border border-gray-400 relative",border:!0,children:[Object(b.jsx)("thead",{className:"w-full h-14 bg-primary sticky top-0",children:Object(b.jsx)("tr",{children:null===K||void 0===K?void 0:K.map((e=>{let{title:t="",width:a=0,dataIndex:n="",align:l="",fixed:c=!1}=e;return Object(b.jsx)("th",{className:"text-".concat(l," px-3 text-white border-r border-gray-200 ").concat(c?"shadow-xl sticky right-0 top-0 bg-primary text-white":"relative"),style:{width:a},children:t},n+t)}))})}),Object(b.jsx)("tbody",{children:o.map(((e,t)=>Object(b.jsx)("tr",{className:"group w-full h-14 border border-gray-500 ".concat((null===u||void 0===u?void 0:u.ItemCode)===(null===e||void 0===e?void 0:e.ItemCode)?"bg-primary text-white":""," hover:bg-blue-500 hover:text-white cursor-pointer"),onClick:()=>{h(t),d(t),a("modalQty",!0)},onFocus:()=>{d(t)},children:null===K||void 0===K?void 0:K.map((a=>{let{dataIndex:n,align:l,render:c,fixed:s=!1}=a;return Object(b.jsx)("td",{className:"text-".concat(l," px-3 border-r border-gray-400 ").concat(s?"shadow-xl sticky right-0 top-0 ".concat((null===u||void 0===u||u.ItemCode,null===e||void 0===e||e.ItemCode,"bg-primary text-white")," border-r border-gray-400 group-hover:bg-blue-500 group-hover:text-white shadow-sm"):"relative"),children:c(e[n],t)||""},n)}))},t)))})]}),0===(null===o||void 0===o?void 0:o.length)&&Object(b.jsx)("div",{className:"w-full h-96 flex items-center justify-center flex-col",children:Object(b.jsxs)("div",{className:"w-2/5 flex items-center justify-center flex-col gap-3",children:[Object(b.jsx)(q.b,{className:"text-6xl text-gray-500"}),Object(b.jsxs)("p",{className:"text-lg text-gray-700 text-center",children:["Tidak ada transaksi. Tekan ",Object(b.jsx)("b",{children:"\u2192"})," lalu ",Object(b.jsx)("b",{children:"\u2191"})," / ",Object(b.jsx)("b",{children:"\u2193"})," untuk pilih barang dari tabel & ",Object(b.jsx)("b",{children:"ESC"})," ","untuk scan barang"]})]})})]})}var Q=a(733);function V(){const e=Object(i.d)(),t=Object(o.useHistory)(),{getTotalQty:a,getGrandTotal:j}=Object(Q.a)(),{handleFocus:h,inputRef:m,form:x,handleSearch:p,handleAddItem:f,handleResetForm:g}=O(),{contentStatus:v="isMenu",searchResult:y=[],loading:N=!1,billNo:w="",billDate:k="",data:E=[]}=Object(i.e)((e=>null===e||void 0===e?void 0:e.transaction)),{isLog:T=!1,authorized:I=!1}=JSON.parse(localStorage.getItem("app")||"{}"),[C,D]=Object(s.useState)({modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:"",tableIndex:-1}),R=()=>{h(),e({type:"transaction/SET_STATE",payload:{contentStatus:"isMenu",selectedRowTransaction:{},searchResult:[]}}),D((e=>({...e,modalPendingPayment:!1,modalSearchItem:!1,modalConfirmDelete:!1,modalQty:!1,barcode:"",tableIndex:-1})))},L=e=>{"Escape"===e.key&&(e.preventDefault(),e.target.blur(),h()),"Tab"===e.key&&(h(),e.preventDefault())},B=(e,t)=>D((a=>({...a,[e]:t})));return Object(s.useEffect)((()=>{R(),h(),T&&I&&e({type:"sync/SYNC_DATA_MASTER"})}),[T,I]),Object(s.useEffect)((()=>{if(T&&I)return h(),R(),document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)};e({type:"auth/LOGOUT_POS",history:t})}),[]),Object(s.useEffect)((()=>{"isMenu"===v&&h()}),[v]),Object(s.useEffect)((()=>{var e;"scan-item"===document.activeElement.id&&(0!==y.length&&1===y.length&&f({upcBarcode:null===(e=y[0])||void 0===e?void 0:e.UPCbarcode,ItemCode:""},"input"));h()}),[y,m]),Object(s.useEffect)((()=>{m&&null!==m.current&&m.current.focus()}),[w,k,m,C,E]),Object(s.useEffect)((()=>{N||m&&null!==m.current&&m.current.focus()}),[N,m]),Object(b.jsxs)("div",{className:"w-screen h-screen overflow-hidden relative pb-2.5",children:[Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-12 gap-3",style:{gridTemplateRows:"repeat(24, minmax(0, 1fr))"},children:[Object(b.jsx)("div",{className:"col-span-12 row-span-3 bg-primary",children:Object(b.jsx)(A,{})}),Object(b.jsx)("div",{className:"col-span-10 row-span-5 pl-2.5",children:Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg",children:[Object(b.jsx)("div",{className:"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none",children:Object(b.jsx)("div",{className:"w-full h-full flex items-center justify-end",children:Object(b.jsx)("h1",{className:"text-3xl text-white font-semibold text-right",children:"TOTAL BELANJA"})})}),Object(b.jsx)("div",{className:"row-start-2 col-span-6 relative",children:Object(b.jsxs)(n.a,{form:x,layout:"vertical",children:[Object(b.jsx)("div",{className:"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full"}),Object(b.jsxs)("div",{className:"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5",children:[Object(b.jsx)("div",{className:"col-span-2",children:Object(b.jsx)("div",{className:"w-full h-16 bg-primary rounded-lg",children:Object(b.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col gap-1",children:[Object(b.jsx)("p",{className:"text-center text-gray-200 text-xs",children:"TOTAL QTY"}),Object(b.jsx)("p",{className:"text-center text-white text-lg font-bold",children:a()})]})})}),Object(b.jsx)("div",{className:"col-span-5",children:Object(b.jsx)("div",{className:"w-full bg-white rounded-lg overflow-hidden",style:{height:"68px"},children:Object(b.jsx)(n.a.Item,{name:"search-item",children:Object(b.jsx)(l.a,{id:"scan-item",value:null===C||void 0===C?void 0:C.barcode,ref:m,autoFocus:!0,className:"w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input",placeholder:"Barcode / PLU Barang (ESC / TAB)",suffix:N?Object(b.jsx)(d.a,{className:"animate-spin text-xl text-gray-500"}):Object(b.jsx)(r.a,{className:"text-xl text-gray-500"}),style:{height:"68px"},onPressEnter:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&0!==e.length?e.length>=6?p(e):(g(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang benar! Min. kode adalah 6 digit"}),h()):(g(),c.a.warning({message:"Perhatian!",description:"Masukkan kode yang terlebih dahulu."}))}(e.target.value)},onChange:e=>{D((t=>({...t,barcode:e.target.value})))}})})})})]})]})}),Object(b.jsx)("div",{className:"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none",children:Object(b.jsx)("div",{className:"w-full h-full flex items-center justify-end p-3",children:Object(b.jsx)("h1",{className:"text-7xl text-white font-semibold text-right",children:Object(u.a)(j(),0)})})})]})}),Object(b.jsx)("div",{className:"col-span-2 pr-2.5",style:{gridRow:"span 21 / span 21"},children:Object(b.jsx)(S,{state:C,handleState:B,handleFocus:h})}),Object(b.jsx)("div",{className:"col-span-10 pl-2.5",style:{gridRow:"span 16 / span 16"},children:Object(b.jsx)(Y,{handleFocus:h,handleState:B,state:C})})]}),Object(b.jsx)(M,{visible:null===C||void 0===C?void 0:C.modalPendingPayment,onCancel:R,handleSearchFocus:h,handleState:B}),Object(b.jsx)(H,{open:null===C||void 0===C?void 0:C.modalSearchItem,handleCancel:R,state:C,handleState:B}),Object(b.jsx)(P,{open:null===C||void 0===C?void 0:C.modalConfirmDelete,handleCancel:R,state:C,handleState:B,handleFocus:h}),Object(b.jsx)(F,{open:null===C||void 0===C?void 0:C.modalQty,handleCancel:R,state:C,handleState:B})]})}},733:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(99);function l(){const e=Object(n.d)(),{billNo:t="",billDate:a="",data:l=[]}=Object(n.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:c={},property:s={}}=JSON.parse(localStorage.getItem("app")||"{}"),r=()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{total:a=0}=t;return+e+ +a}),0))||0,d=()=>0,i=()=>r()-0,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0!==(null===e||void 0===e?void 0:e.length)?e.reduce(((e,t)=>+e+ +t.cashPay),0):0},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=i(),n=o(e);return 0===a?0:t>a?t-a:n>a?n-a:0};return{getTotalQty:()=>(null===l||void 0===l?void 0:l.reduce(((e,t)=>{let{qty:a=0}=t;return+e+ +a}),0))||0,getDiscountTotal:d,getSubtotal:r,getGrandTotal:i,getCashPaid:o,getCashChange:u,getBalanceDue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=o(e),n=i();return a>=n?a-n-t:i()-+a},paymentStore:(n,d)=>{var o,j;const b={header:[{billNo:t,billDate:a,custCode:"",custName:"",discPrc:"0",discValue:"0",taxPrc:"0",taxValue:"0",subTotal:r(),grandTotal:i(),shiftID:(null===c||void 0===c?void 0:c.shiftId)||"0",outletCode:null===s||void 0===s?void 0:s.outletCode}],settle:0!==(null===(o=n.settles)||void 0===o?void 0:o.length)&&(null===(j=n.settles)||void 0===j?void 0:j.map((e=>({...e,cashChange:u(null===n||void 0===n?void 0:n.settles,null===e||void 0===e?void 0:e.cashPay)})))),details:null===l||void 0===l?void 0:l.map(((e,a)=>({...e,billNo:t,ItemNo:a+1})))};e({type:"transaction/STORE",payload:b,bill:{from:a,to:a},handlePrint:()=>{if("function"===typeof d)return d()}})}}}},934:function(e,t,a){},935:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(309);var n=a(131),l=(a(205),a(109)),c=a(1),s=a(46),r=a(17);function d(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:t={}}=e,a=(null===t||void 0===t?void 0:t.isOpening)||!1,n=Object(s.useHistory)(),[d,o]=Object(c.useState)(!a),u=e=>{n.push("/pos/opening-shift")},j=e=>{"F7"===e.key&&(e.target.blur(),e.preventDefault(),u())};return Object(c.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",onkeydown)})),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(l.a,{onClick:u,className:"btn-page",children:["Opening shift",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})]}),Object(r.jsx)(i,{isOpen:d,onClose:()=>o(!1)})]})}function i(e){let{isOpen:t,onClose:a}=e;return Object(r.jsxs)(n.a,{centered:!0,width:500,footer:!1,onCancel:a,open:t,bodyStyle:{backgroundColor:"#f8f8f8",borderRadius:"12px"},children:[Object(r.jsx)("h1",{className:"text-center font-semibold text-xl text-red-500",children:"PERHATIAN !!!"}),Object(r.jsxs)("p",{className:"text-center text-base leading-snug mt-5",children:["Anda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih dahulu dengan cara menekan tombol ",Object(r.jsx)("kbd",{className:"kbd",children:"f7"})," atau menutup popup ini. Terima kasih"]})]})}}}]);
//# sourceMappingURL=24.4a3d3900.chunk.js.map