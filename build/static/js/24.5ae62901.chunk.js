(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[24],{290:function(e,t,a){"use strict";a(67),a(195)},291:function(e,t,a){"use strict";a(67),a(195)},292:function(e,t,a){"use strict";var s=a(274);t.a=s.a},293:function(e,t,a){"use strict";var s=a(126);t.a=s.a},701:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));a(290);var s=a(292),l=(a(291),a(293)),n=(a(138),a(68)),r=(a(193),a(139)),i=(a(194),a(85)),c=a(0),u=a(59),o=a(27),d=a(13);function m(){const e=Object(u.d)(),t=Object(o.useHistory)(),a=JSON.parse(localStorage.getItem("app")||"{}"),m=Object(c.useRef)(null),b=Object(c.useRef)(null),j=Object(c.useRef)(null),[h]=i.a.useForm(),{loading:p=!1,isGrantedAccess:f=!1}=Object(u.e)((e=>null===e||void 0===e?void 0:e.auth)),{loading:O=!1}=Object(u.e)((e=>null===e||void 0===e?void 0:e.transaction)),{property:x={},cashier:y={}}=a,v=t=>{f?k(t):(e({type:"auth/USER_ACCESS",payload:{email:null===t||void 0===t?void 0:t.email,password:window.btoa(null===t||void 0===t?void 0:t.password),funcId:"1038"},history:()=>{}}),e({type:"auth/property"}))},g=e=>console.log("Error! ",e),w=e=>{if(f)return"Escape"===e.key&&(j.current.blur(),j.current.value="0"),void(j&&j.current&&j.current.focus());{const t=document.activeElement===(null!==m.current&&m.current.input)||!1,a=document.activeElement===(null!==b.current&&b.current.input)||!1;if("Enter"===e.key&&t)return m.current.blur(),void b.current.focus();if("Enter"===e.key&&a)return m.current.blur(),void b.current.focus();"Escape"===e.key&&N(),"ArrowUp"===e.key&&m.current.focus(),"ArrowDown"===e.key&&(b.current.focus(),a&&(b.current.blur(),m.current.blur()))}},k=a=>{e({type:"transaction/OPENING_SHIFT",payload:{refDate:(null===x||void 0===x?void 0:x.refDate)||"",beginCash:(null===a||void 0===a?void 0:a.openingCash)||0},history:t})},N=(e,a)=>((e||a)&&(h.resetFields(),m.current.focus()),t.push("/pos/options"));return Object(c.useEffect)((()=>(document.addEventListener("keydown",w),e({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),()=>{document.removeEventListener("keydown",w)})),[h]),Object(c.useEffect)((()=>{if(y&&null!==y&&void 0!==y&&y.isOpening)return t.push("/pos/kasir")}),[]),Object(d.jsx)("div",{className:"w-full h-screen",children:Object(d.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:Object(d.jsxs)("div",{className:"max-w-xl",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-2xl font-medium",children:"Opening Shift"}),Object(d.jsx)("p",{className:"text-base leading-snug mt-3",children:"Mohon untuk membuka Shift terlebih dahulu sebelum melakukan transaksi."})]}),f?Object(d.jsx)("div",{className:"w-full h-auto mt-12",children:Object(d.jsxs)(i.a,{form:h,name:"opening",layout:"vertical",initialValues:{remember:!0},onFinish:v,onFinishFailed:g,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:[Object(d.jsx)(i.a.Item,{children:Object(d.jsx)(i.a.Item,{label:"Saldo Awal",name:"openingCash",rules:[{required:!0,message:"Tambahkan saldo awal."}],children:Object(d.jsx)(r.a,{defaultValue:0,ref:j,type:"number",autoFocus:!0,autoComplete:"false",placeholder:"0",prefix:"IDR ",className:"w-full h-14 rounded-md"})})}),Object(d.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(d.jsx)(i.a.Item,{children:Object(d.jsx)(n.a,{disabled:O,loading:O,htmlType:"submit",className:"btn-page",children:"Buka Kasir"})}),Object(d.jsx)(i.a.Item,{children:Object(d.jsx)(n.a,{disabled:O,htmlType:"button",className:"btn-page bg-transparent text-gray-700",onClick:()=>t.push("/pos/options"),children:"Kembali"})})]})]})}):Object(d.jsx)("div",{className:"w-3/4 my-7",children:Object(d.jsx)(i.a,{form:h,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:v,onFinishFailed:g,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(d.jsxs)(s.a,{wrap:!0,gutter:[8,0],children:[Object(d.jsx)(l.a,{span:24,children:Object(d.jsx)(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(d.jsx)(r.a,{ref:m,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(d.jsx)(l.a,{span:24,children:Object(d.jsx)(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(d.jsx)(r.a.Password,{ref:b,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(d.jsx)(l.a,{span:24,children:Object(d.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(d.jsx)(i.a.Item,{children:Object(d.jsxs)(n.a,{disabled:p,loading:p,type:"primary",htmlType:"submit",className:"btn-page",children:["validasi ",Object(d.jsx)("kbd",{className:"kbd",children:"enter"})]})}),Object(d.jsx)(i.a.Item,{children:Object(d.jsxs)(n.a,{onClick:N,disabled:p,loading:p,type:"primary",className:"btn-page bg-transparent text-gray-700",children:["kembali ",Object(d.jsx)("kbd",{className:"kbd",children:"esc"})]})})]})})]})})})]})})})}}}]);
//# sourceMappingURL=24.5ae62901.chunk.js.map