{"version":3,"sources":["pages/POS/widget/ChangeQtyItem.js","pages/POS/widget/CheckItemPrice.js","pages/POS/widget/DeleteItemButton.js","pages/POS/widget/DiscountButton.js","pages/POS/widget/ListItemButton.js","pages/POS/hooks/useCartOrder.js","pages/POS/widget/NewOrderButton.js","pages/POS/widget/OpenPendingButton.js","pages/POS/widget/OptionButton.js","pages/POS/widget/PaymentButton.js","pages/POS/widget/SavePendingButton.js","pages/POS/components/ButtonActionOrder.js","pages/POS/components/HeaderLayout.js","pages/POS/components/ModalChangeQty.js","pages/POS/components/ModalConfirmDelete.js","pages/POS/components/ModalPendingPayment.js","pages/POS/components/TableSearchItem.js","pages/POS/components/ModalTableSearchItem.js","pages/POS/components/TableOrderItem.js","pages/POS/index.js","pages/POS/hooks/usePayment.js","pages/POS/widget/OpeningShiftButton.js"],"names":["ChangeQtyItem","hs","state","val","openModal","handleKeyDownGlobal","e","key","preventDefault","useEffect","document","addEventListener","removeEventListener","className","onClick","CheckItemPriceButton","disabled","DeleteItemButton","selectedRowTransaction","useSelector","transaction","isSelected","Object","keys","length","handleOpenModal","activeElement","id","ctrlKey","target","blur","DiscountButton","ListItemButton","handleOpen","onKeyDown","useCartOrder","dispatch","useDispatch","inputRef","useRef","form","useForm","searchResult","data","handleFocus","current","focus","handleResetForm","resetFields","type","actions","SET_STATE","payload","handleAddItem","item","from","findData","find","itm","upcBarcode","undefined","anyData","filter","el","restData","map","push","qty","total","price","amount","contentStatus","itemCode","ItemCode","handleSearch","query","notification","warning","message","description","handleSelectItem","handleDeleteItem","filteredDataTrx","NewOrderButton","props","app","JSON","parse","localStorage","getItem","cashier","isOpeningShift","isOpening","loading","handleNewOrder","transactionList","TRANSACTION_BILL_NO","onKeyDownGlobal","OpenPendingButton","history","useHistory","getHoldTrx","TRANSACTION_HOLD_LIST","OptionsButton","openPage","PaymentButton","tenderMedia","handleOpenPayment","SavePendingButton","isDisabled","billNo","billDate","property","handlePendingPayment","subTotal","reduce","a","header","custCode","custName","discPrc","discValue","taxPrc","taxValue","grandTotal","shiftID","shiftId","outletCode","details","i","ItemNo","ButtonActionOrder","handleState","isSelectedRow","style","gridTemplateRows","OpeningShiftButton","HeaderLayout","user","setState","useState","modalCashBox","currentTime","moment","timerId","setInterval","prev","clearInterval","src","preview","format","role","username","ModalChangeQty","open","handleCancel","oldQty","itemName","modalRef","inputChanged","select","handleEnter","error","handleChangeQty","info","includes","centered","onOk","onCancel","title","footer","ref","tabIndex","wrap","gutter","span","currencyFormat","autoFocus","value","defaultValue","onChange","event","handleChange","onPressEnter","placeholder","ModalConfirmDelete","isGrantedAccess","auth","emailRef","passwordRef","deleteRef","onFinish","values","email","password","window","btoa","funcId","danger","getFieldsValue","ItemName","name","layout","initialValues","remember","onFinishFailed","console","log","autoComplete","maxWidth","width","Item","label","rules","required","Password","disable","htmlType","ModalPendingPayment","visible","transactionHolds","searchItemRef","refTable","refInput","search","t","dataTable","selectedData","handleDetailHoldTrx","onClose","onState","onKeyPress","focusInput","table","tbody","lastChild","tr","children","isNotEmptyTrx","slice","LoadingOutlined","spin","filtered","toLowerCase","indexOf","defaultTrx","handleDataTable","index","billTime","selectedDataTrx","columns","dataIndex","render","_","align","trim","toUpperCase","TableSearchItem","activeIndex","setActiveIndex","handleSaveSelected","handleKeyDown","prevIndex","Math","max","min","border","ModalTableSearchItem","searchInputRef","suffix","fixed","TableOrderItem","selected","onFocus","NewLayout","getTotalQty","getGrandTotal","usePayment","isLog","authorized","modalPendingPayment","modalSearchItem","modalConfirmDelete","modalQty","barcode","tableIndex","UPCbarcode","height","handleSearchItem","gridRow","handleSearchFocus","getSubtotal","acc","getDiscountTotal","getCashPaid","settles","cur","cashPay","getCashChange","cashPaid","totalCashPay","getBalanceDue","cashChange","paymentStore","handlePrint","settle","bill","to","isOpen","setIsOpen","onkeydown","ModalOpeningShift","bodyStyle","backgroundColor","borderRadius"],"mappings":"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","file":"static/js/24.d57bf780.chunk.js","sourcesContent":["import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ChangeQtyItem({ hs = (state, val) => {} }) {\n\tconst openModal = () => {\n\t\ths('modalQty', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\n\t\t\topenModal();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t});\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={openModal}>\n\t\t\t<kbd className=\"kbd\">f3</kbd>\n\t\t\t<p>Ubah Quantity</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React from 'react';\n\nexport default function CheckItemPriceButton() {\n\treturn (\n\t\t<Button disabled className=\"btn-page rounded-lg\">\n\t\t\t<kbd className=\"kbd\">f8</kbd>\n\t\t\t<p>cek harga</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function DeleteItemButton({ hs = (state, val) => {} }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\n\tconst handleOpenModal = () => {\n\t\ths('modalConfirmDelete', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (document.activeElement.id !== 'input-qty' && isSelected) {\n\t\t\tif (e.ctrlKey && e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t\te.target.blur();\n\n\t\t\t\thandleOpenModal();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpenModal}>\n\t\t\t<kbd className=\"kbd\">ctrl+enter</kbd>\n\t\t\t<p>hapus item</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React from 'react';\n\nexport default function DiscountButton() {\n\treturn (\n\t\t<Button disabled className=\"btn-page-2\">\n\t\t\t<kbd className=\"kbd\">f4</kbd>\n\t\t\t<p>Diskon</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ListItemButton({ hs = () => {} }) {\n\tconst handleOpen = () => {\n\t\ths('modalSearchItem', true);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 'F2') {\n\t\t\thandleOpen();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDown);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpen}>\n\t\t\t\t<kbd className=\"kbd\">f2</kbd>\n\t\t\t\t<p>Daftar Barang</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Form, notification } from 'antd';\nimport { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function useCartOrder() {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst [form] = Form.useForm();\n\n\tconst { searchResult = [], data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleFocus = () => {\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleResetForm = () => {\n\t\tform.resetFields();\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tsearchResult: []\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thandleResetForm();\n\t\t\treturn;\n\t\t}\n\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleSelectItem = (selected = {}) => {\n\t\thandleAddItem({ ItemCode: selected, upcBarcode: '' }, 'select');\n\t};\n\n\tconst handleAddItem = (item = {}, from = 'input') => {\n\t\thandleResetForm();\n\n\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\n\t\tif (from === 'input' && findData !== undefined) {\n\t\t\tif (item?.upcBarcode !== undefined && item.upcBarcode && item.upcBarcode !== '') {\n\t\t\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\t\t\t\tconst anyData = data.filter((el) => +el.upcBarcode === +item.upcBarcode);\n\n\t\t\t\t//* JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData?.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (+el.upcBarcode === +item.upcBarcode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData],\n\t\t\t\t\t\t\tcontentStatus: 'isMenu'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// * DITEMUKAN BANRANG NAMUN TIDAK ADA DI LIST TRANSAKSI\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tcontentStatus: 'isMenu',\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'select') {\n\t\t\tif (item.ItemCode && from === 'select') {\n\t\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\t\t// * JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'table') {\n\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\tconst restData = [];\n\n\t\t\t\tdata?.map((el) => {\n\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t};\n\n\tconst handleDeleteItem = (itemCode = '') => {\n\t\tconst filteredDataTrx = (data?.length !== 0 && data?.filter(({ ItemCode }) => ItemCode !== itemCode)) || [];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tdata: filteredDataTrx,\n\t\t\t\tselectedRowTransaction: filteredDataTrx[0]\n\t\t\t}\n\t\t});\n\n\t\thandleFocus();\n\t};\n\n\treturn { inputRef, form, handleFocus, handleResetForm, handleSearch, handleSelectItem, handleAddItem, handleDeleteItem };\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function NewOrderButton(props) {\n\tconst dispatch = useDispatch();\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst { hs = null } = props;\n\tconst { loading = false } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleNewOrder = () => {\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\ttransactionList: [],\n\t\t\t\tdata: []\n\t\t\t}\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t});\n\n\t\ths('data', []);\n\t\ths('t', 0);\n\t\ths('total', 0);\n\t\ths('selectedData', []);\n\t\ths('isSelected', []);\n\n\t\thandleFocus();\n\t}; \n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F1') {\n\t\t\t\te.target.blur();\n\t\t\t\tif (document.activeElement.id !== 'barcode') {\n\t\t\t\t\thandleNewOrder();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn e;\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button loading={loading} disabled={loading || !isOpeningShift} className=\"btn-page\" onClick={handleNewOrder}>\n\t\t\t<kbd className=\"kbd\">f1</kbd>\n\t\t\t<p>order baru</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function OpenPendingButton({ hs = null }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst getHoldTrx = () => {\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_HOLD_LIST,\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst openModal = () => {\n\t\ths('modalPendingPayment', true);\n\t\tgetHoldTrx();\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F7') {\n\t\t\t\te.preventDefault();\n\t\t\t\topenModal();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\tgetHoldTrx();\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button disabled={!isOpeningShift} className=\"btn-page\" onClick={openModal}>\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t\t<p>daftar pending</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button } from 'antd';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OptionsButton() {\n\tconst history = useHistory();\n\n\tconst openPage = () => {\n\t\thistory.push('/pos/options');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F9') {\n\t\t\te.target.blur();\n\t\t\topenPage();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t<kbd className=\"kbd\">f9</kbd>\n\t\t\toptions\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function PaymentButton() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { tenderMedia = [], loading = false, data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleOpenPayment = () => {\n\t\tdispatch({\n\t\t\ttype: 'auth/property'\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isPayment'\n\t\t\t}\n\t\t});\n\n\t\thistory.push('/pos/payment');\n\t};\n\n\tconst getTenderMedia = () => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/TENDER_MEDIA'\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F10') {\n\t\t\te.preventDefault();\n\t\t\thandleOpenPayment();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tgetTenderMedia();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tdisabled={loading || tenderMedia.length === 0 || data?.length === 0}\n\t\t\t\tloading={loading}\n\t\t\t\tclassName=\"btn-page-2\"\n\t\t\t\tonClick={handleOpenPayment}>\n\t\t\t\t<kbd className=\"kbd\">f10</kbd>\n\t\t\t\t<p>pembayaran</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nexport default function SavePendingButton({ isDisabled = false }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { data = [], loading = false, billNo = '', billDate = '' } = useSelector((state) => state?.transaction);\n\tconst { property = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst disabled = isDisabled || data?.length === 0 || loading || isDisabled;\n\n\tconst handlePendingPayment = () => {\n\t\tconst subTotal = data.reduce((a, { total }) => +a + +total, 0);\n\n\t\tconst header = [\n\t\t\t{\n\t\t\t\tbillNo,\n\t\t\t\tbillDate,\n\t\t\t\tcustCode: '',\n\t\t\t\tcustName: '',\n\t\t\t\tdiscPrc: '0',\n\t\t\t\tdiscValue: '0',\n\t\t\t\ttaxPrc: '0',\n\t\t\t\ttaxValue: '0',\n\t\t\t\tsubTotal: subTotal,\n\t\t\t\tgrandTotal: subTotal,\n\t\t\t\tshiftID: cashier?.shiftId,\n\t\t\t\toutletCode: property?.outletCode\n\t\t\t}\n\t\t];\n\n\t\tconst payload = {\n\t\t\theader,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD',\n\t\t\tpayload,\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (!disabled) {\n\t\t\tif (e.key === 'F6') {\n\t\t\t\te.preventDefault();\n\t\t\t\thandlePendingPayment();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, [data]);\n\n\treturn (\n\t\t<Button loading={loading} disabled={disabled} className=\"btn-page\" onClick={handlePendingPayment}>\n\t\t\t<kbd className=\"kbd\">f6</kbd>\n\t\t\t<p>simpan pending</p>\n\t\t</Button>\n\t);\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ChangeQtyItem from '../widget/ChangeQtyItem';\nimport CheckItemPriceButton from '../widget/CheckItemPrice';\nimport DeleteItemButton from '../widget/DeleteItemButton';\nimport DiscountButton from '../widget/DiscountButton';\nimport ListItemButton from '../widget/ListItemButton';\nimport NewOrderButton from '../widget/NewOrderButton';\nimport OpeningShiftButton from '../widget/OpeningShiftButton';\nimport OpenPendingButton from '../widget/OpenPendingButton';\nimport OptionsButton from '../widget/OptionButton';\nimport PaymentButton from '../widget/PaymentButton';\nimport SavePendingButton from '../widget/SavePendingButton';\n\nexport default function ButtonActionOrder({ handleState = (state, val) => {}, state = {}, handleFocus, ...props }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { isOpening = false } = cashier;\n\n\tconst isSelectedRow = Object.keys(selectedRowTransaction)?.length !== 0;\n\n\treturn (\n\t\t<div className=\"w-full h-full\">\n\t\t\t{isOpening ? (\n\t\t\t\tisSelectedRow ? (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<DeleteItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ChangeQtyItem hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<DiscountButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"py-3\">\n\t\t\t\t\t\t\t<h1 className=\"text-base text-gray-700 text-center\">\n\t\t\t\t\t\t\t\tTekan <kbd className=\"kbd\">tab</kbd> untuk kembali ke scan barang\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<NewOrderButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ListItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div className=\"\">\n\t\t\t\t\t\t<SelectItemBtn />\n\t\t\t\t\t</div> */}\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<SavePendingButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OpenPendingButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<CheckItemPriceButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<PaymentButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t) : (\n\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OpeningShiftButton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Image } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function HeaderLayout() {\n\tconst { user = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst { billDate = '', billNo = '', loading = false } = useSelector((state) => state?.transaction);\n\n\tconst [state, setState] = useState({\n\t\tmodalCashBox: false,\n\t\tcurrentTime: moment()\n\t});\n\n\tuseEffect(() => {\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tcurrentTime: moment()\n\t\t\t}));\n\t\t}, 1000);\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className=\"w-full h-full flex items-center justify-center\">\n\t\t\t<div className=\"w-full flex items-center justify-between px-5\">\n\t\t\t\t<div className=\"w-2/5 flex items-center gap-2\">\n\t\t\t\t\t<Image src=\"/logo-3.png\" className=\"w-28 object-cover\" preview={false} />\n\t\t\t\t\t<h1 className=\"text-xl text-white font-semibold leading-none\">Scap Point of Sales</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-max\">\n\t\t\t\t\t<div className=\"w-full flex items-center justify-end gap-5\">\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">bussiness date</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">\n\t\t\t\t\t\t\t\t{loading ? '...' : moment(billDate).format('dddd, DD MMMM YYYY')}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">today</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{moment().format('DD MMMM YYYY')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">time</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{state.currentTime.format('HH:mm:ss')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">NO. TRANSAKSI</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{loading ? '...' : billNo || '-'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">\n\t\t\t\t\t\t\t\t{user?.role || 'nama kasir'} | ID 0{cashier?.shiftId || '0'}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{user?.username || 'guest'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { Button, Col, Input, Modal, notification, Row } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\n\nexport default function ModalChangeQty({ open, handleState, handleCancel }) {\n\tconst dispatch = useDispatch();\n\n\tconst { selectedRowTransaction = {}, data = [] } = useSelector((state) => state?.transaction);\n\tconst { qty: oldQty, ItemCode = '', price = 0, upcBarcode = '', itemName = '' } = selectedRowTransaction;\n\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst [state, setState] = useState({\n\t\tqty: oldQty,\n\t\tinputChanged: false\n\t});\n\n\tconst handleFocus = () => {\n\t\tconst input = inputRef && inputRef.current !== null;\n\n\t\tif (input) {\n\t\t\tinputRef.current.focus();\n\t\t\tinputRef.current.select();\n\t\t}\n\t};\n\n\tconst handleChange = (value) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tqty: +value\n\t\t}));\n\t};\n\n\tconst handleEnter = () => {\n\t\tconst { qty = 0 } = state;\n\t\thandleFocus();\n\n\t\tif (+qty === 0 || +qty <= 0) {\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'Kuantitas tidak boleh kosong'\n\t\t\t});\n\n\t\t\thandleFocus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (qty === '' || qty === oldQty) {\n\t\t\thandleChangeQty(+oldQty);\n\t\t\treturn;\n\t\t}\n\n\t\thandleChangeQty(qty);\n\t};\n\n\tconst handleChangeQty = (qty = oldQty) => {\n\t\tconst anyData = data?.length !== 0 && data?.filter((e) => e.ItemCode === ItemCode);\n\n\t\tif (anyData && qty <= 0) {\n\t\t\tnotification.info({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'QTY Tidak boleh Nol (0)'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty < oldQty) {\n\t\t\thandleCancel();\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'Anda tidak dapat mengubah quantity kurang dari quantity awal!.'\n\t\t\t});\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'Fitur ini sedang dalam tahap pengembangan.'\n\t\t\t});\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tqty: oldQty\n\t\t\t}));\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty >= 1) {\n\t\t\tconst restData = [];\n\n\t\t\tdata?.map((el) => {\n\t\t\t\tif (el.ItemCode === ItemCode) {\n\t\t\t\t\trestData.push({\n\t\t\t\t\t\t...el,\n\t\t\t\t\t\tqty: +qty,\n\t\t\t\t\t\ttotal: +qty * +price,\n\t\t\t\t\t\tamount: +qty * +price\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn restData.push(el);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\tpayload: {\n\t\t\t\t\tdata: [...restData]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tqty\n\t\t\t}));\n\t\t}\n\n\t\thandleCancel();\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowDown'];\n\t\tconst key = e.key;\n\n\t\tif (allowedKeys.includes(key)) {\n\t\t\te.preventDefault();\n\n\t\t\tif (key === 'ArrowUp') {\n\t\t\t\thandleFocus();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\thandleFocus();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\thandleFocus();\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tqty: oldQty\n\t\t\t}));\n\t\t}\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\thandleFocus();\n\t}, [inputRef]);\n\n\tuseEffect(() => {\n\t\thandleFocus();\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [modalRef]);\n\n\treturn (\n\t\t<Modal\n\t\t\tcentered\n\t\t\topen={open}\n\t\t\tonOk={handleEnter}\n\t\t\tonCancel={handleCancel}\n\t\t\ttitle={<p className=\"text-lg\">Ubah Quantity</p>}\n\t\t\tfooter={\n\t\t\t\t<div className=\"w-full h-auto flex items-center justify-end\">\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"btn-page bg-red-500 px-8 py-4\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleState('modalConfirmDelete', true);\n\t\t\t\t\t\t\t\thandleState('modalQty', false);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tHapus\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}>\n\t\t\t<Row ref={modalRef} tabIndex={1} onKeyDown={handleKeyDownGlobal} wrap gutter={[8, 8]}>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col span={10}>Barcode / PLU</Col>\n\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t<Col span={11}>{`${upcBarcode} / ${ItemCode}`}</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col span={10}>Nama Barang</Col>\n\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t<Col span={11}>{itemName}</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col span={10}>Harga Satuan</Col>\n\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t<Col span={11}>{currencyFormat(price, 0)}</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col span={10}>Qty</Col>\n\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t<Col span={11}>{oldQty}</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Col>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tid=\"input-qty\"\n\t\t\t\t\t\tvalue={state?.qty}\n\t\t\t\t\t\tdefaultValue={oldQty}\n\t\t\t\t\t\tdisabled={state.inputChanged}\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\tonChange={(event) => handleChange(event.target.value)}\n\t\t\t\t\t\tonPressEnter={() => {\n\t\t\t\t\t\t\thandleEnter();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg mt-5 bg-gray-200\"\n\t\t\t\t\t\tplaceholder=\"MASUKKAN JUMLAH QTY\"\n\t\t\t\t\t\tonKeyDown={handleKeyDownGlobal}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className=\"text-sm text-red-600 mt-2\">\n\t\t\t\t\t\tGunakan <b>&uarr;</b> untuk memasukkan jumlah qty dan tekan <b>ENTER</b> untuk konfirmasi\n\t\t\t\t\t</p>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</Modal>\n\t);\n}\n","import { Button, Col, Form, Input, Modal, Row } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalConfirmDelete({ open, state, handleCancel, handleState = (state, val) => {} }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { handleDeleteItem } = useCartOrder();\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { isGrantedAccess = false, loading = false } = useSelector((state) => state?.auth);\n\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\tconst modalRef = useRef(null);\n\tconst emailRef = useRef();\n\tconst passwordRef = useRef();\n\tconst deleteRef = useRef(null);\n\n\tconst [form] = Form.useForm();\n\n\tconst onFinish = (values) => {\n\t\tif (isGrantedAccess) {\n\t\t\thandleDeleteItem(selectedRowTransaction?.ItemCode);\n\t\t\thandleCancel();\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1031'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\t}, [open]);\n\n\treturn (\n\t\t<Modal centered open={open} onCancel={handleCancel} title={<h1 className=\"text-lg\">Hapus Barang</h1>} footer={false}>\n\t\t\t<div ref={modalRef} tabIndex={1}>\n\t\t\t\t{isGrantedAccess ? (\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"w-full h-auto p-5 py-7 bg-gray-100 rounded-lg\">\n\t\t\t\t\t\t\t<h1 className=\"text-base text-center \">\n\t\t\t\t\t\t\t\t<b>Konfirmasi Berhasil.</b> Anda dapat menghapus item/barang yang terpilih.\n\t\t\t\t\t\t\t</h1>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tref={deleteRef}\n\t\t\t\t\t\t\t\tclassName=\"btn-page w-max px-7 mx-auto mt-5\"\n\t\t\t\t\t\t\t\tonClick={() => onFinish(form.getFieldsValue())}\n\t\t\t\t\t\t\t\tonKeyDown={(event) => {\n\t\t\t\t\t\t\t\t\tif (document.activeElement.id !== 'input-qty' && isSelected) {\n\t\t\t\t\t\t\t\t\t\tif (event.ctrlKey && event.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\tonFinish(form.getFieldsValue());\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\tHapus Item\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"mb-5\">\n\t\t\t\t\t\t\t<p className=\"text-base text-gray-800\">\n\t\t\t\t\t\t\t\tApakah anda yakin akan menghapus item/barang <b>{selectedRowTransaction?.ItemName}</b>. Mohon konfirmasi terlebih\n\t\t\t\t\t\t\t\tdahulu.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\tform={form}\n\t\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\tonFinishFailed={console.log}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t\t<Row wrap gutter={[8, 0]}>\n\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tdisable={loading}\n\t\t\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full btn-page px-7\">\n\t\t\t\t\t\t\t\t\t\t\t\tValidasi\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancel}>\n\t\t\t\t\t\t\t\t\t\t\t\tKembali\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Form, Input, Modal } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalPendingPayment(props) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { visible, onCancel } = props;\n\tconst { transactionHolds = [], loading = false } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchItemRef } = useCartOrder();\n\n\tconst refTable = useRef(null);\n\tconst refInput = useRef(null);\n\tconst modalRef = useRef(null);\n\tconst [state, setState] = useState({\n\t\tsearch: '',\n\t\tt: 0,\n\t\tisSelected: false,\n\t\tdataTable: [],\n\t\tselectedData: {}\n\t});\n\n\tconst handleDetailHoldTrx = (billNo) => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD_DETAIL',\n\t\t\tpayload: {\n\t\t\t\tbillNo\n\t\t\t},\n\t\t\thistory,\n\t\t\tonClose: handleCancel,\n\t\t\tonState: props?.handleState\n\t\t});\n\t};\n\n\tconst onKeyPress = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowDown', 'Enter', 'Escape'];\n\t\tconst { t, dataTable } = state;\n\n\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\t\tif (e.key === 'f') {\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (allowedKeys.includes(e.key) && visible) {\n\t\t\trefInput && refInput.current.blur();\n\t\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\n\t\t\tconst table = refTable && refTable.current;\n\n\t\t\tif (e.key === 'ArrowUp' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tif (t >= 2) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t - 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t - 1]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (t === 1) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: 0,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (tr[t - 1]) {\n\t\t\t\t\treturn tr[t - 1].focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowDown' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (t === dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: dataTable.length,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[dataTable.length]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t]) {\n\t\t\t\t\t\treturn tr[t].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (t < dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t + 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t + 1]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t + 1]) {\n\t\t\t\t\t\treturn tr[t + 1].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' && state?.isSelected) {\n\t\t\t\tconst isNotEmptyTrx = Object.keys(state?.selectedData || {}).length !== 0;\n\n\t\t\t\tfocusInput();\n\t\t\t\tif (isNotEmptyTrx) {\n\t\t\t\t\thandleDetailHoldTrx(state?.selectedData?.billNo);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\thandleCancel();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleDataTable = (query = '') => {\n\t\tif (query && query !== '') {\n\t\t\tconst filtered = transactionHolds\n\t\t\t\t.filter(\n\t\t\t\t\t(el) => el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0 || el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0\n\t\t\t\t)\n\t\t\t\t.map((val, i) => ({ ...val, key: i + 1 }));\n\n\t\t\tif (filtered.length !== 0) {\n\t\t\t\tsetState({\n\t\t\t\t\t...state,\n\t\t\t\t\tdataTable: filtered,\n\t\t\t\t\tt: 0,\n\t\t\t\t\tselectedData: {},\n\t\t\t\t\tisSelected: false\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultTrx = transactionHolds?.map((val, i) => ({ ...val, key: i + 1 }))?.slice(0, 30);\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: defaultTrx,\n\t\t\tt: 0,\n\t\t\tselectedData: {},\n\t\t\tisSelected: false\n\t\t});\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tisSelected: false,\n\t\t\tselectedData: {}\n\t\t});\n\n\t\tonCancel();\n\t};\n\n\tconst focusInput = () => {\n\t\tif (refInput && refInput.current !== null) {\n\t\t\trefInput.current.focus();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t\tsetState({\n\t\t\t...state,\n\t\t\tt: 0\n\t\t});\n\n\t\treturn () => {\n\t\t\tsetState(() => {\n\t\t\t\treturn;\n\t\t\t});\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst data = transactionHolds.map((val, i) => ({ ...val, key: i + 1 }));\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: data?.slice(0, 30)\n\t\t});\n\n\t\tfocusInput();\n\t}, [transactionHolds]);\n\n\tuseEffect(() => {\n\t\tconst table = refTable && refTable.current !== null && refTable.current;\n\n\t\tif (table) {\n\t\t\tfocusInput();\n\t\t\tdocument.addEventListener('keydown', onKeyPress);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyPress);\n\t\t};\n\t}, [refTable, state]);\n\n\treturn (\n\t\t<Modal open={visible} onCancel={handleCancel} centered width={850} footer={null}>\n\t\t\t<div ref={modalRef} onKeyDown={onKeyPress} className=\"w-full h-auto\">\n\t\t\t\t<div className=\"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4\">\n\t\t\t\t\t<h1 className=\"text-xl font-semibold text-center\">Transaksi Pending</h1>\n\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Form className=\"w-full\">\n\t\t\t\t\t\t<Form.Item className=\"w-full\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tref={refInput}\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tplaceholder=\"Masukkan Nomor Bill( F )\"\n\t\t\t\t\t\t\t\tclassName=\"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleDataTable(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<table ref={refTable} id=\"table\" className=\"table-customer w-full relative\">\n\t\t\t\t\t\t<thead className=\"w-full\">\n\t\t\t\t\t\t\t<tr key=\"id-head\" className=\"w-full bg-primary focus:bg-gray-700 h-14\">\n\t\t\t\t\t\t\t\t<th className=\"w-max text-center text-white px-5\">No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5\">Tanggal Transaksi</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5\">Bill No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5\">Subtotal</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{state?.dataTable?.map((item, index) => {\n\t\t\t\t\t\t\t\tconst { billNo = '', billTime = '', subTotal = '', key = '' } = item || {};\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\t\t\t\ttabIndex={index}\n\t\t\t\t\t\t\t\t\t\tclassName={`tr-data h-14 ${index % 2 === 0 ? 'bg-white' : 'bg-gray-100'} ${\n\t\t\t\t\t\t\t\t\t\t\tstate?.selectedDataTrx?.billNo === item?.billNo ? 'bg-yellow-200' : 'bg-white'\n\t\t\t\t\t\t\t\t\t\t} focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer`}\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\t\t\t\t\t\t\tselectedDataTrx: item\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\thandleDetailHoldTrx(billNo);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-center\">{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">{moment(billTime).format('DD MMM YYYY hh:mm:ss')}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 h-14 text-left flex items-center flex-row gap-2 content-center\">\n\t\t\t\t\t\t\t\t\t\t\t{billNo}\n\t\t\t\t\t\t\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">Rp {currencyFormat(subTotal, 0)}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center \">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemCode',\n\t\tdataIndex: 'ItemCode',\n\t\ttitle: <p className=\"text-left uppercase\">PLU</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'upcBarcode',\n\t\tdataIndex: 'upcBarcode',\n\t\ttitle: <p className=\"text-left uppercase\">Barcode Satuan</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left uppercase\">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 300,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'uom',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center \">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center \">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t}\n];\n\nexport default function TableSearchItem({ modalRef, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { searchResult: data = [] } = useSelector((state) => state?.transaction);\n\tconst { handleAddItem, handleFocus } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst item = data[index];\n\n\t\thandleAddItem(item, 'table');\n\t\thandleCancel();\n\t\tsetActiveIndex(-1);\n\t\thandleFocus();\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'F4':\n\t\t\t\tsetActiveIndex(0);\n\t\t\t\tref && ref.current !== null && ref.current.focus();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\thandleSaveSelected(activeIndex);\n\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleCancel();\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetActiveIndex(-1);\n\n\t\tconst modal = modalRef && modalRef.current !== null && modalRef.current;\n\t\tif (modal) {\n\t\t\tif (ref && ref.current) {\n\t\t\t\tref.current.focus();\n\t\t\t}\n\n\t\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [modalRef]);\n\n\tuseEffect(() => {\n\t\tconst table = ref && ref.current !== null && ref.current;\n\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [modalRef, ref, activeIndex, data]);\n\n\treturn (\n\t\t<div className=\"w-full h-96 overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th key={dataIndex} className={`text-${align} px-3 text-white`} style={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={`w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tindex === activeIndex ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer transition-all`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td key={dataIndex} className={`text-${align} px-3`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/3 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>F3</b> untuk mencari barang by plu/barcode barang. <b>F4</b> untuk memilih tabel, kemudian{' '}\n\t\t\t\t\t\t\t<b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel, tekan <b>Enter</b> untuk konfirmasi item/barang pilihan\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, Modal, notification } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useCartOrder from '../hooks/useCartOrder';\nimport TableSearchItem from './TableSearchItem';\n\nexport default function ModalTableSearchItem({ open = false, state, handleState, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst { loading = false } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchInputRef, form } = useCartOrder();\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.resetFields();\n\t\t\tfocusInput();\n\t\t\treturn;\n\t\t}\n\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst focusInput = () => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t\tinputRef.current.select();\n\t\t}\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\t\t\tfocusInput();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t\tform.resetFields();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst modal = modalRef && modalRef.current !== null && modalRef.current;\n\n\t\tif (modal) {\n\t\t\tfocusInput();\n\t\t\tdocument.addEventListener('keydown', onKeyDown);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, [modalRef, open]);\n\n\treturn (\n\t\t<Modal open={open} onCancel={handleCancel} footer={false} centered width={1000} title=\"Pencarian Barang\">\n\t\t\t<div ref={modalRef} onKeyDown={onKeyDown} className=\"w-full h-auto\" id=\"modal-container\">\n\t\t\t\t<div>\n\t\t\t\t\t<Form form={form}>\n\t\t\t\t\t\t<Form.Item name=\"search\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t// value={state?.barcode}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg border-2 border-gray-400\"\n\t\t\t\t\t\t\t\tplaceholder=\"MASUKKAN UPL / BARCODE ITEM (F3)\"\n\t\t\t\t\t\t\t\t// onChange={(event) => {\n\t\t\t\t\t\t\t\t// \thandleState('barcode', event.target.value);\n\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\thandleSearch(event.target.value);\n\t\t\t\t\t\t\t\t\tform.resetFields();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full mt-4\">\n\t\t\t\t\t<TableSearchItem modalRef={modalRef} handleCancel={handleCancel} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center \">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemCode',\n\t\tdataIndex: 'ItemCode',\n\t\ttitle: <p className=\"text-left \">PLU</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left \">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 300,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'qty',\n\t\tdataIndex: 'qty',\n\t\ttitle: <p className=\"text-center \">QTY</p>,\n\t\trender: (val) => <p className=\"text-center\">{val}</p>,\n\t\twidth: 75,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'uom',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center \">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center \">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'discVal',\n\t\tdataIndex: 'discVal',\n\t\ttitle: <p className=\"text-center \">DISKON %</p>,\n\t\trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'discVa',\n\t\tdataIndex: 'discVal',\n\t\ttitle: <p className=\"text-center \">DISKON @</p>,\n\t\trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'total',\n\t\tdataIndex: 'total',\n\t\ttitle: <p className=\"text-center \">TOTAL</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 250,\n\t\talign: 'center',\n\t\tfixed: 'right'\n\t}\n];\n\nexport default function TableOrderItem({ state = {}, handleState = (state, val) => {}, ...props }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { data = [], selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst selected = data[index];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tselectedRowTransaction: selected\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (e.key === 'ArrowRight') {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\t\t\tsetActiveIndex(0);\n\n\t\t\tref && ref.current !== null && ref.current.focus();\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\thandleState('modalConfirmDelete', true);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleFocus();\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (ref && ref.current) {\n\t\t\tref.current.focus();\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [data]);\n\n\tuseEffect(() => {\n\t\tconst table = ref.current;\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [ref, activeIndex]);\n\n\tuseEffect(() => {\n\t\thandleSaveSelected(activeIndex);\n\t}, [activeIndex]);\n\n\t// useEffect(() => {\n\t// \tconst isSelectedRow = Object.keys(selectedRowTransaction).length !== 0;\n\n\t// \tif (!isSelectedRow) {\n\t// \t\tsetActiveIndex(-1);\n\t// \t\tref.current.blur();\n\t// \t\treturn;\n\t// \t}\n\t// }, [selectedRowTransaction]);\n\n\treturn (\n\t\t<div className=\"w-full h-full overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th key={dataIndex + title} className={`text-${align} px-3 text-white`} style={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={`w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tindex === activeIndex ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\n\t\t\t\t\t\t\t\thandleState('modalQty', true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td key={dataIndex} className={`text-${align} px-3`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/5 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>&rarr;</b> lalu <b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel & <b>ESC</b>{' '}\n\t\t\t\t\t\t\tuntuk scan barang\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, notification } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport actions from '../../redux/transaction/actions';\nimport { currencyFormat } from '../../utils/helper/utilities';\nimport './app.css';\nimport ButtonActionOrder from './components/ButtonActionOrder';\nimport HeaderLayout from './components/HeaderLayout';\nimport ModalChangeQty from './components/ModalChangeQty';\nimport ModalConfirmDelete from './components/ModalConfirmDelete';\nimport ModalPendingPayment from './components/ModalPendingPayment';\nimport ModalTableSearchItem from './components/ModalTableSearchItem';\nimport TableOrderItem from './components/TableOrderItem';\nimport useCartOrder from './hooks/useCartOrder';\nimport usePayment from './hooks/usePayment';\n\nexport default function NewLayout() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { getTotalQty, getGrandTotal } = usePayment();\n\tconst { handleFocus, inputRef, form, handleSearch, handleAddItem, handleResetForm } = useCartOrder();\n\tconst { contentStatus = 'isMenu', searchResult = [], loading = false, billNo = '', billDate = '' } = useSelector((state) => state?.transaction);\n\tconst { isLog = false, authorized = false } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst [state, setState] = useState({\n\t\tmodalPendingPayment: false,\n\t\tmodalSearchItem: false,\n\t\tmodalConfirmDelete: false,\n\t\tmodalQty: false,\n\t\tbarcode: '',\n\t\ttableIndex: -1\n\t});\n\n\tconst handleCancel = () => {\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isMenu'\n\t\t\t}\n\t\t});\n\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tmodalPendingPayment: false,\n\t\t\tmodalSearchItem: false,\n\t\t\tmodalConfirmDelete: false,\n\t\t\tmodalQty: false,\n\t\t\tbarcode: '',\n\t\t\ttableIndex: -1\n\t\t}));\n\t};\n\n\tconst onKeyDownGlobal = (event) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.target.blur();\n\t\t\thandleFocus();\n\t\t}\n\n\t\tif (event.key === 'Tab') {\n\t\t\thandleFocus();\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\tconst handleSearchItem = (query = '') => {\n\t\tif (query && query.length !== 0) {\n\t\t\tif (query.length >= 6) {\n\t\t\t\thandleSearch(query);\n\t\t\t} else {\n\t\t\t\thandleResetForm();\n\n\t\t\t\tnotification.warning({\n\t\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\t\tdescription: 'Masukkan kode yang benar! Min. kode adalah 6 digit'\n\t\t\t\t});\n\n\t\t\t\thandleFocus();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\thandleResetForm();\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan kode yang terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleState = (state, value) => {\n\t\treturn setState((prev) => ({\n\t\t\t...prev,\n\t\t\t[state]: value\n\t\t}));\n\t};\n\n\tuseEffect(() => {\n\t\thandleCancel();\n\t\thandleFocus();\n\n\t\tif (isLog && authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/BACK_MENU'\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: 'auth/property'\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\tpayload: {\n\t\t\t\t\tcontentStatus: 'isMenu'\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isLog || !authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'auth/LOGOUT_POS',\n\t\t\t\thistory\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t}, [isLog, authorized]);\n\n\tuseEffect(() => {\n\t\thandleFocus();\n\t\thandleCancel();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (contentStatus === 'isMenu') {\n\t\t\thandleFocus();\n\t\t}\n\t}, [contentStatus]);\n\n\tuseEffect(() => {\n\t\tif (document.activeElement.id === 'scan-item') {\n\t\t\tif (searchResult.length !== 0 && searchResult.length === 1) {\n\t\t\t\thandleAddItem({ upcBarcode: searchResult[0]?.UPCbarcode, ItemCode: '' }, 'input');\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t}, [searchResult, inputRef]);\n\n\tuseEffect(() => {\n\t\tinputRef && inputRef.current !== null && inputRef.current.focus();\n\t}, [billNo, billDate, inputRef, state]);\n\n\treturn (\n\t\t<div className=\"w-screen h-screen overflow-hidden relative pb-2.5\">\n\t\t\t<div className=\"w-full h-full grid grid-cols-12 gap-3\" style={{ gridTemplateRows: 'repeat(24, minmax(0, 1fr))' }}>\n\t\t\t\t<div className=\"col-span-12 row-span-3 bg-primary\">\n\t\t\t\t\t<HeaderLayout />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 row-span-5 pl-2.5\">\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg\">\n\t\t\t\t\t\t<div className=\"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-3xl text-white font-semibold text-right\">TOTAL BELANJA</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-2 col-span-6 relative\">\n\t\t\t\t\t\t\t<Form form={form} layout=\"vertical\">\n\t\t\t\t\t\t\t\t<div className=\"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full\" />\n\t\t\t\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5\">\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-16 bg-primary rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-center flex-col gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-gray-200 text-xs\">TOTAL QTY</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-white text-lg font-bold\">{getTotalQty()}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-5\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full bg-white rounded-lg overflow-hidden\" style={{ height: '68px' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item name=\"search-item\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"scan-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={state?.barcode}\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Barcode / PLU Barang (ESC / TAB)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '68px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSearchItem(event.target.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbarcode: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end p-3\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-7xl text-white font-semibold text-right\">{currencyFormat(getGrandTotal(), 0)}</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-2 pr-2.5\" style={{ gridRow: 'span 21 / span 21' }}>\n\t\t\t\t\t<ButtonActionOrder state={state} handleState={handleState} handleFocus={handleFocus} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 pl-2.5\" style={{ gridRow: 'span 16 / span 16' }}>\n\t\t\t\t\t<TableOrderItem handleFocus={handleFocus} handleState={handleState} state={state} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ModalPendingPayment\n\t\t\t\tvisible={state?.modalPendingPayment}\n\t\t\t\tonCancel={handleCancel}\n\t\t\t\thandleSearchFocus={handleFocus}\n\t\t\t\thandleState={handleState}\n\t\t\t/>\n\t\t\t<ModalTableSearchItem open={state?.modalSearchItem} handleCancel={handleCancel} state={state} handleState={handleState} />\n\t\t\t<ModalConfirmDelete open={state?.modalConfirmDelete} handleCancel={handleCancel} state={state} handleState={handleState} />\n\t\t\t<ModalChangeQty open={state?.modalQty} handleCancel={handleCancel} state={state} handleState={handleState} />\n\t\t</div>\n\t);\n}\n","import { useDispatch, useSelector } from 'react-redux';\n\nexport default function usePayment() {\n\tconst dispatch = useDispatch();\n\n\tconst { billNo = '', billDate = '', data = [] } = useSelector((state) => state?.transaction);\n\tconst { cashier = {}, property = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst getTotalQty = () => data?.reduce((acc, { qty = 0 }) => +acc + +qty, 0) || 0;\n\n\tconst getSubtotal = () => data?.reduce((acc, { total = 0 }) => +acc + +total, 0) || 0;\n\n\tconst getDiscountTotal = () => 0;\n\n\tconst getGrandTotal = () => {\n\t\treturn getSubtotal() - getDiscountTotal();\n\t};\n\n\tconst getCashPaid = (settles = []) => {\n\t\tconst totalCashPay =\n\t\t\tsettles?.length !== 0\n\t\t\t\t? settles.reduce((acc, cur) => {\n\t\t\t\t\t\treturn +acc + +cur.cashPay;\n\t\t\t\t  }, 0)\n\t\t\t\t: 0;\n\n\t\treturn totalCashPay;\n\t};\n\n\tconst getCashChange = (settles = [], cashPaid = 0) => {\n\t\tconst grandTotal = getGrandTotal();\n\t\tconst totalCashPay = getCashPaid(settles);\n\n\t\tif (grandTotal === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (cashPaid > grandTotal) {\n\t\t\treturn cashPaid - grandTotal;\n\t\t}\n\n\t\tif (totalCashPay > grandTotal) {\n\t\t\treturn totalCashPay - grandTotal;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\tconst getBalanceDue = (settles = [], cashPaid = 0) => {\n\t\tconst cashChange = getCashChange(settles, cashPaid);\n\t\tconst totalCashPay = getCashPaid(settles);\n\t\tconst grandTotal = getGrandTotal();\n\n\t\tif (totalCashPay >= grandTotal) {\n\t\t\treturn totalCashPay - grandTotal - cashChange;\n\t\t}\n\n\t\treturn getGrandTotal() - +totalCashPay;\n\t};\n\n\tconst paymentStore = (state, handlePrint) => {\n\t\tconst header = {\n\t\t\tbillNo,\n\t\t\tbillDate,\n\t\t\tcustCode: '',\n\t\t\tcustName: '',\n\t\t\tdiscPrc: '0',\n\t\t\tdiscValue: '0',\n\t\t\ttaxPrc: '0',\n\t\t\ttaxValue: '0',\n\t\t\tsubTotal: getSubtotal(),\n\t\t\tgrandTotal: getGrandTotal(),\n\t\t\tshiftID: cashier?.shiftId || '0',\n\t\t\toutletCode: property?.outletCode\n\t\t};\n\n\t\tconst settle =\n\t\t\tstate.settles?.length !== 0 &&\n\t\t\tstate.settles?.map((settle) => {\n\t\t\t\treturn {\n\t\t\t\t\t...settle,\n\t\t\t\t\tcashChange: getCashChange(state?.settles, settle?.cashPay)\n\t\t\t\t};\n\t\t\t});\n\n\t\tconst payload = {\n\t\t\theader: [header],\n\t\t\tsettle,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/STORE',\n\t\t\tpayload,\n\t\t\tbill: {\n\t\t\t\tfrom: billDate,\n\t\t\t\tto: billDate\n\t\t\t},\n\t\t\thandlePrint: () => {\n\t\t\t\tif (typeof handlePrint === 'function') {\n\t\t\t\t\treturn handlePrint();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\treturn { getTotalQty, getDiscountTotal, getSubtotal, getGrandTotal, getCashPaid, getCashChange, getBalanceDue, paymentStore };\n}\n","import { Button, Modal } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OpeningShiftButton() {\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst history = useHistory();\n\tconst [isOpen, setIsOpen] = useState(!isOpeningShift);\n\n\tconst openPage = (e) => {\n\t\thistory.push('/pos/opening-shift');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F7') {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\n\t\t\topenPage();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onkeydown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t\tOpening shift\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t</Button>\n\n\t\t\t<ModalOpeningShift isOpen={isOpen} onClose={() => setIsOpen(false)} />\n\t\t</>\n\t);\n}\n\nfunction ModalOpeningShift({ isOpen, onClose }) {\n\treturn (\n\t\t<Modal centered width={500} footer={false} onCancel={onClose} open={isOpen} bodyStyle={{ backgroundColor: '#f8f8f8', borderRadius: '12px' }}>\n\t\t\t<h1 className=\"text-center font-semibold text-xl text-red-500\">PERHATIAN !!!</h1>\n\t\t\t<p className=\"text-center text-base leading-snug mt-5\">\n\t\t\t\tAnda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih\n\t\t\t\tdahulu dengan cara menekan tombol <kbd className=\"kbd\">f7</kbd> atau menutup popup ini. Terima kasih\n\t\t\t</p>\n\t\t</Modal>\n\t);\n}\n"],"sourceRoot":""}