{"version":3,"sources":["pages/POS/hooks/usePayment.js","pages/POS/widget/OpeningShiftButton.js","pages/POS/widget/ChangeQtyItem.js","pages/POS/widget/CheckItemPrice.js","pages/POS/widget/DeleteItemButton.js","pages/POS/widget/ListItemButton.js","pages/POS/hooks/useCartOrder.js","pages/POS/widget/NewOrderButton.js","pages/POS/widget/OpenPendingButton.js","pages/POS/widget/OptionButton.js","pages/POS/widget/PaymentButton.js","pages/POS/widget/SavePendingButton.js","pages/POS/components/ButtonActionOrder.js","pages/POS/components/HeaderLayout.js","pages/POS/components/ModalConfirmChangeQty.js","pages/POS/components/ModalChangeQty.js","pages/POS/components/ModalConfirmDelete.js","pages/POS/components/ModalPendingPayment.js","pages/POS/components/TableSearchItem.js","pages/POS/components/ModalTableSearchItem.js","pages/POS/components/TableOrderItem.js","pages/POS/index.js"],"names":["usePayment","dispatch","useDispatch","history","useHistory","billNo","billDate","data","useSelector","state","transaction","cashier","property","JSON","parse","localStorage","getItem","getSubtotal","reduce","acc","total","getDiscountTotal","getGrandTotal","getCashPaid","settles","length","cur","amountPaid","getCashChange","cashPaid","grandTotal","totalCashPay","getTotalQty","qty","getBalanceDue","cashChange","paymentStore","handlePrint","payload","header","custCode","custName","discPrc","discValue","taxPrc","taxValue","subTotal","shiftID","shiftId","outletCode","settle","map","cashPay","paidType","amount","details","el","i","ItemNo","type","bill","from","to","OpeningShiftButton","app","isOpeningShift","isOpening","isOpen","setIsOpen","useState","openPage","e","push","onKeyDownGlobal","key","target","blur","preventDefault","useEffect","document","addEventListener","removeEventListener","onkeydown","onClick","className","ModalOpeningShift","onClose","centered","width","footer","onCancel","open","bodyStyle","backgroundColor","borderRadius","ChangeQtyItem","hs","val","openModal","handleKeyDownGlobal","CheckItemPriceButton","disabled","DeleteItemButton","selectedRowTransaction","isSelected","Object","keys","handleOpenModal","activeElement","id","ctrlKey","ListItemButton","handleOpen","onKeyDown","useCartOrder","inputRef","useRef","form","useForm","searchResult","handleFocus","current","focus","handleResetForm","resetFields","actions","SET_STATE","handleAddItem","item","findData","find","itm","upcBarcode","undefined","anyData","filter","restData","price","contentStatus","itemCode","ItemCode","handleSearch","query","notification","warning","message","description","handleSelectItem","handleDeleteItem","filteredDataTrx","NewOrderButton","props","loading","handleNewOrder","transactionList","TRANSACTION_BILL_NO","OpenPendingButton","getHoldTrx","TRANSACTION_HOLD_LIST","OptionsButton","PaymentButton","tenderMedia","handleOpenPayment","SavePendingButton","isDisabled","handlePendingPayment","a","ButtonActionOrder","handleState","isSelectedRow","style","gridTemplateRows","HeaderLayout","user","setState","modalCashBox","currentTime","moment","timerId","setInterval","prev","clearInterval","src","preview","format","role","username","ModalConfirmChangeQty","onHandleCancel","handleCancel","isGrantedAccess","auth","oldQty","success","title","name","layout","initialValues","remember","onFinish","values","email","password","window","btoa","funcId","onFinishFailed","console","log","autoComplete","maxWidth","wrap","gutter","span","Item","label","rules","required","autoFocus","placeholder","Password","disable","htmlType","ModalChangeQty","onHandleState","itemName","modalRef","inputChanged","modalConfirm","handleFocusSelect","select","handleEnter","error","handleChangeQty","info","includes","onOk","size","danger","ref","tabIndex","currencyFormat","value","defaultValue","onChange","event","handleChange","onPressEnter","onFocus","ModalConfirmDelete","emailRef","passwordRef","ItemName","ModalPendingPayment","visible","transactionHolds","searchItemRef","refTable","refInput","search","t","dataTable","selectedData","handleDetailHoldTrx","onState","onKeyPress","focusInput","table","tbody","lastChild","tr","children","isNotEmptyTrx","slice","LoadingOutlined","spin","filtered","toLowerCase","indexOf","defaultTrx","handleDataTable","index","billTime","selectedDataTrx","columns","dataIndex","render","_","align","trim","toUpperCase","TableSearchItem","handdleFocusInput","buttonRefs","activeIndex","setActiveIndex","handleSaveSelected","handleKeyDown","prevIndex","Math","max","min","scrollIntoView","behavior","block","border","ModalTableSearchItem","searchInputRef","suffix","TableOrderItem","selected","isModalActive","modalPendingPayment","modalSearchItem","modalConfirmDelete","modalQty","fixed","NewLayout","isLog","authorized","barcode","tableIndex","isDisabledInput","UPCbarcode","height","handleSearchItem","gridRow","handleSearchFocus"],"mappings":"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","file":"static/js/25.cc8d55e2.chunk.js","sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nexport default function usePayment() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { billNo = '', billDate = '', data = [] } = useSelector((state) => state?.transaction);\n\tconst { cashier = {}, property = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst getTotalQty = () => data?.reduce((acc, { qty = 0 }) => +acc + +qty, 0) || 0;\n\n\tconst getSubtotal = () => data?.reduce((acc, { total = 0 }) => +acc + +total, 0) || 0;\n\n\tconst getDiscountTotal = () => 0;\n\n\tconst getGrandTotal = () => {\n\t\treturn getSubtotal() - getDiscountTotal();\n\t};\n\n\tconst getCashPaid = (settles = []) => {\n\t\tconst totalCashPay =\n\t\t\tsettles?.length !== 0\n\t\t\t\t? settles.reduce((acc, cur) => {\n\t\t\t\t\t\treturn +acc + +cur.amountPaid;\n\t\t\t\t  }, 0)\n\t\t\t\t: 0;\n\n\t\treturn totalCashPay;\n\t};\n\n\tconst getCashChange = (settles = [], cashPaid = 0) => {\n\t\tconst grandTotal = getGrandTotal();\n\t\tconst totalCashPay = getCashPaid(settles);\n\n\t\tif (grandTotal === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (cashPaid > grandTotal) {\n\t\t\treturn cashPaid - grandTotal;\n\t\t}\n\n\t\tif (totalCashPay > grandTotal) {\n\t\t\treturn totalCashPay - grandTotal;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\tconst getBalanceDue = (settles = [], cashPaid = 0) => {\n\t\tconst cashChange = getCashChange(settles, cashPaid);\n\t\tconst totalCashPay = getCashPaid(settles);\n\t\tconst grandTotal = getGrandTotal();\n\n\t\tif (totalCashPay >= grandTotal) {\n\t\t\treturn totalCashPay - grandTotal - cashChange;\n\t\t}\n\n\t\treturn getGrandTotal() - +totalCashPay;\n\t};\n\n\tconst paymentStore = (state, handlePrint) => {\n\t\tconst header = {\n\t\t\tbillNo,\n\t\t\tbillDate,\n\t\t\tcustCode: '',\n\t\t\tcustName: '',\n\t\t\tdiscPrc: '0',\n\t\t\tdiscValue: '0',\n\t\t\ttaxPrc: '0',\n\t\t\ttaxValue: '0',\n\t\t\tsubTotal: getSubtotal(),\n\t\t\tgrandTotal: getGrandTotal(),\n\t\t\tshiftID: cashier?.shiftId || '0',\n\t\t\toutletCode: property?.outletCode\n\t\t};\n\n\t\tconst settle =\n\t\t\tstate.settles?.length !== 0 &&\n\t\t\tstate.settles?.map((settle) => {\n\t\t\t\tconst cashPaid = settle.cashPay;\n\t\t\t\tconst cashChange = getCashChange(state?.settles, settle?.cashPay);\n\t\t\t\tconst paidType = +settle?.paidType;\n\n\t\t\t\treturn {\n\t\t\t\t\t...settle,\n\t\t\t\t\tcashChange: paidType === 1 ? cashChange : 0,\n\t\t\t\t\tamount: paidType === 1 ? cashPaid - cashChange : settle?.amount,\n\t\t\t\t\tamountPaid: paidType === 1 ? cashPaid - cashChange : settle?.amountPaid\n\t\t\t\t};\n\t\t\t});\n\n\t\tconst payload = {\n\t\t\theader: [header],\n\t\t\tsettle,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/STORE',\n\t\t\tpayload,\n\t\t\tbill: {\n\t\t\t\tfrom: billDate,\n\t\t\t\tto: billDate\n\t\t\t},\n\t\t\thandlePrint: () => {\n\t\t\t\tif (typeof handlePrint === 'function') {\n\t\t\t\t\treturn handlePrint();\n\t\t\t\t}\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\treturn { getTotalQty, getDiscountTotal, getSubtotal, getGrandTotal, getCashPaid, getCashChange, getBalanceDue, paymentStore };\n}\n","import { Button, Modal } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OpeningShiftButton() {\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst history = useHistory();\n\tconst [isOpen, setIsOpen] = useState(!isOpeningShift);\n\n\tconst openPage = (e) => {\n\t\thistory.push('/pos/opening-shift');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F7') {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\n\t\t\topenPage();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onkeydown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t\tOpening shift\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t</Button>\n\n\t\t\t<ModalOpeningShift isOpen={isOpen} onClose={() => setIsOpen(false)} />\n\t\t</>\n\t);\n}\n\nfunction ModalOpeningShift({ isOpen, onClose }) {\n\treturn (\n\t\t<Modal centered width={500} footer={false} onCancel={onClose} open={isOpen} bodyStyle={{ backgroundColor: '#f8f8f8', borderRadius: '12px' }}>\n\t\t\t<h1 className=\"text-center font-semibold text-xl text-red-500\">PERHATIAN !!!</h1>\n\t\t\t<p className=\"text-center text-base leading-snug mt-5\">\n\t\t\t\tAnda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih\n\t\t\t\tdahulu dengan cara menekan tombol <kbd className=\"kbd\">f7</kbd> atau menutup popup ini. Terima kasih\n\t\t\t</p>\n\t\t</Modal>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ChangeQtyItem({ hs = (state, val) => {} }) {\n\tconst openModal = () => {\n\t\ths('modalQty', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\n\t\t\topenModal();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t});\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={openModal}>\n\t\t\t<kbd className=\"kbd\">f3</kbd>\n\t\t\t<p>Ubah Quantity</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React from 'react';\n\nexport default function CheckItemPriceButton() {\n\treturn (\n\t\t<Button disabled className=\"btn-page rounded-lg\">\n\t\t\t<kbd className=\"kbd\">f8</kbd>\n\t\t\t<p>cek harga</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function DeleteItemButton({ hs = (state, val) => {} }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\n\tconst handleOpenModal = () => {\n\t\ths('modalConfirmDelete', true);\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tif (document.activeElement.id !== 'input-qty' && isSelected) {\n\t\t\tif (e.ctrlKey && e.key === 'Enter') {\n\t\t\t\te.preventDefault();\n\t\t\t\te.target.blur();\n\n\t\t\t\thandleOpenModal();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpenModal}>\n\t\t\t<kbd className=\"kbd\">ctrl+enter</kbd>\n\t\t\t<p>hapus item</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport default function ListItemButton({ hs = () => {} }) {\n\tconst handleOpen = () => {\n\t\ths('modalSearchItem', true);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key === 'F2') {\n\t\t\thandleOpen();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDown);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button className=\"btn-page rounded-lg\" onClick={handleOpen}>\n\t\t\t\t<kbd className=\"kbd\">f2</kbd>\n\t\t\t\t<p>Daftar Barang</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Form, notification } from 'antd';\nimport { useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function useCartOrder() {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst [form] = Form.useForm();\n\n\tconst { searchResult = [], data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleFocus = () => {\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleResetForm = () => {\n\t\tform.resetFields();\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tsearchResult: []\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thandleResetForm();\n\t\t\treturn;\n\t\t}\n\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleSelectItem = (selected = {}) => {\n\t\thandleAddItem({ ItemCode: selected, upcBarcode: '' }, 'select');\n\t};\n\n\tconst handleAddItem = (item = {}, from = 'input') => {\n\t\thandleResetForm();\n\n\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\n\t\tif (from === 'input' && findData !== undefined) {\n\t\t\tif (item?.upcBarcode !== undefined && item.upcBarcode && item.upcBarcode !== '') {\n\t\t\t\tconst findData = searchResult.find((itm) => +itm.upcBarcode === +item.upcBarcode);\n\t\t\t\tconst anyData = data.filter((el) => +el.upcBarcode === +item.upcBarcode);\n\n\t\t\t\t//* JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData?.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (+el.upcBarcode === +item.upcBarcode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData],\n\t\t\t\t\t\t\tcontentStatus: 'isMenu'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// * DITEMUKAN BANRANG NAMUN TIDAK ADA DI LIST TRANSAKSI\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tcontentStatus: 'isMenu',\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'select') {\n\t\t\tif (item.ItemCode && from === 'select') {\n\t\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\t\t// * JIKA DITEMUKAN BARANG DENGAN UPCBARCODE YANG SAMA +1 QTYNYA\n\t\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\t\tconst restData = [];\n\n\t\t\t\t\tdata.map((el) => {\n\t\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\t\tpayload: {\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (from === 'table') {\n\t\t\tconst findData = searchResult.find((itm) => itm.ItemCode === item.ItemCode);\n\t\t\tconst anyData = data.filter((el) => el.ItemCode === item.ItemCode);\n\n\t\t\tif (findData && anyData.length > 0) {\n\t\t\t\tconst restData = [];\n\n\t\t\t\tdata?.map((el) => {\n\t\t\t\t\tif (el.ItemCode === item.ItemCode) {\n\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\tqty: el.qty + 1,\n\t\t\t\t\t\t\ttotal: (+el.qty + 1) * el.price,\n\t\t\t\t\t\t\tamount: (+el.qty + 1) * el.price\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (findData && anyData.length === 0) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...findData,\n\t\t\t\t\t\t\t\titemCode: data.length + 1,\n\t\t\t\t\t\t\t\tqty: 1,\n\t\t\t\t\t\t\t\ttotal: findData.price,\n\t\t\t\t\t\t\t\tamount: findData.price\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t};\n\n\tconst handleDeleteItem = (itemCode = '') => {\n\t\tconst filteredDataTrx = (data?.length !== 0 && data?.filter(({ ItemCode }) => ItemCode !== itemCode)) || [];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tdata: filteredDataTrx,\n\t\t\t\tselectedRowTransaction: filteredDataTrx[0]\n\t\t\t}\n\t\t});\n\n\t\thandleFocus();\n\t};\n\n\treturn { inputRef, form, handleFocus, handleResetForm, handleSearch, handleSelectItem, handleAddItem, handleDeleteItem };\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function NewOrderButton(props) {\n\tconst dispatch = useDispatch();\n\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { cashier = {} } = app;\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst { hs = null } = props;\n\tconst { loading = false } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleNewOrder = () => {\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\ttransactionList: [],\n\t\t\t\tdata: []\n\t\t\t}\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t});\n\n\t\ths('data', []);\n\t\ths('t', 0);\n\t\ths('total', 0);\n\t\ths('selectedData', []);\n\t\ths('isSelected', []);\n\n\t\thandleFocus();\n\t}; \n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F1') {\n\t\t\t\te.target.blur();\n\t\t\t\tif (document.activeElement.id !== 'barcode') {\n\t\t\t\t\thandleNewOrder();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn e;\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button loading={loading} disabled={loading || !isOpeningShift} className=\"btn-page\" onClick={handleNewOrder}>\n\t\t\t<kbd className=\"kbd\">f1</kbd>\n\t\t\t<p>order baru</p>\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function OpenPendingButton({ hs = null }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst getHoldTrx = () => {\n\t\tdispatch({\n\t\t\ttype: actions.TRANSACTION_HOLD_LIST,\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst openModal = () => {\n\t\ths('modalPendingPayment', true);\n\t\tgetHoldTrx();\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (isOpeningShift) {\n\t\t\tif (e.key === 'F7') {\n\t\t\t\te.preventDefault();\n\t\t\t\topenModal();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\tgetHoldTrx();\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button disabled={!isOpeningShift} className=\"btn-page\" onClick={openModal}>\n\t\t\t\t<kbd className=\"kbd\">f7</kbd>\n\t\t\t\t<p>daftar pending</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button } from 'antd';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function OptionsButton() {\n\tconst history = useHistory();\n\n\tconst openPage = () => {\n\t\thistory.push('/pos/options');\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F9') {\n\t\t\te.target.blur();\n\t\t\topenPage();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<Button onClick={openPage} className=\"btn-page\">\n\t\t\t<kbd className=\"kbd\">f9</kbd>\n\t\t\toptions\n\t\t</Button>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function PaymentButton() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { tenderMedia = [], loading = false, data = [] } = useSelector((state) => state?.transaction);\n\n\tconst handleOpenPayment = () => {\n\t\tdispatch({\n\t\t\ttype: 'auth/property'\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isPayment'\n\t\t\t}\n\t\t});\n\n\t\thistory.push('/pos/payment');\n\t};\n\n\tconst getTenderMedia = () => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/TENDER_MEDIA'\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (e.key === 'F10') {\n\t\t\te.preventDefault();\n\t\t\thandleOpenPayment();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tgetTenderMedia();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Button disabled={tenderMedia.length === 0 || data?.length === 0} className=\"btn-page-2\" onClick={handleOpenPayment}>\n\t\t\t\t<kbd className=\"kbd\">f10</kbd>\n\t\t\t\t<p>pembayaran</p>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { Button } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nexport default function SavePendingButton({ isDisabled = false }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { data = [], loading = false, billNo = '', billDate = '' } = useSelector((state) => state?.transaction);\n\tconst { property = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst isOpeningShift = cashier?.isOpening || false;\n\n\tconst disabled = isDisabled || data?.length === 0 || loading || !isOpeningShift;\n\n\tconst handlePendingPayment = () => {\n\t\tconst subTotal = data.reduce((a, { total }) => +a + +total, 0);\n\n\t\tconst header = [\n\t\t\t{\n\t\t\t\tbillNo,\n\t\t\t\tbillDate,\n\t\t\t\tcustCode: '',\n\t\t\t\tcustName: '',\n\t\t\t\tdiscPrc: '0',\n\t\t\t\tdiscValue: '0',\n\t\t\t\ttaxPrc: '0',\n\t\t\t\ttaxValue: '0',\n\t\t\t\tsubTotal: subTotal,\n\t\t\t\tgrandTotal: subTotal,\n\t\t\t\tshiftID: cashier?.shiftId,\n\t\t\t\toutletCode: property?.outletCode\n\t\t\t}\n\t\t];\n\n\t\tconst payload = {\n\t\t\theader,\n\t\t\tdetails: data?.map((el, i) => ({ ...el, billNo, ItemNo: i + 1 }))\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD',\n\t\t\tpayload,\n\t\t\thistory\n\t\t});\n\t};\n\n\tconst onKeyDownGlobal = (e) => {\n\t\tif (!disabled) {\n\t\t\tif (e.key === 'F6') {\n\t\t\t\te.preventDefault();\n\t\t\t\thandlePendingPayment();\n\t\t\t}\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, [data]);\n\n\treturn (\n\t\t<Button loading={loading} disabled={disabled} className=\"btn-page\" onClick={handlePendingPayment}>\n\t\t\t<kbd className=\"kbd\">f6</kbd>\n\t\t\t<p>simpan pending</p>\n\t\t</Button>\n\t);\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ChangeQtyItem from '../widget/ChangeQtyItem';\nimport CheckItemPriceButton from '../widget/CheckItemPrice';\nimport DeleteItemButton from '../widget/DeleteItemButton';\nimport ListItemButton from '../widget/ListItemButton';\nimport NewOrderButton from '../widget/NewOrderButton';\nimport OpeningShiftButton from '../widget/OpeningShiftButton';\nimport OpenPendingButton from '../widget/OpenPendingButton';\nimport OptionsButton from '../widget/OptionButton';\nimport PaymentButton from '../widget/PaymentButton';\nimport SavePendingButton from '../widget/SavePendingButton';\n\nexport default function ButtonActionOrder({ handleState = (state, val) => {}, state = {}, handleFocus, ...props }) {\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { isOpening = false } = cashier;\n\n\tconst isSelectedRow = Object.keys(selectedRowTransaction)?.length !== 0;\n\n\treturn (\n\t\t<div className=\"w-full h-full\">\n\t\t\t{isOpening ? (\n\t\t\t\tisSelectedRow ? (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<DeleteItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ChangeQtyItem hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div className=\"\">\n\t\t\t\t\t\t\t<DiscountButton />\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t<div className=\"py-3\">\n\t\t\t\t\t\t\t<h1 className=\"text-base text-gray-700 text-center\">\n\t\t\t\t\t\t\t\tTekan <kbd className=\"kbd\">tab / esc</kbd> untuk kembali ke scanner\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<NewOrderButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<ListItemButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <div className=\"\">\n\t\t\t\t\t\t<SelectItemBtn />\n\t\t\t\t\t</div> */}\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<SavePendingButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OpenPendingButton hs={handleState} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<CheckItemPriceButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<PaymentButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t) : (\n\t\t\t\t<div className=\"w-full h-full grid grid-cols-1 gap-1\" style={{ gridTemplateRows: 'repeat(9, minmax(0, 1fr))' }}>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OpeningShiftButton />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t<OptionsButton />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Image } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function HeaderLayout() {\n\tconst { user = {}, cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst { billDate = '', billNo = '', loading = false } = useSelector((state) => state?.transaction);\n\n\tconst [state, setState] = useState({\n\t\tmodalCashBox: false,\n\t\tcurrentTime: moment()\n\t});\n\n\tuseEffect(() => {\n\t\tconst timerId = setInterval(() => {\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tcurrentTime: moment()\n\t\t\t}));\n\t\t}, 1000);\n\n\t\treturn () => {\n\t\t\tclearInterval(timerId);\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className=\"w-full h-full flex items-center justify-center\">\n\t\t\t<div className=\"w-full flex items-center justify-between px-5\">\n\t\t\t\t<div className=\"w-2/5 flex items-center gap-2\">\n\t\t\t\t\t<Image src=\"/logo-2.png\" className=\"w-16 object-cover\" preview={false} />\n\t\t\t\t\t<h1 className=\"text-xl text-white font-semibold leading-none\">Retail Point of Sales</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-max\">\n\t\t\t\t\t<div className=\"w-full flex items-center justify-end gap-5\">\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">bussiness date</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{moment(billDate).format('dddd, DD MMMM YYYY')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">today</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{moment().format('DD MMMM YYYY')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">time</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{state.currentTime.format('HH:mm:ss')}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"border-r-2 border-gray-300 pr-5\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">NO. TRANSAKSI</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{loading ? '...' : billNo || '-'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<p className=\"text-right text-gray-200 text-xs font-semibold uppercase\">\n\t\t\t\t\t\t\t\t{user?.role || 'nama kasir'} | ID 0{cashier?.shiftId || '0'}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<h1 className=\"text-right text-white text-md uppercase font-bold\">{user?.username || 'guest'}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { Button, Col, Form, Input, Modal, notification, Row } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport actions from '../../../redux/transaction/actions';\n\nexport default function ModalConfirmChangeQty({ open, state, onHandleCancel, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst [form] = Form.useForm();\n\n\tconst { isGrantedAccess = false, loading = false } = useSelector((state) => state?.auth);\n\tconst { selectedRowTransaction = {}, data = [] } = useSelector((state) => state?.transaction);\n\tconst { qty: oldQty, price = 0, ItemCode = '' } = selectedRowTransaction;\n\tconst { qty = 0 } = state;\n\n\tconst onFinish = (values) => {\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1031'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\n\t\tform.resetFields();\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tif (isGrantedAccess) {\n\t\t\t\tconst restData = [];\n\n\t\t\t\tdata?.map((el) => {\n\t\t\t\t\tif (el.ItemCode === ItemCode) {\n\t\t\t\t\t\trestData.push({\n\t\t\t\t\t\t\t...el,\n\t\t\t\t\t\t\tqty: +qty,\n\t\t\t\t\t\t\ttotal: +qty * +price,\n\t\t\t\t\t\t\tamount: +qty * +price\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn restData.push(el);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tdata: [...restData]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tonHandleCancel();\n\n\t\t\t\tnotification.success({\n\t\t\t\t\tmessage: 'Berhasil!',\n\t\t\t\t\tdescription: `Quantity berhasil diubah menjadi ${qty}.`\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}, [isGrantedAccess, open]);\n\n\treturn (\n\t\t<Modal centered open={open} onCancel={handleCancel} title={<h1 className=\"text-lg\">Void Quantity</h1>} footer={false}>\n\t\t\t<Form\n\t\t\t\tform={form}\n\t\t\t\tname=\"login\"\n\t\t\t\tlayout=\"vertical\"\n\t\t\t\tinitialValues={{\n\t\t\t\t\tremember: true\n\t\t\t\t}}\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tonFinishFailed={console.log}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t<Row wrap gutter={[15, 10]}>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Awal : <b>{oldQty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Akhir : <b>{qty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div className=\"p-3 bg-gray-200 rounded-md mb-5\">\n\t\t\t\t\t\t\tQty Void : <b>{+oldQty - +qty || 0}</b>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t<Input type=\"email\" autoFocus autoComplete=\"false\" placeholder=\"usertest@domain.com\" className=\"w-full h-12 rounded-md\" />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t<Input.Password type=\"password\" autoComplete=\"false\" placeholder=\"********\" className=\"w-full h-12 rounded-md\" />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-5\">\n\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t<Button disable={loading} loading={loading} type=\"primary\" htmlType=\"submit\" className=\"w-full btn-page px-7 h-12\">\n\t\t\t\t\t\t\t\t\tKonfirmasi\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7\"\n\t\t\t\t\t\t\t\t\tonClick={handleCancel}>\n\t\t\t\t\t\t\t\t\tKembali\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Form>\n\t\t</Modal>\n\t);\n}\n","import { Button, Col, Input, Modal, notification, Row } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport ModalConfirmChangeQty from './ModalConfirmChangeQty';\n\nexport default function ModalChangeQty({ open, handleCancel, onHandleState }) {\n\tconst dispatch = useDispatch();\n\n\tconst { selectedRowTransaction = {}, data = [] } = useSelector((state) => state?.transaction);\n\tconst { qty: oldQty, ItemCode = '', price = 0, upcBarcode = '', itemName = '' } = selectedRowTransaction;\n\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst [state, setState] = useState({\n\t\tqty: oldQty,\n\t\tinputChanged: false,\n\t\tmodalConfirm: false\n\t});\n\n\tconst onHandleCancel = () => {\n\t\thandleCancel();\n\t\tsetState({\n\t\t\tqty: oldQty,\n\t\t\tinputChanged: false,\n\t\t\tmodalConfirm: false\n\t\t});\n\t};\n\n\tconst handleFocus = () => {\n\t\tconst input = inputRef && inputRef.current !== null;\n\n\t\tif (input) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst handleFocusSelect = () => {\n\t\tconst input = inputRef && inputRef.current !== null;\n\n\t\tif (input) {\n\t\t\tinputRef.current.focus();\n\t\t\tinputRef.current.select();\n\t\t}\n\t};\n\n\tconst handleChange = (value) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tqty: +value\n\t\t}));\n\n\t\thandleFocus();\n\t};\n\n\tconst handleEnter = () => {\n\t\tconst { qty = 0 } = state;\n\t\thandleFocus();\n\n\t\tif (+qty === 0 || +qty <= 0) {\n\t\t\tnotification.error({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'Kuantitas tidak boleh kosong'\n\t\t\t});\n\n\t\t\thandleFocus();\n\t\t\treturn;\n\t\t}\n\n\t\tif (qty === '' || qty === oldQty) {\n\t\t\thandleChangeQty(+oldQty);\n\t\t\treturn;\n\t\t}\n\n\t\thandleChangeQty(qty);\n\t};\n\n\tconst handleChangeQty = (qty = oldQty) => {\n\t\tconst anyData = data?.length !== 0 && data?.filter((e) => e.ItemCode === ItemCode);\n\n\t\tif (anyData && qty <= 0) {\n\t\t\tnotification.info({\n\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\tdescription: 'QTY Tidak boleh Nol (0)'\n\t\t\t});\n\n\t\t\thandleFocusSelect();\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty < oldQty) {\n\t\t\thandleState('modalConfirm', true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (anyData && qty >= 1) {\n\t\t\tconst restData = [];\n\n\t\t\tdata?.map((el) => {\n\t\t\t\tif (el.ItemCode === ItemCode) {\n\t\t\t\t\trestData.push({\n\t\t\t\t\t\t...el,\n\t\t\t\t\t\tqty: +qty,\n\t\t\t\t\t\ttotal: +qty * +price,\n\t\t\t\t\t\tamount: +qty * +price\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn restData.push(el);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\tpayload: {\n\t\t\t\t\tdata: [...restData]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tqty\n\t\t\t}));\n\n\t\t\tonHandleCancel();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowRight', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];\n\t\tconst key = e.key;\n\n\t\tif (allowedKeys.includes(key)) {\n\t\t\tif (key === 'ArrowUp') {\n\t\t\t\thandleFocusSelect();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandleFocus();\n\t\t}\n\t};\n\n\tconst handleState = (state, val) => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\t[state]: val\n\t\t}));\n\t};\n\n\tuseEffect(() => {\n\t\tif (open && !state?.modalConfirm) {\n\t\t\thandleFocus();\n\t\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [open, state]);\n\n\tuseEffect(() => {\n\t\thandleFocusSelect();\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tqty: oldQty\n\t\t}));\n\t}, [selectedRowTransaction]);\n\n\treturn (\n\t\t<>\n\t\t\t<Modal\n\t\t\t\tcentered\n\t\t\t\topen={open}\n\t\t\t\tonOk={handleEnter}\n\t\t\t\tonCancel={onHandleCancel}\n\t\t\t\ttitle={<p className=\"text-lg\">Ubah Quantity</p>}\n\t\t\t\tfooter={\n\t\t\t\t\t<div className=\"w-full h-auto flex items-center justify-end gap-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"dashed\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tclassName=\"rounded-md text-sm\"\n\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tonHandleState('modalConfirmDelete', true);\n\t\t\t\t\t\t\t\tonHandleState('modalQty', false);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tHapus Barang\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleChangeQty(state?.qty);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tclassName=\"rounded-md text-sm font-semibold\">\n\t\t\t\t\t\t\tUbah Quantity\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t}>\n\t\t\t\t<Row ref={modalRef} tabIndex={1} onKeyDown={handleKeyDownGlobal} wrap gutter={[8, 8]}>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Barcode / PLU</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{`${upcBarcode} / ${ItemCode}`}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Nama Barang</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{itemName}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Harga Satuan</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{currencyFormat(price, 0)}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={10}>Qty</Col>\n\t\t\t\t\t\t\t<Col span={1}>:</Col>\n\t\t\t\t\t\t\t<Col span={11}>{oldQty}</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\tid=\"input-qty\"\n\t\t\t\t\t\t\tvalue={state?.qty}\n\t\t\t\t\t\t\tdefaultValue={oldQty}\n\t\t\t\t\t\t\tdisabled={state.inputChanged}\n\t\t\t\t\t\t\tonChange={(event) => handleChange(event.target.value)}\n\t\t\t\t\t\t\tonPressEnter={() => {\n\t\t\t\t\t\t\t\thandleEnter();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg mt-5 bg-gray-200\"\n\t\t\t\t\t\t\tplaceholder=\"MASUKKAN JUMLAH QTY\"\n\t\t\t\t\t\t\tonFocus={(e) => {\n\t\t\t\t\t\t\t\thandleFocusSelect();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleFocusSelect();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<p className=\"text-sm text-red-600 mt-2\">\n\t\t\t\t\t\t\tGunakan <b>&uarr;</b> untuk memasukkan jumlah qty dan tekan <b>ENTER</b> untuk konfirmasi\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t\t<ModalConfirmChangeQty\n\t\t\t\topen={state?.modalConfirm}\n\t\t\t\tstate={state}\n\t\t\t\thandleCancel={() => handleState('modalConfirm', false)}\n\t\t\t\thandleState={handleState}\n\t\t\t\tonHandleCancel={onHandleCancel}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import { Button, Col, Form, Input, Modal, Row } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalConfirmDelete({ open, state, handleCancel, handleState = (state, val) => {}, handleFocus }) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { handleDeleteItem } = useCartOrder();\n\tconst { selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { isGrantedAccess = false, loading = false } = useSelector((state) => state?.auth);\n\n\tconst isSelected = Object.keys(selectedRowTransaction).length !== 0;\n\tconst modalRef = useRef(null);\n\tconst emailRef = useRef();\n\tconst passwordRef = useRef();\n\n\tconst [form] = Form.useForm();\n\n\tconst onFinish = (values) => {\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1031'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tif (isGrantedAccess && isSelected) {\n\t\t\t\thandleDeleteItem(selectedRowTransaction?.ItemCode);\n\t\t\t\thandleCancel();\n\t\t\t}\n\t\t}\n\t}, [isGrantedAccess, open]);\n\n\treturn (\n\t\t<Modal centered open={open} onCancel={handleCancel} title={<h1 className=\"text-lg\">Hapus Barang</h1>} footer={false}>\n\t\t\t<div ref={modalRef} tabIndex={1}>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<div className=\"mb-5\">\n\t\t\t\t\t\t<p className=\"text-base text-gray-800\">\n\t\t\t\t\t\t\tApakah anda yakin akan menghapus item/barang <b>{selectedRowTransaction?.ItemName}</b>. Mohon konfirmasi terlebih dahulu.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Form\n\t\t\t\t\t\tform={form}\n\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\tonFinishFailed={console.log}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t<Row wrap gutter={[8, 0]}>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Button disable={loading} loading={loading} type=\"primary\" htmlType=\"submit\" className=\"w-full btn-page px-7\">\n\t\t\t\t\t\t\t\t\t\t\tValidasi\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 flex items-center justify-center gap-2 rounded-md px-7\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleCancel}>\n\t\t\t\t\t\t\t\t\t\t\tKembali\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Form, Input, Modal } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nexport default function ModalPendingPayment(props) {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { visible, onCancel } = props;\n\tconst { transactionHolds = [], loading = false } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchItemRef } = useCartOrder();\n\n\tconst refTable = useRef(null);\n\tconst refInput = useRef(null);\n\tconst modalRef = useRef(null);\n\tconst [state, setState] = useState({\n\t\tsearch: '',\n\t\tt: -1,\n\t\tisSelected: false,\n\t\tdataTable: [],\n\t\tselectedData: {}\n\t});\n\n\tconst handleDetailHoldTrx = (billNo) => {\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD_DETAIL',\n\t\t\tpayload: {\n\t\t\t\tbillNo\n\t\t\t},\n\t\t\thistory,\n\t\t\tonClose: handleCancel,\n\t\t\tonState: props?.handleState\n\t\t});\n\t};\n\n\tconst onKeyPress = (e) => {\n\t\tconst allowedKeys = ['ArrowUp', 'ArrowDown', 'Enter', 'Escape'];\n\t\tconst { t, dataTable } = state;\n\n\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (allowedKeys.includes(e.key) && visible) {\n\t\t\te.preventDefault();\n\n\t\t\trefInput && refInput.current.blur();\n\t\t\tsearchItemRef && searchItemRef.current !== null && searchItemRef.current.blur();\n\n\t\t\tconst table = refTable && refTable.current;\n\n\t\t\tif (e.key === 'ArrowDown' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (t <= 1 || dataTable.length.length < 2) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: 0,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (t === dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: dataTable.length,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[dataTable.length]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t]) {\n\t\t\t\t\t\treturn tr[t].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (t < dataTable.length) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t + 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t + 1]\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tr[t + 1]) {\n\t\t\t\t\t\treturn tr[t + 1].focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowUp' && dataTable.length && dataTable.length > 0 && table !== null) {\n\t\t\t\trefInput.current.blur();\n\n\t\t\t\tif (t >= 2) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: t - 1,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[t - 1]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (t <= 1) {\n\t\t\t\t\tsetState({\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\tt: 0,\n\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\tselectedData: dataTable[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst tbody = table.lastChild || null;\n\t\t\t\tconst tr = (tbody && tbody !== null && tbody.children) || [];\n\n\t\t\t\tif (tr[t - 1]) {\n\t\t\t\t\treturn tr[t - 1].focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' && state?.isSelected) {\n\t\t\t\tconst isNotEmptyTrx = Object.keys(state?.selectedData || {}).length !== 0;\n\n\t\t\t\tfocusInput();\n\t\t\t\tif (isNotEmptyTrx) {\n\t\t\t\t\thandleDetailHoldTrx(state?.selectedData?.billNo);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\thandleCancel();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleDataTable = (query = '') => {\n\t\tif (query && query !== '') {\n\t\t\tconst filtered = transactionHolds\n\t\t\t\t.filter(\n\t\t\t\t\t(el) => el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0 || el.billNo.toLowerCase().indexOf(query.toLowerCase()) >= 0\n\t\t\t\t)\n\t\t\t\t.map((val, i) => ({ ...val, key: i + 1 }));\n\n\t\t\tif (filtered.length !== 0) {\n\t\t\t\tsetState({\n\t\t\t\t\t...state,\n\t\t\t\t\tdataTable: filtered,\n\t\t\t\t\tt: 0,\n\t\t\t\t\tselectedData: {},\n\t\t\t\t\tisSelected: false\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultTrx = transactionHolds?.map((val, i) => ({ ...val, key: i + 1 }))?.slice(0, 30);\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: defaultTrx,\n\t\t\tt: 0,\n\t\t\tselectedData: {},\n\t\t\tisSelected: false\n\t\t});\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tisSelected: false,\n\t\t\tselectedData: {}\n\t\t});\n\n\t\tonCancel();\n\t};\n\n\tconst focusInput = () => {\n\t\tif (refInput && refInput.current !== null) {\n\t\t\trefInput.current.focus();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t\tsetState({\n\t\t\t...state,\n\t\t\tt: 0\n\t\t});\n\n\t\treturn () => {\n\t\t\tsetState(() => {\n\t\t\t\treturn;\n\t\t\t});\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst data = transactionHolds.map((val, i) => ({ ...val, key: i + 1 }));\n\t\tsetState({\n\t\t\t...state,\n\t\t\tdataTable: data?.slice(0, 30)\n\t\t});\n\n\t\tfocusInput();\n\t}, [transactionHolds]);\n\n\tuseEffect(() => {\n\t\tconst table = refTable && refTable.current !== null && refTable.current;\n\n\t\tif (table) {\n\t\t\t// focusInput();\n\t\t\tdocument.addEventListener('keydown', onKeyPress);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyPress);\n\t\t};\n\t}, [refTable, state]);\n\n\treturn (\n\t\t<Modal open={visible} onCancel={handleCancel} centered width={850} footer={null}>\n\t\t\t<div ref={modalRef} onKeyDown={onKeyPress} className=\"w-full h-auto\">\n\t\t\t\t<div className=\"w-full flex flex-row items-center justify-center gap-2 text-center  mb-4\">\n\t\t\t\t\t<h1 className=\"text-xl font-semibold text-center\">Transaksi Pending</h1>\n\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<Form className=\"w-full\">\n\t\t\t\t\t\t<Form.Item className=\"w-full\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tref={refInput}\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tplaceholder=\"Masukkan Nomor Bill( F3 )\"\n\t\t\t\t\t\t\t\tclassName=\"text-center flex items-center justify-center h-20 w-full rounded-md bg-gray-200 text-lg text-gray-800\"\n\t\t\t\t\t\t\t\tonChange={(e) => handleDataTable(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<table ref={refTable} id=\"table\" className=\"table-customer w-full relative\">\n\t\t\t\t\t\t<thead className=\"w-full\">\n\t\t\t\t\t\t\t<tr key=\"id-head\" className=\"w-full bg-primary focus:bg-gray-700 h-14\">\n\t\t\t\t\t\t\t\t<th className=\"w-max text-center text-white px-5 uppercase\">No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Tanggal Transaksi</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Bill No</th>\n\t\t\t\t\t\t\t\t<th className=\"w-max text-left text-white px-5 uppercase\">Subtotal</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{state?.dataTable?.map((item, index) => {\n\t\t\t\t\t\t\t\tconst { billNo = '', billTime = '', subTotal = '', key = '' } = item || {};\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\t\t\t\ttabIndex={index}\n\t\t\t\t\t\t\t\t\t\tclassName={`tr-data h-14 ${index % 2 === 0 ? 'bg-white' : 'bg-gray-100'} ${\n\t\t\t\t\t\t\t\t\t\t\tstate?.selectedDataTrx?.billNo === item?.billNo ? 'bg-yellow-200' : 'bg-white'\n\t\t\t\t\t\t\t\t\t\t} focus:bg-yellow-200 hover:bg-yellow-200 focus:font-bold transition-all ease-in-out cursor-pointer`}\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected: true,\n\t\t\t\t\t\t\t\t\t\t\t\tselectedDataTrx: item\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\thandleDetailHoldTrx(billNo);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-center\">{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">{moment(billTime).format('DD MMM YYYY hh:mm:ss')}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 h-14 text-left flex items-center flex-row gap-2 content-center\">\n\t\t\t\t\t\t\t\t\t\t\t{billNo}\n\t\t\t\t\t\t\t\t\t\t\t{loading && <LoadingOutlined spin className=\"text-lg\" />}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-5 text-left\">Rp {currencyFormat(subTotal, 0)}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full h-auto bg-gray-300 p-3 mt-5 rounded-md\">\n\t\t\t\t\t<h1 className=\"text-base\">\n\t\t\t\t\t\tGunakan keyboard <b>F3</b> untuk menginputkan <b>Nomor Bill</b>, lalu gunakan keyboard <b>&uarr;</b> dan <b>&darr;</b> untuk\n\t\t\t\t\t\tmemilih transaksi yang akan dilanjutkan. Tekan <b>Enter</b> untuk mengkonfirmasi pilihan anda.\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center \">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemCode',\n\t\tdataIndex: 'ItemCode',\n\t\ttitle: <p className=\"text-left uppercase\">PLU</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'upcBarcode',\n\t\tdataIndex: 'upcBarcode',\n\t\ttitle: <p className=\"text-left uppercase\">Barcode Satuan</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left uppercase\">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 200,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'uom',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center \">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center \">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t}\n];\n\nexport default function TableSearchItem({ modalRef, handleCancel, handdleFocusInput }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\tconst buttonRefs = useRef([]);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { searchResult: data = [] } = useSelector((state) => state?.transaction);\n\tconst { handleAddItem } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst item = data[index];\n\n\t\thandleAddItem(item, 'table');\n\t\t// handleCancel();\n\t\tsetActiveIndex(-1);\n\t\thanddleFocusInput();\n\t\t// handleFocus();\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'F4' || 'ArrowRight':\n\t\t\t\tsetActiveIndex(0);\n\t\t\t\tref && ref.current !== null && ref.current.focus();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\thandleSaveSelected(activeIndex);\n\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleCancel();\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tsetActiveIndex(-1);\n\n\t\tconst modal = modalRef && modalRef.current !== null && modalRef.current;\n\t\tif (modal) {\n\t\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [modalRef]);\n\n\tuseEffect(() => {\n\t\tconst table = ref && ref.current !== null && ref.current;\n\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [modalRef, ref, activeIndex, data]);\n\n\tuseEffect(() => {\n\t\tbuttonRefs.current[activeIndex] && buttonRefs.current[activeIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });\n\t}, [activeIndex]);\n\n\tuseEffect(() => {\n\t\thanddleFocusInput();\n\t}, [data]);\n\n\treturn (\n\t\t<div className=\"w-full h-96 overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th key={dataIndex} className={`text-${align} px-3 text-white`} style={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tref={(el) => (buttonRefs.current[index] = el)}\n\t\t\t\t\t\t\tclassName={`w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tindex === activeIndex ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer transition-all`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t\thanddleFocusInput();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td key={dataIndex} className={`text-${align} px-3`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/3 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>F3</b> untuk mencari barang by plu/barcode barang. <b>F4</b> untuk memilih tabel, kemudian{' '}\n\t\t\t\t\t\t\t<b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel, tekan <b>Enter</b> untuk konfirmasi item/barang pilihan\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, Modal, notification } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useCartOrder from '../hooks/useCartOrder';\nimport TableSearchItem from './TableSearchItem';\n\nexport default function ModalTableSearchItem({ open = false, handleFocus, handleCancel }) {\n\tconst dispatch = useDispatch();\n\tconst inputRef = useRef(null);\n\tconst modalRef = useRef(null);\n\n\tconst { loading = false, searchResult = [] } = useSelector((state) => state?.transaction);\n\tconst { inputRef: searchInputRef, form } = useCartOrder();\n\n\tconst handleSearch = (query = '') => {\n\t\tif (query !== '') {\n\t\t\tdispatch({\n\t\t\t\ttype: 'transaction/SEARCH_MASTER',\n\t\t\t\tpayload: {\n\t\t\t\t\tquery\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.resetFields();\n\t\t\tfocusInput();\n\t\t\treturn;\n\t\t}\n\n\t\tfocusInput();\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan Kode Item / Kode Barcode terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst focusInput = () => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\t\tif (inputRef && inputRef.current !== null) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tsearchInputRef && searchInputRef.current !== null && searchInputRef.current.blur();\n\n\t\tif (e.key === 'F3') {\n\t\t\te.preventDefault();\n\t\t\tfocusInput();\n\t\t}\n\n\t\tif (e.key === 'Escape' || e.key === 'Tab') {\n\t\t\thandleCancel();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tfocusInput();\n\t\t\tform.resetFields();\n\t\t}\n\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tonKeyDown(e);\n\t\t});\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, [open]);\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t}, [searchResult]);\n\n\tuseEffect(() => {\n\t\tfocusInput();\n\t}, [loading]);\n\n\treturn (\n\t\t<Modal open={open} onCancel={handleCancel} footer={false} centered width={1000} title=\"Pencarian Barang\">\n\t\t\t<div ref={modalRef} onKeyDown={onKeyDown} className=\"w-full h-auto\" id=\"modal-container\">\n\t\t\t\t<div>\n\t\t\t\t\t<Form form={form}>\n\t\t\t\t\t\t<Form.Item name=\"search\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t// value={state?.barcode}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-lg border-2 border-gray-400\"\n\t\t\t\t\t\t\t\tplaceholder=\"MASUKKAN PLU / BARCODE ITEM / NAMA ITEM (F3)\"\n\t\t\t\t\t\t\t\t// onChange={(event) => {\n\t\t\t\t\t\t\t\t// \thandleState('barcode', event.target.value);\n\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\thandleSearch(event.target.value);\n\t\t\t\t\t\t\t\t\tform.resetFields();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full mt-4\">\n\t\t\t\t\t<TableSearchItem modalRef={modalRef} handdleFocusInput={focusInput} handleCancel={handleCancel} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full mt-4 rounded-md bg-gray-300 p-3\">\n\t\t\t\t\t<h1 className=\"text-base\">\n\t\t\t\t\t\tTekan <b>F3</b> untuk mencari barang by plu/barcode barang. <b>F4</b> untuk memilih tabel, kemudian <b> / </b> untuk pilih\n\t\t\t\t\t\tbarang dari tabel, tekan <b>Enter</b> untuk konfirmasi item/barang pilihan\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { FaRegKeyboard } from 'react-icons/fa6';\nimport { useDispatch, useSelector } from 'react-redux';\nimport actions from '../../../redux/transaction/actions';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCartOrder from '../hooks/useCartOrder';\n\nconst columns = [\n\t{\n\t\tkey: 'no',\n\t\tdataIndex: 'no',\n\t\ttitle: <p className=\"text-center\">NO. </p>,\n\t\trender: (_, index) => <p className=\"text-center\">{index + 1}</p>,\n\t\twidth: 50,\n\t\talign: 'center'\n\t},\n\t// {\n\t// \tkey: 'ItemCode',\n\t// \tdataIndex: 'ItemCode',\n\t// \ttitle: <p className=\"text-center\">PLU</p>,\n\t// \trender: (val) => <p className=\"text-center\">{val}</p>,\n\t// \twidth: 100,\n\t// \talign: 'center'\n\t// },\n\t{\n\t\tkey: 'upcBarcode',\n\t\tdataIndex: 'upcBarcode',\n\t\ttitle: <p className=\"text-center\">BARCODE</p>,\n\t\trender: (val) => <p className=\"text-center\">{val}</p>,\n\t\twidth: 150,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'ItemName',\n\t\tdataIndex: 'ItemName',\n\t\ttitle: <p className=\"text-left\">NAMA BARANG</p>,\n\t\trender: (val) => <p className=\"text-left\">{val}</p>,\n\t\twidth: 300,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'qty',\n\t\tdataIndex: 'qty',\n\t\ttitle: <p className=\"text-center\">QTY</p>,\n\t\trender: (val) => <p className=\"text-center\">{val}</p>,\n\t\twidth: 75,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'UomStock',\n\t\tdataIndex: 'UomStock',\n\t\ttitle: <p className=\"text-center\">SATUAN</p>,\n\t\trender: (val) => <p className=\"text-center uppercase\">{val.trim().toUpperCase()}</p>,\n\t\twidth: 100,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'SalesPrice',\n\t\tdataIndex: 'SalesPrice',\n\t\ttitle: <p className=\"text-center\">HARGA</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t},\n\t{\n\t\tkey: 'discVal',\n\t\tdataIndex: 'discVal',\n\t\ttitle: <p className=\"text-center\">DISKON</p>,\n\t\trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t},\n\t// {\n\t// \tkey: 'discValuex',\n\t// \tdataIndex: 'discValuex',\n\t// \ttitle: <p className=\"text-center\">DISKON @</p>,\n\t// \trender: (val) => <p className=\"text-center\">{val || 0}</p>,\n\t// \twidth: 125,\n\t// \talign: 'center'\n\t// },\n\t{\n\t\tkey: 'total',\n\t\tdataIndex: 'total',\n\t\ttitle: <p className=\"text-center\">TOTAL</p>,\n\t\trender: (val) => <p className=\"text-center\">{currencyFormat(val, 0)}</p>,\n\t\twidth: 125,\n\t\talign: 'center'\n\t}\n];\n\nexport default function TableOrderItem({ state = {}, handleCancel, handleState = (state, val) => {}, ...props }) {\n\tconst dispatch = useDispatch();\n\tconst ref = useRef(null);\n\n\tconst [activeIndex, setActiveIndex] = useState(-1);\n\n\tconst { data = [], selectedRowTransaction = {} } = useSelector((state) => state?.transaction);\n\tconst { handleFocus } = useCartOrder();\n\n\tconst handleSaveSelected = (index = 0) => {\n\t\tconst selected = data[index];\n\n\t\tdispatch({\n\t\t\ttype: actions.SET_STATE,\n\t\t\tpayload: {\n\t\t\t\tselectedRowTransaction: selected\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleKeyDownGlobal = (e) => {\n\t\tconst isModalActive = (state?.modalPendingPayment || state?.modalSearchItem || state?.modalConfirmDelete || state?.modalQty) === true;\n\n\t\tif (e.key === 'ArrowRight' && !isModalActive) {\n\t\t\te.target.blur();\n\t\t\te.preventDefault();\n\t\t\tsetActiveIndex(0);\n\t\t\thandleSaveSelected(0);\n\n\t\t\tref && ref.current !== null && ref.current.focus();\n\t\t\treturn;\n\t\t}\n\t};\n\n\tconst handleKeyDown = (e) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.max(prevIndex - 1, 0));\n\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tsetActiveIndex((prevIndex) => Math.min(prevIndex + 1, data.length - 1));\n\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\thandleState('modalConfirmDelete', true);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleFocus();\n\t\t\t\thandleCancel();\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Escape':\n\t\t\t\te.target.blur();\n\t\t\t\tsetActiveIndex(-1);\n\n\t\t\t\thandleFocus();\n\t\t\t\thandleCancel();\n\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actions.SET_STATE,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tselectedRowTransaction: {}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (ref && ref.current) {\n\t\t\tref.current.focus();\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDownGlobal);\n\t\t};\n\t}, [data, state]);\n\n\tuseEffect(() => {\n\t\tconst table = ref.current;\n\t\tif (table) {\n\t\t\ttable.addEventListener('keydown', handleKeyDown);\n\t\t\treturn () => {\n\t\t\t\ttable.removeEventListener('keydown', handleKeyDown);\n\t\t\t};\n\t\t}\n\t}, [ref, activeIndex]);\n\n\tuseEffect(() => {\n\t\thandleSaveSelected(activeIndex);\n\t}, [activeIndex]);\n\n\treturn (\n\t\t<div className=\"w-full h-full overflow-scroll\">\n\t\t\t<table ref={ref} tabIndex={0} className=\"table-fixed w-full border border-gray-400 relative\" border>\n\t\t\t\t<thead className=\"w-full h-14 bg-primary sticky top-0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns?.map(({ title = '', width = 0, dataIndex = '', align = '', fixed = false }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\tkey={dataIndex + title}\n\t\t\t\t\t\t\t\t\tclassName={`text-${align} px-3 text-white border-r border-gray-200 ${\n\t\t\t\t\t\t\t\t\t\tfixed ? 'shadow-xl sticky right-0 top-0 bg-primary text-white' : 'relative'\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tstyle={{ width }}>\n\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((data, index) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName={`group w-full h-14 border border-gray-500 ${\n\t\t\t\t\t\t\t\tselectedRowTransaction?.ItemCode === data?.ItemCode ? 'bg-primary text-white' : ''\n\t\t\t\t\t\t\t} hover:bg-blue-500 hover:text-white cursor-pointer`}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleSaveSelected(index);\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\n\t\t\t\t\t\t\t\thandleState('modalQty', true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\t\tsetActiveIndex(index);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{columns?.map(({ dataIndex, align, render, fixed = false }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tkey={dataIndex}\n\t\t\t\t\t\t\t\t\t\tclassName={`text-${align} px-3 border-r border-gray-400 ${\n\t\t\t\t\t\t\t\t\t\t\tfixed\n\t\t\t\t\t\t\t\t\t\t\t\t? `shadow-xl sticky right-0 top-0 ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedRowTransaction?.ItemCode === data?.ItemCode\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-primary text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-primary text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t  } border-r border-gray-400 group-hover:bg-blue-500 group-hover:text-white shadow-sm`\n\t\t\t\t\t\t\t\t\t\t\t\t: 'relative'\n\t\t\t\t\t\t\t\t\t\t}`}>\n\t\t\t\t\t\t\t\t\t\t{render(data[dataIndex], index) || ''}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t{data?.length === 0 && (\n\t\t\t\t<div className=\"w-full h-96 flex items-center justify-center flex-col\">\n\t\t\t\t\t<div className=\"w-2/5 flex items-center justify-center flex-col gap-3\">\n\t\t\t\t\t\t<FaRegKeyboard className=\"text-6xl text-gray-500\" />\n\t\t\t\t\t\t<p className=\"text-lg text-gray-700 text-center\">\n\t\t\t\t\t\t\tTidak ada transaksi. Tekan <b>&rarr;</b> lalu <b>&uarr;</b> / <b>&darr;</b> untuk pilih barang dari tabel & <b>ESC</b>{' '}\n\t\t\t\t\t\t\tuntuk scan barang\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { Form, Input, notification } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { BiSearch } from 'react-icons/bi';\nimport { CgSpinner } from 'react-icons/cg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport actions from '../../redux/transaction/actions';\nimport { currencyFormat } from '../../utils/helper/utilities';\nimport './app.css';\nimport ButtonActionOrder from './components/ButtonActionOrder';\nimport HeaderLayout from './components/HeaderLayout';\nimport ModalChangeQty from './components/ModalChangeQty';\nimport ModalConfirmDelete from './components/ModalConfirmDelete';\nimport ModalPendingPayment from './components/ModalPendingPayment';\nimport ModalTableSearchItem from './components/ModalTableSearchItem';\nimport ModalConfirmChangeQty from './components/ModalConfirmChangeQty.js';\nimport TableOrderItem from './components/TableOrderItem';\nimport useCartOrder from './hooks/useCartOrder';\nimport usePayment from './hooks/usePayment';\n\nexport default function NewLayout() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst { getTotalQty, getGrandTotal } = usePayment();\n\tconst { handleFocus, inputRef, form, handleSearch, handleAddItem, handleResetForm } = useCartOrder();\n\tconst {\n\t\tcontentStatus = 'isMenu',\n\t\tsearchResult = [],\n\t\tloading = false,\n\t\tbillNo = '',\n\t\tbillDate = '',\n\t\tdata = []\n\t} = useSelector((state) => state?.transaction);\n\tconst { isLog = false, authorized = false } = JSON.parse(localStorage.getItem('app') || '{}');\n\n\tconst [state, setState] = useState({\n\t\tmodalPendingPayment: false,\n\t\tmodalSearchItem: false,\n\t\tmodalConfirmDelete: false,\n\t\tmodalQty: false,\n\t\tbarcode: '',\n\t\ttableIndex: -1,\n\t\tisDisabledInput: false\n\t});\n\n\tconst handleCancel = () => {\n\t\thandleFocus();\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tcontentStatus: 'isMenu',\n\t\t\t\tselectedRowTransaction: {},\n\t\t\t\tsearchResult: []\n\t\t\t}\n\t\t});\n\n\t\tsetState((prev) => ({\n\t\t\tmodalPendingPayment: false,\n\t\t\tmodalSearchItem: false,\n\t\t\tmodalConfirmDelete: false,\n\t\t\tmodalQty: false,\n\t\t\tbarcode: '',\n\t\t\ttableIndex: -1\n\t\t}));\n\t};\n\n\tconst onKeyDownGlobal = (event) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.target.blur();\n\t\t\thandleFocus();\n\t\t}\n\n\t\tif (event.key === 'Tab') {\n\t\t\thandleFocus();\n\t\t\thandleCancel();\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\n\tconst handleSearchItem = (query = '') => {\n\t\tif (query && query.length !== 0) {\n\t\t\tif (query.length >= 6) {\n\t\t\t\thandleSearch(query);\n\t\t\t} else {\n\t\t\t\thandleResetForm();\n\n\t\t\t\tnotification.warning({\n\t\t\t\t\tmessage: 'Perhatian!',\n\t\t\t\t\tdescription: 'Masukkan kode yang benar! Min. kode adalah 6 digit'\n\t\t\t\t});\n\n\t\t\t\thandleFocus();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\thandleResetForm();\n\t\tnotification.warning({\n\t\t\tmessage: 'Perhatian!',\n\t\t\tdescription: 'Masukkan kode yang terlebih dahulu.'\n\t\t});\n\t};\n\n\tconst handleState = (state, value) => {\n\t\treturn setState((prev) => ({\n\t\t\t...prev,\n\t\t\t[state]: value\n\t\t}));\n\t};\n\n\tuseEffect(() => {\n\t\thandleCancel();\n\t\thandleFocus();\n\n\t\tif (isLog && authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'sync/SYNC_DATA_MASTER'\n\t\t\t});\n\n\t\t\tdispatch({\n\t\t\t\ttype: actions.TRANSACTION_BILL_NO\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\t}, [isLog, authorized]);\n\n\tuseEffect(() => {\n\t\tif (!isLog || !authorized) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'auth/LOGOUT_POS',\n\t\t\t\thistory\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\thandleFocus();\n\t\thandleCancel();\n\n\t\tdocument.addEventListener('keydown', onKeyDownGlobal);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDownGlobal);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (contentStatus === 'isMenu') {\n\t\t\thandleFocus();\n\t\t}\n\t}, [contentStatus]);\n\n\tuseEffect(() => {\n\t\tif (document.activeElement.id === 'scan-item') {\n\t\t\tif (searchResult.length !== 0 && searchResult.length === 1) {\n\t\t\t\thandleAddItem({ upcBarcode: searchResult[0]?.UPCbarcode, ItemCode: '' }, 'input');\n\t\t\t}\n\t\t}\n\n\t\thandleFocus();\n\t}, [searchResult, inputRef]);\n\n\tuseEffect(() => {\n\t\tinputRef && inputRef.current !== null && inputRef.current.focus();\n\t}, [billNo, billDate, inputRef, data, state]);\n\n\tuseEffect(() => {\n\t\tif (!loading) {\n\t\t\tinputRef && inputRef.current !== null && inputRef.current.focus();\n\t\t}\n\t}, [loading, inputRef]);\n\n\tconst disabled = state?.modalConfirmDelete || state?.modalPendingPayment || state?.modalQty || state?.modalSearchItem;\n\n\treturn (\n\t\t<div className=\"w-screen h-screen overflow-hidden relative pb-2.5\">\n\t\t\t<div className=\"w-full h-full grid grid-cols-12 gap-3\" style={{ gridTemplateRows: 'repeat(24, minmax(0, 1fr))' }}>\n\t\t\t\t<div className=\"col-span-12 row-span-3 bg-primary\">\n\t\t\t\t\t<HeaderLayout />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 row-span-5 pl-2.5\">\n\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-12 grid-rows-2 rounded-lg\">\n\t\t\t\t\t\t<div className=\"row-start-1 col-span-6 row-span-1 rounded-lg bg-primary rounded-r-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-3xl text-white font-semibold text-right\">TOTAL BELANJA</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-2 col-span-6 relative\">\n\t\t\t\t\t\t\t<Form form={form} layout=\"vertical\">\n\t\t\t\t\t\t\t\t<div className=\"w-5 h-5 bg-primary absolute -top-4 -right-4 rounded-full\" />\n\t\t\t\t\t\t\t\t<div className=\"w-full h-full grid grid-cols-7 gap-2 pt-2.5 pr-2.5\">\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-2\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-16 bg-primary rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-center flex-col gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-gray-200 text-xs\">TOTAL QTY</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-center text-white text-lg font-bold\">{getTotalQty()}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col-span-5\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full bg-white rounded-lg overflow-hidden\" style={{ height: '68px' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item name=\"search-item\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"scan-item\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={state?.barcode}\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`w-full rounded-lg px-4 text-lg placeholder-gray-800 focus:border-2 focus:border-gray-500 custom-input ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled ? 'bg-gray-200' : ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Barcode / PLU Barang (ESC / TAB)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CgSpinner className=\"animate-spin text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<BiSearch className=\"text-xl text-gray-500\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '68px' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonPressEnter={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSearchItem(event.target.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetState((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbarcode: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"row-start-1 row-span-2 col-span-6 rounded-lg overflow-hidden bg-primary rounded-tl-none\">\n\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-end p-3\">\n\t\t\t\t\t\t\t\t<h1 className=\"text-7xl text-white font-semibold text-right\">{currencyFormat(getGrandTotal(), 0)}</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-2 pr-2.5\" style={{ gridRow: 'span 21 / span 21' }}>\n\t\t\t\t\t<ButtonActionOrder state={state} handleState={handleState} handleFocus={handleFocus} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-10 pl-2.5\" style={{ gridRow: 'span 16 / span 16' }}>\n\t\t\t\t\t<TableOrderItem handleFocus={handleFocus} handleState={handleState} state={state} handleCancel={handleCancel} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ModalPendingPayment\n\t\t\t\tvisible={state?.modalPendingPayment}\n\t\t\t\tonCancel={handleCancel}\n\t\t\t\thandleSearchFocus={handleFocus}\n\t\t\t\thandleState={handleState}\n\t\t\t/>\n\t\t\t<ModalTableSearchItem open={state?.modalSearchItem} handleCancel={handleCancel} handleFocus={handleFocus} />\n\t\t\t<ModalConfirmDelete\n\t\t\t\topen={state?.modalConfirmDelete}\n\t\t\t\thandleCancel={handleCancel}\n\t\t\t\tstate={state}\n\t\t\t\thandleState={handleState}\n\t\t\t\thandleFocus={handleFocus}\n\t\t\t/>\n\t\t\t<ModalChangeQty open={state?.modalQty} handleCancel={handleCancel} state={state} onHandleState={handleState} />\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}