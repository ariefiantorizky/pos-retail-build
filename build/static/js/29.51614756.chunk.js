(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[29],{464:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a(80);function s(){const{reportSalesShift:e={}}=Object(l.e)((e=>null===e||void 0===e?void 0:e.report)),{itemGroup:t=[],itemCategory:a=[],items:s=[],balance:c=[],settlement:i=[]}=e;return{getBalance:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0!==c.length&&e?c.reduce(((t,a)=>t+(a[e]||0)),0):0}}}},631:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));a(144);var l=a(86),s=a(191),c=a.n(s),i=a(1),r=a.n(i),n=a(658),o=a(80),d=a(38),j=a(470),u=a(108),m=a(464),b=(a(353),a(355)),x=(a(354),a(356)),p=a(14);function O(e){let{title:t="",value:a="",className:l="",marginRow:s="my-2"}=e;return Object(p.jsx)("div",{className:"w-full ".concat(s),children:Object(p.jsxs)(b.a,{children:[Object(p.jsx)(x.a,{span:11,className:"".concat(""!==l?l:"text-base"," capitalize"),children:t}),Object(p.jsx)(x.a,{span:1,className:"".concat(""!==l?l:"text-base"),children:":"}),Object(p.jsx)(x.a,{span:12,className:"".concat(""!==l?l:"text-base"," capitalize"),children:a})]})})}const h=r.a.forwardRef(((e,t)=>{let{titlePrint:a="",...l}=e;const{cashier:s={},property:i={},user:r={}}=JSON.parse(localStorage.getItem("app")||"{}"),{isClosing:n=!1}=s,{reportSalesShift:d={},loadingReportShift:j=!1}=Object(o.e)((e=>null===e||void 0===e?void 0:e.report)),{itemGroup:b=[],itemCategory:x=[],items:h=[],balance:v=[],settlement:f=[]}=d,{getBalance:g}=Object(m.a)();return Object(p.jsxs)("div",{className:"w-full p-3 py-5 bg-white rounded-md mx-auto",style:{maxWidth:"350px"},ref:t,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text-center text-print-medium font-bold",children:(null===i||void 0===i?void 0:i.header1)||""}),Object(p.jsx)("p",{className:"text-center text-print-small font-semibold",children:(null===i||void 0===i?void 0:i.header2)||""}),Object(p.jsx)("p",{className:"text-center text-print-xsmall mt-2",children:(null===i||void 0===i?void 0:i.header3)||""}),Object(p.jsx)("p",{className:"text-center text-print-xsmall",children:(null===i||void 0===i?void 0:i.header4)||""}),Object(p.jsx)("p",{className:"text-center text-print-xsmall",children:(null===i||void 0===i?void 0:i.header5)||""}),Object(p.jsx)("p",{className:"text-center text-print-xsmall",children:(null===i||void 0===i?void 0:i.header6)||""})]}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"text-center text-print-medium mt-3 font-semibold",children:null===a||void 0===a?void 0:a.toUpperCase()})}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),Object(p.jsxs)("div",{children:[Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"nama kasir",value:null===r||void 0===r?void 0:r.username}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"opening shift",value:c()(null===s||void 0===s?void 0:s.shiftDate).format("dddd, DD MMMM YYYY")}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"subtotal",value:"IDR "+Object(u.a)(g("SubTotal"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"sales discount",value:"IDR "+Object(u.a)(g("DiscValue"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"discount bill",value:"IDR "+Object(u.a)(g("DiscBill"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"rounded",value:"IDR "+Object(u.a)(g("Rounded"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"service tax",value:"IDR "+Object(u.a)(g("ServValue"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"tax",value:"IDR "+Object(u.a)(g("TaxValue"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"grand total",value:"IDR "+Object(u.a)(g("GrandTotal"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"net sales",value:"IDR "+Object(u.a)(g("NetSales"),0)}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"sales collected",value:"IDR "+Object(u.a)(g("SalesCollected"),0)})]}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),null===b||void 0===b?void 0:b.map((e=>{let{groupCode:t="",groupName:a="",grossSales:l=0,salesDiscount:s=0,nettSales:c=0,servValue:i=0,taxValue:r=0}=e;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{className:"text-center text-print-small font-semibold uppercase",children:["TOTAL ",a.toUpperCase()||"group"]}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"Total Gross Sales",value:"IDR ".concat(Object(u.a)(l,0))}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"Total Sales Discount",value:"IDR ".concat(Object(u.a)(s,0))}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"Total Service Tax",value:"IDR ".concat(Object(u.a)(i,0))}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"Total Tax",value:"IDR ".concat(Object(u.a)(r,0))}),Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:"Total Nett Sales",value:"IDR ".concat(Object(u.a)(c,0))}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"})]},t)})),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"w-full mb-3",children:Object(p.jsx)("h1",{className:"text-center text-print-small font-semibold uppercase",children:"TOTAL SETTLEMENTS"})}),Object(p.jsx)("div",{className:"my-3 w-full border border-separate border-gray-400"}),null===f||void 0===f?void 0:f.map((e=>{let{CardName:t="",PaidValue:a=0}=e;return Object(p.jsx)(O,{marginRow:"my-1",className:"text-print-xsmall",title:t.trim(),value:"IDR ".concat(Object(u.a)(a,0))})}))]})]})}));function v(e){let{isOpening:t=!1,isClosing:a=!1,isEndOfDay:s=!1}=e;const r=Object(d.useHistory)(),b=Object(o.d)();let x=Object(i.useRef)();const{cashier:v={},user:f={}}=JSON.parse(localStorage.getItem("app")||"{}"),{reportSalesShift:g={},loadingReportShift:N=!1}=Object(o.e)((e=>null===e||void 0===e?void 0:e.report)),{itemGroup:y=[],settlement:w=[]}=g,{getBalance:R}=Object(m.a)(),S=Object(j.useReactToPrint)({content:()=>x.current,onPrintError:e=>console.log("Error Print!",e),removeAfterPrint:!0,copyStyles:!0});return Object(p.jsx)("div",{className:"w-full h-auto",children:Object(p.jsxs)("div",{className:"w-full mt-7 grid grid-cols-12 gap-5",children:[Object(p.jsxs)("div",{className:"col-span-8",children:[Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsx)("div",{className:"mb-5",children:Object(p.jsx)(l.a,{className:"btn-page",loading:N,disabled:N,onClick:()=>{a?b({type:"report/SALES_BY_SHIFT",payload:{refDate:null===v||void 0===v?void 0:v.shiftDate,shiftId:null===v||void 0===v?void 0:v.shiftId}}):s&&b({type:"report/SALES_BY_SHIFT",payload:{refDate:null===v||void 0===v?void 0:v.shiftDate,shiftId:"all"}})},children:"Refresh"})}),Object(p.jsx)("div",{className:"",children:Object(p.jsx)("h1",{className:"text-lg font-semibold",children:"Report Cashier"})}),Object(p.jsxs)("div",{className:"mt-3",children:[Object(p.jsx)(O,{title:"nama kasir",value:null===f||void 0===f?void 0:f.username}),Object(p.jsx)(O,{title:"opening shift",value:c()(null===v||void 0===v?void 0:v.shiftDate).format("dddd, DD MMMM YYYY")})]})]}),Object(p.jsx)("div",{className:"w-full bg-gray-400 my-4",style:{height:"1px"}}),Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsx)("div",{className:"",children:Object(p.jsx)("h1",{className:"text-lg font-semibold",children:"Report Sales Balancing"})}),Object(p.jsxs)("div",{className:"mt-3",children:[Object(p.jsx)(O,{title:"subtotal",value:"IDR "+Object(u.a)(R("SubTotal"),0)}),Object(p.jsx)(O,{title:"sales discount",value:"IDR "+Object(u.a)(R("DiscValue"),0)}),Object(p.jsx)(O,{title:"discount bill",value:"IDR "+Object(u.a)(R("DiscBill"),0)}),Object(p.jsx)(O,{title:"rounded",value:"IDR "+Object(u.a)(R("Rounded"),0)}),Object(p.jsx)(O,{title:"service tax",value:"IDR "+Object(u.a)(R("ServValue"),0)}),Object(p.jsx)(O,{title:"tax",value:"IDR "+Object(u.a)(R("TaxValue"),0)}),Object(p.jsx)(O,{title:"grand total",value:"IDR "+Object(u.a)(R("GrandTotal"),0)}),Object(p.jsx)(O,{title:"net sales",value:"IDR "+Object(u.a)(R("NetSales"),0)}),Object(p.jsx)(O,{title:"sales collected",value:"IDR "+Object(u.a)(R("SalesCollected"),0)})]})]}),Object(p.jsx)("div",{className:"w-full bg-gray-400 my-4",style:{height:"1px"}}),Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsx)("div",{className:"",children:Object(p.jsx)("h1",{className:"text-lg font-semibold",children:"Report Sales Settlements"})}),Object(p.jsx)("div",{className:"mt-3",children:null===w||void 0===w?void 0:w.map((e=>{let{CardName:t="",PaidValue:a=0}=e;return Object(p.jsx)(O,{title:t.trim(),value:"IDR ".concat(Object(u.a)(a,0))})}))})]}),Object(p.jsx)("div",{className:"w-full bg-gray-400 my-4",style:{height:"1px"}}),Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsx)("div",{className:"",children:Object(p.jsx)("h1",{className:"text-lg font-semibold",children:"Report Sales Detail By Group"})}),Object(p.jsx)("div",{className:"mt-3",children:null===y||void 0===y?void 0:y.map((e=>{let{groupCode:t="",groupName:a="",grossSales:l=0,salesDiscount:s=0,nettSales:c=0,servValue:i=0,taxValue:r=0}=e;return Object(p.jsxs)("div",{className:"w-full border-b border-gray-300",children:[Object(p.jsx)(O,{title:"Group",value:Object(p.jsx)("b",{children:a||"-"})}),Object(p.jsx)(O,{title:"Total Gross Sales",value:"IDR ".concat(Object(u.a)(l,0))}),Object(p.jsx)(O,{title:"Total Sales Discount",value:"IDR ".concat(Object(u.a)(s,0))}),Object(p.jsx)(O,{title:"Total Service Tax",value:"IDR ".concat(Object(u.a)(i,0))}),Object(p.jsx)(O,{title:"Total Tax",value:"IDR ".concat(Object(u.a)(r,0))}),Object(p.jsx)(O,{title:"Total Nett Sales",value:"IDR ".concat(Object(u.a)(c,0))})]},t)}))})]})]}),Object(p.jsxs)("div",{className:"col-span-4",children:[Object(p.jsxs)("div",{className:"w-full mb-3 flex items-center gap-2",children:[Object(p.jsx)(l.a,{className:"flex btn-page px-5 w-max bg-transparent border border-blue-600 text-primary",icon:Object(p.jsx)(n.a,{className:"text-blue-600"}),onClick:()=>r.push("/pos/options")}),Object(p.jsxs)(l.a,{className:"btn-page",onClick:e=>S(e,(()=>x)),children:["PRINT ",a?"CLOSING SHIFT":s?"END OF DAY":"REPORT"]})]}),Object(p.jsx)("div",{className:"w-full",children:Object(p.jsx)(h,{ref:e=>x=e,titlePrint:"REPORT ".concat(a?"CLOSING SHIFT":s?"END OF DAY":"REPORT")})})]})]})})}},770:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));a(353);var l=a(355),s=(a(354),a(356)),c=(a(144),a(86)),i=(a(242),a(181)),r=(a(243),a(116)),n=a(1),o=a(80),d=a(38),j=a(631),u=a(464),m=a(14);function b(){const e=Object(o.d)(),t=Object(d.useHistory)(),a=Object(n.useRef)(null),b=Object(n.useRef)(null),x=Object(n.useRef)(null),[p]=r.a.useForm(),{loading:O=!1,isGrantedAccess:h=!1}=Object(o.e)((e=>null===e||void 0===e?void 0:e.auth)),{loading:v=!1}=Object(o.e)((e=>null===e||void 0===e?void 0:e.transaction)),{cashier:f={},property:g={},user:N={}}=JSON.parse(localStorage.getItem("app")||"{}"),{isClosing:y=!1}=f,{reportSalesShift:w={},loadingReportShift:R=!1}=Object(o.e)((e=>null===e||void 0===e?void 0:e.report)),{itemGroup:S=[],itemCategory:D=[],items:I=[],balance:T=[],settlement:C=[]}=w,{getBalance:E}=Object(u.a)(),k=a=>{h?P(a):e({type:"auth/USER_ACCESS",payload:{email:null===a||void 0===a?void 0:a.email,password:window.btoa(null===a||void 0===a?void 0:a.password),funcId:"1038"},history:t})},F=e=>console.log("Error! ",e),A=e=>{if(h)"Escape"===e.key&&(x.current.blur(),x.current.value=""),x&&x.current&&x.current.focus();else{const l=document.activeElement===(null!==a.current&&a.current.input)||!1,s=document.activeElement===(null!==b.current&&b.current.input)||!1;if("Enter"===e.key&&l)return a.current.blur(),void b.current.focus();if("Enter"===e.key&&s)return a.current.blur(),void b.current.focus();if("Escape"===e.key)return l||s?(p.resetFields(),void a.current.focus()):t.push("/pos/options");"ArrowUp"===e.key&&a.current.focus(),"ArrowDown"===e.key&&(b.current.focus(),s&&(b.current.blur(),a.current.blur()))}},P=a=>{const l=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:s={},property:c={}}=l,i={refDate:(null===s||void 0===s?void 0:s.shiftDate)||(null===c||void 0===c?void 0:c.refDate)||"",closeCash:(null===a||void 0===a?void 0:a.closingCash)||0,shiftId:(null===s||void 0===s?void 0:s.shiftId)||(null===c||void 0===c?void 0:c.shiftId)||0};e({type:"transaction/CLOSING_SHIFT",payload:i,history:t,property:c})};return Object(n.useEffect)((()=>(document.addEventListener("keydown",A),e({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),()=>{document.removeEventListener("keydown",A)})),[p]),Object(n.useEffect)((()=>{y&&e({type:"report/SALES_BY_SHIFT",payload:{refDate:null===f||void 0===f?void 0:f.shiftDate,shiftId:null===f||void 0===f?void 0:f.shiftId}})}),[y]),Object(m.jsx)("div",{className:"w-full h-screen overflow-y-scroll",children:Object(m.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:Object(m.jsxs)("div",{className:"".concat(y?"w-2/3 h-full py-10":"max-w-xl"),children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"text-2xl font-medium",children:"Closing Shift"}),Object(m.jsx)("p",{className:"text-base leading-snug mt-3",children:"Jangan lupa untuk menutup kasir jika waktu kasir anda sudah selesai. Setelah itu, mohon untuk melakukan pengecekan pada histori transaksi dan upload sales."})]}),y?Object(m.jsx)(j.a,{isClosing:!0}):h?Object(m.jsx)("div",{className:"w-full h-auto mt-12",children:Object(m.jsxs)(r.a,{form:p,name:"opening",layout:"vertical",initialValues:{remember:!0},onFinish:k,onFinishFailed:F,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:[Object(m.jsx)(r.a.Item,{children:Object(m.jsx)(r.a.Item,{label:"Saldo Akhir",name:"closingCash",rules:[{required:!0,message:"Wajid Diisi!"}],children:Object(m.jsx)(i.a,{defaultValue:0,ref:x,type:"number",autoFocus:!0,autoComplete:"false",placeholder:"0",prefix:"IDR ",className:"w-full h-14 rounded-md"})})}),Object(m.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(m.jsx)(r.a.Item,{children:Object(m.jsx)(c.a,{disabled:v,loading:v,htmlType:"submit",className:"btn-page",children:"Tutup Kasir"})}),Object(m.jsx)(r.a.Item,{children:Object(m.jsx)(c.a,{disabled:v,htmlType:"button",className:"btn-page bg-transparent text-gray-700",onClick:()=>t.push("/pos/options"),children:"Batalkan"})})]})]})}):Object(m.jsx)("div",{className:"w-3/4 my-7",children:Object(m.jsx)(r.a,{form:p,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:k,onFinishFailed:F,autoComplete:"off",style:{maxWidth:"none",width:"100%"},children:Object(m.jsxs)(l.a,{wrap:!0,gutter:[8,0],children:[Object(m.jsx)(s.a,{span:24,children:Object(m.jsx)(r.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(m.jsx)(i.a,{ref:a,type:"email",autoFocus:!0,autoComplete:"false",placeholder:"usertest@domain.com",className:"w-full h-12 rounded-md"})})}),Object(m.jsx)(s.a,{span:24,children:Object(m.jsx)(r.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Wajib Diisi!"}],children:Object(m.jsx)(i.a.Password,{ref:b,type:"password",autoComplete:"false",placeholder:"********",className:"w-full h-12 rounded-md"})})}),Object(m.jsx)(s.a,{span:18,children:Object(m.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 mt-3",children:[Object(m.jsx)(r.a.Item,{children:Object(m.jsx)(c.a,{disabled:O,loading:O,type:"primary",htmlType:"submit",className:"w-full bg-primary h-12 rounded-md hover:bg-blue-900",children:"Validasi Kasir"})}),Object(m.jsx)(r.a.Item,{children:Object(m.jsxs)(c.a,{disabled:O,type:"default",htmlType:"button",className:"w-full h-12 flex items-center justify-center gap-2 rounded-md",onClick:()=>t.push("/pos/options"),children:["Kembali ",Object(m.jsx)("kbd",{className:"kbd",children:"esc"})]})})]})})]})})})]})})})}}}]);
//# sourceMappingURL=29.51614756.chunk.js.map