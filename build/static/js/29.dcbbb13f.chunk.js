(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[29],{1038:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(67),l=n(30),d=(n(187),n(79)),i=n(14);function o(e){const t=Object(l.useHistory)(),{loadingDetail:n=!1}=Object(c.e)((e=>null===e||void 0===e?void 0:e.transaction)),a=e=>{"End"===e.key&&t.push("/pos/kasir/closing")};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(i.jsxs)(d.a,{disabled:n,loading:n,className:"btn-page col-span-2",onClick:()=>t.push("/pos/kasir/closing"),children:[Object(i.jsx)("p",{children:"Closing Day"}),Object(i.jsx)("kbd",{className:"kbd",children:"end"})]})}function r(e){const t=Object(l.useHistory)(),n=()=>t.push("/pos/closing-shift"),a=e=>{"F10"===e.key&&(e.preventDefault(),n())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(i.jsxs)(d.a,{className:"btn-page",onClick:n,children:["Closing Shift",Object(i.jsx)("kbd",{className:"kbd",children:"f10"})]})}function u(){const e=Object(l.useHistory)(),t=()=>e.push("/pos/history"),n=e=>{"F6"===e.key&&(e.preventDefault(),t())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[]),Object(i.jsxs)(d.a,{className:"btn-page",onClick:t,children:["Report Sales ",Object(i.jsx)("kbd",{className:"kbd",children:"f6"})]})}n(214);var j=n(85);function b(){const e=Object(c.d)(),t=Object(l.useHistory)(),n=a.a.createRef(),{loading:o=!1}=Object(c.e)((e=>null===e||void 0===e?void 0:e.auth)),[r,u]=Object(s.useState)(!1),b=()=>{e({type:"auth/LOGOUT_POS",history:t})},m=e=>{"Escape"===e.key&&u(!0)};return Object(s.useEffect)((()=>(document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)})),[]),Object(s.useEffect)((()=>{r&&n&&n.current&&n.current.focus()}),[r,n]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(d.a,{disabled:o,loading:o,className:"btn-page",onClick:()=>u(!0),children:[Object(i.jsx)("p",{children:"logout"}),Object(i.jsx)("kbd",{className:"kbd",children:"esc"})]}),Object(i.jsx)(j.a,{centered:!0,open:r,onOk:b,onCancel:()=>u(!1),okText:"Keluar( ENTER )",cancelText:"Batal( ESC )",cancelButtonProps:{size:"large",className:"rounded-md text-sm"},okButtonProps:{loading:o,size:"large",className:"rounded-md text-sm font-semibold bg-primary"},children:Object(i.jsxs)("div",{ref:n,tabIndex:"-1",onKeyDown:e=>{const t=n&&n.current&&null!==n.current&&n.current;if(document.activeElement===t){if("Enter"===e.key)return b();"Escape"===e.key&&u(!1)}},autoFocus:!0,children:[Object(i.jsx)("h1",{className:"text-xl font-semibold uppercase",children:"logout?"}),Object(i.jsxs)("p",{className:"mt-3 text-base leading-snug",children:[Object(i.jsx)("span",{className:"text-red-600 font-semibold",children:"Perhatian!!! "}),"Apakah anda yakin ingin keluar dari aplikasi POS saat ini? Semua data transaksi anda yang sedang berlangsung akan dihapus dan tidak bisa dikembalikan."]})]})})]})}var m=n(13);function O(e){const t=Object(l.useHistory)(),n=Object(c.d)(),a=()=>t.push("/pos/kasir"),o=e=>{console.log(e),"F4"===e.key&&(e.preventDefault(),a(),n({type:m.a.TRANSACTION_BILL_NO}))};return Object(s.useEffect)((()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)})),[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(d.a,{className:"btn-page h-16 rounded-lg",onClick:a,children:[Object(i.jsx)("p",{children:"+ Order Baru"}),Object(i.jsx)("kbd",{className:"kbd",children:"f4"})]})})}var p=n(726),h=n(540);function x(){const e=Object(h.useHistory)(),t=()=>e.push("/pos/setup"),n=e=>{"F8"===e.key&&(e.preventDefault(),t())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[]),Object(i.jsxs)(d.a,{className:"btn-page",onClick:t,children:["setup pos ",Object(i.jsx)("kbd",{className:"kbd",children:"f8"})]})}function k(){const e=Object(c.d)(),{loadingSync:t=!1}=Object(c.e)((e=>null===e||void 0===e?void 0:e.sync)),n=()=>{e({type:"sync/SYNC_DATA_MASTER"})},a=e=>{"F6"===e.key&&(e.preventDefault(),e.target.blur(),n())};return Object(s.useEffect)((()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),[]),Object(i.jsxs)(d.a,{disabled:t,loading:t,className:"btn-page",onClick:n,children:[Object(i.jsx)("p",{children:"sync data"}),Object(i.jsx)("kbd",{className:"kbd",children:"f6"})]})}n(319);var f,g,v=n(102),y=(n(318),n(188)),N=n(92),E=(n(672),n(682)),w=n(1002);function S(e){let{isLoading:t=!1}=e;return t?Object(i.jsx)(E.a,{spinning:t,size:"large",className:"fixed top-0 left-0 w-full h-full flex items-center justify-center",style:{zIndex:999999,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(5px)"},indicator:Object(i.jsxs)("div",{className:"w-max mx-auto",children:[Object(i.jsx)(w.a,{className:"animate-spin text-5xl text-white mx-auto"}),Object(i.jsx)("h1",{className:"text-center text-lg text-white font-medium mt-3",children:"Mohon Tunggu..."})]})}):null}function L(e){const t=Object(c.d)(),n=a.a.createRef(),{loadingUpdateSales:l=!1}=Object(c.e)((e=>null===e||void 0===e?void 0:e.sync)),[o,r]=Object(s.useState)(!1),[u,b]=Object(s.useState)({from:new Date,to:new Date,showLoading:!1}),m=()=>{t({type:"sync/SYNC_DATA_SALES",payload:{from:null===u||void 0===u?void 0:u.from,to:null===u||void 0===u?void 0:u.to}}),t({type:"transaction/TRANSACTION_BILL_NO"}),r(!1),b({...u,showLoading:!0})},O=e=>{"F9"===e.key&&r(!0)};return Object(s.useEffect)((()=>(document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)})),[]),Object(s.useEffect)((()=>{o&&n&&n.current&&n.current.focus()}),[o,n]),Object(i.jsxs)(i.Fragment,{children:[l?Object(i.jsxs)(d.a,{disabled:l,className:"btn-page",onClick:()=>r(!0),children:[Object(i.jsx)(N.a,{spin:!0,className:"text-xl"}),Object(i.jsx)("p",{children:"Uploading..."})]}):Object(i.jsxs)(d.a,{disabled:l,className:"btn-page",onClick:()=>r(!0),children:[Object(i.jsx)("p",{children:"update sales"}),Object(i.jsx)("kbd",{className:"kbd",children:"f9"})]}),Object(i.jsx)(j.a,{centered:!0,open:o,onOk:m,onCancel:()=>r(!1),okText:"Kirim Data( ENTER )",cancelText:"Batal( ESC )",cancelButtonProps:{size:"large",className:"rounded-md text-sm"},okButtonProps:{loading:l,size:"large",className:"rounded-md text-sm font-semibold bg-primary"},children:Object(i.jsxs)("div",{ref:n,tabIndex:"-1",onKeyDown:e=>{const t=n&&n.current&&null!==n.current&&n.current;if(document.activeElement===t){if("Enter"===e.key)return m();"Escape"===e.key&&r(!1)}return null},autoFocus:!0,children:[Object(i.jsx)("h1",{className:"text-xl font-semibold uppercase",children:"upload sales"}),Object(i.jsxs)("p",{className:"mt-3 text-base leading-snug",children:[Object(i.jsx)("span",{className:"text-red-600 font-semibold",children:"Perhatian!!! "}),"Silahakan pilih tanggal transaksi untuk melakukan upload sales ke cloud. Pilih tanggal yang sesuai dan cek terlebih dahulu"]}),Object(i.jsx)("div",{className:"my-5",children:Object(i.jsxs)(v.a,{layout:"vertical",children:[Object(i.jsx)(v.a.Item,{label:"Tanggal Dari",name:"date",initialValue:null===u||void 0===u?void 0:u.date,children:Object(i.jsx)(y.a,{type:"date",onChange:e=>b({...u,from:e.target.value}),className:"w-full h-14 rounded-md"})}),Object(i.jsx)(v.a.Item,{label:"Sampai Tanggal",name:"dateTo",initialValue:null===u||void 0===u?void 0:u.dateTo,children:Object(i.jsx)(y.a,{type:"date",onChange:e=>b({...u,to:e.target.value}),className:"w-full h-14 rounded-md"})})]})})]})}),Object(i.jsx)(S,{isLoading:l&&(null===u||void 0===u?void 0:u.showLoading)})]})}let C=(f=Object(c.c)((e=>{let{transaction:t,sync:n}=e;return{transaction:t,sync:n,contentStatus:t.contentStatus,billDate:t.billDate}})),Object(l.withRouter)(g=f(g=class extends s.Component{constructor(e){super(e),this.handleOk=e=>{const{dispatch:t}=this.props;t({type:"sync/SYNC_DATA_SALES",payload:e})},this.state={modalUpdateSales:!1}}componentWillReceiveProps(e){!1===e.sync.loadingUpdateSales&&this.setState({modalUpdateSales:!1})}render(){return Object(i.jsxs)("div",{className:"container mx-auto p-4 h-screen",children:[Object(i.jsx)("div",{children:Object(i.jsx)(O,{})}),Object(i.jsxs)("div",{className:"w-full h-max grid grid-cols-5 mt-2 gap-2",children:[Object(i.jsx)("div",{className:"",children:Object(i.jsx)(x,{})}),Object(i.jsx)("div",{className:"",children:Object(i.jsx)(L,{})}),Object(i.jsx)("div",{className:"",children:Object(i.jsx)(k,{})}),Object(i.jsx)("div",{children:Object(i.jsx)(p.a,{})}),Object(i.jsx)("div",{children:Object(i.jsx)(r,{})}),Object(i.jsx)("div",{className:"",children:Object(i.jsx)(o,{})}),Object(i.jsx)("div",{className:"",children:Object(i.jsx)(u,{})}),Object(i.jsx)("div",{className:"",children:Object(i.jsx)(b,{})})]})]})}})||g)||g);t.default=C},726:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(214);var s=n(85),a=(n(187),n(79)),c=n(0),l=n(30),d=n(14);function i(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{cashier:t={}}=e,n=(null===t||void 0===t?void 0:t.isOpening)||!1,s=Object(l.useHistory)(),[i,r]=Object(c.useState)(!n),u=e=>{s.push("/pos/opening-shift")},j=e=>{"F7"===e.key&&(e.target.blur(),e.preventDefault(),u())};return Object(c.useEffect)((()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",onkeydown)})),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(a.a,{onClick:u,className:"btn-page",children:["Opening shift",Object(d.jsx)("kbd",{className:"kbd",children:"f7"})]}),Object(d.jsx)(o,{isOpen:i,onClose:()=>r(!1)})]})}function o(e){let{isOpen:t,onClose:n}=e;return Object(d.jsxs)(s.a,{centered:!0,width:500,footer:!1,onCancel:n,open:t,bodyStyle:{backgroundColor:"#f8f8f8",borderRadius:"12px"},children:[Object(d.jsx)("h1",{className:"text-center font-semibold text-xl text-red-500",children:"PERHATIAN !!!"}),Object(d.jsxs)("p",{className:"text-center text-base leading-snug mt-5",children:["Anda tidak dapat melakukan transaksi jika anda belum melakukan opening shift/buka kasir. Mohon untuk melakukan opening shift terlebih dahulu dengan cara menekan tombol ",Object(d.jsx)("kbd",{className:"kbd",children:"f7"})," atau menutup popup ini. Terima kasih"]})]})}}}]);
//# sourceMappingURL=29.dcbbb13f.chunk.js.map