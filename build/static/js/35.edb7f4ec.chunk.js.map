{"version":3,"sources":["pages/POS/closing-shift/hooks/useCalculateSales.js","pages/POS/widget/RowItemPrint.js","pages/POS/components/ReportPrint.js","pages/POS/components/ReportDetails.js","pages/POS/closing-shift/index.js"],"names":["useCalculateSales","reportSalesShift","useSelector","state","report","balance","cashBalance","itemCategory","getBalance","key","length","reduce","acc","item","getCashBalance","getCategoryData","existing","find","i","cateCode","grossSales","salesDiscount","nettSales","servValue","taxValue","push","RowItemPrint","title","value","className","marginRow","span","ReportPrint","React","forwardRef","ref","titlePrint","props","cashier","property","user","JSON","parse","localStorage","getItem","isClosing","loadingReportShift","itemGroup","items","settlement","style","maxWidth","header1","header2","header3","header4","header5","header6","toUpperCase","username","moment","shiftDate","format","currencyFormat","closingDate","map","CardName","PaidValue","trim","groupCode","groupName","cateName","ReportDetails","isOpening","isEndOfDay","history","useHistory","dispatch","useDispatch","componentPrintRef","useRef","handlePrint","useReactToPrint","content","current","onPrintError","e","console","log","removeAfterPrint","copyStyles","loading","disabled","onClick","type","payload","refDate","shiftId","height","icon","el","CloseDayPage","emailRef","passwordRef","openingRef","form","useForm","isGrantedAccess","auth","loadingTrx","transactionHolds","transaction","onFinish","values","handleClosingShift","email","password","window","btoa","funcId","onFinishFailed","onKeyDown","blur","focus","isActiveEmail","document","activeElement","input","isActivePassword","resetFields","app","closeCash","closingCash","useEffect","addEventListener","removeEventListener","name","layout","initialValues","remember","autoComplete","width","Item","label","rules","required","message","defaultValue","autoFocus","placeholder","prefix","htmlType","wrap","gutter","Password"],"mappings":"4OAEe,SAASA,IACvB,MAAM,iBAAEC,EAAmB,CAAC,GAAMC,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,UAC1D,QAAEC,EAAU,GAAE,YAAEC,EAAc,GAAE,aAAEC,EAAe,IAAON,EAsC9D,MAAO,CAAEO,WApCU,WAAe,IAAdC,EAAG,uDAAG,GACzB,OAAuB,IAAnBJ,EAAQK,QAAgBD,EACpBJ,EAAQM,QAAO,CAACC,EAAKC,IAASD,GAAOC,EAAKJ,IAAQ,IAAI,GAGvD,CACR,EA8BqBK,eA5BE,WAAe,IAAdL,EAAG,uDAAG,GAC7B,OAA2B,IAAvBH,EAAYI,QAAgBD,EACxBH,EAAYK,QAAO,CAACC,EAAKC,IAASD,GAAOC,EAAKJ,IAAQ,IAAI,GAG3D,CACR,EAsBqCM,gBApBb,IACRR,EAAaI,QAAO,CAACC,EAAKC,KACxC,MAAMG,EAAWJ,EAAIK,MAAMC,GAAMA,EAAEC,WAAaN,EAAKM,WAYrD,OAVIH,GACHA,EAASI,YAAcP,EAAKO,WAC5BJ,EAASK,eAAiBR,EAAKQ,cAC/BL,EAASM,WAAaT,EAAKS,UAC3BN,EAASO,WAAaV,EAAKU,UAC3BP,EAASQ,UAAYX,EAAKW,UAE1BZ,EAAIa,KAAK,IAAKZ,IAGRD,CAAG,GACR,IAML,C,8CCxCe,SAASc,EAAa,GAAiE,IAAjE,MAAEC,EAAQ,GAAE,MAAEC,EAAQ,GAAE,UAAEC,EAAY,GAAE,UAAEC,EAAY,QAAQ,EAClG,OACC,qBAAKD,UAAS,iBAAYC,GAAY,SACrC,8BACC,mBAAKC,KAAM,GAAIF,UAAS,UAAmB,KAAdA,EAAmBA,EAAY,YAAW,eAAc,SACnFF,IAEF,mBAAKI,KAAM,EAAGF,UAAS,UAAmB,KAAdA,EAAmBA,EAAY,aAAc,SAAC,MAG1E,mBAAKE,KAAM,GAAIF,UAAS,UAAmB,KAAdA,EAAmBA,EAAY,YAAW,eAAc,SACnFD,QAKN,CCXO,MAAMI,EAAcC,IAAMC,YAAW,CAAC,EAA+BC,KAAS,IAAD,MAAvC,WAAEC,EAAa,MAAOC,GAAO,EACzE,MAAM,QAAEC,EAAU,CAAC,EAAC,SAAEC,EAAW,CAAC,EAAC,KAAEC,EAAO,CAAC,GAAMC,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OACvF,UAAEC,GAAY,GAAUP,GACxB,iBAAErC,EAAmB,CAAC,EAAC,mBAAE6C,GAAqB,GAAU5C,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,UACtF,UAAE2C,EAAY,GAAE,aAAExC,EAAe,GAAE,MAAEyC,EAAQ,GAAE,QAAE3C,EAAU,GAAE,WAAE4C,EAAa,IAAOhD,GACnF,WAAEO,EAAU,gBAAEO,EAAe,eAAED,GAAmBd,IAExD,OACC,sBAAK6B,UAAU,8CAA8CqB,MAAO,CAAEC,SAAU,SAAWhB,IAAKA,EAAI,UACnG,gCACC,mBAAGN,UAAU,0CAAyC,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUa,UAAW,KAC7E,mBAAGvB,UAAU,6CAA4C,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUc,UAAW,KAChF,mBAAGxB,UAAU,qCAAoC,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUe,UAAW,KACxE,mBAAGzB,UAAU,gCAA+B,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUgB,UAAW,KACnE,mBAAG1B,UAAU,gCAA+B,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUiB,UAAW,KACnE,mBAAG3B,UAAU,gCAA+B,UAAU,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUkB,UAAW,QAEpE,qBAAK5B,UAAU,uDACf,8BACC,mBAAGA,UAAU,mDAAkD,SAAY,OAAVO,QAAU,IAAVA,OAAU,EAAVA,EAAYsB,kBAE9E,qBAAK7B,UAAU,uDACf,gCACC,cAACH,EAAY,CAACI,UAAU,OAAOD,UAAU,oBAAoBF,MAAM,aAAaC,MAAW,OAAJY,QAAI,IAAJA,OAAI,EAAJA,EAAMmB,WAC7F,cAACjC,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,gBACNC,MAAOgC,IAAc,OAAPtB,QAAO,IAAPA,OAAO,EAAPA,EAASuB,WAAWC,OAAO,wBAE1C,cAACpC,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,eACNC,MAAK,cAASmC,YAAejD,EAAe,aAAc,MAE3D,cAACY,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,gBACNC,MAAOgC,IAAc,OAAPtB,QAAO,IAAPA,OAAO,EAAPA,EAAS0B,aAAaF,OAAO,wBAG5C,cAACpC,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,eACNC,MAAK,cAASmC,YAAejD,EAAe,WAAY,MAEzD,cAACY,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,aACNC,MAAK,cAASmC,YAAejD,EAAe,aAAc,MAE3D,cAACY,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,YACNC,MAAK,cAASmC,YAAejD,EAAe,aAAc,MAE3D,cAACY,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,WACNC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KAExD,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,iBACNC,MAAO,OAASmC,YAAevD,EAAW,aAAc,KAEzD,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,gBACNC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KAExD,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,UACNC,MAAO,OAASmC,YAAevD,EAAW,WAAY,KAEvD,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,cACNC,MAAO,OAASmC,YAAevD,EAAW,aAAc,KAEzD,cAACkB,EAAY,CAACI,UAAU,OAAOD,UAAU,oBAAoBF,MAAM,MAAMC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KAChI,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,cACNC,MAAO,OAASmC,YAAevD,EAAW,cAAe,KAE1D,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,YACNC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KAExD,cAACkB,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAM,kBACNC,MAAO,OAASmC,YAAevD,EAAW,kBAAmB,QAG/D,qBAAKqB,UAAU,uDACf,gCACC,qBAAKA,UAAU,cAAa,SAC3B,oBAAIA,UAAU,uDAAsD,SAAC,kBAEtE,qBAAKA,UAAU,uDAEJ,OAAVoB,QAAU,IAAVA,OAAU,EAAVA,EAAYgB,KAAI,IAAuC,IAAtC,SAAEC,EAAW,GAAE,UAAEC,EAAY,GAAG,EACjD,OACC,cAACzC,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAOuC,EAASE,OAChBxC,MAAK,cAASmC,YAAeI,EAAW,KACvC,OAIL,qBAAKtC,UAAU,uDACf,gCACC,oBAAIA,UAAU,uDAAsD,SAAC,UACrE,qBAAKA,UAAU,uDACL,OAATkB,QAAS,IAATA,OAAS,EAATA,EAAWkB,KAAI,IAAwD,IAAvD,UAAEI,EAAY,GAAE,UAAEC,EAAY,GAAE,UAAEhD,EAAY,GAAG,EACjE,OACC,cAACI,EAAY,CACZI,UAAU,OACVD,UAAU,oBACVF,MAAO2C,EACP1C,MAAK,cAASmC,YAAezC,EAAW,KACvC,OAIL,qBAAKO,UAAU,uDACf,gCACC,oBAAIA,UAAU,uDAAsD,SAAC,aACrE,qBAAKA,UAAU,uDACG,QADoD,EACrEd,WAAiB,aAAjB,EAAmBkD,KAAI,IAAuC,IAAtC,SAAEM,EAAW,GAAE,UAAEjD,EAAY,GAAG,EACxD,OACC,cAACI,EAAY,CAACI,UAAU,OAAOD,UAAU,oBAAoBF,MAAO4C,EAAU3C,MAAK,cAASmC,YAAezC,EAAW,KAAQ,SAI5H,ICrJO,SAASkD,EAAc,GAA+D,IAAD,MAA9D,UAAEC,GAAY,EAAK,UAAE5B,GAAY,EAAK,WAAE6B,GAAa,GAAO,EACjG,MAAMC,EAAUC,uBACVC,EAAWC,cACjB,IAAIC,EAAoBC,mBAExB,MAAM,QAAE1C,EAAU,CAAC,EAAC,KAAEE,EAAO,CAAC,GAAMC,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OACxE,iBAAE3C,EAAmB,CAAC,EAAC,mBAAE6C,GAAqB,GAAU5C,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOC,UACtF,UAAE2C,EAAY,GAAE,WAAEE,EAAa,GAAE,YAAE3C,EAAc,IAAOL,GACxD,WAAEO,EAAU,eAAEM,EAAc,gBAAEC,GAAoBf,IAElDiF,EAAcC,0BAAgB,CACnCC,QAAS,IAAMJ,EAAkBK,QACjCC,aAAeC,GAAMC,QAAQC,IAAI,eAAgBF,GACjDG,kBAAkB,EAClBC,YAAY,IAuBb,OACC,qBAAK7D,UAAU,gBAAe,SAC7B,sBAAKA,UAAU,sCAAqC,UACnD,sBAAKA,UAAU,aAAY,UAC1B,sBAAKA,UAAU,SAAQ,UACtB,qBAAKA,UAAU,OAAM,SACpB,mBACCA,UAAU,iBACV8D,QAAS7C,EACT8C,SAAU9C,EACV+C,QA9BsB,KACxBhD,EACHgC,EAAS,CACRiB,KAAM,wBACNC,QAAS,CACRC,QAAgB,OAAP1D,QAAO,IAAPA,OAAO,EAAPA,EAASuB,UAClBoC,QAAgB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS2D,WAGVvB,GACVG,EAAS,CACRiB,KAAM,wBACNC,QAAS,CACRC,QAAgB,OAAP1D,QAAO,IAAPA,OAAO,EAAPA,EAASuB,UAClBoC,QAAS,QAGZ,EAaoC,SAAC,cAIjC,qBAAKpE,UAAU,GAAE,SAChB,oBAAIA,UAAU,wBAAuB,SAAC,qBAEvC,sBAAKA,UAAU,OAAM,UACpB,cAACH,EAAY,CAACC,MAAM,aAAaC,MAAW,OAAJY,QAAI,IAAJA,OAAI,EAAJA,EAAMmB,WAC9C,cAACjC,EAAY,CAACC,MAAM,gBAAgBC,MAAOgC,IAAc,OAAPtB,QAAO,IAAPA,OAAO,EAAPA,EAASuB,WAAWC,OAAO,wBAC7E,cAACpC,EAAY,CAACC,MAAM,eAAeC,MAAK,cAASmC,YAAejD,EAAe,aAAc,MAC7F,cAACY,EAAY,CAACC,MAAM,gBAAgBC,MAAOgC,IAAkB,OAAXtD,QAAW,IAAXA,OAAW,EAAXA,EAAa0F,SAASlC,OAAO,wBAE/E,cAACpC,EAAY,CAACC,MAAM,eAAeC,MAAK,cAASmC,YAAejD,EAAe,WAAY,MAC3F,cAACY,EAAY,CAACC,MAAM,aAAaC,MAAK,cAASmC,YAAejD,EAAe,aAAc,MAC3F,cAACY,EAAY,CAACC,MAAM,YAAYC,MAAK,cAASmC,YAAejD,EAAe,aAAc,YAG5F,qBAAKe,UAAU,0BAA0BqB,MAAO,CAAEgD,OAAQ,SAC1D,sBAAKrE,UAAU,SAAQ,UACtB,qBAAKA,UAAU,GAAE,SAChB,oBAAIA,UAAU,wBAAuB,SAAC,6BAEvC,sBAAKA,UAAU,OAAM,UACpB,cAACH,EAAY,CAACC,MAAM,WAAWC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KACtF,cAACkB,EAAY,CAACC,MAAM,iBAAiBC,MAAO,OAASmC,YAAevD,EAAW,aAAc,KAC7F,cAACkB,EAAY,CAACC,MAAM,gBAAgBC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KAC3F,cAACkB,EAAY,CAACC,MAAM,UAAUC,MAAO,OAASmC,YAAevD,EAAW,WAAY,KACpF,cAACkB,EAAY,CAACC,MAAM,cAAcC,MAAO,OAASmC,YAAevD,EAAW,aAAc,KAC1F,cAACkB,EAAY,CAACC,MAAM,MAAMC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KACjF,cAACkB,EAAY,CAACC,MAAM,cAAcC,MAAO,OAASmC,YAAevD,EAAW,cAAe,KAC3F,cAACkB,EAAY,CAACC,MAAM,YAAYC,MAAO,OAASmC,YAAevD,EAAW,YAAa,KACvF,cAACkB,EAAY,CAACC,MAAM,kBAAkBC,MAAO,OAASmC,YAAevD,EAAW,kBAAmB,WAGrG,qBAAKqB,UAAU,0BAA0BqB,MAAO,CAAEgD,OAAQ,SAC1D,sBAAKrE,UAAU,SAAQ,UACtB,qBAAKA,UAAU,GAAE,SAChB,oBAAIA,UAAU,wBAAuB,SAAC,+BAEvC,qBAAKA,UAAU,OAAM,SACT,OAAVoB,QAAU,IAAVA,OAAU,EAAVA,EAAYgB,KAAI,IAAuC,IAAtC,SAAEC,EAAW,GAAE,UAAEC,EAAY,GAAG,EACjD,OAAO,cAACzC,EAAY,CAACC,MAAOuC,EAASE,OAAQxC,MAAK,cAASmC,YAAeI,EAAW,KAAQ,SAIhG,qBAAKtC,UAAU,0BAA0BqB,MAAO,CAAEgD,OAAQ,SAC1D,sBAAKrE,UAAU,SAAQ,UACtB,qBAAKA,UAAU,GAAE,SAChB,oBAAIA,UAAU,wBAAuB,SAAC,mCAEvC,qBAAKA,UAAU,OAAM,SACV,OAATkB,QAAS,IAATA,OAAS,EAATA,EAAWkB,KAAI,IAAwC,IAAvC,UAAEK,EAAY,GAAE,UAAEhD,EAAY,GAAG,EACjD,OAAO,cAACI,EAAY,CAACC,MAAO2C,GAAa,IAAK1C,MAAK,cAASmC,YAAezC,EAAW,KAAQ,SAIjG,sBAAKO,UAAU,SAAQ,UACtB,qBAAKA,UAAU,GAAE,SAChB,oBAAIA,UAAU,wBAAuB,SAAC,sCAEvC,qBAAKA,UAAU,OAAM,SACF,QADE,EACnBd,WAAiB,aAAjB,EAAmBkD,KAAI,IAA8B,IAA7B,SAAEM,EAAQ,UAAEjD,GAAW,EAC/C,OAAO,cAACI,EAAY,CAACC,MAAO4C,GAAY,IAAK3C,MAAK,cAASmC,YAAezC,EAAW,KAAQ,YAKjG,sBAAKO,UAAU,aAAY,UAC1B,sBAAKA,UAAU,sCAAqC,UACnD,mBACCA,UAAU,8EACVsE,KAAM,cAAC,IAAkB,CAACtE,UAAU,kBACpCgE,QAAS,IAAMlB,EAAQlD,KAAK,kBAE7B,oBAAQI,UAAU,WAAWgE,QAAUP,GAAML,EAAYK,GAAG,IAAMP,IAAmB,UAAC,SAC9ElC,EAAY,gBAAkB6B,EAAa,aAAe,eAGnE,qBAAK7C,UAAU,SAAQ,SACtB,cAACG,EAAW,CACXG,IAAMiE,GAAQrB,EAAoBqB,EAClChE,WAAU,iBAAYS,EAAY,gBAAkB6B,EAAa,aAAe,qBAOvF,C,6NC9Ie,SAAS2B,IACvB,MAAMxB,EAAWC,cACXH,EAAUC,uBAEV0B,EAAWtB,iBAAO,MAClBuB,EAAcvB,iBAAO,MACrBwB,EAAaxB,iBAAO,OACnByB,GAAQ,IAAKC,WAEd,QAAEf,GAAU,EAAK,gBAAEgB,GAAkB,GAAUzG,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOyG,QAC3EjB,QAASkB,GAAa,EAAK,iBAAEC,EAAmB,IAAO5G,aAAaC,GAAe,OAALA,QAAK,IAALA,OAAK,EAALA,EAAO4G,eACvF,QAAEzE,EAAU,CAAC,GAAMG,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAC7D,UAAEC,GAAY,GAAUP,EAExB0E,EAAYC,IACbN,EACHO,EAAmBD,IAIpBpC,EAAS,CACRiB,KAAM,mBACNC,QAAS,CACRoB,MAAa,OAANF,QAAM,IAANA,OAAM,EAANA,EAAQE,MACfC,SAAUC,OAAOC,KAAW,OAANL,QAAM,IAANA,OAAM,EAANA,EAAQG,UAC9BG,OAAQ,QAET5C,YAGDE,EAAS,CACRiB,KAAM,0BACL,EAGG0B,EAAkBlC,GAAMC,QAAQC,IAAI,UAAWF,GAE/CmC,EAAanC,IAClB,GAAIqB,EACW,WAAVrB,EAAE7E,MACL+F,EAAWpB,QAAQsC,OACnBlB,EAAWpB,QAAQxD,MAAQ,IAG5B4E,GAAcA,EAAWpB,SAAWoB,EAAWpB,QAAQuC,YACjD,CACN,MAAMC,EAAgBC,SAASC,iBAAwC,OAArBxB,EAASlB,SAAoBkB,EAASlB,QAAQ2C,SAAU,EACpGC,EAAmBH,SAASC,iBAA2C,OAAxBvB,EAAYnB,SAAoBmB,EAAYnB,QAAQ2C,SAAU,EAEnH,GAAc,UAAVzC,EAAE7E,KAAmBmH,EAGxB,OAFAtB,EAASlB,QAAQsC,YACjBnB,EAAYnB,QAAQuC,QAIrB,GAAc,UAAVrC,EAAE7E,KAAmBuH,EAIxB,OAHA1B,EAASlB,QAAQsC,YACjBnB,EAAYnB,QAAQuC,QAKP,WAAVrC,EAAE7E,MACLkE,EAAQlD,KAAK,gBACbgF,EAAKwB,eAGQ,YAAV3C,EAAE7E,KACL6F,EAASlB,QAAQuC,QAGJ,cAAVrC,EAAE7E,MACL8F,EAAYnB,QAAQuC,QAEhBK,IACHzB,EAAYnB,QAAQsC,OACpBpB,EAASlB,QAAQsC,QAGpB,GAGKR,EAAsBD,IAC3B,MAAMiB,EAAMzF,KAAKC,MAAMC,aAAaC,QAAQ,QAAU,OAChD,QAAEN,EAAU,CAAC,EAAC,SAAEC,EAAW,CAAC,GAAM2F,EAElCnC,EAAU,CACfC,SAAgB,OAAP1D,QAAO,IAAPA,OAAO,EAAPA,EAASuB,aAAqB,OAARtB,QAAQ,IAARA,OAAQ,EAARA,EAAUyD,UAAW,GACpDmC,WAAiB,OAANlB,QAAM,IAANA,OAAM,EAANA,EAAQmB,cAAe,EAClCnC,SAAgB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS2D,WAAmB,OAAR1D,QAAQ,IAARA,OAAQ,EAARA,EAAU0D,UAAW,GAGnDpB,EAAS,CACRiB,KAAM,4BACNC,UACApB,UACApC,YACC,EA4BH,OAzBA8F,qBAAU,KACTR,SAASS,iBAAiB,UAAWb,GAErC5C,EAAS,CACRiB,KAAM,iBACNC,QAAS,CACRY,iBAAiB,KAIZ,KACNkB,SAASU,oBAAoB,UAAWd,EAAU,IAEjD,CAAChB,IAEJ4B,qBAAU,KACTxD,EAAS,CACRiB,KAAM,wBACNC,QAAS,CACRC,QAAgB,OAAP1D,QAAO,IAAPA,OAAO,EAAPA,EAASuB,UAClBoC,QAAgB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS2D,UAElB,GACA,CAACpD,IAGH,qBAAKhB,UAAU,oCAAmC,SACjD,qBAAKA,UAAU,0DAAyD,SACvE,sBAAKA,UAAS,UAAKgB,EAAY,qBAAuB,YAAa,UAClE,gCACC,oBAAIhB,UAAU,uBAAsB,SAAC,kBACrC,mBAAGA,UAAU,8BAA6B,SAAC,mKAM1CgB,EAoKD,cAAC,IAAa,CAACA,WAAW,IAnK1B8D,EACC,sBAAK9E,UAAU,qBAAoB,UACJ,KAAb,OAAhBiF,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBpG,QAClB,sBAAKmB,UAAU,qFAAoF,UAClG,8BACC,cAAC,IAAS,CAACA,UAAU,4BAEtB,gCACC,oBAAIA,UAAU,wBAAuB,SAAC,eACtC,4BAAG,sJAOL,sBAAKA,UAAU,wFAAuF,UACrG,8BACC,cAAC,IAAS,CAACA,UAAU,+BAEtB,gCACC,oBAAIA,UAAU,wBAAuB,SAAC,eACtC,4BAAG,iKAQN,oBACC4E,KAAMA,EACN+B,KAAK,UACLC,OAAO,WACPC,cAAe,CACdC,UAAU,GAEX3B,SAAUA,EACVQ,eAAgBA,EAChBoB,aAAa,MACb1F,MAAO,CAAEC,SAAU,OAAQ0F,MAAO,QAAS,UAC3C,kBAAMC,KAAI,UACT,kBAAMA,KAAI,CACTC,MAAM,cACNP,KAAK,cACLQ,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,iBAET,SACF,mBACCC,aAAc,EACdhH,IAAKqE,EACLV,KAAK,SACLsD,WAAS,EACTR,aAAa,QACbS,YAAY,IACZC,OAAO,OACPzH,UAAU,+BAIb,sBAAKA,UAAU,oDAAmD,UACjE,kBAAMiH,KAAI,UACT,mBAAQlD,SAAUiB,EAAYlB,QAASkB,EAAY0C,SAAS,SAAS1H,UAAU,WAAU,SAAC,kBAI3F,kBAAMiH,KAAI,UACT,mBACClD,SAAUiB,EACV0C,SAAS,SACT1H,UAAU,wCACVgE,QAAS,IAAMlB,EAAQlD,KAAK,gBAAgB,SAAC,wBAQlD,qBAAKI,UAAU,aAAY,SAC1B,mBACC4E,KAAMA,EACN+B,KAAK,QACLC,OAAO,WACPC,cAAe,CACdC,UAAU,GAEX3B,SAAUA,EACVQ,eAAgBA,EAChBoB,aAAa,MACb1F,MAAO,CAAEC,SAAU,OAAQ0F,MAAO,QAAS,SAC3C,oBAAKW,MAAI,EAACC,OAAQ,CAAC,EAAG,GAAG,UACxB,mBAAK1H,KAAM,GAAG,SACb,kBAAM+G,KAAI,CACTC,MAAM,QACNP,KAAK,QACLQ,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,iBAET,SACF,mBACC/G,IAAKmE,EACLR,KAAK,QACLsD,WAAS,EACTR,aAAa,QACbS,YAAY,sBACZxH,UAAU,+BAIb,mBAAKE,KAAM,GAAG,SACb,kBAAM+G,KAAI,CACTC,MAAM,WACNP,KAAK,WACLQ,MAAO,CACN,CACCC,UAAU,EACVC,QAAS,iBAET,SACF,kBAAOQ,SAAQ,CACdvH,IAAKoE,EACLT,KAAK,WACL8C,aAAa,QACbS,YAAY,WACZxH,UAAU,+BAIb,mBAAKE,KAAM,GAAG,SACb,sBAAKF,UAAU,oDAAmD,UACjE,kBAAMiH,KAAI,UACT,mBACClD,SAAUD,EACVA,QAASA,EACTG,KAAK,UACLyD,SAAS,SACT1H,UAAU,sDAAqD,SAAC,qBAIlE,kBAAMiH,KAAI,UACT,oBACClD,SAAUD,EACVG,KAAK,UACLyD,SAAS,SACT1H,UAAU,gEACVgE,QAAS,IAAMlB,EAAQlD,KAAK,gBAAgB,UAAC,WACrC,qBAAKI,UAAU,MAAK,SAAC,+BAgB3C,C","file":"static/js/35.edb7f4ec.chunk.js","sourcesContent":["import { useSelector } from 'react-redux';\n\nexport default function useCalculateSales() {\n\tconst { reportSalesShift = {} } = useSelector((state) => state?.report);\n\tconst { balance = [], cashBalance = [], itemCategory = [] } = reportSalesShift;\n\n\tconst getBalance = (key = '') => {\n\t\tif (balance.length !== 0 && key) {\n\t\t\treturn balance.reduce((acc, item) => acc + (item[key] || 0), 0);\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\tconst getCashBalance = (key = '') => {\n\t\tif (cashBalance.length !== 0 && key) {\n\t\t\treturn cashBalance.reduce((acc, item) => acc + (item[key] || 0), 0);\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\tconst getCategoryData = () => {\n\t\tconst result = itemCategory.reduce((acc, item) => {\n\t\t\tconst existing = acc.find((i) => i.cateCode === item.cateCode);\n\n\t\t\tif (existing) {\n\t\t\t\texisting.grossSales += item.grossSales;\n\t\t\t\texisting.salesDiscount += item.salesDiscount;\n\t\t\t\texisting.nettSales += item.nettSales;\n\t\t\t\texisting.servValue += item.servValue;\n\t\t\t\texisting.taxValue += item.taxValue;\n\t\t\t} else {\n\t\t\t\tacc.push({ ...item });\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, []);\n\n\t\treturn result;\n\t};\n\n\treturn { getBalance, getCashBalance, getCategoryData };\n}\n","import { Col, Row } from 'antd';\nimport React from 'react';\n\nexport default function RowItemPrint({ title = '', value = '', className = '', marginRow = 'my-2' }) {\n\treturn (\n\t\t<div className={`w-full ${marginRow}`}>\n\t\t\t<Row>\n\t\t\t\t<Col span={11} className={`${className !== '' ? className : 'text-base'} capitalize`}>\n\t\t\t\t\t{title}\n\t\t\t\t</Col>\n\t\t\t\t<Col span={1} className={`${className !== '' ? className : 'text-base'}`}>\n\t\t\t\t\t:\n\t\t\t\t</Col>\n\t\t\t\t<Col span={12} className={`${className !== '' ? className : 'text-base'} capitalize`}>\n\t\t\t\t\t{value}\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</div>\n\t);\n}\n","/* eslint-disable no-unused-vars */\nimport moment from 'moment';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCalculateSales from '../closing-shift/hooks/useCalculateSales';\nimport RowItemPrint from '../widget/RowItemPrint';\n\nexport const ReportPrint = React.forwardRef(({ titlePrint = '', ...props }, ref) => {\n\tconst { cashier = {}, property = {}, user = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { isClosing = false } = cashier;\n\tconst { reportSalesShift = {}, loadingReportShift = false } = useSelector((state) => state?.report);\n\tconst { itemGroup = [], itemCategory = [], items = [], balance = [], settlement = [] } = reportSalesShift;\n\tconst { getBalance, getCategoryData, getCashBalance } = useCalculateSales();\n\n\treturn (\n\t\t<div className=\"w-full p-3 py-5 bg-white rounded-md mx-auto\" style={{ maxWidth: '350px' }} ref={ref}>\n\t\t\t<div>\n\t\t\t\t<p className=\"text-center text-print-medium font-bold\">{property?.header1 || ''}</p>\n\t\t\t\t<p className=\"text-center text-print-small font-semibold\">{property?.header2 || ''}</p>\n\t\t\t\t<p className=\"text-center text-print-xsmall mt-2\">{property?.header3 || ''}</p>\n\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header4 || ''}</p>\n\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header5 || ''}</p>\n\t\t\t\t<p className=\"text-center text-print-xsmall\">{property?.header6 || ''}</p>\n\t\t\t</div>\n\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t<div>\n\t\t\t\t<p className=\"text-center text-print-medium mt-3 font-semibold\">{titlePrint?.toUpperCase()}</p>\n\t\t\t</div>\n\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t<div>\n\t\t\t\t<RowItemPrint marginRow=\"my-1\" className=\"text-print-xsmall\" title=\"nama kasir\" value={user?.username} />\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"opening shift\"\n\t\t\t\t\tvalue={moment(cashier?.shiftDate).format('dddd, DD MMMM YYYY')}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"opening cash\"\n\t\t\t\t\tvalue={`IDR ${currencyFormat(getCashBalance('beginCash'), 0)}`}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"closing shift\"\n\t\t\t\t\tvalue={moment(cashier?.closingDate).format('dddd, DD MMMM YYYY')}\n\t\t\t\t/>\n\t\t\t\t{/* <RowItemPrint marginRow=\"my-1\" className=\"text-print-xsmall\" title=\"closing cashier\" value={`-`} /> */}\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"closing cash\"\n\t\t\t\t\tvalue={`IDR ${currencyFormat(getCashBalance('endCash'), 0)}`}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"total cash\"\n\t\t\t\t\tvalue={`IDR ${currencyFormat(getCashBalance('paidValue'), 0)}`}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"different\"\n\t\t\t\t\tvalue={`IDR ${currencyFormat(getCashBalance('different'), 0)}`}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"subtotal\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('SubTotal'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"sales discount\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('DiscValue'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"discount bill\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('DiscBill'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"rounded\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('Rounded'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"service tax\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('ServValue'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint marginRow=\"my-1\" className=\"text-print-xsmall\" title=\"tax\" value={'IDR ' + currencyFormat(getBalance('TaxValue'), 0)} />\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"grand total\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('GrandTotal'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"net sales\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('NetSales'), 0)}\n\t\t\t\t/>\n\t\t\t\t<RowItemPrint\n\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\ttitle=\"sales collected\"\n\t\t\t\t\tvalue={'IDR ' + currencyFormat(getBalance('SalesCollected'), 0)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t<div>\n\t\t\t\t<div className=\"w-full mb-3\">\n\t\t\t\t\t<h1 className=\"text-center text-print-small font-semibold uppercase\">SETTLEMENTS</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\n\t\t\t\t{settlement?.map(({ CardName = '', PaidValue = 0 }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<RowItemPrint\n\t\t\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\t\t\ttitle={CardName.trim()}\n\t\t\t\t\t\t\tvalue={`IDR ${currencyFormat(PaidValue, 0)}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t<div>\n\t\t\t\t<h1 className=\"text-center text-print-small font-semibold uppercase\">GROUP</h1>\n\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t\t{itemGroup?.map(({ groupCode = '', groupName = '', nettSales = 0 }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<RowItemPrint\n\t\t\t\t\t\t\tmarginRow=\"my-1\"\n\t\t\t\t\t\t\tclassName=\"text-print-xsmall\"\n\t\t\t\t\t\t\ttitle={groupName}\n\t\t\t\t\t\t\tvalue={`IDR ${currencyFormat(nettSales, 0)}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t<div>\n\t\t\t\t<h1 className=\"text-center text-print-small font-semibold uppercase\">category</h1>\n\t\t\t\t<div className=\"my-3 w-full border border-separate border-gray-400\" />\n\t\t\t\t{getCategoryData()?.map(({ cateName = '', nettSales = 0 }) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<RowItemPrint marginRow=\"my-1\" className=\"text-print-xsmall\" title={cateName} value={`IDR ${currencyFormat(nettSales, 0)}`} />\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n","/* eslint-disable array-callback-return */\nimport { Button } from 'antd';\nimport moment from 'moment';\nimport React, { useRef } from 'react';\nimport { MdOutlineArrowBack } from 'react-icons/md';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { useReactToPrint } from 'react-to-print';\nimport { currencyFormat } from '../../../utils/helper/utilities';\nimport useCalculateSales from '../closing-shift/hooks/useCalculateSales';\nimport RowItemPrint from '../widget/RowItemPrint';\nimport { ReportPrint } from './ReportPrint';\n\nexport default function ReportDetails({ isOpening = false, isClosing = false, isEndOfDay = false }) {\n\tconst history = useHistory();\n\tconst dispatch = useDispatch();\n\tlet componentPrintRef = useRef();\n\n\tconst { cashier = {}, user = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { reportSalesShift = {}, loadingReportShift = false } = useSelector((state) => state?.report);\n\tconst { itemGroup = [], settlement = [], cashBalance = [] } = reportSalesShift;\n\tconst { getBalance, getCashBalance, getCategoryData } = useCalculateSales();\n\n\tconst handlePrint = useReactToPrint({\n\t\tcontent: () => componentPrintRef.current,\n\t\tonPrintError: (e) => console.log('Error Print!', e),\n\t\tremoveAfterPrint: true,\n\t\tcopyStyles: true\n\t});\n\n\tconst handleGetReportShift = () => {\n\t\tif (isClosing) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'report/SALES_BY_SHIFT',\n\t\t\t\tpayload: {\n\t\t\t\t\trefDate: cashier?.shiftDate,\n\t\t\t\t\tshiftId: cashier?.shiftId\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (isEndOfDay) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'report/SALES_BY_SHIFT',\n\t\t\t\tpayload: {\n\t\t\t\t\trefDate: cashier?.shiftDate,\n\t\t\t\t\tshiftId: 'all'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"w-full h-auto\">\n\t\t\t<div className=\"w-full mt-7 grid grid-cols-12 gap-5\">\n\t\t\t\t<div className=\"col-span-8\">\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"mb-5\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"btn-page w-1/2\"\n\t\t\t\t\t\t\t\tloading={loadingReportShift}\n\t\t\t\t\t\t\t\tdisabled={loadingReportShift}\n\t\t\t\t\t\t\t\tonClick={handleGetReportShift}>\n\t\t\t\t\t\t\t\tRefresh\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Report Cashier</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t<RowItemPrint title=\"nama kasir\" value={user?.username} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"opening shift\" value={moment(cashier?.shiftDate).format('dddd, DD MMMM YYYY')} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"opening cash\" value={`IDR ${currencyFormat(getCashBalance('beginCash'), 0)}`} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"closing shift\" value={moment(cashBalance?.refDate).format('dddd, DD MMMM YYYY')} />\n\t\t\t\t\t\t\t{/* <RowItemPrint title=\"closing cashier\" value={`-`} /> */}\n\t\t\t\t\t\t\t<RowItemPrint title=\"closing cash\" value={`IDR ${currencyFormat(getCashBalance('endCash'), 0)}`} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"total cash\" value={`IDR ${currencyFormat(getCashBalance('paidValue'), 0)}`} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"different\" value={`IDR ${currencyFormat(getCashBalance('different'), 0)}`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full bg-gray-400 my-4\" style={{ height: '1px' }} />\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Report Sales Balancing</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t<RowItemPrint title=\"subtotal\" value={'IDR ' + currencyFormat(getBalance('SubTotal'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"sales discount\" value={'IDR ' + currencyFormat(getBalance('DiscValue'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"discount bill\" value={'IDR ' + currencyFormat(getBalance('DiscBill'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"rounded\" value={'IDR ' + currencyFormat(getBalance('Rounded'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"service tax\" value={'IDR ' + currencyFormat(getBalance('ServValue'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"tax\" value={'IDR ' + currencyFormat(getBalance('TaxValue'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"grand total\" value={'IDR ' + currencyFormat(getBalance('GrandTotal'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"net sales\" value={'IDR ' + currencyFormat(getBalance('NetSales'), 0)} />\n\t\t\t\t\t\t\t<RowItemPrint title=\"sales collected\" value={'IDR ' + currencyFormat(getBalance('SalesCollected'), 0)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full bg-gray-400 my-4\" style={{ height: '1px' }} />\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Report Sales Settlements</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t{settlement?.map(({ CardName = '', PaidValue = 0 }) => {\n\t\t\t\t\t\t\t\treturn <RowItemPrint title={CardName.trim()} value={`IDR ${currencyFormat(PaidValue, 0)}`} />;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full bg-gray-400 my-4\" style={{ height: '1px' }} />\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Report Sales Detail By Group</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t{itemGroup?.map(({ groupName = '', nettSales = 0 }) => {\n\t\t\t\t\t\t\t\treturn <RowItemPrint title={groupName || '-'} value={`IDR ${currencyFormat(nettSales, 0)}`} />;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t\t<h1 className=\"text-lg font-semibold\">Report Sales Detail By Category</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t{getCategoryData()?.map(({ cateName, nettSales }) => {\n\t\t\t\t\t\t\t\treturn <RowItemPrint title={cateName || '-'} value={`IDR ${currencyFormat(nettSales, 0)}`} />;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-span-4\">\n\t\t\t\t\t<div className=\"w-full mb-3 flex items-center gap-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"flex btn-page px-5 w-max bg-transparent border border-blue-600 text-primary\"\n\t\t\t\t\t\t\ticon={<MdOutlineArrowBack className=\"text-blue-600\" />}\n\t\t\t\t\t\t\tonClick={() => history.push('/pos/options')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button className=\"btn-page\" onClick={(e) => handlePrint(e, () => componentPrintRef)}>\n\t\t\t\t\t\t\tPRINT {isClosing ? 'CLOSING SHIFT' : isEndOfDay ? 'END OF DAY' : 'REPORT'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t<ReportPrint\n\t\t\t\t\t\t\tref={(el) => (componentPrintRef = el)}\n\t\t\t\t\t\t\ttitlePrint={`REPORT ${isClosing ? 'CLOSING SHIFT' : isEndOfDay ? 'END OF DAY' : 'REPORT'}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { Button, Col, Form, Input, Row } from 'antd';\nimport React, { useEffect, useRef } from 'react';\nimport { IoWarning } from 'react-icons/io5';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport ReportDetails from '../components/ReportDetails';\n\nexport default function CloseDayPage() {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\n\tconst emailRef = useRef(null);\n\tconst passwordRef = useRef(null);\n\tconst openingRef = useRef(null);\n\tconst [form] = Form.useForm();\n\n\tconst { loading = false, isGrantedAccess = false } = useSelector((state) => state?.auth);\n\tconst { loading: loadingTrx = false, transactionHolds = [] } = useSelector((state) => state?.transaction);\n\tconst { cashier = {} } = JSON.parse(localStorage.getItem('app') || '{}');\n\tconst { isClosing = false } = cashier;\n\n\tconst onFinish = (values) => {\n\t\tif (isGrantedAccess) {\n\t\t\thandleClosingShift(values);\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch({\n\t\t\ttype: 'auth/USER_ACCESS',\n\t\t\tpayload: {\n\t\t\t\temail: values?.email,\n\t\t\t\tpassword: window.btoa(values?.password),\n\t\t\t\tfuncId: '1038'\n\t\t\t},\n\t\t\thistory\n\t\t});\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/HOLD_LIST'\n\t\t});\n\t};\n\n\tconst onFinishFailed = (e) => console.log('Error! ', e);\n\n\tconst onKeyDown = (e) => {\n\t\tif (isGrantedAccess) {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\topeningRef.current.blur();\n\t\t\t\topeningRef.current.value = '';\n\t\t\t}\n\n\t\t\topeningRef && openingRef.current && openingRef.current.focus();\n\t\t} else {\n\t\t\tconst isActiveEmail = document.activeElement === (emailRef.current !== null && emailRef.current.input) || false;\n\t\t\tconst isActivePassword = document.activeElement === (passwordRef.current !== null && passwordRef.current.input) || false;\n\n\t\t\tif (e.key === 'Enter' && isActiveEmail) {\n\t\t\t\temailRef.current.blur();\n\t\t\t\tpasswordRef.current.focus();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' && isActivePassword) {\n\t\t\t\temailRef.current.blur();\n\t\t\t\tpasswordRef.current.focus();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\thistory.push('/pos/options');\n\t\t\t\tform.resetFields();\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowUp') {\n\t\t\t\temailRef.current.focus();\n\t\t\t}\n\n\t\t\tif (e.key === 'ArrowDown') {\n\t\t\t\tpasswordRef.current.focus();\n\n\t\t\t\tif (isActivePassword) {\n\t\t\t\t\tpasswordRef.current.blur();\n\t\t\t\t\temailRef.current.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleClosingShift = (values) => {\n\t\tconst app = JSON.parse(localStorage.getItem('app') || '{}');\n\t\tconst { cashier = {}, property = {} } = app;\n\n\t\tconst payload = {\n\t\t\trefDate: cashier?.shiftDate || property?.refDate || '',\n\t\t\tcloseCash: values?.closingCash || 0,\n\t\t\tshiftId: cashier?.shiftId || property?.shiftId || 0\n\t\t};\n\n\t\tdispatch({\n\t\t\ttype: 'transaction/CLOSING_SHIFT',\n\t\t\tpayload,\n\t\t\thistory,\n\t\t\tproperty\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keydown', onKeyDown);\n\n\t\tdispatch({\n\t\t\ttype: 'auth/SET_STATE',\n\t\t\tpayload: {\n\t\t\t\tisGrantedAccess: false\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', onKeyDown);\n\t\t};\n\t}, [form]);\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'report/SALES_BY_SHIFT',\n\t\t\tpayload: {\n\t\t\t\trefDate: cashier?.shiftDate,\n\t\t\t\tshiftId: cashier?.shiftId\n\t\t\t}\n\t\t});\n\t}, [isClosing]);\n\n\treturn (\n\t\t<div className=\"w-full h-screen overflow-y-scroll\">\n\t\t\t<div className=\"w-full h-full flex flex-col items-center justify-center\">\n\t\t\t\t<div className={`${isClosing ? 'w-2/3 h-full py-10' : 'max-w-xl'}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-2xl font-medium\">Closing Shift</h1>\n\t\t\t\t\t\t<p className=\"text-base leading-snug mt-3\">\n\t\t\t\t\t\t\tJangan lupa untuk menutup kasir jika waktu kasir anda sudah selesai. Setelah itu, mohon untuk melakukan pengecekan pada\n\t\t\t\t\t\t\thistori transaksi dan upload sales.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!isClosing ? (\n\t\t\t\t\t\tisGrantedAccess ? (\n\t\t\t\t\t\t\t<div className=\"w-full h-auto mt-5\">\n\t\t\t\t\t\t\t\t{transactionHolds?.length !== 0 ? (\n\t\t\t\t\t\t\t\t\t<div className=\"w-full h-auto p-5 mb-5 bg-red-100 rounded-md flex items-center justify-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IoWarning className=\"text-red-600 text-3xl\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"text-base font-medium\">Perhatian!</h1>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tAnda masih mempunyai transaksi yang tersimpan atau transaksi yang belum diupload. Mohon periksa\n\t\t\t\t\t\t\t\t\t\t\t\tkembali, dan pastikan semuanya sudah benar.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className=\"w-full h-auto p-5 mb-5 bg-yellow-200 rounded-md flex items-center justify-start gap-3\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IoWarning className=\"text-yellow-600 text-3xl\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<h1 className=\"text-base font-medium\">Perhatian!</h1>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tSebelum melakukan closing shift, mohon untuk memeriksa seluruh transaksi. Periksa apakah terdapat\n\t\t\t\t\t\t\t\t\t\t\t\ttransaksi yang masih tersimpan atau belum terupload.\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\t\tform={form}\n\t\t\t\t\t\t\t\t\tname=\"opening\"\n\t\t\t\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Saldo Akhir\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"closingCash\"\n\t\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajid Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tref={openingRef}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\tprefix=\"IDR \"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t<Button disabled={loadingTrx} loading={loadingTrx} htmlType=\"submit\" className=\"btn-page\">\n\t\t\t\t\t\t\t\t\t\t\t\tTutup Kasir\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loadingTrx}\n\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-page bg-transparent text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => history.push('/pos/options')}>\n\t\t\t\t\t\t\t\t\t\t\t\tBatalkan\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"w-3/4 my-7\">\n\t\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\t\tform={form}\n\t\t\t\t\t\t\t\t\tname=\"login\"\n\t\t\t\t\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\t\tremember: true\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\t\tonFinishFailed={onFinishFailed}\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 'none', width: '100%' }}>\n\t\t\t\t\t\t\t\t\t<Row wrap gutter={[8, 0]}>\n\t\t\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={emailRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"usertest@domain.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col span={24}>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Wajib Diisi!'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={passwordRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"********\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col span={18}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full flex items-center justify-start gap-2 mt-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full bg-primary h-12 rounded-md hover:bg-blue-900\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tValidasi Kasir\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 flex items-center justify-center gap-2 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => history.push('/pos/options')}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tKembali <kbd className=\"kbd\">esc</kbd>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<ReportDetails isClosing={true} />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}