(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[7],{12:function(e,t,a){"use strict";t.a={SET_STATE:"transaction/SET_STATE",TRANSACTION_PAYMENT:"transaction/PAYMENT",TRANSACTION_BACK_MENU:"transaction/BACK_MENU",TRANSACTION_MENU_LIST:"transaction/MENU_LIST",TRANSACTION_CUSTOMER_LIST:"transaction/CUSTOMER_LIST",TRANSACTION_TENDER_MEDIA:"transaction/TENDER_MEDIA",TRANSACTION_SEARCH_MASTER:"transaction/SEARCH_MASTER",TRANSACTION_BILL_NO:"transaction/BILL_NO",TRANSACTION_STORE:"transaction/STORE",TRANSACTION_RETURN:"transaction/RETURN",TRANSACTION_HOLD:"transaction/HOLD",TRANSACTION_HOLD_LIST:"transaction/HOLD_LIST",TRANSACTION_HOLD_DETAIL:"transaction/HOLD_DETAIL",TRANSACTION_DELETE_HOLD:"transaction/DELETE)HOLD",TRANSACTION_HISTORY_LIST:"transaction/HISTORY_LIST",TRANSACTION_HISTORY_DETAIL:"transaction/HISTORY_DETAIL",TRANSACTION_CLOSING_DAY:"transaction/CLOSING_DAY",TRANSACTION_OPENING_SHIFT:"transaction/OPENING_SHIFT",TRANSACTION_CLOSING_SHIFT:"transaction/CLOSING_SHIFT",TRANSACTION_HISTORY_CUSTOMER:"transaction/HISTORY_CUSTOMER"}},121:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return r}));a(204);var o=a(179),n=a(0),c=a(59),i=a(27),l=a(186),s=a(13);function r(e){let{children:t}=e;const a=Object(i.useHistory)(),{isLog:r,authorized:d}=Object(c.e)((e=>null===e||void 0===e?void 0:e.auth));return Object(n.useEffect)((()=>{const e=localStorage.getItem("app");if(e&&null!==e){const t=JSON.parse(e),{isLog:o=!1,authorized:n=!1}=t;if(o&&n||r&&d)return void a.push("/pos/kasir");if(!o&&n||!r&&d)return void a.push("/pos/auth/default");a.push("/auth/login")}}),[]),Object(s.jsx)("div",{className:"w-screen h-screen overflow-hidden",children:Object(s.jsxs)("div",{className:"w-full grid grid-cols-12",children:[Object(s.jsx)("div",{className:"col-span-8",children:Object(s.jsx)("div",{className:"w-full h-screen bg-no-repeat bg-cover",style:{backgroundImage:"url(/pos.jpg)"},children:Object(s.jsx)("div",{className:"w-full h-full",style:{background:"rgba(0, 0, 0, 0.3)"},children:Object(s.jsx)("div",{className:"w-full h-full flex items-center justify-center flex-col"})})})}),Object(s.jsx)("div",{className:"col-span-4",children:Object(s.jsx)("div",{className:"w-full relative",children:Object(s.jsx)("div",{className:"w-full h-screen p-7 bg-transparent",children:Object(s.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col",children:[Object(s.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[Object(s.jsx)(o.a,{src:"/logo-2.png",className:"w-40 h-auto object-cover",preview:!1}),Object(s.jsx)("h1",{className:"text-xl text-gray-800 font-semibold mt-1",children:"Scap Point of Sales"})]}),Object(s.jsx)(l.default,{})]})})})})]})})}},16:function(e,t,a){"use strict";t.a={SET_STATE:"auth/SET_STATE",AUTH_LOGIN:"auth/login",AUTH_LOGOUT:"auth/logout",AUTH_FORGOT:"auth/forgot",AUTH_REGISTER:"auth/register",AUTH_PROPERTY:"auth/property",AUTH_UPDATE_PROPERTY:"auth/update_property",AUTH_LOGIN_PIN:"auth/LOGIN_PIN",AUTH_LOGIN_POS:"auth/LOGIN_POS",AUTH_LOGOUT_POS:"auth/LOGOUT_POS",AUTH_USER_ACCESS:"auth/USER_ACCESS"}},186:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));a(138);var o=a(68),n=(a(193),a(139)),c=(a(194),a(85)),i=a(0),l=a(146),s=a(59),r=a(27),d=a(13);function T(){const e=Object(s.d)(),t=Object(r.useHistory)(),a=Object(i.useRef)(null),T=Object(i.useRef)(null),{loading:p=!1}=Object(s.e)((e=>null===e||void 0===e?void 0:e.auth)),[y]=c.a.useForm(),u=a=>{const o={email:a.email||"",password:window.btoa(a.password||"")};e({type:"auth/LOGIN_POS",payload:o,history:t,reset:()=>y.resetFields()})},S=e=>"Enter"===e.key&&document.activeElement===T.current.input?(T.current.blur(),void a.current.focus()):"Enter"===e.key&&document.activeElement===a.current.input?(T.current.blur(),a.current.focus(),void u(y.getFieldsValue())):("Enter"===e.key&&y.submit(),"Escape"===e.key&&O(),"ArrowUp"===e.key&&T.current.focus(),void("ArrowDown"===e.key&&a.current.focus())),O=()=>{T.current.focus(),y.resetFields()};return Object(i.useEffect)((()=>{T&&T.current&&(T.current.input.value="",T.current.focus())}),[T]),Object(i.useEffect)((()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)})),[y]),Object(d.jsx)("div",{className:"w-full",children:Object(d.jsx)("div",{className:"mt-10 w-full",children:Object(d.jsxs)(c.a,{form:y,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:u,onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",autoSave:"off",autoCorrect:"off","aria-autocomplete":"none",style:{maxWidth:"none",width:"100%"},children:[Object(d.jsx)(c.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(d.jsx)(n.a,{ref:T,type:"email",autoFocus:!0,autoComplete:"off",autoSave:"off",autoCorrect:"off",placeholder:"Username",className:"w-full h-14 rounded-md",prefix:Object(d.jsx)(l.b,{className:"text-lg text-gray-500"})})}),Object(d.jsx)(c.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(d.jsx)(n.a.Password,{ref:a,type:"password",autoComplete:"off",autoSave:"off",autoCorrect:"off",placeholder:"********",className:"w-full h-14 rounded-md",prefix:Object(d.jsx)(l.a,{className:"text-lg text-gray-500"})})}),Object(d.jsx)(c.a.Item,{children:Object(d.jsx)("div",{className:"w-full h-auto flex items-center gap-3 mt-5",children:Object(d.jsx)(o.a,{disabled:p,loading:p,type:"primary",htmlType:"submit",className:"btn-page rounded-md capitalize text-lg",children:"Sign In"})})})]})})})}},271:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);a(150);var o=a(71),n=a(101),c=a(180),i=a.n(c),l=a(181),s=a.n(l),r=a(0),d=a.n(r),T=a(36),p=a.n(T),y=a(116),u=a.n(y),S=a(59),O=a(37),A=a(27),g=a(76),E=a(142),_=a.n(E),b=a(192),h=a(158),j=a(13);class m extends r.Component{render(){const{children:e}=this.props;return Object(j.jsx)("div",{children:e})}}var I,N=m,f=(a(202),a(143));var R,C=Object(A.withRouter)(I=class extends d.a.PureComponent{render(){const{children:e}=this.props;return Object(j.jsx)(f.a,{children:Object(j.jsx)(f.a.Content,{children:Object(j.jsx)("div",{children:Object(j.jsx)("div",{children:e})})})})}})||I,L=a(121);var P,v;const w={public:Object(A.withRouter)(R=class extends d.a.PureComponent{render(){const{children:e}=this.props;return e}})||R,login:N,main:C,pos:L.default};let k=(P=Object(S.c)((e=>{let{auth:t}=e;return{auth:t}})),Object(A.withRouter)(v=P(v=class extends d.a.PureComponent{constructor(){super(...arguments),this.previousPath=""}componentDidUpdate(e){const{location:t}=this.props,{prevLocation:a}=e;t!==a&&window.scrollTo(0,0)}render(){const{children:e,location:{pathname:t,search:a},auth:{authorized:o=!1,loading:n=!1,isLog:c=!1}}=this.props,i=t+a;i!==this.previousPath&&_.a.start(),setTimeout((()=>{_.a.done(),this.previousPath=i}),300);const l=()=>"/"===t?"public":/^\/auth(?=\/|$)/i.test(t)?"login":"/pos/auth"===t?"pos":"main",s=w[l()],d=o,T=c,p="login"===l();return Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)(h.a,{titleTemplate:"SCAP POS RETAIL",title:"SCAP POS RETAIL"}),Object(j.jsx)(b.a,{handle:{active:!0},onChange:console.log,children:T||d||!p?p&&d&&!T?Object(j.jsx)(A.Redirect,{to:{pathname:"/dashboard"}}):Object(j.jsx)(s,{children:e}):Object(j.jsx)(A.Redirect,{to:{pathname:"/pos/auth/default"}})})]})}})||v)||v);var U=k;const x=[{path:"/auth/login",component:Object(O.a)((()=>Promise.resolve().then(a.bind(null,121)))),exact:!0},{path:"/auth/register",component:Object(O.a)((()=>Promise.all([a.e(16),a.e(27)]).then(a.bind(null,713)))),exact:!0},{path:"/auth/verification",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(4),a.e(6),a.e(17)]).then(a.bind(null,714)))),exact:!0},{path:"/dashboard",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(2),a.e(4),a.e(13),a.e(28)]).then(a.bind(null,708)))),exact:!0},{path:"/pos/history",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(15)]).then(a.bind(null,712)))),exact:!0},{path:"/pos/kasir",component:Object(O.a)((()=>Promise.all([a.e(5),a.e(30),a.e(23)]).then(a.bind(null,705)))),exact:!0},{path:"/pos/opening-shift",component:Object(O.a)((()=>a.e(24).then(a.bind(null,701)))),exact:!0},{path:"/pos/closing-shift",component:Object(O.a)((()=>a.e(22).then(a.bind(null,702)))),exact:!0},{path:"/pos/kasir/closing",component:Object(O.a)((()=>a.e(21).then(a.bind(null,703)))),exact:!0},{path:"/pos/report",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(1),a.e(4),a.e(6),a.e(26)]).then(a.bind(null,711)))),exact:!0},{path:"/pos/report/customer",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(10)]).then(a.bind(null,715)))),exact:!0},{path:"/pos/report/customerWeb",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(11)]).then(a.bind(null,716)))),exact:!0},{path:"/pos/report/detail",component:Object(O.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(12)]).then(a.bind(null,717)))),exact:!0},{path:"/pos/options",component:Object(O.a)((()=>Promise.all([a.e(14),a.e(29)]).then(a.bind(null,707)))),exact:!0},{path:"/pos-module/property",component:Object(O.a)((()=>a.e(31).then(a.bind(null,576)))),exact:!0},{path:"/pos/payment",component:Object(O.a)((()=>Promise.all([a.e(5),a.e(18),a.e(20)]).then(a.bind(null,709)))),exact:!0},{path:"/pos/setup",component:Object(O.a)((()=>a.e(25).then(a.bind(null,704)))),exact:!0}];var D=e=>{let{history:t}=e;return(()=>{const e=Object(A.useLocation)();Object(r.useEffect)((()=>{u.a.send({hitType:"pageview",page:e.pathname+e.search})}),[e])})(),Object(j.jsx)(U,{children:Object(j.jsx)(g.a,{children:Object(j.jsxs)(A.Switch,{children:[Object(j.jsx)(A.Route,{exact:!0,path:"/",render:()=>Object(j.jsx)(A.Redirect,{to:"/pos/auth"})}),x.map((e=>Object(j.jsx)(A.Route,{path:e.path,component:e.component,exact:e.exact},e.path))),Object(j.jsx)(A.Route,{path:"/pos",exact:!0,render:()=>Object(j.jsx)(A.Redirect,{to:"/pos/auth/default"})}),Object(j.jsx)(A.Route,{path:"/pos/auth",render:e=>{let{match:{url:t}}=e;return Object(j.jsx)(L.default,{children:Object(j.jsxs)(A.Switch,{children:[Object(j.jsx)(A.Route,{path:"".concat(t,"/default"),component:Object(O.a)((()=>Promise.resolve().then(a.bind(null,186)))),exact:!0}),Object(j.jsx)(A.Route,{path:"".concat(t,"/pin"),component:Object(O.a)((()=>a.e(19).then(a.bind(null,718)))),exact:!0}),Object(j.jsx)(A.Route,{path:"*",render:()=>Object(j.jsx)(A.Redirect,{to:"".concat(t,"/default")})})]})})}})]})})})},H=a(45),M=a(97),G=a(170),Y=a(191),B=(a(252),a(190)),F=a(188);var K=Object(F.a)(((e,t)=>{if("store/loading/toggle"===t.type)e.loading=t.loading}),{appName:"POS",loading:!1}),z=a(16);const J={status:200,token:localStorage.getItem("Token")&&""!==localStorage.getItem("Token")&&void 0!==localStorage.getItem("Token")?localStorage.getItem("Token"):"",username:"",authorized:!1,isLog:!1,loading:!1,loadingRegister:!1,config:[],outlet:[],company:[],isGrantedAccess:!1,isUpdatedProperty:!1};function W(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return t.type===z.a.SET_STATE?{...e,...t.payload}:e}var V=a(12);const q={contentStatus:"isMenu",menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],transactionHolds:[],data:[],tenderMedia:[],selectedTransaction:{},selectedRowTransaction:{},searchResult:[],loading:!1,loadingList:!1,loadingReport:!1,loadingDetail:!1,isSuccess:!1,historyTransactionList:[],historyTransactionDetail:[],historyTransactionReport:[]};function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type===V.a.SET_STATE?{...e,...t.payload}:e}var $={SET_STATE:"sync/SET_STATE",SYNC_DATA_MASTER:"sync/SYNC_DATA_MASTER",SYNC_DATA_SALES:"sync/SYNC_DATA_SALES"};const Q={loadingSync:!1,loadingUpdateSales:!1};function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;return t.type===$.SET_STATE?{...e,...t.payload}:e}var ee=a(46);const te={contentStatus:"isMenu",reportSalesCustomer:[],loadingReportCustomer:!1,reportSalesItem:[],loadingReportItem:!1,reportSalesCustomerWeb:[],loadingReportCustomerWeb:!1};function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;return t.type===ee.a.SET_STATE?{...e,...t.payload}:e}var oe=e=>Object(M.b)({router:Object(n.b)(e),common:K,auth:W,transaction:X,sync:Z,report:ae});const ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({features:{jump:!1}}):M.c,ce=Object(H.createBrowserHistory)();var ie=a(5),le=(a(108),a(20)),se=a(23),re=a.n(se),de=a(86);const Te="user/list",pe="user/registration",ye="auth/login/pin",ue="auth/user",Se="auth/logout",Oe="auth/access",Ae="master/property",ge="property/update",Ee="master/item",_e="master/customer",be="master/tender-media",he="master/search",je="trx/billNo",me="trx/store",Ie="trx/return",Ne="trx/hold",fe="trx/hold/list",Re="trx/hold/detail",Ce="trx/hold/delete",Le="report/sales-by-bill",Pe="report/sales-by-bill-detail",ve="master/download",we="trigger",ke="history/sales_cust",Ue="report/sales/customer",xe="history/sales_item",De="closingday",He="shift-opening",Me="shift-closing";let Ge=Object(de.b)();const Ye="".concat(Ge,"/api/"),Be={APP_VERSION:"v1.2.1.15072024",API_USER_REGISTER:Ye+pe,API_USER_LIST:Ye+Te,API_AUTH_LOGIN_PIN:Ye+ye,API_AUTH_LOGIN_POS:Ye+ue,API_AUTH_LOGOUT:Ye+Se,API_AUTH_USER_ACCESS:Ye+Oe,API_MENU_LIST:Ye+Ee,API_CUSTOMER_LIST:Ye+_e,API_PROPERTY:Ye+Ae,API_TENDER_MEDIA:Ye+be,API_SEARCH_MASTER:Ye+he,API_UPDATE_PROPERTY:Ye+ge,API_BILL_NO:Ye+je,API_STORE_TRANSACTION:Ye+me,API_RETURN_TRANSACTION:Ye+Ie,API_TRANSACTION_HIST_LIST:Ye+Le,API_TRANSACTION_HIST_DETAIL:Ye+Pe,API_HOLD_TRANSACTION:Ye+Ne,API_HOLD_LIST_TRANSACTION:Ye+fe,API_HOLD_TRANSACTION_DETAIL:Ye+Re,API_HOLD_DELETE_TRANSACTION:Ye+Ce,API_TRANSACTION_CLOSING_DAY:Ye+De,API_TRANSACTION_OPENING_SHIFT:Ye+He,API_TRANSACTION_CLOSING_SHIFT:Ye+Me,API_SYNC_DATA_MASTER:Ye+ve,API_SYNC_DATA_SALES:Ye+we,API_REPORT_SALES_CUSTOMER:Ye+ke,API_REPORT_SALES_BY_CUSTOMER:Ye+Ue,API_REPORT_SALES_ITEM:Ye+xe};function Fe(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{token:t=""}=e;return{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}}function Ke(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{tokenAccess:t=""}=e;return{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}}const ze=e=>{console.log("CALL DARI SAGAS",e)},Je=async e=>{const{data:t}=await re.a.post(Be.API_USER_REGISTER,e);return{...t}},We=async e=>{const{data:t}=await re.a.post(Be.API_AUTH_LOGIN_POS,e);return t},Ve=async e=>{const{data:t}=await re.a.post(Be.API_AUTH_LOGIN_POS,e);return{...t}},qe=async()=>{const{data:e}=await re.a.get(Be.API_PROPERTY,{headers:{"ngrok-skip-browser-warning":!0}});return e},Xe=async e=>{const{data:t}=await re.a.post(Be.API_AUTH_USER_ACCESS,e,Fe());return t},$e=async e=>{const{data:t}=await re.a.post(Be.API_UPDATE_PROPERTY,e,Fe());return t};function Qe(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(ze,t);console.log("RESULT",e),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1,authorized:!0}}),localStorage.setItem("authorized",!0)}catch(e){console.log(e),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}})}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}})}}()}function Ze(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loadingOtp:!0}});try{const e=yield Object(ie.b)(Je,t),{acknowledge:o}=e;console.log("RESULT",e),1===o&&(a.push("/auth/login"),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loadingOtp:!1}}))}catch(e){console.log(e),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loadingOtp:!0}})}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loadingOtp:!0}})}}()}function*et(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{authorized:t=!1,isLog:a=!1}=e,o=localStorage.getItem("token")?localStorage.getItem("token"):"",n=localStorage.getItem("username")?localStorage.getItem("username"):"",c=localStorage.getItem("dateOpening")?localStorage.getItem("dateOpening"):"";yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}}),yield Object(ie.c)({type:z.a.SET_STATE,payload:{token:o,username:n,authorized:t,isLog:a,config:{dateOpening:c}}}),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}function*tt(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1,authorized:!1}}),localStorage.setItem("authorized",!1)}catch(e){console.log(e),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}function at(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(We,t),{acknowledge:o,data:n,message:c}=e;if(1===o){const e={isLog:!0,authorized:!0,property:{},user:{id:(null===n||void 0===n?void 0:n.userID)||"",username:(null===n||void 0===n?void 0:n.userName)||"",role:"kasir",pin:window.btoa(null===t||void 0===t?void 0:t.pinCode)}};return yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1,authorized:!0,isLog:!0}}),yield Object(ie.c)({type:z.a.AUTH_PROPERTY,payload:e}),localStorage.setItem("app",JSON.stringify(e)),a.push("/pos/kasir"),void le.a.success({message:c,description:n.UserName||""})}localStorage.setItem("app",null),le.a.error({message:"Terjadi Kesalahan!",description:c})}catch(e){console.log(e),localStorage.setItem("app",null),yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}})}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}()}function*ot(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(qe),{acknowledge:t=0,data:a={}}=e;if(1===t){let e=JSON.parse(localStorage.getItem("app"))||{};e={...e,property:{...a,NewData:!0}},localStorage.setItem("app",JSON.stringify(e))}}catch(e){console.log(e)}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}function nt(e){let{history:t}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const e={isLog:!1,authorized:!0,user:{},property:{},roles:[],token:"",cashier:{}};yield Object(ie.c)({type:z.a.SET_STATE,payload:{isLog:!1,authorized:!0,isGrantedAccess:!1}}),yield Object(ie.c)({type:"transaction/SET_STATE",payload:{menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],data:[]}}),localStorage.setItem("app",JSON.stringify(e)),t.push("/pos/auth")}catch(e){console.log("Logout Error! ",e)}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}()}function ct(e){let{payload:t,history:a,reset:o}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const o=yield Object(ie.b)(Ve,t),{acknowledge:c=0,data:i={},isLog:l=!1,token:s="",roles:r=[],message:d="",isOpenShift:T=0,shiftId:p=0}=o;if(1===c&&l){let t={isLog:l,authorized:!0,user:{userId:(null===i||void 0===i?void 0:i.userID)||"",username:(null===i||void 0===i?void 0:i.userName)||""},roles:r,token:s,tokenAccess:"",property:{},cashier:{}};if(yield Object(ie.c)({type:z.a.SET_STATE,payload:{isLog:l,authorized:!0}}),yield Object(ie.c)({type:z.a.AUTH_PROPERTY}),yield Object(ie.c)({type:"sync/SYNC_DATA_MASTER"}),localStorage.setItem("app",JSON.stringify(t)),1===T){var e,n;let t=JSON.parse(localStorage.getItem("app")||"{}");return t={...t,cashier:{isOpening:1===T,isClosing:!1,openingCash:0,closingCash:0,shiftId:p,shiftDate:null===(e=t)||void 0===e||null===(n=e.property)||void 0===n?void 0:n.refDate}},localStorage.setItem("app",JSON.stringify(t)),a.push("/pos/kasir"),void le.a.success({message:"Berhasil",description:"Shift telah terbuka, anda dapat melanjukan transaksi."})}return le.a.success({message:"Login Berhasil",description:d}),void a.push("/pos/opening-shift")}le.a.error({message:"Login Gagal",description:d})}catch(c){console.log(c)}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}}),o()}}()}function it(e){let{payload:t,history:a=(()=>{})}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});let e=JSON.parse(localStorage.getItem("app")||"{}");try{const o=yield Object(ie.b)(Xe,t),{acknowledge:n=0,isAuthorized:c=0,token:i=""}=o;1===n&&1===c?(e={...e,tokenAccess:i},yield Object(ie.c)({type:z.a.SET_STATE,payload:{isGrantedAccess:!0}}),localStorage.setItem("app",JSON.stringify(e)),le.a.success({message:"Verified!",description:"Akun berhasil di verifikasi"})):(yield Object(ie.c)({type:z.a.SET_STATE,payload:{isGrantedAccess:!1}}),le.a.error({message:"Gagal",description:"Akun yang anda kirimkan tidak memiliki akses. Silahkan coba lagi atau Login ulang"}),a())}catch(o){console.log(o)}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}()}function lt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)($e,t),{acknowledge:a=0,message:o=""}=e||{};if(1===a)return yield Object(ie.c)({type:z.a.SET_STATE,payload:{isUpdatedProperty:!0}}),yield Object(ie.c)({type:"sync/SYNC_DATA_MASTER"}),void le.a.success({message:"Update Berhasil!",description:"Data sudah berhasil terupdate! Silahkan sinkronisasi data terlebih dahulu."});yield Object(ie.c)({type:z.a.SET_STATE,payload:{isUpdatedProperty:!1}}),le.a.error({message:"Update Gagal!",description:o})}catch(e){console.log("Error",e)}finally{yield Object(ie.c)({type:z.a.SET_STATE,payload:{loading:!1}})}}()}function*st(){yield Object(ie.a)([Object(ie.d)(z.a.AUTH_LOGIN,Qe),Object(ie.d)(z.a.AUTH_REGISTER,Ze),Object(ie.d)(z.a.AUTH_LOGOUT,tt),Object(ie.d)(z.a.AUTH_LOGIN_PIN,at),Object(ie.d)(z.a.AUTH_PROPERTY,ot),Object(ie.d)(z.a.AUTH_LOGOUT_POS,nt),Object(ie.d)(z.a.AUTH_LOGIN_POS,ct),Object(ie.d)(z.a.AUTH_USER_ACCESS,it),Object(ie.d)(z.a.AUTH_UPDATE_PROPERTY,lt),et()])}var rt=a(149),dt=a.n(rt);const Tt=async()=>{const{data:e}=await re.a.get(Be.API_MENU_LIST,{headers:{"ngrok-skip-browser-warning":!0}});return{...e}},pt=async()=>{const{data:e}=await re.a.get(Be.API_CUSTOMER_LIST,{headers:{"ngrok-skip-browser-warning":!0}});return{...e}},yt=async e=>{const{data:t}=await re.a.get(Be.API_BILL_NO,Fe());return{...t}},ut=async e=>{const{data:t}=await re.a.post(Be.API_STORE_TRANSACTION,e,Fe());return{...t}},St=async e=>{const{data:t}=await re.a.post(Be.API_RETURN_TRANSACTION,e,Fe());return{...t}},Ot=async e=>{const{data:t}=await re.a.post(Be.API_HOLD_TRANSACTION,e,Fe());return{...t}},At=async()=>{const{data:e}=await re.a.get(Be.API_HOLD_LIST_TRANSACTION,Fe());return e},gt=async e=>{const{data:t}=await re.a.get("".concat(Be.API_HOLD_TRANSACTION_DETAIL,"?billNo=").concat(null===e||void 0===e?void 0:e.billNo),Fe());return t},Et=async e=>{const{data:t}=await re.a.delete(Be.API_HOLD_DELETE_TRANSACTION,{...Fe(),data:e});return t},_t=async e=>{let{dateFrom:t="",to:a=""}=e;const o="".concat(Be.API_TRANSACTION_HIST_LIST,"?from=").concat(t,"&to=").concat(a),{data:n}=await re.a.get(o,Fe());return{...n}},bt=async e=>{const t="".concat(Be.API_TRANSACTION_HIST_CUSTOMER,"?c=").concat(e.custCode,"from=").concat(e.from,"&to=").concat(e.to),{data:a}=await re.a.get(t,Fe());return{...a}},ht=async e=>{const t="".concat(Be.API_TRANSACTION_HIST_DETAIL,"?r=").concat(e.billNo),{data:a}=await re.a.get(t,Fe());return{...a}},jt=async()=>{const e="".concat(Be.API_TRANSACTION_CLOSING_DAY),{data:t}=await re.a.get(e,Ke());return{...t}},mt=async e=>{const t="".concat(Be.API_TRANSACTION_OPENING_SHIFT),{data:a}=await re.a.post(t,e,Ke());return a},It=async e=>{const t="".concat(Be.API_TRANSACTION_CLOSING_SHIFT),{data:a}=await re.a.post(t,e,Ke());return a},Nt=async()=>{const{data:e}=await re.a.get(Be.API_TENDER_MEDIA,{headers:{"ngrok-skip-browser-warning":!0}});return e},ft=async e=>{const{data:t}=await re.a.get("".concat(Be.API_SEARCH_MASTER,"?q=").concat((null===e||void 0===e?void 0:e.query)||""),{headers:{"ngrok-skip-browser-warning":!0}});return t};function*Rt(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isPayment"}})}function*Ct(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isMenu"}})}function*Lt(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(Tt),{acknowledge:t,data:a}=e;1===t&&(yield Object(ie.c)({type:V.a.SET_STATE,payload:{menuList:a.map((e=>({...e,upcBarcode:e.UPCbarcode,itemCode:e.ItemCode,itemName:e.ItemName,price:e.SalesPrice,label:"".concat(e.UPCbarcode," | ").concat(e.ItemCode," | ").concat(e.ItemName),value:e.ItemCode})))}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}function*Pt(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(pt),{acknowledge:t,data:a}=e;1===t&&(yield Object(ie.c)({type:V.a.SET_STATE,payload:{customerList:a}}))}catch(e){}}function*vt(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0,isSuccess:!1}});try{var e,t;let a=JSON.parse(localStorage.getItem("app"))||{};const o=(null===(e=a)||void 0===e||null===(t=e.cashier)||void 0===t?void 0:t.isOpening)||!1,n=yield Object(ie.b)(yt),{acknowledge:c,billNo:i,billDate:l,outletCode:s,isLog:r=!0}=n;yield Object(ie.c)({type:"auth/property"}),1===c&&(o||le.a.warning({message:"PERHATIAN !!!",description:"Anda tidak bisa melakukan transaksi tanpa opening shift terlebih dahulu"}),yield Object(ie.c)({type:V.a.SET_STATE,payload:{billNo:i,billDate:l,outletCode:s,isSuccess:!1}}),a={...a,cashier:{...a.cashier,shiftDate:l,outletCode:s}},localStorage.setItem("app",JSON.stringify(a))),r||(yield Object(ie.c)({type:"auth/LOGOUT_POS"}),window.location.reload())}catch(a){o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}function wt(e){let{payload:t,bill:a,handlePrint:n}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}});try{const e=yield Object(ie.b)(ut,t),{acknowledge:o,message:c=""}=e;if(1===o)return yield Object(ie.c)({type:V.a.SET_STATE,payload:{transactionList:[],contentStatus:"isMenu",data:[],isSuccess:!0}}),yield Object(ie.c)({type:V.a.TRANSACTION_BILL_NO}),yield Object(ie.c)({type:"sync/SYNC_DATA_SALES",payload:{...a}}),le.a.success({message:"Berhasil!",description:"Data transaksi sudah terkirim."}),void n();le.a.error({messages:"Terjadi Kesalahan!",description:"".concat(c,". Mohon lakukan transaksi ulang.")})}catch(e){console.log(e),o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isMenu"}})}}()}function kt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}});try{const e=yield Object(ie.b)(St,{billNo:null===t||void 0===t?void 0:t.billNo}),{acknowledge:a,message:o}=e;if(1===a)return le.a.success({message:"Refund Berhasil!",description:"".concat(null===t||void 0===t?void 0:t.billNo," Sudah berhasil direfund!")}),void(yield Object(ie.c)({type:V.a.TRANSACTION_HISTORY_LIST,payload:{dateFrom:null===t||void 0===t?void 0:t.dateFrom,to:null===t||void 0===t?void 0:t.to}}));le.a.error({message:"Refund Gagal!",description:o})}catch(e){console.log(e),o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isMenu"}})}}()}function Ut(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}}),le.a.info({message:"Mohon Tunggu",description:"Sedang menyimpan data..."});try{const e=yield Object(ie.b)(Ot,t),{isLog:o=!1,acknowledge:n=0,message:c=""}=e;1===n?(yield Object(ie.c)({type:V.a.SET_STATE,payload:{transactionList:[],contentStatus:"isMenu",data:[]}}),yield Object(ie.c)({type:V.a.TRANSACTION_BILL_NO}),le.a.success({message:"Berhasil Menyimpan!",description:c})):o?le.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(ie.c)({type:"auth/LOGOUT_POS",history:a})}catch(e){console.log(e),o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isMenu",loading:!1}})}}()}function xt(e){let{history:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,loading:!0});try{const e=yield Object(ie.b)(At),{isLog:a=!0,acknowledge:o=0,data:n=[],message:c=""}=e;1===o?yield Object(ie.c)({type:V.a.SET_STATE,payload:{transactionHolds:n}}):a?le.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(ie.c)({type:"auth/LOGOUT_POS",history:t})}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,loading:!1})}}()}function Dt(e){let{payload:t,history:a,onClose:o,onState:n}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const l=yield Object(ie.b)(gt,t),{isLog:s=!1,acknowledge:r=0,message:d="",data:T={}}=l;if(1===r){var e,c,i;const{header:l=[],detail:s=[]}=T,r=null===s||void 0===s?void 0:s.map(((e,t)=>{const a=+e.qty*+e.price;return{...e,CateCode:e.cateCode,GroupCode:e.groupCode,ItemCode:e.menuCode,ItemName:e.menuName,OnHandQty:"0.00",SalesPrice:"0",Timbang:"0",UPCbarcode:"0",Unitprice:"0",UomStock:"",amount:e.amount,isActive:"1",itemCode:e.menuCode,itemName:e.menuName,label:"".concat(e.menuCode," - ").concat(e.menuName," - ").concat(Object(de.a)(e.price)),price:e.price,qty:e.qty,total:a,upcBarcode:"",updated_at:e.orderTime,value:e.menuCode}}));yield Object(ie.c)({type:V.a.SET_STATE,payload:{billNo:null===(e=l[0])||void 0===e?void 0:e.billNo,outletCode:null===(c=l[0])||void 0===c?void 0:c.outletCode,billDate:null===(i=l[0])||void 0===i?void 0:i.billDate,transactionList:r,data:r}}),o(),n({data:r}),le.a.success({message:"Berhasil!",description:"Transaksi anda sudah berhasil dipulihkan."}),yield Object(ie.c)({type:V.a.TRANSACTION_DELETE_HOLD,payload:t,history:a})}else s?le.a.error({message:"Terjadi Kesalahan!",description:d}):yield Object(ie.c)({type:"auth/LOGOUT_POS",history:a})}catch(l){console.log(l)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function Ht(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(Et,t),{isLog:o=!1,acknowledge:n=0,message:c=""}=e;1===n?(yield Object(ie.c)({type:V.a.TRANSACTION_HOLD_LIST,history:a}),a.push("/pos/kasir")):o?le.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(ie.c)({type:"auth/LOGOUT_POS",history:a})}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function Mt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingList:!0}});try{const e=yield Object(ie.b)(_t,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(ie.c)({type:V.a.SET_STATE,payload:{historyTransactionList:o}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingList:!1}})}}()}function Gt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingDetail:!0}});try{const e=yield Object(ie.b)(ht,t),{acknowledge:a}=e;1===a&&(yield Object(ie.c)({type:V.a.SET_STATE,payload:{historyTransactionDetail:{...e,date:"".concat(dt()(e.hdr.SiDate||"").format("DD MMM YY"),", ").concat(e.hdr.TimeClose," WIB")}}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingDetail:!1}})}}()}function Yt(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingDetail:!0}});try{const e=yield Object(ie.b)(jt,t),{acknowledge:o,message:n}=e;if(1===o)return yield Object(ie.c)({type:V.a.SET_STATE,payload:{contentStatus:"isMenu",menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],data:[],historyTransactionList:[],historyTransactionDetail:[]}}),yield Object(ie.c)({type:"auth/LOGOUT_POS",history:a}),void le.a.success({message:"Berhasil",description:n});le.a.error({message:"Gagal",description:n})}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingDetail:!1}})}}()}function Bt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingReport:!0}});try{const e=yield Object(ie.b)(bt,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(ie.c)({type:V.a.SET_STATE,payload:{historyTransactionReport:o}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loadingReport:!1}})}}()}function Ft(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{let o=JSON.parse(localStorage.getItem("app")||"{}");const n=yield Object(ie.b)(mt,t),{acknowledge:c=0,message:i="",isLog:l=!1,shiftId:s="",isShiftOpen:r=0}=n;if(l)return void a.push("/pos/auth");if(1===c&&1===r){var e;const n={...o,tokenAccess:"",cashier:{isOpening:1===r,isClosing:!1,openingCash:(null===t||void 0===t?void 0:t.beginCash)||0,closingCash:0,shiftId:s,shiftDate:null===o||void 0===o||null===(e=o.property)||void 0===e?void 0:e.refDate}};return yield Object(ie.c)({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),localStorage.setItem("app",JSON.stringify(n)),void a.push("/pos/kasir")}le.a.error({message:"Opening Shift Gagal!",description:i})}catch(o){console.log(o)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function Kt(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{let e=JSON.parse(localStorage.getItem("app")||"{}");const o=yield Object(ie.b)(It,t),{acknowledge:n=0,message:c=""}=o;if(1===n)return a.push("/pos/kasir"),yield Object(ie.c)({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),e={...e,tokenAccess:"",cashier:{...e.cashier,isOpening:!1,isClosing:!0,closingCash:(null===t||void 0===t?void 0:t.closeCash)||0}},localStorage.setItem("app",JSON.stringify(e)),void le.a.success({message:"Berhasil",description:c});le.a.error({message:"Closing Shift Gagal",description:c})}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function*zt(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(Nt),{data:t=[]}=e;t.sort(((e,t)=>e.paidType-t.paidType)),yield Object(ie.c)({type:V.a.SET_STATE,payload:{tenderMedia:t}})}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}function Jt(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(ie.b)(ft,t),{acknowledge:a=0,data:o=[]}=e;if(1===a)return 0===(null===o||void 0===o?void 0:o.length)?void le.a.warning({message:"Not Found!",description:"".concat(null===t||void 0===t?void 0:t.query,". Data yang anda cari tidak ditemukan. Mohon coba kembali!")}):void(yield Object(ie.c)({type:V.a.SET_STATE,payload:{searchResult:o.map((e=>({...e,upcBarcode:e.UPCbarcode,itemCode:e.ItemCode,itemName:e.ItemName,price:e.SalesPrice,label:"".concat(e.UPCbarcode," | ").concat(e.ItemCode," | ").concat(e.ItemName),value:e.ItemCode})))}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function*Wt(){yield Object(ie.a)([Object(ie.d)(V.a.TRANSACTION_PAYMENT,Rt),Object(ie.d)(V.a.TRANSACTION_BACK_MENU,Ct),Object(ie.d)(V.a.TRANSACTION_MENU_LIST,Lt),Object(ie.d)(V.a.TRANSACTION_CUSTOMER_LIST,Pt),Object(ie.d)(V.a.TRANSACTION_TENDER_MEDIA,zt),Object(ie.d)(V.a.TRANSACTION_SEARCH_MASTER,Jt),Object(ie.d)(V.a.TRANSACTION_BILL_NO,vt),Object(ie.d)(V.a.TRANSACTION_STORE,wt),Object(ie.d)(V.a.TRANSACTION_RETURN,kt),Object(ie.d)(V.a.TRANSACTION_HOLD,Ut),Object(ie.d)(V.a.TRANSACTION_HOLD_LIST,xt),Object(ie.d)(V.a.TRANSACTION_HOLD_DETAIL,Dt),Object(ie.d)(V.a.TRANSACTION_DELETE_HOLD,Ht),Object(ie.d)(V.a.TRANSACTION_HISTORY_LIST,Mt),Object(ie.d)(V.a.TRANSACTION_HISTORY_DETAIL,Gt),Object(ie.d)(V.a.TRANSACTION_CLOSING_DAY,Yt),Object(ie.d)(V.a.TRANSACTION_HISTORY_CUSTOMER,Bt),Object(ie.d)(V.a.TRANSACTION_OPENING_SHIFT,Ft),Object(ie.d)(V.a.TRANSACTION_CLOSING_SHIFT,Kt)])}const Vt=async e=>{const{data:t}=await re.a.get("".concat(Be.API_SYNC_DATA_MASTER),Fe());return{...t}},qt=async e=>{const t="".concat(Be.API_SYNC_DATA_SALES,"?f=").concat(e.from,"&t=").concat(e.to),{data:a}=await re.a.get(t,Fe());return{...a}};function Xt(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:$.SET_STATE,payload:{loadingSync:!0}});try{const e=yield Object(ie.b)(Vt,t),{acknowledge:a,message:o}=e;1===a&&(yield Object(ie.c)({type:$.SET_STATE,payload:{loadingSync:!1}}),yield Object(ie.c)({type:"transaction/MENU_LIST"}),yield Object(ie.c)({type:"transaction/CUSTOMER_LIST"}),yield Object(ie.c)({type:"auth/property"}),yield Object(ie.c)({type:"transaction/TENDER_MEDIA"}),le.a.success({message:"Berhasil!",description:"Aplikasi anda sudah berhasil tersinkronisasi. Semua data sudah diperbarui."})),0===a&&le.a.error({message:o})}catch(e){console.log(e),yield Object(ie.c)({type:$.SET_STATE,payload:{loadingSync:!0}})}finally{yield Object(ie.c)({type:$.SET_STATE,payload:{loadingSync:!1}})}}()}function $t(e){let{payload:t,history:a}=e;return function*(){yield Object(ie.c)({type:$.SET_STATE,payload:{loadingUpdateSales:!0}});try{const e=yield Object(ie.b)(qt,t),{acknowledge:a,message:o}=e;1===a&&(yield Object(ie.c)({type:$.SET_STATE,payload:{loadingUpdateSales:!1}}),le.a.success({message:"Berhasil!!!",description:"Data transaksi anda saat ini sudah berhasil diupload."})),0===a&&le.a.error({message:"Gagal!",description:o})}catch(e){console.log(e),yield Object(ie.c)({type:$.SET_STATE,payload:{loadingUpdateSales:!1}})}finally{yield Object(ie.c)({type:$.SET_STATE,payload:{loadingUpdateSales:!1}})}}()}function*Qt(){yield Object(ie.a)([Object(ie.d)($.SYNC_DATA_MASTER,Xt),Object(ie.d)($.SYNC_DATA_SALES,$t)])}const Zt=async e=>{const t="".concat(Be.API_REPORT_SALES_CUSTOMER,"?c=").concat(e.custCode,"&from=").concat(e.from,"&to=").concat(e.to),{data:a}=await re.a.get(t,Fe());return{...a}},ea=async e=>{const t="".concat(Be.API_REPORT_SALES_ITEM,"?from=").concat(e.from,"&to=").concat(e.to),{data:a}=await re.a.get(t,Fe());return{...a}},ta=async e=>{let{from:t,to:a,l:o="ALL",c:n="ALL",isType:c="RK"}=e;const i="".concat(Be.API_REPORT_SALES_BY_CUSTOMER,"?from=").concat(t,"&to=").concat(a,"&l=").concat(o,"&c=").concat(n,"&isType=").concat(c),{data:l}=await re.a.get(i,Fe());return{...l}};function aa(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportCustomer:!0}});try{const e=yield Object(ie.b)(Zt,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(ie.c)({type:ee.a.SET_STATE,payload:{reportSalesCustomer:o}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportCustomer:!1}})}}()}function oa(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportCustomerWeb:!0}});try{const e=yield Object(ie.b)(ta,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(ie.c)({type:ee.a.SET_STATE,payload:{reportSalesCustomerWeb:o}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportCustomerWeb:!1}})}}()}function na(e){let{payload:t}=e;return function*(){yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportItem:!0}});try{const e=yield Object(ie.b)(ea,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(ie.c)({type:ee.a.SET_STATE,payload:{reportSalesItem:o}}))}catch(e){console.log(e)}finally{yield Object(ie.c)({type:ee.a.SET_STATE,payload:{loadingReportItem:!1}})}}()}function*ca(){yield Object(ie.a)([Object(ie.d)(ee.a.REPORT_SALES_CUSTOMER,aa),Object(ie.d)(ee.a.REPORT_SALES_BY_CUSTOMER,oa),Object(ie.d)(ee.a.REPORT_SALES_ITEM,na)])}var ia=function*(){yield Object(ie.a)([st(),Wt(),Qt(),ca()])};const la=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function sa(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}a(271);i.a.extend(s.a);const ra=function(){const e=Object(Y.a)({onError:e=>console.info(JSON.stringify(e))}),t=Object(G.a)(ce),a=[B.a,e,t];return{...Object(M.d)(oe(ce),ne(Object(M.a)(...a))),runSaga:e.run}}();ra.runSaga(ia),u.a.initialize("G-3YXW8S2K7X"),p.a.render(Object(j.jsx)(S.a,{store:ra,children:Object(j.jsx)(n.a,{history:ce,children:Object(j.jsx)(D,{history:ce})})}),document.getElementById("root"),document.addEventListener("DOMContentLoaded",de.c),document.addEventListener("contextmenu",(e=>(e.preventDefault(),o.a.error({width:500,title:"PERHATIAN !!!",content:Object(j.jsxs)("p",{className:"text-base leading-snug text-gray-800",children:["Kami mendeteksi bahwa anda ingin mengakes fitur yang dilarang. ",Object(j.jsx)("b",{className:"text-red-500 uppercase",children:"Anda tidak diizinkan"})," ","untuk mengakes fitur tersebut."]})}),!1))),document.addEventListener("keydown",(e=>{if(23===e.button||e.ctrlKey&&116===e.keyCode||e.ctrlKey&&e.shiftKey&&73===e.keyCode||e.ctrlKey&&e.shiftKey&&80===e.keyCode||e.ctrlKey&&85===e.keyCode||e.shiftKey&&81===e.keyCode)return e.preventDefault(),o.a.error({width:500,title:"PERHATIAN !!!",content:Object(j.jsxs)("p",{className:"text-base leading-snug text-gray-800",children:["Kami mendeteksi bahwa anda ingin mengakes fitur yang dilarang. ",Object(j.jsx)("b",{className:"text-red-500 uppercase",children:"Anda tidak diizinkan"})," ","untuk mengakes fitur tersebut."]})}),!1}))),function(e){if(console.log("production"),"serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");la?(!function(e,t){fetch(e).then((a=>{const o=a.headers.get("content-type");404===a.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):sa(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):sa(t,e)}))}}()},46:function(e,t,a){"use strict";t.a={SET_STATE:"report/SET_STATE",REPORT_SALES_CUSTOMER:"report/SALES_CUSTOMER",REPORT_SALES_BY_CUSTOMER:"report/SALES_BY_CUSTOMER",REPORT_SALES_ITEM:"report/SALES_ITEM"}},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return i}));a(108);var o=a(20);const n=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toFixed(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},c=async e=>{try{const e=await fetch("/server.txt");if(!e.ok)throw o.a.error({message:"Error!",description:"Server not found! Please reload the page."}),new Error("Network response was not ok");const t=(await e.text()).split("\n"),a=t.slice(2,4).slice(0,1)[0];a?(localStorage.setItem("appUrl",a),o.a.success({message:"Berhasil",description:"Setup server ditemukan. Anda terhubung ke ".concat(a,".")})):console.error("Encryption failed, URL not saved to localStorage")}catch(t){console.log(t)}},i=()=>localStorage.getItem("appUrl")||""}},[[272,8,9]]]);
//# sourceMappingURL=main.410489af.chunk.js.map