(this.webpackJsonpPOS_RETAIL=this.webpackJsonpPOS_RETAIL||[]).push([[9],{109:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return i}));a(133);var o=a(24);const n=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toFixed(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},c=async e=>{try{const e=await fetch("/server.txt");if(!e.ok)throw o.a.error({message:"Error!",description:"Server not found! Please reload the page."}),new Error("Network response was not ok");const t=(await e.text()).split("\n"),a=t.slice(2,4).slice(0,1)[0];a?(localStorage.setItem("appUrl",a),o.a.success({message:"Berhasil",description:"Setup server ditemukan. Anda terhubung ke ".concat(a,".")})):console.error("Encryption failed, URL not saved to localStorage")}catch(t){console.log(t)}},i=()=>localStorage.getItem("appUrl")||""},13:function(e,t,a){"use strict";t.a={SET_STATE:"transaction/SET_STATE",TRANSACTION_PAYMENT:"transaction/PAYMENT",TRANSACTION_BACK_MENU:"transaction/BACK_MENU",TRANSACTION_MENU_LIST:"transaction/MENU_LIST",TRANSACTION_CUSTOMER_LIST:"transaction/CUSTOMER_LIST",TRANSACTION_TENDER_MEDIA:"transaction/TENDER_MEDIA",TRANSACTION_SEARCH_MASTER:"transaction/SEARCH_MASTER",TRANSACTION_BILL_NO:"transaction/BILL_NO",TRANSACTION_STORE:"transaction/STORE",TRANSACTION_RETURN:"transaction/RETURN",TRANSACTION_HOLD:"transaction/HOLD",TRANSACTION_HOLD_LIST:"transaction/HOLD_LIST",TRANSACTION_HOLD_DETAIL:"transaction/HOLD_DETAIL",TRANSACTION_DELETE_HOLD:"transaction/DELETE)HOLD",TRANSACTION_HISTORY_LIST:"transaction/HISTORY_LIST",TRANSACTION_HISTORY_DETAIL:"transaction/HISTORY_DETAIL",TRANSACTION_CLOSING_DAY:"transaction/CLOSING_DAY",TRANSACTION_OPENING_SHIFT:"transaction/OPENING_SHIFT",TRANSACTION_CLOSING_SHIFT:"transaction/CLOSING_SHIFT",TRANSACTION_HISTORY_CUSTOMER:"transaction/HISTORY_CUSTOMER",TRANSACTION_HOUSE_KEEPING:"transaction/HOUSE_KEEPING"}},158:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));a(255);var o=a(223),n=(a(145),a(87)),c=a(1),i=a(213),l=a(232),s=a(68),r=a(39),d=a(28),T=a(230),p=a(14);function y(e){let{children:t}=e;const a=Object(r.useHistory)(),y=Object(s.d)(),{isLog:u,authorized:S}=Object(s.e)((e=>null===e||void 0===e?void 0:e.auth)),{loadingSync:O}=Object(s.e)((e=>null===e||void 0===e?void 0:e.sync));return Object(c.useEffect)((()=>{const e=localStorage.getItem("app");if(e&&null!==e){const t=JSON.parse(e),{isLog:o=!1,authorized:n=!1}=t;if(o&&n||u&&S)return void a.push("/pos/kasir");if(!o&&n||!u&&S)return void a.push("/pos/auth/default");a.push("/auth/login")}}),[]),Object(p.jsxs)("div",{className:"w-screen h-screen overflow-hidden",children:[Object(p.jsx)(n.a,{type:"primary",shape:"circle",size:"large",icon:O?Object(p.jsx)(i.b,{className:"animate-spin"}):Object(p.jsx)(l.a,{}),className:"absolute top-5 right-5 flex items-center justify-center z-50",onClick:()=>{y({type:"sync/SYNC_DATA_MASTER"})}}),Object(p.jsxs)("div",{className:"w-full grid grid-cols-12",children:[Object(p.jsx)("div",{className:"col-span-8",children:Object(p.jsx)("div",{className:"w-full h-screen bg-no-repeat bg-cover",style:{backgroundImage:"url(/pos.jpg)"},children:Object(p.jsx)("div",{className:"w-full h-full",style:{background:"rgba(0, 0, 0, 0.3)"},children:Object(p.jsx)("div",{className:"w-full h-full p-5 z-50",children:Object(p.jsx)("div",{className:"w-max h-auto px-5 py-2 bg-primary rounded-full",children:Object(p.jsx)("h1",{className:"text-base text-white font-medium",children:d.a.APP_VERSION})})})})})}),Object(p.jsx)("div",{className:"col-span-4",children:Object(p.jsx)("div",{className:"w-full relative",children:Object(p.jsx)("div",{className:"w-full h-screen p-7 bg-transparent",children:Object(p.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col",children:[Object(p.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[Object(p.jsx)(o.a,{src:"/logo-1.png",className:"w-40 h-auto object-cover",preview:!1}),Object(p.jsx)("h1",{className:"text-xl text-gray-800 font-semibold mt-3",children:"Retail Point of Sales"})]}),Object(p.jsx)(T.default,{})]})})})})]})]})}},21:function(e,t,a){"use strict";t.a={SET_STATE:"auth/SET_STATE",AUTH_LOGIN:"auth/login",AUTH_LOGOUT:"auth/logout",AUTH_FORGOT:"auth/forgot",AUTH_REGISTER:"auth/register",AUTH_PROPERTY:"auth/property",AUTH_UPDATE_PROPERTY:"auth/update_property",AUTH_LOGIN_PIN:"auth/LOGIN_PIN",AUTH_LOGIN_POS:"auth/LOGIN_POS",AUTH_LOGOUT_POS:"auth/LOGOUT_POS",AUTH_USER_ACCESS:"auth/USER_ACCESS",AUTH_USER_CLEAR_DATA:"auth/CLEAR_DATA"}},230:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));a(145);var o=a(87),n=(a(244),a(182)),c=(a(245),a(117)),i=a(1),l=a(189),s=a(68),r=a(39),d=a(14);function T(){const e=Object(s.d)(),t=Object(r.useHistory)(),a=Object(i.useRef)(null),T=Object(i.useRef)(null),{loading:p=!1}=Object(s.e)((e=>null===e||void 0===e?void 0:e.auth)),[y]=c.a.useForm(),u=a=>{const o={email:a.email||"",password:window.btoa(a.password||"")};e({type:"auth/LOGIN_POS",payload:o,history:t,reset:()=>y.resetFields()})},S=e=>"Enter"===e.key&&document.activeElement===T.current.input?(T.current.blur(),void a.current.focus()):"Enter"===e.key&&document.activeElement===a.current.input?(T.current.blur(),a.current.focus(),void u(y.getFieldsValue())):("Enter"===e.key&&y.submit(),"Escape"===e.key&&O(),"ArrowUp"===e.key&&T.current.focus(),void("ArrowDown"===e.key&&a.current.focus())),O=()=>{T.current.focus(),y.resetFields()};return Object(i.useEffect)((()=>{T&&T.current&&(T.current.input.value="",T.current.focus())}),[T]),Object(i.useEffect)((()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)})),[y]),Object(d.jsx)("div",{className:"w-full",children:Object(d.jsx)("div",{className:"mt-10 w-full",children:Object(d.jsxs)(c.a,{form:y,name:"login",layout:"vertical",initialValues:{remember:!0},onFinish:u,onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",autoSave:"off",autoCorrect:"off","aria-autocomplete":"none",style:{maxWidth:"none",width:"100%"},children:[Object(d.jsx)(c.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(d.jsx)(n.a,{ref:T,type:"email",autoFocus:!0,autoComplete:"off",autoSave:"off",autoCorrect:"off",placeholder:"Username",className:"w-full h-14 rounded-md",prefix:Object(d.jsx)(l.b,{className:"text-lg text-gray-500"})})}),Object(d.jsx)(c.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(d.jsx)(n.a.Password,{ref:a,type:"password",autoComplete:"off",autoSave:"off",autoCorrect:"off",placeholder:"********",className:"w-full h-14 rounded-md",prefix:Object(d.jsx)(l.a,{className:"text-lg text-gray-500"})})}),Object(d.jsx)(c.a.Item,{children:Object(d.jsx)("div",{className:"w-full h-auto flex items-center gap-3 mt-5",children:Object(d.jsx)(o.a,{disabled:p,loading:p,type:"primary",htmlType:"submit",className:"btn-page rounded-md capitalize text-lg",children:"Sign In"})})})]})})})}},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var o=a(109);const n="user/list",c="user/registration",i="auth/login/pin",l="auth/user",s="auth/logout",r="auth/access",d="master/property",T="property/update",p="master/item",y="master/customer",u="master/tender-media",S="master/search",O="trx/billNo",A="trx/store",g="trx/return",E="trx/hold",_="trx/hold/list",b="trx/hold/detail",h="trx/hold/delete",j="report/sales-by-bill",m="report/sales-by-bill-detail",I="master/download",f="trigger",N="history/sales_cust",R="report/sales/customer",C="history/sales_item",L="report/sales-by-shift",v="closingday",P="shift-opening",k="shift-closing",w="housekeeping";let U=Object(o.b)();const x="".concat(U,"/api/"),D={APP_VERSION:"v1.5.0.25072024",API_USER_REGISTER:x+c,API_USER_LIST:x+n,API_AUTH_LOGIN_PIN:x+i,API_AUTH_LOGIN_POS:x+l,API_AUTH_LOGOUT:x+s,API_AUTH_USER_ACCESS:x+r,API_MENU_LIST:x+p,API_CUSTOMER_LIST:x+y,API_PROPERTY:x+d,API_TENDER_MEDIA:x+u,API_SEARCH_MASTER:x+S,API_UPDATE_PROPERTY:x+T,API_BILL_NO:x+O,API_STORE_TRANSACTION:x+A,API_RETURN_TRANSACTION:x+g,API_TRANSACTION_HIST_LIST:x+j,API_TRANSACTION_HIST_DETAIL:x+m,API_HOLD_TRANSACTION:x+E,API_HOLD_LIST_TRANSACTION:x+_,API_HOLD_TRANSACTION_DETAIL:x+b,API_HOLD_DELETE_TRANSACTION:x+h,API_TRANSACTION_CLOSING_DAY:x+v,API_TRANSACTION_OPENING_SHIFT:x+P,API_TRANSACTION_CLOSING_SHIFT:x+k,API_TRANSACTION_HOUSE_KEEPING:x+w,API_SYNC_DATA_MASTER:x+I,API_SYNC_DATA_SALES:x+f,API_REPORT_SALES_CUSTOMER:x+N,API_REPORT_SALES_BY_CUSTOMER:x+R,API_REPORT_SALES_ITEM:x+C,API_REPORT_SALES_BY_SHIFT:x+L}},322:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);a(193);var o=a(101),n=a(340),c=a(341),i=a(342),l=a(137),s=a(224),r=a.n(s),d=a(225),T=a.n(d),p=a(1),y=a.n(p),u=a(51),S=a.n(u),O=a(153),A=a.n(O),g=a(68),E=a(49),_=a(39),b=a(108),h=a(185),j=a.n(h),m=a(242),I=a(201),f=a(14);class N extends p.Component{render(){const{children:e}=this.props;return Object(f.jsx)("div",{children:e})}}var R,C=N,L=(a(253),a(186));var v,P=Object(_.withRouter)(R=class extends y.a.PureComponent{render(){const{children:e}=this.props;return Object(f.jsx)(L.a,{children:Object(f.jsx)(L.a.Content,{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:e})})})})}})||R,k=a(158);var w,U;const x={public:Object(_.withRouter)(v=class extends y.a.PureComponent{render(){const{children:e}=this.props;return e}})||v,login:C,main:P,pos:k.default};let D=(w=Object(g.c)((e=>{let{auth:t}=e;return{auth:t}})),Object(_.withRouter)(U=w(U=class extends y.a.PureComponent{constructor(){super(...arguments),this.previousPath=""}componentDidUpdate(e){const{location:t}=this.props,{prevLocation:a}=e;t!==a&&window.scrollTo(0,0)}render(){const{children:e,location:{pathname:t,search:a},auth:{authorized:o=!1,loading:n=!1,isLog:c=!1}}=this.props,i=t+a;i!==this.previousPath&&j.a.start(),setTimeout((()=>{j.a.done(),this.previousPath=i}),300);const l=()=>"/"===t?"public":/^\/auth(?=\/|$)/i.test(t)?"login":"/pos/auth"===t?"pos":"main",s=x[l()],r=o,d=c,T="login"===l();return Object(f.jsxs)(p.Fragment,{children:[Object(f.jsx)(I.a,{titleTemplate:"SCAP POS RETAIL",title:"SCAP POS RETAIL"}),Object(f.jsx)(m.a,{handle:{active:!0},onChange:console.log,children:d||r||!T?T&&r&&!d?Object(f.jsx)(_.Redirect,{to:{pathname:"/dashboard"}}):Object(f.jsx)(s,{children:e}):Object(f.jsx)(_.Redirect,{to:{pathname:"/pos/auth/default"}})})]})}})||U)||U);var H=D;const G=[{path:"/auth/login",component:Object(E.a)((()=>Promise.resolve().then(a.bind(null,158)))),exact:!0},{path:"/auth/register",component:Object(E.a)((()=>Promise.all([a.e(18),a.e(29)]).then(a.bind(null,783)))),exact:!0},{path:"/auth/verification",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(5),a.e(6),a.e(19)]).then(a.bind(null,784)))),exact:!0},{path:"/dashboard",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(2),a.e(5),a.e(15),a.e(30)]).then(a.bind(null,779)))),exact:!0},{path:"/pos/history",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(17)]).then(a.bind(null,782)))),exact:!0},{path:"/pos/kasir",component:Object(E.a)((()=>Promise.all([a.e(7),a.e(20),a.e(23)]).then(a.bind(null,775)))),exact:!0},{path:"/pos/opening-shift",component:Object(E.a)((()=>a.e(25).then(a.bind(null,770)))),exact:!0},{path:"/pos/closing-shift",component:Object(E.a)((()=>Promise.all([a.e(4),a.e(8),a.e(32)]).then(a.bind(null,771)))),exact:!0},{path:"/pos/kasir/closing",component:Object(E.a)((()=>Promise.all([a.e(4),a.e(8),a.e(31)]).then(a.bind(null,772)))),exact:!0},{path:"/pos/report",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(1),a.e(5),a.e(6),a.e(28)]).then(a.bind(null,781)))),exact:!0},{path:"/pos/report/customer",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(12)]).then(a.bind(null,785)))),exact:!0},{path:"/pos/report/customerWeb",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(13)]).then(a.bind(null,786)))),exact:!0},{path:"/pos/report/detail",component:Object(E.a)((()=>Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(14)]).then(a.bind(null,787)))),exact:!0},{path:"/pos/options",component:Object(E.a)((()=>a.e(16).then(a.bind(null,777)))),exact:!0},{path:"/pos-module/property",component:Object(E.a)((()=>a.e(33).then(a.bind(null,645)))),exact:!0},{path:"/pos/payment",component:Object(E.a)((()=>Promise.all([a.e(4),a.e(7),a.e(27),a.e(22)]).then(a.bind(null,778)))),exact:!0},{path:"/pos/setup",component:Object(E.a)((()=>a.e(26).then(a.bind(null,773)))),exact:!0},{path:"/pos/house-keeping",component:Object(E.a)((()=>a.e(24).then(a.bind(null,774)))),exact:!0}];var M=e=>{let{history:t}=e;return(()=>{const e=Object(_.useLocation)();Object(p.useEffect)((()=>{A.a.send({hitType:"pageview",page:e.pathname+e.search})}),[e])})(),Object(f.jsx)(H,{children:Object(f.jsx)(b.a,{children:Object(f.jsxs)(_.Switch,{children:[Object(f.jsx)(_.Route,{exact:!0,path:"/",render:()=>Object(f.jsx)(_.Redirect,{to:"/pos/auth"})}),G.map((e=>Object(f.jsx)(_.Route,{path:e.path,component:e.component,exact:e.exact},e.path))),Object(f.jsx)(_.Route,{path:"/pos",exact:!0,render:()=>Object(f.jsx)(_.Redirect,{to:"/pos/auth/default"})}),Object(f.jsx)(_.Route,{path:"/pos/auth",render:e=>{let{match:{url:t}}=e;return Object(f.jsx)(k.default,{children:Object(f.jsxs)(_.Switch,{children:[Object(f.jsx)(_.Route,{path:"".concat(t,"/default"),component:Object(E.a)((()=>Promise.resolve().then(a.bind(null,230)))),exact:!0}),Object(f.jsx)(_.Route,{path:"".concat(t,"/pin"),component:Object(E.a)((()=>a.e(21).then(a.bind(null,788)))),exact:!0}),Object(f.jsx)(_.Route,{path:"*",render:()=>Object(f.jsx)(_.Redirect,{to:"".concat(t,"/default")})})]})})}})]})})})},Y=a(63),B=a(130),F=a(214),K=a(241),z=(a(304),a(235)),J=a(233);var W=Object(J.a)(((e,t)=>{if("store/loading/toggle"===t.type)e.loading=t.loading}),{appName:"POS",loading:!1}),V=a(21);const q={status:200,token:localStorage.getItem("Token")&&""!==localStorage.getItem("Token")&&void 0!==localStorage.getItem("Token")?localStorage.getItem("Token"):"",username:"",authorized:!1,isLog:!1,loading:!1,loadingRegister:!1,config:[],outlet:[],company:[],isGrantedAccess:!1,isUpdatedProperty:!1};function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type===V.a.SET_STATE?{...e,...t.payload}:e}var $=a(13);const Q={contentStatus:"isMenu",menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],transactionHolds:[],data:[],tenderMedia:[],selectedTransaction:{},selectedRowTransaction:{},searchResult:[],loading:!1,loadingList:!1,loadingReport:!1,loadingDetail:!1,isSuccess:!1,historyTransactionList:[],historyTransactionDetail:[],historyTransactionReport:[]};function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;return t.type===$.a.SET_STATE?{...e,...t.payload}:e}var ee={SET_STATE:"sync/SET_STATE",SYNC_DATA_MASTER:"sync/SYNC_DATA_MASTER",SYNC_DATA_SALES:"sync/SYNC_DATA_SALES"};const te={loadingSync:!1,loadingUpdateSales:!1};function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;return t.type===ee.SET_STATE?{...e,...t.payload}:e}var oe=a(55);const ne={contentStatus:"isMenu",reportSalesCustomer:[],loadingReportCustomer:!1,reportSalesItem:[],loadingReportItem:!1,reportSalesCustomerWeb:[],loadingReportCustomerWeb:!1,reportSalesShift:{},loadingReportShift:!1};function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return t.type===oe.a.SET_STATE?{...e,...t.payload}:e}var ie=e=>Object(B.b)({router:Object(l.b)(e),common:W,auth:X,transaction:Z,sync:ae,report:ce});const le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({features:{jump:!1}}):B.c,se=Object(Y.createBrowserHistory)();var re=a(5),de=(a(133),a(24)),Te=a(30),pe=a.n(Te),ye=a(28);function ue(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{token:t=""}=e;return{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}}function Se(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{tokenAccess:t=""}=e;return{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","ngrok-skip-browser-warning":!0}}}const Oe=e=>{console.log("CALL DARI SAGAS",e)},Ae=async e=>{const{data:t}=await pe.a.post(ye.a.API_USER_REGISTER,e);return{...t}},ge=async e=>{const{data:t}=await pe.a.post(ye.a.API_AUTH_LOGIN_POS,e);return t},Ee=async e=>{const{data:t}=await pe.a.post(ye.a.API_AUTH_LOGIN_POS,e);return{...t}},_e=async()=>{const{data:e}=await pe.a.get(ye.a.API_PROPERTY,{headers:{"ngrok-skip-browser-warning":!0}});return e},be=async e=>{const{data:t}=await pe.a.post(ye.a.API_AUTH_USER_ACCESS,e,ue());return t},he=async e=>{const{data:t}=await pe.a.post(ye.a.API_UPDATE_PROPERTY,e,Se());return t};function je(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(Oe,t);console.log("RESULT",e),yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1,authorized:!0}}),localStorage.setItem("authorized",!0)}catch(e){console.log(e),yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}})}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}})}}()}function me(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loadingOtp:!0}});try{const e=yield Object(re.b)(Ae,t),{acknowledge:o}=e;console.log("RESULT",e),1===o&&(a.push("/auth/login"),yield Object(re.c)({type:V.a.SET_STATE,payload:{loadingOtp:!1}}))}catch(e){console.log(e),yield Object(re.c)({type:V.a.SET_STATE,payload:{loadingOtp:!0}})}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loadingOtp:!0}})}}()}function*Ie(){const e=JSON.parse(localStorage.getItem("app")||"{}"),{authorized:t=!1,isLog:a=!1}=e,o=localStorage.getItem("token")?localStorage.getItem("token"):"",n=localStorage.getItem("username")?localStorage.getItem("username"):"",c=localStorage.getItem("dateOpening")?localStorage.getItem("dateOpening"):"";yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}}),yield Object(re.c)({type:V.a.SET_STATE,payload:{token:o,username:n,authorized:t,isLog:a,config:{dateOpening:c}}}),yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}function*fe(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1,authorized:!1}}),localStorage.setItem("authorized",!1)}catch(e){console.log(e),yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}function Ne(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(ge,t),{acknowledge:o,data:n,message:c}=e;if(1===o){const e={isLog:!0,authorized:!0,property:{},user:{id:(null===n||void 0===n?void 0:n.userID)||"",username:(null===n||void 0===n?void 0:n.userName)||"",role:"kasir",pin:window.btoa(null===t||void 0===t?void 0:t.pinCode)}};return yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1,authorized:!0,isLog:!0}}),yield Object(re.c)({type:V.a.AUTH_PROPERTY,payload:e}),localStorage.setItem("app",JSON.stringify(e)),a.push("/pos/kasir"),void de.a.success({message:c,description:n.UserName||""})}localStorage.setItem("app",null),de.a.error({message:"Terjadi Kesalahan!",description:c})}catch(e){console.log(e),localStorage.setItem("app",null),yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}})}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function*Re(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(_e),{acknowledge:t=0,data:a={}}=e;if(1===t){let e=JSON.parse(localStorage.getItem("app"))||{};e={...e,property:{...a,NewData:!0}},localStorage.setItem("app",JSON.stringify(e))}}catch(e){console.log(e)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}function Ce(e){let{history:t}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e={isLog:!1,authorized:!0,user:{},property:{},roles:[],token:"",cashier:{},tokenAccess:""};yield Object(re.c)({type:V.a.SET_STATE,payload:{isLog:!1,authorized:!0,isGrantedAccess:!1}}),yield Object(re.c)({type:"transaction/SET_STATE",payload:{menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],data:[]}}),de.a.error({message:"Logout!",description:"Akun anda sudah keluar. Mohon untuk masuk kembali"}),localStorage.setItem("app",JSON.stringify(e)),t.push("/pos/auth")}catch(e){console.log("Logout Error! ",e)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function Le(e){let{payload:t,history:a,reset:o}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const o=yield Object(re.b)(Ee,t),{acknowledge:c=0,data:i={},isLog:l=!1,token:s="",roles:r=[],message:d="",isOpenShift:T=0,shiftId:p=0}=o;if(1===c&&l){let t={isLog:l,authorized:!0,user:{userId:(null===i||void 0===i?void 0:i.userID)||"",username:(null===i||void 0===i?void 0:i.userName)||""},roles:r,token:s,tokenAccess:"",property:{},cashier:{}};if(yield Object(re.c)({type:V.a.SET_STATE,payload:{isLog:l,authorized:!0}}),yield Object(re.c)({type:V.a.AUTH_PROPERTY}),yield Object(re.c)({type:"sync/SYNC_DATA_MASTER"}),localStorage.setItem("app",JSON.stringify(t)),1===T){var e,n;let t=JSON.parse(localStorage.getItem("app")||"{}");return t={...t,cashier:{isOpening:1===T,isClosing:!1,openingCash:0,closingCash:0,shiftId:p,shiftDate:null===(e=t)||void 0===e||null===(n=e.property)||void 0===n?void 0:n.refDate}},localStorage.setItem("app",JSON.stringify(t)),a.push("/pos/kasir"),void de.a.success({message:"Berhasil",description:"Shift telah terbuka, anda dapat melanjukan transaksi."})}return de.a.success({message:"Login Berhasil",description:d}),void a.push("/pos/opening-shift")}de.a.error({message:"Login Gagal",description:d})}catch(c){console.log(c)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}}),o()}}()}function ve(e){let{payload:t,history:a=()=>{}}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});let e=JSON.parse(localStorage.getItem("app")||"{}");try{const o=yield Object(re.b)(be,t),{acknowledge:n=0,isAuthorized:c=0,token:i=""}=o;1===n&&1===c?(e={...e,tokenAccess:i},yield Object(re.c)({type:V.a.SET_STATE,payload:{isGrantedAccess:!0}}),localStorage.setItem("app",JSON.stringify(e)),de.a.success({message:"Verified!",description:"Akun berhasil di verifikasi"})):(yield Object(re.c)({type:V.a.SET_STATE,payload:{isGrantedAccess:!1}}),de.a.error({message:"Gagal",description:"Akun yang anda kirimkan tidak memiliki akses. Silahkan coba lagi atau Login ulang"}),a())}catch(o){console.log(o)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function Pe(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(he,t),{acknowledge:a=0,message:o=""}=e||{};if(1===a)return yield Object(re.c)({type:V.a.SET_STATE,payload:{isUpdatedProperty:!0}}),yield Object(re.c)({type:"sync/SYNC_DATA_MASTER"}),void de.a.success({message:"Update Berhasil!",description:"Data sudah berhasil terupdate! Silahkan sinkronisasi data terlebih dahulu."});yield Object(re.c)({type:V.a.SET_STATE,payload:{isUpdatedProperty:!1}}),de.a.error({message:"Update Gagal!",description:o})}catch(e){console.log("Error",e)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function ke(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!0}});let e=JSON.parse(localStorage.getItem("app")||"{}");try{const a=yield Object(re.b)(Ee,t),{acknowledge:o=0,token:n=""}=a;1===o?(e={...e,tokenAccess:n},yield Object(re.c)({type:V.a.SET_STATE,payload:{isGrantedAccess:!0}}),localStorage.setItem("app",JSON.stringify(e)),de.a.success({message:"Verified!",description:"Akun berhasil di verifikasi"})):(yield Object(re.c)({type:V.a.SET_STATE,payload:{isGrantedAccess:!1}}),de.a.error({message:"Gagal",description:"Akun yang anda kirimkan tidak memiliki akses. Silahkan coba lagi atau Login ulang"}))}catch(a){console.log(a)}finally{yield Object(re.c)({type:V.a.SET_STATE,payload:{loading:!1}})}}()}function*we(){yield Object(re.a)([Object(re.d)(V.a.AUTH_LOGIN,je),Object(re.d)(V.a.AUTH_REGISTER,me),Object(re.d)(V.a.AUTH_LOGOUT,fe),Object(re.d)(V.a.AUTH_LOGIN_PIN,Ne),Object(re.d)(V.a.AUTH_PROPERTY,Re),Object(re.d)(V.a.AUTH_LOGOUT_POS,Ce),Object(re.d)(V.a.AUTH_LOGIN_POS,Le),Object(re.d)(V.a.AUTH_USER_ACCESS,ve),Object(re.d)(V.a.AUTH_UPDATE_PROPERTY,Pe),Object(re.d)(V.a.AUTH_USER_CLEAR_DATA,ke),Ie()])}var Ue=a(192),xe=a.n(Ue),De=a(109);const He=async()=>{const{data:e}=await pe.a.get(ye.a.API_MENU_LIST,{headers:{"ngrok-skip-browser-warning":!0}});return{...e}},Ge=async()=>{const{data:e}=await pe.a.get(ye.a.API_CUSTOMER_LIST,{headers:{"ngrok-skip-browser-warning":!0}});return{...e}},Me=async e=>{const{data:t}=await pe.a.get(ye.a.API_BILL_NO,ue());return{...t}},Ye=async e=>{const{data:t}=await pe.a.post(ye.a.API_STORE_TRANSACTION,e,ue());return{...t}},Be=async e=>{const{data:t}=await pe.a.post(ye.a.API_RETURN_TRANSACTION,e,ue());return{...t}},Fe=async e=>{const{data:t}=await pe.a.post(ye.a.API_HOLD_TRANSACTION,e,ue());return{...t}},Ke=async()=>{const{data:e}=await pe.a.get(ye.a.API_HOLD_LIST_TRANSACTION,ue());return e},ze=async e=>{const{data:t}=await pe.a.get("".concat(ye.a.API_HOLD_TRANSACTION_DETAIL,"?billNo=").concat(null===e||void 0===e?void 0:e.billNo),ue());return t},Je=async e=>{const{data:t}=await pe.a.delete(ye.a.API_HOLD_DELETE_TRANSACTION,{...ue(),data:e});return t},We=async e=>{let{dateFrom:t="",to:a=""}=e;const o="".concat(ye.a.API_TRANSACTION_HIST_LIST,"?from=").concat(t,"&to=").concat(a),{data:n}=await pe.a.get(o,ue());return{...n}},Ve=async e=>{const t="".concat(ye.a.API_TRANSACTION_HIST_CUSTOMER,"?c=").concat(e.custCode,"from=").concat(e.from,"&to=").concat(e.to),{data:a}=await pe.a.get(t,ue());return{...a}},qe=async e=>{const t="".concat(ye.a.API_TRANSACTION_HIST_DETAIL,"?r=").concat(e.billNo),{data:a}=await pe.a.get(t,ue());return{...a}},Xe=async()=>{const e="".concat(ye.a.API_TRANSACTION_CLOSING_DAY),{data:t}=await pe.a.get(e,Se());return{...t}},$e=async e=>{const t="".concat(ye.a.API_TRANSACTION_OPENING_SHIFT),{data:a}=await pe.a.post(t,e,Se());return a},Qe=async e=>{const t="".concat(ye.a.API_TRANSACTION_CLOSING_SHIFT),{data:a}=await pe.a.post(t,e,Se());return a},Ze=async()=>{const{data:e}=await pe.a.get(ye.a.API_TENDER_MEDIA,{headers:{"ngrok-skip-browser-warning":!0}});return e},et=async e=>{const{data:t}=await pe.a.get("".concat(ye.a.API_SEARCH_MASTER,"?q=").concat((null===e||void 0===e?void 0:e.query)||""),{headers:{"ngrok-skip-browser-warning":!0}});return t},tt=async e=>{const{data:t}=await pe.a.post(ye.a.API_TRANSACTION_HOUSE_KEEPING,e,ue());return t};function*at(){yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isPayment"}})}function*ot(){yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isMenu"}})}function*nt(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(He),{acknowledge:t,data:a}=e;1===t&&(yield Object(re.c)({type:$.a.SET_STATE,payload:{menuList:a.map((e=>({...e,upcBarcode:e.UPCbarcode,itemCode:e.ItemCode,itemName:e.ItemName,price:e.SalesPrice,label:"".concat(e.UPCbarcode," | ").concat(e.ItemCode," | ").concat(e.ItemName),value:e.ItemCode})))}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}function*ct(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(Ge),{acknowledge:t,data:a}=e;1===t&&(yield Object(re.c)({type:$.a.SET_STATE,payload:{customerList:a}}))}catch(e){}}function*it(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0,isSuccess:!1}});try{var e,t;let a=JSON.parse(localStorage.getItem("app"))||{};const o=(null===(e=a)||void 0===e||null===(t=e.cashier)||void 0===t?void 0:t.isOpening)||!1,n=yield Object(re.b)(Me),{acknowledge:c,billNo:i,billDate:l,outletCode:s,isLog:r=!0}=n;yield Object(re.c)({type:"auth/property"}),1===c&&(o||de.a.warning({message:"PERHATIAN !!!",description:"Anda tidak bisa melakukan transaksi tanpa opening shift terlebih dahulu"}),yield Object(re.c)({type:$.a.SET_STATE,payload:{billNo:i,billDate:l,outletCode:s,isSuccess:!1}}),a={...a,cashier:{...a.cashier,shiftDate:l,outletCode:s}},localStorage.setItem("app",JSON.stringify(a))),r||(yield Object(re.c)({type:"auth/LOGOUT_POS"}),window.location.reload())}catch(a){o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}function lt(e){let{payload:t,bill:a,handlePrint:n}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}});try{const e=yield Object(re.b)(Ye,t),{acknowledge:o,message:c=""}=e;if(1===o)return yield Object(re.c)({type:$.a.SET_STATE,payload:{transactionList:[],contentStatus:"isMenu",data:[],isSuccess:!0}}),yield Object(re.c)({type:"sync/SYNC_DATA_SALES",payload:{...a}}),yield Object(re.c)({type:"transaction/BILL_NO"}),de.a.success({message:"Berhasil!",description:"Data transaksi sudah terkirim."}),void n();de.a.error({messages:"Terjadi Kesalahan!",description:"".concat(c,". Mohon lakukan transaksi ulang.")})}catch(e){o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isMenu"}})}}()}function st(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}});try{const e=yield Object(re.b)(Be,{billNo:null===t||void 0===t?void 0:t.billNo}),{acknowledge:a,message:o}=e;if(1===a)return de.a.success({message:"Refund Berhasil!",description:"".concat(null===t||void 0===t?void 0:t.billNo," Sudah berhasil direfund!")}),void(yield Object(re.c)({type:$.a.TRANSACTION_HISTORY_LIST,payload:{dateFrom:null===t||void 0===t?void 0:t.dateFrom,to:null===t||void 0===t?void 0:t.to}}));de.a.error({message:"Refund Gagal!",description:o})}catch(e){console.log(e),o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isMenu"}})}}()}function rt(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0,contentStatus:"isMenu"}}),de.a.info({message:"Mohon Tunggu",description:"Sedang menyimpan data..."});try{const e=yield Object(re.b)(Fe,t),{isLog:o=!1,acknowledge:n=0,message:c=""}=e;1===n?(yield Object(re.c)({type:$.a.SET_STATE,payload:{transactionList:[],contentStatus:"isMenu",data:[]}}),yield Object(re.c)({type:$.a.TRANSACTION_BILL_NO}),de.a.success({message:"Berhasil Menyimpan!",description:c})):o?de.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(re.c)({type:"auth/LOGOUT_POS",history:a})}catch(e){console.log(e),o.a.warning({title:"TIDAK TERHUBUNG DENGAN SERVER"})}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isMenu",loading:!1}})}}()}function dt(e){let{history:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,loading:!0});try{const e=yield Object(re.b)(Ke),{isLog:a=!0,acknowledge:o=0,data:n=[],message:c=""}=e;1===o?yield Object(re.c)({type:$.a.SET_STATE,payload:{transactionHolds:n}}):a?de.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(re.c)({type:"auth/LOGOUT_POS",history:t})}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,loading:!1})}}()}function Tt(e){let{payload:t,history:a,onClose:o,onState:n}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const l=yield Object(re.b)(ze,t),{isLog:s=!1,acknowledge:r=0,message:d="",data:T={}}=l;if(1===r){var e,c,i;const{header:l=[],detail:s=[]}=T,r=null===s||void 0===s?void 0:s.map(((e,t)=>{const a=+e.qty*+e.price;return{...e,CateCode:e.cateCode,GroupCode:e.groupCode,ItemCode:e.menuCode,ItemName:e.menuName,SalesPrice:null===e||void 0===e?void 0:e.SalesPrice,UPCbarcode:null===e||void 0===e?void 0:e.upcBarcode,Unitprice:e.Unitprice,UomStock:e.UomStock,amount:e.amount,isActive:"1",itemCode:e.menuCode,itemName:e.menuName,label:"".concat(e.menuCode," - ").concat(e.menuName," - ").concat(Object(De.a)(e.price)),price:e.price,qty:e.qty,total:a,upcBarcode:null===e||void 0===e?void 0:e.upcBarcode,updated_at:e.orderTime,value:e.menuCode}}));yield Object(re.c)({type:$.a.SET_STATE,payload:{billNo:null===(e=l[0])||void 0===e?void 0:e.billNo,outletCode:null===(c=l[0])||void 0===c?void 0:c.outletCode,billDate:null===(i=l[0])||void 0===i?void 0:i.billDate,transactionList:r,data:r}}),o(),n({data:r}),de.a.success({message:"Berhasil!",description:"Transaksi anda sudah berhasil dipulihkan."}),yield Object(re.c)({type:$.a.TRANSACTION_DELETE_HOLD,payload:t,history:a})}else s?de.a.error({message:"Terjadi Kesalahan!",description:d}):yield Object(re.c)({type:"auth/LOGOUT_POS",history:a})}catch(l){console.log(l)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function pt(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(Je,t),{isLog:o=!1,acknowledge:n=0,message:c=""}=e;1===n?(yield Object(re.c)({type:$.a.TRANSACTION_HOLD_LIST,history:a}),a.push("/pos/kasir")):o?de.a.error({message:"Terjadi Kesalahan!",description:c}):yield Object(re.c)({type:"auth/LOGOUT_POS",history:a})}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function yt(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingList:!0}});try{const e=yield Object(re.b)(We,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(re.c)({type:$.a.SET_STATE,payload:{historyTransactionList:o}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingList:!1}})}}()}function ut(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingDetail:!0}});try{const e=yield Object(re.b)(qe,t),{acknowledge:a}=e;1===a&&(yield Object(re.c)({type:$.a.SET_STATE,payload:{historyTransactionDetail:{...e,date:"".concat(xe()(e.hdr.SiDate||"").format("DD MMM YY"),", ").concat(e.hdr.TimeClose," WIB")}}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingDetail:!1}})}}()}function St(e){let{payload:t,history:a,property:o}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingDetail:!0}});let e=JSON.parse(localStorage.getItem("app")||"{}");try{const n=yield Object(re.b)(Xe,t),{acknowledge:c,message:i}=n;if(1===c)return yield Object(re.c)({type:$.a.SET_STATE,payload:{contentStatus:"isMenu",menuList:[],customerList:[],billNo:"",outletCode:"",billDate:"",transactionList:[],data:[],historyTransactionList:[],historyTransactionDetail:[]}}),yield Object(re.c)({type:"report/SALES_BY_SHIFT",payload:{refDate:null===o||void 0===o?void 0:o.reftDate,shiftId:"all"},history:a}),e={...e,tokenAccess:"",cashier:{...e.cashier,isEndOfDay:!0}},localStorage.setItem("app",JSON.stringify(e)),void de.a.success({message:"Berhasil",description:i});de.a.error({message:"Gagal",description:i})}catch(n){console.log(n)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingDetail:!1}})}}()}function Ot(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingReport:!0}});try{const e=yield Object(re.b)(Ve,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(re.c)({type:$.a.SET_STATE,payload:{historyTransactionReport:o}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loadingReport:!1}})}}()}function At(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{let o=JSON.parse(localStorage.getItem("app")||"{}");const n=yield Object(re.b)($e,t),{acknowledge:c=0,message:i="",isLog:l=!1,shiftId:s="",isShiftOpen:r=0}=n;if(l)return void a.push("/pos/auth");if(1===c&&1===r){var e;const n={...o,tokenAccess:"",cashier:{isOpening:1===r,isClosing:!1,openingCash:(null===t||void 0===t?void 0:t.beginCash)||0,closingCash:0,shiftId:s,shiftDate:null===o||void 0===o||null===(e=o.property)||void 0===e?void 0:e.refDate,closingDate:""}};return yield Object(re.c)({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),localStorage.setItem("app",JSON.stringify(n)),void a.push("/pos/kasir")}de.a.error({message:"Opening Shift Gagal!",description:i})}catch(o){console.log(o)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function gt(e){let{payload:t,history:a,property:o}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{let e=JSON.parse(localStorage.getItem("app")||"{}");const n=yield Object(re.b)(Qe,t),{acknowledge:c=0,message:i=""}=n;if(1===c)return yield Object(re.c)({type:"auth/SET_STATE",payload:{isGrantedAccess:!1}}),yield Object(re.c)({type:"report/SALES_BY_SHIFT",payload:{refDate:null===o||void 0===o?void 0:o.reftDate,shiftId:null===o||void 0===o?void 0:o.shiftId},history:a}),e={...e,tokenAccess:"",cashier:{...e.cashier,isOpening:!1,isClosing:!0,closingCash:(null===t||void 0===t?void 0:t.closeCash)||0,closingDate:new Date}},localStorage.setItem("app",JSON.stringify(e)),void de.a.success({message:"Berhasil",description:i});de.a.error({message:"Closing Shift Gagal",description:i})}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function*Et(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(Ze),{data:t=[]}=e;t.sort(((e,t)=>e.paidType-t.paidType)),yield Object(re.c)({type:$.a.SET_STATE,payload:{tenderMedia:t}})}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}function _t(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(et,t),{acknowledge:a=0,data:o=[]}=e;if(1===a)return 0===(null===o||void 0===o?void 0:o.length)?void de.a.warning({message:"Not Found!",description:"".concat(null===t||void 0===t?void 0:t.query,". Data yang anda cari tidak ditemukan. Mohon coba kembali!")}):void(yield Object(re.c)({type:$.a.SET_STATE,payload:{searchResult:o.map((e=>({...e,upcBarcode:e.UPCbarcode,itemCode:e.ItemCode,itemName:e.ItemName,price:e.SalesPrice,label:"".concat(e.UPCbarcode," | ").concat(e.ItemCode," | ").concat(e.ItemName),value:e.ItemCode})))}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function bt(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!0}});try{const e=yield Object(re.b)(tt,t),{acknowledge:o=0,message:n=""}=e;if(1===o)return de.a.success({message:"Berhasil!",description:"Semua data transaksi anda sudah terhapus."}),void(yield Object(re.c)({type:"auth/LOGOUT_POS",history:a}));de.a.error({message:"Gagal!",description:"Sepertinya akun anda tidak memiliki hak akses ini. Mohon untuk tidak menggunakan fitur ini sembarangan!."})}catch(e){console.log(e)}finally{yield Object(re.c)({type:$.a.SET_STATE,payload:{loading:!1}})}}()}function*ht(){yield Object(re.a)([Object(re.d)($.a.TRANSACTION_PAYMENT,at),Object(re.d)($.a.TRANSACTION_BACK_MENU,ot),Object(re.d)($.a.TRANSACTION_MENU_LIST,nt),Object(re.d)($.a.TRANSACTION_CUSTOMER_LIST,ct),Object(re.d)($.a.TRANSACTION_TENDER_MEDIA,Et),Object(re.d)($.a.TRANSACTION_SEARCH_MASTER,_t),Object(re.d)($.a.TRANSACTION_BILL_NO,it),Object(re.d)($.a.TRANSACTION_STORE,lt),Object(re.d)($.a.TRANSACTION_RETURN,st),Object(re.d)($.a.TRANSACTION_HOLD,rt),Object(re.d)($.a.TRANSACTION_HOLD_LIST,dt),Object(re.d)($.a.TRANSACTION_HOLD_DETAIL,Tt),Object(re.d)($.a.TRANSACTION_DELETE_HOLD,pt),Object(re.d)($.a.TRANSACTION_HISTORY_LIST,yt),Object(re.d)($.a.TRANSACTION_HISTORY_DETAIL,ut),Object(re.d)($.a.TRANSACTION_CLOSING_DAY,St),Object(re.d)($.a.TRANSACTION_HISTORY_CUSTOMER,Ot),Object(re.d)($.a.TRANSACTION_OPENING_SHIFT,At),Object(re.d)($.a.TRANSACTION_CLOSING_SHIFT,gt),Object(re.d)($.a.TRANSACTION_HOUSE_KEEPING,bt)])}const jt=async e=>{const{data:t}=await pe.a.get("".concat(ye.a.API_SYNC_DATA_MASTER),ue());return{...t}},mt=async e=>{const t="".concat(ye.a.API_SYNC_DATA_SALES,"?f=").concat(e.from,"&t=").concat(e.to),{data:a}=await pe.a.get(t,ue());return{...a}};function It(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:ee.SET_STATE,payload:{loadingSync:!0}});try{const e=yield Object(re.b)(jt,t),{acknowledge:a,message:o}=e;1===a&&(yield Object(re.c)({type:"auth/property"}),de.a.success({message:"Sinkronisasi",description:"Aplikasi anda sudah berhasil tersinkronisasi. Semua data sudah diperbarui."})),0===a&&de.a.error({message:"Terjadi Kesalahan!",description:o})}catch(e){console.log(e)}finally{yield Object(re.c)({type:ee.SET_STATE,payload:{loadingSync:!1}})}}()}function ft(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:ee.SET_STATE,payload:{loadingUpdateSales:!0}});try{const e=yield Object(re.b)(mt,t),{acknowledge:a,message:o}=e;1===a&&(yield Object(re.c)({type:ee.SET_STATE,payload:{loadingUpdateSales:!1}}),de.a.success({message:"Berhasil!!!",description:"Data transaksi anda saat ini sudah berhasil diupload."})),0===a&&de.a.error({message:"Terjadi Kesalahan!",description:"Upload sales gagal, mohon untuk mencoba upload sales manual pada menu Options."})}catch(e){console.log(e)}finally{yield Object(re.c)({type:ee.SET_STATE,payload:{loadingUpdateSales:!1}})}}()}function*Nt(){yield Object(re.a)([Object(re.d)(ee.SYNC_DATA_MASTER,It),Object(re.d)(ee.SYNC_DATA_SALES,ft)])}const Rt=async e=>{const t="".concat(ye.a.API_REPORT_SALES_CUSTOMER,"?c=").concat(e.custCode,"&from=").concat(e.from,"&to=").concat(e.to),{data:a}=await pe.a.get(t,ue());return{...a}},Ct=async e=>{const t="".concat(ye.a.API_REPORT_SALES_ITEM,"?from=").concat(e.from,"&to=").concat(e.to),{data:a}=await pe.a.get(t,ue());return{...a}},Lt=async e=>{let{from:t,to:a,l:o="ALL",c:n="ALL",isType:c="RK"}=e;const i="".concat(ye.a.API_REPORT_SALES_BY_CUSTOMER,"?from=").concat(t,"&to=").concat(a,"&l=").concat(o,"&c=").concat(n,"&isType=").concat(c),{data:l}=await pe.a.get(i,ue());return{...l}},vt=async e=>{const{data:t}=await pe.a.get("".concat(ye.a.API_REPORT_SALES_BY_SHIFT,"?refDate=").concat(null===e||void 0===e?void 0:e.refDate,"&shiftId=").concat(null===e||void 0===e?void 0:e.shiftId),ue());return t};function Pt(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportCustomer:!0}});try{const e=yield Object(re.b)(Rt,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(re.c)({type:oe.a.SET_STATE,payload:{reportSalesCustomer:o}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportCustomer:!1}})}}()}function kt(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportCustomerWeb:!0}});try{const e=yield Object(re.b)(Lt,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(re.c)({type:oe.a.SET_STATE,payload:{reportSalesCustomerWeb:o}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportCustomerWeb:!1}})}}()}function wt(e){let{payload:t}=e;return function*(){yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportItem:!0}});try{const e=yield Object(re.b)(Ct,t),{acknowledge:a,data:o}=e;1===a&&(yield Object(re.c)({type:oe.a.SET_STATE,payload:{reportSalesItem:o}}))}catch(e){console.log(e)}finally{yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportItem:!1}})}}()}function Ut(e){let{payload:t,history:a}=e;return function*(){yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportShift:!0}});try{const e=yield Object(re.b)(vt,t),{acknowledge:o=0,message:n="",data:c={},isLog:i=!0}=e;if(1===o)return void(yield Object(re.c)({type:oe.a.SET_STATE,payload:{reportSalesShift:c}}));i||(yield Object(re.c)({type:"auth/LOGOUT_POS",history:a})),de.a.error({message:"Gagal!",description:n})}catch(e){console.log(e)}finally{yield Object(re.c)({type:oe.a.SET_STATE,payload:{loadingReportShift:!1}})}}()}function*xt(){yield Object(re.a)([Object(re.d)(oe.a.REPORT_SALES_CUSTOMER,Pt),Object(re.d)(oe.a.REPORT_SALES_BY_CUSTOMER,kt),Object(re.d)(oe.a.REPORT_SALES_ITEM,wt),Object(re.d)(oe.a.REPORT_SALES_BY_SHIFT,Ut)])}var Dt=function*(){yield Object(re.a)([we(),ht(),Nt(),xt()])};const Ht=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Gt(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}a(322);r.a.extend(T.a);const Mt=function(){const e=Object(K.a)({onError:e=>console.info(JSON.stringify(e))}),t=Object(F.a)(se),a=[z.a,e,t];return{...Object(B.d)(ie(se),le(Object(B.a)(...a))),runSaga:e.run}}();Mt.runSaga(Dt),A.a.initialize("G-3YXW8S2K7X"),n.a({dsn:"https://73f7311b01963a67d542ca965e0912a0@o4507625496969216.ingest.us.sentry.io/4507625601433600",integrations:[c.a(),i.a()],tracesSampleRate:1,tracePropagationTargets:["localhost",Object(De.b)()],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),S.a.render(Object(f.jsx)(g.a,{store:Mt,children:Object(f.jsx)(l.a,{history:se,children:Object(f.jsx)(M,{history:se})})}),document.getElementById("root"),document.addEventListener("DOMContentLoaded",De.c),document.addEventListener("contextmenu",(e=>(e.preventDefault(),o.a.error({width:500,title:"PERHATIAN !!!",content:Object(f.jsxs)("p",{className:"text-base leading-snug text-gray-800",children:["Kami mendeteksi bahwa anda ingin mengakes fitur yang dilarang. ",Object(f.jsx)("b",{className:"text-red-500 uppercase",children:"Anda tidak diizinkan"})," ","untuk mengakes fitur tersebut."]})}),!1))),document.addEventListener("keydown",(e=>{if(23===e.button||e.ctrlKey&&116===e.keyCode||e.ctrlKey&&e.shiftKey&&73===e.keyCode||e.ctrlKey&&e.shiftKey&&80===e.keyCode||e.ctrlKey&&85===e.keyCode||e.shiftKey&&81===e.keyCode)return e.preventDefault(),o.a.error({width:500,title:"PERHATIAN !!!",content:Object(f.jsxs)("p",{className:"text-base leading-snug text-gray-800",children:["Kami mendeteksi bahwa anda ingin mengakes fitur yang dilarang. ",Object(f.jsx)("b",{className:"text-red-500 uppercase",children:"Anda tidak diizinkan"})," ","untuk mengakes fitur tersebut."]})}),!1}))),function(e){if(console.log("production"),"serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");Ht?(!function(e,t){fetch(e).then((a=>{const o=a.headers.get("content-type");404===a.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Gt(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):Gt(t,e)}))}}()},55:function(e,t,a){"use strict";t.a={SET_STATE:"report/SET_STATE",REPORT_SALES_CUSTOMER:"report/SALES_CUSTOMER",REPORT_SALES_BY_CUSTOMER:"report/SALES_BY_CUSTOMER",REPORT_SALES_ITEM:"report/SALES_ITEM",REPORT_SALES_BY_SHIFT:"report/SALES_BY_SHIFT"}}},[[324,10,11]]]);
//# sourceMappingURL=main.97fd6e51.chunk.js.map